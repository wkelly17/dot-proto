globalThis.process = {
	argv: [],
	env: {},
};
var k1=Object.create;var Uy=Object.defineProperty;var I1=Object.getOwnPropertyDescriptor;var P1=Object.getOwnPropertyNames;var F1=Object.getPrototypeOf,O1=Object.prototype.hasOwnProperty;var je=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var L1=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of P1(e))!O1.call(n,r)&&r!==t&&Uy(n,r,{get:()=>e[r],enumerable:!(i=I1(e,r))||i.enumerable});return n};var Le=(n,e,t)=>(t=n!=null?k1(F1(n)):{},L1(e||!n||!n.__esModule?Uy(t,"default",{value:n,enumerable:!0}):t,n));var Vy=je((Yj,$y)=>{"use strict";function oc(){this._types=Object.create(null),this._extensions=Object.create(null);for(let n=0;n<arguments.length;n++)this.define(arguments[n]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}oc.prototype.define=function(n,e){for(let t in n){let i=n[t].map(function(r){return r.toLowerCase()});t=t.toLowerCase();for(let r=0;r<i.length;r++){let a=i[r];if(a[0]!=="*"){if(!e&&a in this._types)throw new Error('Attempt to change mapping for "'+a+'" extension from "'+this._types[a]+'" to "'+t+'". Pass `force=true` to allow this, otherwise remove "'+a+'" from the list of extensions for "'+t+'".');this._types[a]=t}}if(e||!this._extensions[t]){let r=i[0];this._extensions[t]=r[0]!=="*"?r:r.substr(1)}}};oc.prototype.getType=function(n){n=String(n);let e=n.replace(/^.*[/\\]/,"").toLowerCase(),t=e.replace(/^.*\./,"").toLowerCase(),i=e.length<n.length;return(t.length<e.length-1||!i)&&this._types[t]||null};oc.prototype.getExtension=function(n){return n=/^\s*([^;\s]*)/.test(n)&&RegExp.$1,n&&this._extensions[n.toLowerCase()]||null};$y.exports=oc});var qy=je((Qj,Wy)=>{Wy.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var zy=je((Jj,Gy)=>{Gy.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}});var am=je((Zj,Ky)=>{"use strict";var W1=Vy();Ky.exports=new W1(qy(),zy())});var om=je(sm=>{"use strict";sm.parse=G1;sm.serialize=z1;var q1=Object.prototype.toString,uc=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function G1(n,e){if(typeof n!="string")throw new TypeError("argument str must be a string");for(var t={},i=e||{},r=i.decode||K1,a=0;a<n.length;){var s=n.indexOf("=",a);if(s===-1)break;var o=n.indexOf(";",a);if(o===-1)o=n.length;else if(o<s){a=n.lastIndexOf(";",s-1)+1;continue}var u=n.slice(a,s).trim();if(t[u]===void 0){var l=n.slice(s+1,o).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1)),t[u]=Q1(l,r)}a=o+1}return t}function z1(n,e,t){var i=t||{},r=i.encode||X1;if(typeof r!="function")throw new TypeError("option encode is invalid");if(!uc.test(n))throw new TypeError("argument name is invalid");var a=r(e);if(a&&!uc.test(a))throw new TypeError("argument val is invalid");var s=n+"="+a;if(i.maxAge!=null){var o=i.maxAge-0;if(isNaN(o)||!isFinite(o))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(o)}if(i.domain){if(!uc.test(i.domain))throw new TypeError("option domain is invalid");s+="; Domain="+i.domain}if(i.path){if(!uc.test(i.path))throw new TypeError("option path is invalid");s+="; Path="+i.path}if(i.expires){var u=i.expires;if(!Y1(u)||isNaN(u.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+u.toUTCString()}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.priority){var l=typeof i.priority=="string"?i.priority.toLowerCase():i.priority;switch(l){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(i.sameSite){var d=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(d){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s}function K1(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function X1(n){return encodeURIComponent(n)}function Y1(n){return q1.call(n)==="[object Date]"||n instanceof Date}function Q1(n,e){try{return e(n)}catch{return n}}});var nT=je((C6,dm)=>{var qn={};typeof dm>"u"?window.eastasianwidth=qn:dm.exports=qn;qn.eastAsianWidth=function(n){var e=n.charCodeAt(0),t=n.length==2?n.charCodeAt(1):0,i=e;return 55296<=e&&e<=56319&&56320<=t&&t<=57343&&(e&=1023,t&=1023,i=e<<10|t,i+=65536),i==12288||65281<=i&&i<=65376||65504<=i&&i<=65510?"F":i==8361||65377<=i&&i<=65470||65474<=i&&i<=65479||65482<=i&&i<=65487||65490<=i&&i<=65495||65498<=i&&i<=65500||65512<=i&&i<=65518?"H":4352<=i&&i<=4447||4515<=i&&i<=4519||4602<=i&&i<=4607||9001<=i&&i<=9002||11904<=i&&i<=11929||11931<=i&&i<=12019||12032<=i&&i<=12245||12272<=i&&i<=12283||12289<=i&&i<=12350||12353<=i&&i<=12438||12441<=i&&i<=12543||12549<=i&&i<=12589||12593<=i&&i<=12686||12688<=i&&i<=12730||12736<=i&&i<=12771||12784<=i&&i<=12830||12832<=i&&i<=12871||12880<=i&&i<=13054||13056<=i&&i<=19903||19968<=i&&i<=42124||42128<=i&&i<=42182||43360<=i&&i<=43388||44032<=i&&i<=55203||55216<=i&&i<=55238||55243<=i&&i<=55291||63744<=i&&i<=64255||65040<=i&&i<=65049||65072<=i&&i<=65106||65108<=i&&i<=65126||65128<=i&&i<=65131||110592<=i&&i<=110593||127488<=i&&i<=127490||127504<=i&&i<=127546||127552<=i&&i<=127560||127568<=i&&i<=127569||131072<=i&&i<=194367||177984<=i&&i<=196605||196608<=i&&i<=262141?"W":32<=i&&i<=126||162<=i&&i<=163||165<=i&&i<=166||i==172||i==175||10214<=i&&i<=10221||10629<=i&&i<=10630?"Na":i==161||i==164||167<=i&&i<=168||i==170||173<=i&&i<=174||176<=i&&i<=180||182<=i&&i<=186||188<=i&&i<=191||i==198||i==208||215<=i&&i<=216||222<=i&&i<=225||i==230||232<=i&&i<=234||236<=i&&i<=237||i==240||242<=i&&i<=243||247<=i&&i<=250||i==252||i==254||i==257||i==273||i==275||i==283||294<=i&&i<=295||i==299||305<=i&&i<=307||i==312||319<=i&&i<=322||i==324||328<=i&&i<=331||i==333||338<=i&&i<=339||358<=i&&i<=359||i==363||i==462||i==464||i==466||i==468||i==470||i==472||i==474||i==476||i==593||i==609||i==708||i==711||713<=i&&i<=715||i==717||i==720||728<=i&&i<=731||i==733||i==735||768<=i&&i<=879||913<=i&&i<=929||931<=i&&i<=937||945<=i&&i<=961||963<=i&&i<=969||i==1025||1040<=i&&i<=1103||i==1105||i==8208||8211<=i&&i<=8214||8216<=i&&i<=8217||8220<=i&&i<=8221||8224<=i&&i<=8226||8228<=i&&i<=8231||i==8240||8242<=i&&i<=8243||i==8245||i==8251||i==8254||i==8308||i==8319||8321<=i&&i<=8324||i==8364||i==8451||i==8453||i==8457||i==8467||i==8470||8481<=i&&i<=8482||i==8486||i==8491||8531<=i&&i<=8532||8539<=i&&i<=8542||8544<=i&&i<=8555||8560<=i&&i<=8569||i==8585||8592<=i&&i<=8601||8632<=i&&i<=8633||i==8658||i==8660||i==8679||i==8704||8706<=i&&i<=8707||8711<=i&&i<=8712||i==8715||i==8719||i==8721||i==8725||i==8730||8733<=i&&i<=8736||i==8739||i==8741||8743<=i&&i<=8748||i==8750||8756<=i&&i<=8759||8764<=i&&i<=8765||i==8776||i==8780||i==8786||8800<=i&&i<=8801||8804<=i&&i<=8807||8810<=i&&i<=8811||8814<=i&&i<=8815||8834<=i&&i<=8835||8838<=i&&i<=8839||i==8853||i==8857||i==8869||i==8895||i==8978||9312<=i&&i<=9449||9451<=i&&i<=9547||9552<=i&&i<=9587||9600<=i&&i<=9615||9618<=i&&i<=9621||9632<=i&&i<=9633||9635<=i&&i<=9641||9650<=i&&i<=9651||9654<=i&&i<=9655||9660<=i&&i<=9661||9664<=i&&i<=9665||9670<=i&&i<=9672||i==9675||9678<=i&&i<=9681||9698<=i&&i<=9701||i==9711||9733<=i&&i<=9734||i==9737||9742<=i&&i<=9743||9748<=i&&i<=9749||i==9756||i==9758||i==9792||i==9794||9824<=i&&i<=9825||9827<=i&&i<=9829||9831<=i&&i<=9834||9836<=i&&i<=9837||i==9839||9886<=i&&i<=9887||9918<=i&&i<=9919||9924<=i&&i<=9933||9935<=i&&i<=9953||i==9955||9960<=i&&i<=9983||i==10045||i==10071||10102<=i&&i<=10111||11093<=i&&i<=11097||12872<=i&&i<=12879||57344<=i&&i<=63743||65024<=i&&i<=65039||i==65533||127232<=i&&i<=127242||127248<=i&&i<=127277||127280<=i&&i<=127337||127344<=i&&i<=127386||917760<=i&&i<=917999||983040<=i&&i<=1048573||1048576<=i&&i<=1114109?"A":"N"};qn.characterLength=function(n){var e=this.eastAsianWidth(n);return e=="F"||e=="W"||e=="A"?2:1};function rT(n){return n.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}qn.length=function(n){for(var e=rT(n),t=0,i=0;i<e.length;i++)t=t+this.characterLength(e[i]);return t};qn.slice=function(n,e,t){textLen=qn.length(n),e=e||0,t=t||1,e<0&&(e=textLen+e),t<0&&(t=textLen+t);for(var i="",r=0,a=rT(n),s=0;s<a.length;s++){var o=a[s],u=qn.length(o);if(r>=e-(u==2?1:0))if(r+u<=t)i+=o;else break;r+=u}return i}});var sT=je((w6,aT)=>{"use strict";aT.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var Ht=je((U6,sx)=>{var Ru;typeof window<"u"?Ru=window:typeof global<"u"?Ru=global:typeof self<"u"?Ru=self:Ru={};sx.exports=Ru});var ox=je(()=>{});var Nu=je(($6,lx)=>{var ux=typeof global<"u"?global:typeof window<"u"?window:{},qP=ox(),Mu;typeof document<"u"?Mu=document:(Mu=ux["__GLOBAL_DOCUMENT_CACHE@4"],Mu||(Mu=ux["__GLOBAL_DOCUMENT_CACHE@4"]=qP));lx.exports=Mu});var fx=je((Ua,hx)=>{function dx(n){if(n&&typeof n=="object"){var e=n.which||n.keyCode||n.charCode;e&&(n=e)}if(typeof n=="number")return cx[n];var t=String(n),i=un[t.toLowerCase()];if(i)return i;var i=Fc[t.toLowerCase()];if(i)return i;if(t.length===1)return t.charCodeAt(0)}dx.isEventKey=function(e,t){if(e&&typeof e=="object"){var i=e.which||e.keyCode||e.charCode;if(i==null)return!1;if(typeof t=="string"){var r=un[t.toLowerCase()];if(r)return r===i;var r=Fc[t.toLowerCase()];if(r)return r===i}else if(typeof t=="number")return t===i;return!1}};Ua=hx.exports=dx;var un=Ua.code=Ua.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},Fc=Ua.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(pt=97;pt<123;pt++)un[String.fromCharCode(pt)]=pt-32;for(pt=48;pt<58;pt++)un[pt-48]=pt;var pt;for(pt=1;pt<13;pt++)un["f"+pt]=pt+111;for(pt=0;pt<10;pt++)un["numpad "+pt]=pt+96;var cx=Ua.names=Ua.title={};for(pt in un)cx[un[pt]]=pt;for(zm in Fc)un[zm]=Fc[zm];var zm});var Km=je((V6,px)=>{px.exports=GP;function GP(n,e){var t,i=null;try{t=JSON.parse(n,e)}catch(r){i=r}return[i,t]}});var mx=je((W6,ln)=>{function Xm(){return ln.exports=Xm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ln.exports.__esModule=!0,ln.exports.default=ln.exports,Xm.apply(this,arguments)}ln.exports=Xm,ln.exports.__esModule=!0,ln.exports.default=ln.exports});var vx=je((q6,gx)=>{gx.exports=KP;var zP=Object.prototype.toString;function KP(n){if(!n)return!1;var e=zP.call(n);return e==="[object Function]"||typeof n=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}});var yx=je((G6,_x)=>{"use strict";var XP=Ht(),YP=function(e,t){return t===void 0&&(t=!1),function(i,r,a){if(i){e(i);return}if(r.statusCode>=400&&r.statusCode<=599){var s=a;if(t)if(XP.TextDecoder){var o=QP(r.headers&&r.headers["content-type"]);try{s=new TextDecoder(o).decode(a)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s});return}e(null,a)}};function QP(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(e,t){var i=t.split("="),r=i[0],a=i[1];return r.trim()==="charset"?a.trim():e},"utf-8")}_x.exports=YP});var Qm=je((z6,Ym)=>{"use strict";var Tx=Ht(),JP=mx(),ZP=vx();Sr.httpHandler=yx();var eF=function(e){var t={};return e&&e.trim().split(`
`).forEach(function(i){var r=i.indexOf(":"),a=i.slice(0,r).trim().toLowerCase(),s=i.slice(r+1).trim();typeof t[a]>"u"?t[a]=s:Array.isArray(t[a])?t[a].push(s):t[a]=[t[a],s]}),t};Ym.exports=Sr;Ym.exports.default=Sr;Sr.XMLHttpRequest=Tx.XMLHttpRequest||nF;Sr.XDomainRequest="withCredentials"in new Sr.XMLHttpRequest?Sr.XMLHttpRequest:Tx.XDomainRequest;tF(["get","put","post","patch","head","delete"],function(n){Sr[n==="delete"?"del":n]=function(e,t,i){return t=xx(e,t,i),t.method=n.toUpperCase(),bx(t)}});function tF(n,e){for(var t=0;t<n.length;t++)e(n[t])}function iF(n){for(var e in n)if(n.hasOwnProperty(e))return!1;return!0}function xx(n,e,t){var i=n;return ZP(e)?(t=e,typeof n=="string"&&(i={uri:n})):i=JP({},e,{uri:n}),i.callback=t,i}function Sr(n,e,t){return e=xx(n,e,t),bx(e)}function bx(n){if(typeof n.callback>"u")throw new Error("callback argument missing");var e=!1,t=function(G,M,O){e||(e=!0,n.callback(G,M,O))};function i(){o.readyState===4&&setTimeout(s,0)}function r(){var L=void 0;if(o.response?L=o.response:L=o.responseText||rF(o),C)try{L=JSON.parse(L)}catch{}return L}function a(L){return clearTimeout(S),L instanceof Error||(L=new Error(""+(L||"Unknown XMLHttpRequest Error"))),L.statusCode=0,t(L,I)}function s(){if(!l){var L;clearTimeout(S),n.useXDR&&o.status===void 0?L=200:L=o.status===1223?204:o.status;var G=I,M=null;return L!==0?(G={body:r(),statusCode:L,method:h,headers:{},url:d,rawRequest:o},o.getAllResponseHeaders&&(G.headers=eF(o.getAllResponseHeaders()))):M=new Error("Internal XMLHttpRequest Error"),t(M,G,G.body)}}var o=n.xhr||null;o||(n.cors||n.useXDR?o=new Sr.XDomainRequest:o=new Sr.XMLHttpRequest);var u,l,d=o.url=n.uri||n.url,h=o.method=n.method||"GET",p=n.body||n.data,_=o.headers=n.headers||{},D=!!n.sync,C=!1,S,I={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:o};if("json"in n&&n.json!==!1&&(C=!0,_.accept||_.Accept||(_.Accept="application/json"),h!=="GET"&&h!=="HEAD"&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),p=JSON.stringify(n.json===!0?p:n.json))),o.onreadystatechange=i,o.onload=s,o.onerror=a,o.onprogress=function(){},o.onabort=function(){l=!0},o.ontimeout=a,o.open(h,d,!D,n.username,n.password),D||(o.withCredentials=!!n.withCredentials),!D&&n.timeout>0&&(S=setTimeout(function(){if(!l){l=!0,o.abort("timeout");var L=new Error("XMLHttpRequest timeout");L.code="ETIMEDOUT",a(L)}},n.timeout)),o.setRequestHeader)for(u in _)_.hasOwnProperty(u)&&o.setRequestHeader(u,_[u]);else if(n.headers&&!iF(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(o.responseType=n.responseType),"beforeSend"in n&&typeof n.beforeSend=="function"&&n.beforeSend(o),o.send(p||null),o}function rF(n){try{if(n.responseType==="document")return n.responseXML;var e=n.responseXML&&n.responseXML.documentElement.nodeName==="parsererror";if(n.responseType===""&&!e)return n.responseXML}catch{}return null}function nF(){}});var kx=je((K6,Ax)=>{var Sx=Nu(),Zm=Object.create||function(){function n(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return n.prototype=e,new n}}();function Pi(n,e){this.name="ParsingError",this.code=n.code,this.message=e||n.message}Pi.prototype=Zm(Error.prototype);Pi.prototype.constructor=Pi;Pi.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function eg(n){function e(i,r,a,s){return(i|0)*3600+(r|0)*60+(a|0)+(s|0)/1e3}var t=n.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return t?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null}function Uu(){this.values=Zm(null)}Uu.prototype={set:function(n,e){!this.get(n)&&e!==""&&(this.values[n]=e)},get:function(n,e,t){return t?this.has(n)?this.values[n]:e[t]:this.has(n)?this.values[n]:e},has:function(n){return n in this.values},alt:function(n,e,t){for(var i=0;i<t.length;++i)if(e===t[i]){this.set(n,e);break}},integer:function(n,e){/^-?\d+$/.test(e)&&this.set(n,parseInt(e,10))},percent:function(n,e){var t;return(t=e.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(n,e),!0):!1}};function Bu(n,e,t,i){var r=i?n.split(i):[n];for(var a in r)if(typeof r[a]=="string"){var s=r[a].split(t);if(s.length===2){var o=s[0].trim(),u=s[1].trim();e(o,u)}}}function aF(n,e,t){var i=n;function r(){var o=eg(n);if(o===null)throw new Pi(Pi.Errors.BadTimeStamp,"Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function a(o,u){var l=new Uu;Bu(o,function(d,h){switch(d){case"region":for(var p=t.length-1;p>=0;p--)if(t[p].id===h){l.set(d,t[p].region);break}break;case"vertical":l.alt(d,h,["rl","lr"]);break;case"line":var _=h.split(","),D=_[0];l.integer(d,D),l.percent(d,D)&&l.set("snapToLines",!1),l.alt(d,D,["auto"]),_.length===2&&l.alt("lineAlign",_[1],["start","center","end"]);break;case"position":_=h.split(","),l.percent(d,_[0]),_.length===2&&l.alt("positionAlign",_[1],["start","center","end"]);break;case"size":l.percent(d,h);break;case"align":l.alt(d,h,["start","center","end","left","right"]);break}},/:/,/\s/),u.region=l.get("region",null),u.vertical=l.get("vertical","");try{u.line=l.get("line","auto")}catch{}u.lineAlign=l.get("lineAlign","start"),u.snapToLines=l.get("snapToLines",!0),u.size=l.get("size",100);try{u.align=l.get("align","center")}catch{u.align=l.get("align","middle")}try{u.position=l.get("position","auto")}catch{u.position=l.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},u.align)}u.positionAlign=l.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},u.align)}function s(){n=n.replace(/^\s+/,"")}if(s(),e.startTime=r(),s(),n.substr(0,3)!=="-->")throw new Pi(Pi.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.substr(3),s(),e.endTime=r(),s(),a(n,e)}var Jm=Sx.createElement&&Sx.createElement("textarea"),sF={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Dx={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},oF={v:"title",lang:"lang"},Ex={rt:"ruby"};function wx(n,e){function t(){if(!e)return null;function D(S){return e=e.substr(S.length),S}var C=e.match(/^([^<]*)(<[^>]*>?)?/);return D(C[1]?C[1]:C[2])}function i(D){return Jm.innerHTML=D,D=Jm.textContent,Jm.textContent="",D}function r(D,C){return!Ex[C.localName]||Ex[C.localName]===D.localName}function a(D,C){var S=sF[D];if(!S)return null;var I=n.document.createElement(S),L=oF[D];return L&&C&&(I[L]=C.trim()),I}for(var s=n.document.createElement("div"),o=s,u,l=[];(u=t())!==null;){if(u[0]==="<"){if(u[1]==="/"){l.length&&l[l.length-1]===u.substr(2).replace(">","")&&(l.pop(),o=o.parentNode);continue}var d=eg(u.substr(1,u.length-2)),h;if(d){h=n.document.createProcessingInstruction("timestamp",d),o.appendChild(h);continue}var p=u.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!p||(h=a(p[1],p[3]),!h)||!r(o,h))continue;if(p[2]){var _=p[2].split(".");_.forEach(function(D){var C=/^bg_/.test(D),S=C?D.slice(3):D;if(Dx.hasOwnProperty(S)){var I=C?"background-color":"color",L=Dx[S];h.style[I]=L}}),h.className=_.join(" ")}l.push(p[1]),o.appendChild(h),o=h;continue}o.appendChild(n.document.createTextNode(i(u)))}return s}var Cx=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function uF(n){for(var e=0;e<Cx.length;e++){var t=Cx[e];if(n>=t[0]&&n<=t[1])return!0}return!1}function lF(n){var e=[],t="",i;if(!n||!n.childNodes)return"ltr";function r(o,u){for(var l=u.childNodes.length-1;l>=0;l--)o.push(u.childNodes[l])}function a(o){if(!o||!o.length)return null;var u=o.pop(),l=u.textContent||u.innerText;if(l){var d=l.match(/^.*(\n|\r)/);return d?(o.length=0,d[0]):l}if(u.tagName==="ruby")return a(o);if(u.childNodes)return r(o,u),a(o)}for(r(e,n);t=a(e);)for(var s=0;s<t.length;s++)if(i=t.charCodeAt(s),uF(i))return"rtl";return"ltr"}function dF(n){if(typeof n.line=="number"&&(n.snapToLines||n.line>=0&&n.line<=100))return n.line;if(!n.track||!n.track.textTrackList||!n.track.textTrackList.mediaElement)return-1;for(var e=n.track,t=e.textTrackList,i=0,r=0;r<t.length&&t[r]!==e;r++)t[r].mode==="showing"&&i++;return++i*-1}function Lc(){}Lc.prototype.applyStyles=function(n,e){e=e||this.div;for(var t in n)n.hasOwnProperty(t)&&(e.style[t]=n[t])};Lc.prototype.formatStyle=function(n,e){return n===0?0:n+e};function Oc(n,e,t){Lc.call(this),this.cue=e,this.cueDiv=wx(n,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=n.document.createElement("div"),i={direction:lF(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:t.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":r=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}Oc.prototype=Zm(Lc.prototype);Oc.prototype.constructor=Oc;function Jt(n){var e,t,i,r;if(n.div){t=n.div.offsetHeight,i=n.div.offsetWidth,r=n.div.offsetTop;var a=(a=n.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();n=n.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,n.height/a.length):0}this.left=n.left,this.right=n.right,this.top=n.top||r,this.height=n.height||t,this.bottom=n.bottom||r+(n.height||t),this.width=n.width||i,this.lineHeight=e!==void 0?e:n.lineHeight}Jt.prototype.move=function(n,e){switch(e=e!==void 0?e:this.lineHeight,n){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Jt.prototype.overlaps=function(n){return this.left<n.right&&this.right>n.left&&this.top<n.bottom&&this.bottom>n.top};Jt.prototype.overlapsAny=function(n){for(var e=0;e<n.length;e++)if(this.overlaps(n[e]))return!0;return!1};Jt.prototype.within=function(n){return this.top>=n.top&&this.bottom<=n.bottom&&this.left>=n.left&&this.right<=n.right};Jt.prototype.overlapsOppositeAxis=function(n,e){switch(e){case"+x":return this.left<n.left;case"-x":return this.right>n.right;case"+y":return this.top<n.top;case"-y":return this.bottom>n.bottom}};Jt.prototype.intersectPercentage=function(n){var e=Math.max(0,Math.min(this.right,n.right)-Math.max(this.left,n.left)),t=Math.max(0,Math.min(this.bottom,n.bottom)-Math.max(this.top,n.top)),i=e*t;return i/(this.height*this.width)};Jt.prototype.toCSSCompatValues=function(n){return{top:this.top-n.top,bottom:n.bottom-this.bottom,left:this.left-n.left,right:n.right-this.right,height:this.height,width:this.width}};Jt.getSimpleBoxPosition=function(n){var e=n.div?n.div.offsetHeight:n.tagName?n.offsetHeight:0,t=n.div?n.div.offsetWidth:n.tagName?n.offsetWidth:0,i=n.div?n.div.offsetTop:n.tagName?n.offsetTop:0;n=n.div?n.div.getBoundingClientRect():n.tagName?n.getBoundingClientRect():n;var r={left:n.left,right:n.right,top:n.top||i,height:n.height||e,bottom:n.bottom||i+(n.height||e),width:n.width||t};return r};function cF(n,e,t,i){function r(S,I){for(var L,G=new Jt(S),M=1,O=0;O<I.length;O++){for(;S.overlapsOppositeAxis(t,I[O])||S.within(t)&&S.overlapsAny(i);)S.move(I[O]);if(S.within(t))return S;var K=S.intersectPercentage(t);M>K&&(L=new Jt(S),M=K),S=new Jt(G)}return L||G}var a=new Jt(e),s=e.cue,o=dF(s),u=[];if(s.snapToLines){var l;switch(s.vertical){case"":u=["+y","-y"],l="height";break;case"rl":u=["+x","-x"],l="width";break;case"lr":u=["-x","+x"],l="width";break}var d=a.lineHeight,h=d*Math.round(o),p=t[l]+d,_=u[0];Math.abs(h)>p&&(h=h<0?-1:1,h*=Math.ceil(p/d)*d),o<0&&(h+=s.vertical===""?t.height:t.width,u=u.reverse()),a.move(_,h)}else{var D=a.lineHeight/t.height*100;switch(s.lineAlign){case"center":o-=D/2;break;case"end":o-=D;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}u=["+y","-x","+x","-y"],a=new Jt(e)}var C=r(a,u);e.move(C.toCSSCompatValues(t))}function Ks(){}Ks.StringDecoder=function(){return{decode:function(n){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};Ks.convertCueToDOMTree=function(n,e){return!n||!e?null:wx(n,e)};var hF=.05,fF="sans-serif",pF="1.5%";Ks.processCues=function(n,e,t){if(!n||!e||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var i=n.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=pF,t.appendChild(i);function r(d){for(var h=0;h<d.length;h++)if(d[h].hasBeenReset||!d[h].displayState)return!0;return!1}if(!r(e)){for(var a=0;a<e.length;a++)i.appendChild(e[a].displayState);return}var s=[],o=Jt.getSimpleBoxPosition(i),u=Math.round(o.height*hF*100)/100,l={font:u+"px "+fF};(function(){for(var d,h,p=0;p<e.length;p++)h=e[p],d=new Oc(n,h,l),i.appendChild(d.div),cF(n,d,o,s),h.displayState=d.div,s.push(Jt.getSimpleBoxPosition(d))})()};Ks.Parser=function(n,e,t){t||(t=e,e={}),e||(e={}),this.window=n,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]};Ks.Parser.prototype={reportOrThrowError:function(n){if(n instanceof Pi)this.onparsingerror&&this.onparsingerror(n);else throw n},parse:function(n){var e=this;n&&(e.buffer+=e.decoder.decode(n,{stream:!0}));function t(){for(var d=e.buffer,h=0;h<d.length&&d[h]!=="\r"&&d[h]!==`
`;)++h;var p=d.substr(0,h);return d[h]==="\r"&&++h,d[h]===`
`&&++h,e.buffer=d.substr(h),p}function i(d){var h=new Uu;if(Bu(d,function(_,D){switch(_){case"id":h.set(_,D);break;case"width":h.percent(_,D);break;case"lines":h.integer(_,D);break;case"regionanchor":case"viewportanchor":var C=D.split(",");if(C.length!==2)break;var S=new Uu;if(S.percent("x",C[0]),S.percent("y",C[1]),!S.has("x")||!S.has("y"))break;h.set(_+"X",S.get("x")),h.set(_+"Y",S.get("y"));break;case"scroll":h.alt(_,D,["up"]);break}},/=/,/\s/),h.has("id")){var p=new(e.vttjs.VTTRegion||e.window.VTTRegion);p.width=h.get("width",100),p.lines=h.get("lines",3),p.regionAnchorX=h.get("regionanchorX",0),p.regionAnchorY=h.get("regionanchorY",100),p.viewportAnchorX=h.get("viewportanchorX",0),p.viewportAnchorY=h.get("viewportanchorY",100),p.scroll=h.get("scroll",""),e.onregion&&e.onregion(p),e.regionList.push({id:h.get("id"),region:p})}}function r(d){var h=new Uu;Bu(d,function(p,_){switch(p){case"MPEGT":h.integer(p+"S",_);break;case"LOCA":h.set(p+"L",eg(_));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:h.get("MPEGTS"),LOCAL:h.get("LOCAL")})}function a(d){d.match(/X-TIMESTAMP-MAP/)?Bu(d,function(h,p){switch(h){case"X-TIMESTAMP-MAP":r(p);break}},/=/):Bu(d,function(h,p){switch(h){case"Region":i(p);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=t();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Pi(Pi.Errors.BadSignature);e.state="HEADER"}for(var u=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(u?u=!1:s=t(),e.state){case"HEADER":/:/.test(s)?a(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{aF(s,e.cue,e.regionList)}catch(d){e.reportOrThrowError(d),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var l=s.indexOf("-->")!==-1;if(!s||l&&(u=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(d){e.reportOrThrowError(d),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var n=this;try{if(n.buffer+=n.decoder.decode(),(n.cue||n.state==="HEADER")&&(n.buffer+=`

`,n.parse()),n.state==="INITIAL")throw new Pi(Pi.Errors.BadSignature)}catch(e){n.reportOrThrowError(e)}return n.onflush&&n.onflush(),this}};Ax.exports=Ks});var Fx=je((X6,Px)=>{var mF="auto",gF={"":1,lr:1,rl:1},vF={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function _F(n){if(typeof n!="string")return!1;var e=gF[n.toLowerCase()];return e?n.toLowerCase():!1}function tg(n){if(typeof n!="string")return!1;var e=vF[n.toLowerCase()];return e?n.toLowerCase():!1}function Ix(n,e,t){this.hasBeenReset=!1;var i="",r=!1,a=n,s=e,o=t,u=null,l="",d=!0,h="auto",p="start",_="auto",D="auto",C=100,S="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(I){i=""+I}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(I){r=!!I}},startTime:{enumerable:!0,get:function(){return a},set:function(I){if(typeof I!="number")throw new TypeError("Start time must be set to a number.");a=I,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(I){if(typeof I!="number")throw new TypeError("End time must be set to a number.");s=I,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(I){o=""+I,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(I){u=I,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(I){var L=_F(I);if(L===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=L,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(I){d=!!I,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(I){if(typeof I!="number"&&I!==mF)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=I,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(I){var L=tg(I);L?(p=L,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return _},set:function(I){if(I<0||I>100)throw new Error("Position must be between 0 and 100.");_=I,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return D},set:function(I){var L=tg(I);L?(D=L,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return C},set:function(I){if(I<0||I>100)throw new Error("Size must be between 0 and 100.");C=I,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return S},set:function(I){var L=tg(I);if(!L)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");S=L,this.hasBeenReset=!0}}}),this.displayState=void 0}Ix.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};Px.exports=Ix});var Lx=je((Y6,Ox)=>{var yF={"":!0,up:!0};function TF(n){if(typeof n!="string")return!1;var e=yF[n.toLowerCase()];return e?n.toLowerCase():!1}function ju(n){return typeof n=="number"&&n>=0&&n<=100}function xF(){var n=100,e=3,t=0,i=100,r=0,a=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(o){if(!ju(o))throw new Error("Width must be between 0 and 100.");n=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(o){if(!ju(o))throw new Error("RegionAnchorX must be between 0 and 100.");i=o}},regionAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!ju(o))throw new Error("RegionAnchorY must be between 0 and 100.");t=o}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(o){if(!ju(o))throw new Error("ViewportAnchorY must be between 0 and 100.");a=o}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!ju(o))throw new Error("ViewportAnchorX must be between 0 and 100.");r=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var u=TF(o);u===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=u}}})}Ox.exports=xF});var ig=je((Q6,Rx)=>{var dn=Ht(),ja=Rx.exports={WebVTT:kx(),VTTCue:Fx(),VTTRegion:Lx()};dn.vttjs=ja;dn.WebVTT=ja.WebVTT;var bF=ja.VTTCue,SF=ja.VTTRegion,DF=dn.VTTCue,EF=dn.VTTRegion;ja.shim=function(){dn.VTTCue=bF,dn.VTTRegion=SF};ja.restore=function(){dn.VTTCue=DF,dn.VTTRegion=EF};dn.VTTCue||ja.shim()});var ng=je((Hu,rg)=>{(function(n){var e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,t=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(s,o,u){if(u=u||{},s=s.trim(),o=o.trim(),!o){if(!u.alwaysNormalize)return s;var l=a.parseURL(s);if(!l)throw new Error("Error trying to parse base URL.");return l.path=a.normalizePath(l.path),a.buildURLFromParts(l)}var d=a.parseURL(o);if(!d)throw new Error("Error trying to parse relative URL.");if(d.scheme)return u.alwaysNormalize?(d.path=a.normalizePath(d.path),a.buildURLFromParts(d)):o;var h=a.parseURL(s);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var p=t.exec(h.path);h.netLoc=p[1],h.path=p[2]}h.netLoc&&!h.path&&(h.path="/");var _={scheme:h.scheme,netLoc:d.netLoc,path:null,params:d.params,query:d.query,fragment:d.fragment};if(!d.netLoc&&(_.netLoc=h.netLoc,d.path[0]!=="/"))if(!d.path)_.path=h.path,d.params||(_.params=h.params,d.query||(_.query=h.query));else{var D=h.path,C=D.substring(0,D.lastIndexOf("/")+1)+d.path;_.path=a.normalizePath(C)}return _.path===null&&(_.path=u.alwaysNormalize?a.normalizePath(d.path):d.path),a.buildURLFromParts(_)},parseURL:function(s){var o=e.exec(s);return o?{scheme:o[1]||"",netLoc:o[2]||"",path:o[3]||"",params:o[4]||"",query:o[5]||"",fragment:o[6]||""}:null},normalizePath:function(s){for(s=s.split("").reverse().join("").replace(i,"");s.length!==(s=s.replace(r,"")).length;);return s.split("").reverse().join("")},buildURLFromParts:function(s){return s.scheme+s.netLoc+s.path+s.params+s.query+s.fragment}};typeof Hu=="object"&&typeof rg=="object"?rg.exports=a:typeof define=="function"&&define.amd?define([],function(){return a}):typeof Hu=="object"?Hu.URLToolkit=a:n.URLToolkit=a})(Hu)});var Vu=je(Qs=>{"use strict";function UF(n,e,t){if(t===void 0&&(t=Array.prototype),n&&typeof t.find=="function")return t.find.call(n,e);for(var i=0;i<n.length;i++)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];if(e.call(void 0,r,i,n))return r}}function Tg(n,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(n):n}function jF(n,e){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}var qx=Tg({HTML:"text/html",isHTML:function(n){return n===qx.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Gx=Tg({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===Gx.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Qs.assign=jF;Qs.find=UF;Qs.freeze=Tg;Qs.MIME_TYPE=qx;Qs.NAMESPACE=Gx});var Pg=je(Qn=>{var eb=Vu(),Er=eb.find,Wu=eb.NAMESPACE;function HF(n){return n!==""}function $F(n){return n?n.split(/[\t\n\f\r ]+/).filter(HF):[]}function VF(n,e){return n.hasOwnProperty(e)||(n[e]=!0),n}function zx(n){if(!n)return[];var e=$F(n);return Object.keys(e.reduce(VF,{}))}function WF(n){return function(e){return n&&n.indexOf(e)!==-1}}function Gu(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function Ti(n,e){var t=n.prototype;if(!(t instanceof e)){let r=function(){};var i=r;r.prototype=e.prototype,r=new r,Gu(t,r),n.prototype=t=r}t.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),t.constructor=n)}var xi={},ar=xi.ELEMENT_NODE=1,Zs=xi.ATTRIBUTE_NODE=2,jc=xi.TEXT_NODE=3,tb=xi.CDATA_SECTION_NODE=4,ib=xi.ENTITY_REFERENCE_NODE=5,qF=xi.ENTITY_NODE=6,rb=xi.PROCESSING_INSTRUCTION_NODE=7,nb=xi.COMMENT_NODE=8,ab=xi.DOCUMENT_NODE=9,sb=xi.DOCUMENT_TYPE_NODE=10,mn=xi.DOCUMENT_FRAGMENT_NODE=11,GF=xi.NOTATION_NODE=12,$t={},Pt={},fH=$t.INDEX_SIZE_ERR=(Pt[1]="Index size error",1),pH=$t.DOMSTRING_SIZE_ERR=(Pt[2]="DOMString size error",2),yi=$t.HIERARCHY_REQUEST_ERR=(Pt[3]="Hierarchy request error",3),mH=$t.WRONG_DOCUMENT_ERR=(Pt[4]="Wrong document",4),gH=$t.INVALID_CHARACTER_ERR=(Pt[5]="Invalid character",5),vH=$t.NO_DATA_ALLOWED_ERR=(Pt[6]="No data allowed",6),_H=$t.NO_MODIFICATION_ALLOWED_ERR=(Pt[7]="No modification allowed",7),ob=$t.NOT_FOUND_ERR=(Pt[8]="Not found",8),yH=$t.NOT_SUPPORTED_ERR=(Pt[9]="Not supported",9),Kx=$t.INUSE_ATTRIBUTE_ERR=(Pt[10]="Attribute in use",10),TH=$t.INVALID_STATE_ERR=(Pt[11]="Invalid state",11),xH=$t.SYNTAX_ERR=(Pt[12]="Syntax error",12),bH=$t.INVALID_MODIFICATION_ERR=(Pt[13]="Invalid modification",13),SH=$t.NAMESPACE_ERR=(Pt[14]="Invalid namespace",14),DH=$t.INVALID_ACCESS_ERR=(Pt[15]="Invalid access",15);function xt(n,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,Pt[n]),this.message=Pt[n],Error.captureStackTrace&&Error.captureStackTrace(this,xt);return t.code=n,e&&(this.message=this.message+": "+e),t}xt.prototype=Error.prototype;Gu($t,xt);function pn(){}pn.prototype={length:0,item:function(n){return this[n]||null},toString:function(n,e){for(var t=[],i=0;i<this.length;i++)Js(this[i],t,n,e);return t.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function eo(n,e){this._node=n,this._refresh=e,Sg(this)}function Sg(n){var e=n._node._inc||n._node.ownerDocument._inc;if(n._inc!=e){var t=n._refresh(n._node);yb(n,"length",t.length),Gu(t,n),n._inc=e}}eo.prototype.item=function(n){return Sg(this),this[n]};Ti(eo,pn);function Hc(){}function ub(n,e){for(var t=n.length;t--;)if(n[t]===e)return t}function Xx(n,e,t,i){if(i?e[ub(e,i)]=t:e[e.length++]=t,n){t.ownerElement=n;var r=n.ownerDocument;r&&(i&&cb(r,n,i),zF(r,n,t))}}function Yx(n,e,t){var i=ub(e,t);if(i>=0){for(var r=e.length-1;i<r;)e[i]=e[++i];if(e.length=r,n){var a=n.ownerDocument;a&&(cb(a,n,t),t.ownerElement=null)}}else throw new xt(ob,new Error(n.tagName+"@"+t))}Hc.prototype={length:0,item:pn.prototype.item,getNamedItem:function(n){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==n)return t}},setNamedItem:function(n){var e=n.ownerElement;if(e&&e!=this._ownerElement)throw new xt(Kx);var t=this.getNamedItem(n.nodeName);return Xx(this._ownerElement,this,n,t),t},setNamedItemNS:function(n){var e=n.ownerElement,t;if(e&&e!=this._ownerElement)throw new xt(Kx);return t=this.getNamedItemNS(n.namespaceURI,n.localName),Xx(this._ownerElement,this,n,t),t},removeNamedItem:function(n){var e=this.getNamedItem(n);return Yx(this._ownerElement,this,e),e},removeNamedItemNS:function(n,e){var t=this.getNamedItemNS(n,e);return Yx(this._ownerElement,this,t),t},getNamedItemNS:function(n,e){for(var t=this.length;t--;){var i=this[t];if(i.localName==e&&i.namespaceURI==n)return i}return null}};function lb(){}lb.prototype={hasFeature:function(n,e){return!0},createDocument:function(n,e,t){var i=new zu;if(i.implementation=this,i.childNodes=new pn,i.doctype=t||null,t&&i.appendChild(t),e){var r=i.createElementNS(n,e);i.appendChild(r)}return i},createDocumentType:function(n,e,t){var i=new Wc;return i.name=n,i.nodeName=n,i.publicId=e||"",i.systemId=t||"",i}};function Ke(){}Ke.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,e){return $c(this,n,e)},replaceChild:function(n,e){$c(this,n,e,fb),e&&this.removeChild(e)},removeChild:function(n){return hb(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return bg(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var e=n.nextSibling;e&&e.nodeType==jc&&n.nodeType==jc?(this.removeChild(e),n.appendData(e.data)):(n.normalize(),n=e)}},isSupported:function(n,e){return this.ownerDocument.implementation.hasFeature(n,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var e=this;e;){var t=e._nsMap;if(t){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]===n)return i}e=e.nodeType==Zs?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(n){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n];e=e.nodeType==Zs?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(n){var e=this.lookupPrefix(n);return e==null}};function db(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}Gu(xi,Ke);Gu(xi,Ke.prototype);function qu(n,e){if(e(n))return!0;if(n=n.firstChild)do if(qu(n,e))return!0;while(n=n.nextSibling)}function zu(){this.ownerDocument=this}function zF(n,e,t){n&&n._inc++;var i=t.namespaceURI;i===Wu.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function cb(n,e,t,i){n&&n._inc++;var r=t.namespaceURI;r===Wu.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function Dg(n,e,t){if(n&&n._inc){n._inc++;var i=e.childNodes;if(t)i[i.length++]=t;else{for(var r=e.firstChild,a=0;r;)i[a++]=r,r=r.nextSibling;i.length=a,delete i[i.length]}}}function hb(n,e){var t=e.previousSibling,i=e.nextSibling;return t?t.nextSibling=i:n.firstChild=i,i?i.previousSibling=t:n.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,Dg(n.ownerDocument,n),e}function KF(n){return n&&(n.nodeType===Ke.DOCUMENT_NODE||n.nodeType===Ke.DOCUMENT_FRAGMENT_NODE||n.nodeType===Ke.ELEMENT_NODE)}function XF(n){return n&&(Cr(n)||Eg(n)||gn(n)||n.nodeType===Ke.DOCUMENT_FRAGMENT_NODE||n.nodeType===Ke.COMMENT_NODE||n.nodeType===Ke.PROCESSING_INSTRUCTION_NODE)}function gn(n){return n&&n.nodeType===Ke.DOCUMENT_TYPE_NODE}function Cr(n){return n&&n.nodeType===Ke.ELEMENT_NODE}function Eg(n){return n&&n.nodeType===Ke.TEXT_NODE}function Qx(n,e){var t=n.childNodes||[];if(Er(t,Cr)||gn(e))return!1;var i=Er(t,gn);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function Jx(n,e){var t=n.childNodes||[];function i(a){return Cr(a)&&a!==e}if(Er(t,i))return!1;var r=Er(t,gn);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function YF(n,e,t){if(!KF(n))throw new xt(yi,"Unexpected parent node type "+n.nodeType);if(t&&t.parentNode!==n)throw new xt(ob,"child not in parent");if(!XF(e)||gn(e)&&n.nodeType!==Ke.DOCUMENT_NODE)throw new xt(yi,"Unexpected node type "+e.nodeType+" for parent node type "+n.nodeType)}function QF(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===Ke.DOCUMENT_FRAGMENT_NODE){var a=r.filter(Cr);if(a.length>1||Er(r,Eg))throw new xt(yi,"More than one element or text in fragment");if(a.length===1&&!Qx(n,t))throw new xt(yi,"Element in fragment can not be inserted before doctype")}if(Cr(e)&&!Qx(n,t))throw new xt(yi,"Only one element can be added and only after doctype");if(gn(e)){if(Er(i,gn))throw new xt(yi,"Only one doctype is allowed");var s=Er(i,Cr);if(t&&i.indexOf(s)<i.indexOf(t))throw new xt(yi,"Doctype can only be inserted before an element");if(!t&&s)throw new xt(yi,"Doctype can not be appended since element is present")}}function fb(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===Ke.DOCUMENT_FRAGMENT_NODE){var a=r.filter(Cr);if(a.length>1||Er(r,Eg))throw new xt(yi,"More than one element or text in fragment");if(a.length===1&&!Jx(n,t))throw new xt(yi,"Element in fragment can not be inserted before doctype")}if(Cr(e)&&!Jx(n,t))throw new xt(yi,"Only one element can be added and only after doctype");if(gn(e)){let u=function(l){return gn(l)&&l!==t};var o=u;if(Er(i,u))throw new xt(yi,"Only one doctype is allowed");var s=Er(i,Cr);if(t&&i.indexOf(s)<i.indexOf(t))throw new xt(yi,"Doctype can only be inserted before an element")}}function $c(n,e,t,i){YF(n,e,t),n.nodeType===Ke.DOCUMENT_NODE&&(i||QF)(n,e,t);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===mn){var a=e.firstChild;if(a==null)return e;var s=e.lastChild}else a=s=e;var o=t?t.previousSibling:n.lastChild;a.previousSibling=o,s.nextSibling=t,o?o.nextSibling=a:n.firstChild=a,t==null?n.lastChild=s:t.previousSibling=s;do a.parentNode=n;while(a!==s&&(a=a.nextSibling));return Dg(n.ownerDocument||n,n),e.nodeType==mn&&(e.firstChild=e.lastChild=null),e}function JF(n,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=n,e.previousSibling=n.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,n.lastChild=e,Dg(n.ownerDocument,n,e),e}zu.prototype={nodeName:"#document",nodeType:ab,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,e){if(n.nodeType==mn){for(var t=n.firstChild;t;){var i=t.nextSibling;this.insertBefore(t,e),t=i}return n}return $c(this,n,e),n.ownerDocument=this,this.documentElement===null&&n.nodeType===ar&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),hb(this,n)},replaceChild:function(n,e){$c(this,n,e,fb),n.ownerDocument=this,e&&this.removeChild(e),Cr(n)&&(this.documentElement=n)},importNode:function(n,e){return _b(this,n,e)},getElementById:function(n){var e=null;return qu(this.documentElement,function(t){if(t.nodeType==ar&&t.getAttribute("id")==n)return e=t,!0}),e},getElementsByClassName:function(n){var e=zx(n);return new eo(this,function(t){var i=[];return e.length>0&&qu(t.documentElement,function(r){if(r!==t&&r.nodeType===ar){var a=r.getAttribute("class");if(a){var s=n===a;if(!s){var o=zx(a);s=e.every(WF(o))}s&&i.push(r)}}}),i})},createElement:function(n){var e=new $a;e.ownerDocument=this,e.nodeName=n,e.tagName=n,e.localName=n,e.childNodes=new pn;var t=e.attributes=new Hc;return t._ownerElement=e,e},createDocumentFragment:function(){var n=new qc;return n.ownerDocument=this,n.childNodes=new pn,n},createTextNode:function(n){var e=new Cg;return e.ownerDocument=this,e.appendData(n),e},createComment:function(n){var e=new wg;return e.ownerDocument=this,e.appendData(n),e},createCDATASection:function(n){var e=new Ag;return e.ownerDocument=this,e.appendData(n),e},createProcessingInstruction:function(n,e){var t=new Ig;return t.ownerDocument=this,t.tagName=t.target=n,t.nodeValue=t.data=e,t},createAttribute:function(n){var e=new Vc;return e.ownerDocument=this,e.name=n,e.nodeName=n,e.localName=n,e.specified=!0,e},createEntityReference:function(n){var e=new kg;return e.ownerDocument=this,e.nodeName=n,e},createElementNS:function(n,e){var t=new $a,i=e.split(":"),r=t.attributes=new Hc;return t.childNodes=new pn,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=n,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,r._ownerElement=t,t},createAttributeNS:function(n,e){var t=new Vc,i=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=n,t.specified=!0,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,t}};Ti(zu,Ke);function $a(){this._nsMap={}}$a.prototype={nodeType:ar,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var e=this.getAttributeNode(n);return e&&e.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,e){var t=this.ownerDocument.createAttribute(n);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(n){var e=this.getAttributeNode(n);e&&this.removeAttributeNode(e)},appendChild:function(n){return n.nodeType===mn?this.insertBefore(n,null):JF(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(n,e){return this.getAttributeNodeNS(n,e)!=null},getAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);return t&&t.value||""},setAttributeNS:function(n,e,t){var i=this.ownerDocument.createAttributeNS(n,e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},getAttributeNodeNS:function(n,e){return this.attributes.getNamedItemNS(n,e)},getElementsByTagName:function(n){return new eo(this,function(e){var t=[];return qu(e,function(i){i!==e&&i.nodeType==ar&&(n==="*"||i.tagName==n)&&t.push(i)}),t})},getElementsByTagNameNS:function(n,e){return new eo(this,function(t){var i=[];return qu(t,function(r){r!==t&&r.nodeType===ar&&(n==="*"||r.namespaceURI===n)&&(e==="*"||r.localName==e)&&i.push(r)}),i})}};zu.prototype.getElementsByTagName=$a.prototype.getElementsByTagName;zu.prototype.getElementsByTagNameNS=$a.prototype.getElementsByTagNameNS;Ti($a,Ke);function Vc(){}Vc.prototype.nodeType=Zs;Ti(Vc,Ke);function Ku(){}Ku.prototype={data:"",substringData:function(n,e){return this.data.substring(n,n+e)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,e){this.replaceData(n,0,e)},appendChild:function(n){throw new Error(Pt[yi])},deleteData:function(n,e){this.replaceData(n,e,"")},replaceData:function(n,e,t){var i=this.data.substring(0,n),r=this.data.substring(n+e);t=i+t+r,this.nodeValue=this.data=t,this.length=t.length}};Ti(Ku,Ke);function Cg(){}Cg.prototype={nodeName:"#text",nodeType:jc,splitText:function(n){var e=this.data,t=e.substring(n);e=e.substring(0,n),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};Ti(Cg,Ku);function wg(){}wg.prototype={nodeName:"#comment",nodeType:nb};Ti(wg,Ku);function Ag(){}Ag.prototype={nodeName:"#cdata-section",nodeType:tb};Ti(Ag,Ku);function Wc(){}Wc.prototype.nodeType=sb;Ti(Wc,Ke);function pb(){}pb.prototype.nodeType=GF;Ti(pb,Ke);function mb(){}mb.prototype.nodeType=qF;Ti(mb,Ke);function kg(){}kg.prototype.nodeType=ib;Ti(kg,Ke);function qc(){}qc.prototype.nodeName="#document-fragment";qc.prototype.nodeType=mn;Ti(qc,Ke);function Ig(){}Ig.prototype.nodeType=rb;Ti(Ig,Ke);function gb(){}gb.prototype.serializeToString=function(n,e,t){return vb.call(n,e,t)};Ke.prototype.toString=vb;function vb(n,e){var t=[],i=this.nodeType==9&&this.documentElement||this,r=i.prefix,a=i.namespaceURI;if(a&&r==null){var r=i.lookupPrefix(a);if(r==null)var s=[{namespace:a,prefix:null}]}return Js(this,t,n,e,s),t.join("")}function Zx(n,e,t){var i=n.prefix||"",r=n.namespaceURI;if(!r||i==="xml"&&r===Wu.XML||r===Wu.XMLNS)return!1;for(var a=t.length;a--;){var s=t[a];if(s.prefix===i)return s.namespace!==r}return!0}function xg(n,e,t){n.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,db),'"')}function Js(n,e,t,i,r){if(r||(r=[]),i)if(n=i(n),n){if(typeof n=="string"){e.push(n);return}}else return;switch(n.nodeType){case ar:var a=n.attributes,s=a.length,I=n.firstChild,o=n.tagName;t=Wu.isHTML(n.namespaceURI)||t;var u=o;if(!t&&!n.prefix&&n.namespaceURI){for(var l,d=0;d<a.length;d++)if(a.item(d).name==="xmlns"){l=a.item(d).value;break}if(!l)for(var h=r.length-1;h>=0;h--){var p=r[h];if(p.prefix===""&&p.namespace===n.namespaceURI){l=p.namespace;break}}if(l!==n.namespaceURI)for(var h=r.length-1;h>=0;h--){var p=r[h];if(p.namespace===n.namespaceURI){p.prefix&&(u=p.prefix+":"+o);break}}}e.push("<",u);for(var _=0;_<s;_++){var D=a.item(_);D.prefix=="xmlns"?r.push({prefix:D.localName,namespace:D.value}):D.nodeName=="xmlns"&&r.push({prefix:"",namespace:D.value})}for(var _=0;_<s;_++){var D=a.item(_);if(Zx(D,t,r)){var C=D.prefix||"",S=D.namespaceURI;xg(e,C?"xmlns:"+C:"xmlns",S),r.push({prefix:C,namespace:S})}Js(D,e,t,i,r)}if(o===u&&Zx(n,t,r)){var C=n.prefix||"",S=n.namespaceURI;xg(e,C?"xmlns:"+C:"xmlns",S),r.push({prefix:C,namespace:S})}if(I||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;I;)I.data?e.push(I.data):Js(I,e,t,i,r.slice()),I=I.nextSibling;else for(;I;)Js(I,e,t,i,r.slice()),I=I.nextSibling;e.push("</",u,">")}else e.push("/>");return;case ab:case mn:for(var I=n.firstChild;I;)Js(I,e,t,i,r.slice()),I=I.nextSibling;return;case Zs:return xg(e,n.name,n.value);case jc:return e.push(n.data.replace(/[<&>]/g,db));case tb:return e.push("<![CDATA[",n.data,"]]>");case nb:return e.push("<!--",n.data,"-->");case sb:var L=n.publicId,G=n.systemId;if(e.push("<!DOCTYPE ",n.name),L)e.push(" PUBLIC ",L),G&&G!="."&&e.push(" ",G),e.push(">");else if(G&&G!=".")e.push(" SYSTEM ",G,">");else{var M=n.internalSubset;M&&e.push(" [",M,"]"),e.push(">")}return;case rb:return e.push("<?",n.target," ",n.data,"?>");case ib:return e.push("&",n.nodeName,";");default:e.push("??",n.nodeName)}}function _b(n,e,t){var i;switch(e.nodeType){case ar:i=e.cloneNode(!1),i.ownerDocument=n;case mn:break;case Zs:t=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=n,i.parentNode=null,t)for(var r=e.firstChild;r;)i.appendChild(_b(n,r,t)),r=r.nextSibling;return i}function bg(n,e,t){var i=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=e[r];typeof a!="object"&&a!=i[r]&&(i[r]=a)}switch(e.childNodes&&(i.childNodes=new pn),i.ownerDocument=n,i.nodeType){case ar:var s=e.attributes,o=i.attributes=new Hc,u=s.length;o._ownerElement=i;for(var l=0;l<u;l++)i.setAttributeNode(bg(n,s.item(l),!0));break;case Zs:t=!0}if(t)for(var d=e.firstChild;d;)i.appendChild(bg(n,d,t)),d=d.nextSibling;return i}function yb(n,e,t){n[e]=t}try{if(Object.defineProperty){let n=function(e){switch(e.nodeType){case ar:case mn:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(n(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};EH=n,Object.defineProperty(eo.prototype,"length",{get:function(){return Sg(this),this.$$length}}),Object.defineProperty(Ke.prototype,"textContent",{get:function(){return n(this)},set:function(e){switch(this.nodeType){case ar:case mn:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),yb=function(e,t,i){e["$$"+t]=i}}}catch{}var EH;Qn.DocumentType=Wc;Qn.DOMException=xt;Qn.DOMImplementation=lb;Qn.Element=$a;Qn.Node=Ke;Qn.NodeList=pn;Qn.XMLSerializer=gb});var xb=je(Xu=>{var Tb=Vu().freeze;Xu.XML_ENTITIES=Tb({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});Xu.HTML_ENTITIES=Tb({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"});Xu.entityMap=Xu.HTML_ENTITIES});var kb=je(Og=>{var Zu=Vu().NAMESPACE,Fg=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,bb=new RegExp("[\\-\\.0-9"+Fg.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Sb=new RegExp("^"+Fg.source+bb.source+"*(?::"+Fg.source+bb.source+"*)?$"),Yu=0,Jn=1,to=2,Qu=3,io=4,ro=5,Ju=6,Gc=7;function no(n,e){this.message=n,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,no)}no.prototype=new Error;no.prototype.name=no.name;function Cb(){}Cb.prototype={parse:function(n,e,t){var i=this.domBuilder;i.startDocument(),wb(e,e={}),ZF(n,e,t,i,this.errorHandler),i.endDocument()}};function ZF(n,e,t,i,r){function a(xe){if(xe>65535){xe-=65536;var Ae=55296+(xe>>10),Be=56320+(xe&1023);return String.fromCharCode(Ae,Be)}else return String.fromCharCode(xe)}function s(xe){var Ae=xe.slice(1,-1);return Object.hasOwnProperty.call(t,Ae)?t[Ae]:Ae.charAt(0)==="#"?a(parseInt(Ae.substr(1).replace("x","0x"))):(r.error("entity not found:"+xe),xe)}function o(xe){if(xe>C){var Ae=n.substring(C,xe).replace(/&#?\w+;/g,s);p&&u(C),i.characters(Ae,0,xe-C),C=xe}}function u(xe,Ae){for(;xe>=d&&(Ae=h.exec(n));)l=Ae.index,d=l+Ae[0].length,p.lineNumber++;p.columnNumber=xe-l+1}for(var l=0,d=0,h=/.*(?:\r\n?|\n)|.*$/g,p=i.locator,_=[{currentNSMap:e}],D={},C=0;;){try{var S=n.indexOf("<",C);if(S<0){if(!n.substr(C).match(/^\s*$/)){var I=i.doc,L=I.createTextNode(n.substr(C));I.appendChild(L),i.currentElement=L}return}switch(S>C&&o(S),n.charAt(S+1)){case"/":var oe=n.indexOf(">",S+3),G=n.substring(S+2,oe).replace(/[ \t\n\r]+$/g,""),M=_.pop();oe<0?(G=n.substring(S+2).replace(/[\s<].*/,""),r.error("end tag name: "+G+" is not complete:"+M.tagName),oe=S+1+G.length):G.match(/\s</)&&(G=G.replace(/[\s<].*/,""),r.error("end tag name: "+G+" maybe not complete"),oe=S+1+G.length);var O=M.localNSMap,K=M.tagName==G,z=K||M.tagName&&M.tagName.toLowerCase()==G.toLowerCase();if(z){if(i.endElement(M.uri,M.localName,G),O)for(var V in O)Object.prototype.hasOwnProperty.call(O,V)&&i.endPrefixMapping(V);K||r.fatalError("end tag name: "+G+" is not match the current start tagName:"+M.tagName)}else _.push(M);oe++;break;case"?":p&&u(S),oe=nO(n,S,i);break;case"!":p&&u(S),oe=rO(n,S,i,r);break;default:p&&u(S);var J=new Ab,Q=_[_.length-1].currentNSMap,oe=eO(n,S,J,Q,s,r),ne=J.length;if(!J.closed&&iO(n,oe,J.tagName,D)&&(J.closed=!0,t.nbsp||r.warning("unclosed xml attribute")),p&&ne){for(var ae=Db(p,{}),ye=0;ye<ne;ye++){var Pe=J[ye];u(Pe.offset),Pe.locator=Db(p,{})}i.locator=ae,Eb(J,i,Q)&&_.push(J),i.locator=p}else Eb(J,i,Q)&&_.push(J);Zu.isHTML(J.uri)&&!J.closed?oe=tO(n,oe,J.tagName,s,i):oe++}}catch(xe){if(xe instanceof no)throw xe;r.error("element parse error: "+xe),oe=-1}oe>C?C=oe:o(Math.max(S,C)+1)}}function Db(n,e){return e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber,e}function eO(n,e,t,i,r,a){function s(_,D,C){t.attributeNames.hasOwnProperty(_)&&a.fatalError("Attribute "+_+" redefined"),t.addValue(_,D.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),C)}for(var o,u,l=++e,d=Yu;;){var h=n.charAt(l);switch(h){case"=":if(d===Jn)o=n.slice(e,l),d=Qu;else if(d===to)d=Qu;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(d===Qu||d===Jn)if(d===Jn&&(a.warning('attribute value must after "="'),o=n.slice(e,l)),e=l+1,l=n.indexOf(h,e),l>0)u=n.slice(e,l),s(o,u,e-1),d=ro;else throw new Error("attribute value no end '"+h+"' match");else if(d==io)u=n.slice(e,l),s(o,u,e),a.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=l+1,d=ro;else throw new Error('attribute value must after "="');break;case"/":switch(d){case Yu:t.setTagName(n.slice(e,l));case ro:case Ju:case Gc:d=Gc,t.closed=!0;case io:case Jn:case to:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),d==Yu&&t.setTagName(n.slice(e,l)),l;case">":switch(d){case Yu:t.setTagName(n.slice(e,l));case ro:case Ju:case Gc:break;case io:case Jn:u=n.slice(e,l),u.slice(-1)==="/"&&(t.closed=!0,u=u.slice(0,-1));case to:d===to&&(u=o),d==io?(a.warning('attribute "'+u+'" missed quot(")!'),s(o,u,e)):((!Zu.isHTML(i[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),s(u,u,e));break;case Qu:throw new Error("attribute value missed!!")}return l;case"\x80":h=" ";default:if(h<=" ")switch(d){case Yu:t.setTagName(n.slice(e,l)),d=Ju;break;case Jn:o=n.slice(e,l),d=to;break;case io:var u=n.slice(e,l);a.warning('attribute "'+u+'" missed quot(")!!'),s(o,u,e);case ro:d=Ju;break}else switch(d){case to:var p=t.tagName;(!Zu.isHTML(i[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&a.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,e),e=l,d=Jn;break;case ro:a.warning('attribute space is required"'+o+'"!!');case Ju:d=Jn,e=l;break;case Qu:d=io,e=l;break;case Gc:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function Eb(n,e,t){for(var i=n.tagName,r=null,h=n.length;h--;){var a=n[h],s=a.qName,o=a.value,p=s.indexOf(":");if(p>0)var u=a.prefix=s.slice(0,p),l=s.slice(p+1),d=u==="xmlns"&&l;else l=s,u=null,d=s==="xmlns"&&"";a.localName=l,d!==!1&&(r==null&&(r={},wb(t,t={})),t[d]=r[d]=o,a.uri=Zu.XMLNS,e.startPrefixMapping(d,o))}for(var h=n.length;h--;){a=n[h];var u=a.prefix;u&&(u==="xml"&&(a.uri=Zu.XML),u!=="xmlns"&&(a.uri=t[u||""]))}var p=i.indexOf(":");p>0?(u=n.prefix=i.slice(0,p),l=n.localName=i.slice(p+1)):(u=null,l=n.localName=i);var _=n.uri=t[u||""];if(e.startElement(_,l,i,n),n.closed){if(e.endElement(_,l,i),r)for(u in r)Object.prototype.hasOwnProperty.call(r,u)&&e.endPrefixMapping(u)}else return n.currentNSMap=t,n.localNSMap=r,!0}function tO(n,e,t,i,r){if(/^(?:script|textarea)$/i.test(t)){var a=n.indexOf("</"+t+">",e),s=n.substring(e+1,a);if(/[&<]/.test(s))return/^script$/i.test(t)?(r.characters(s,0,s.length),a):(s=s.replace(/&#?\w+;/g,i),r.characters(s,0,s.length),a)}return e+1}function iO(n,e,t,i){var r=i[t];return r==null&&(r=n.lastIndexOf("</"+t+">"),r<e&&(r=n.lastIndexOf("</"+t)),i[t]=r),r<e}function wb(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function rO(n,e,t,i){var r=n.charAt(e+2);switch(r){case"-":if(n.charAt(e+3)==="-"){var a=n.indexOf("-->",e+4);return a>e?(t.comment(n,e+4,a-e-4),a+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(e+3,6)=="CDATA["){var a=n.indexOf("]]>",e+9);return t.startCDATA(),t.characters(n,e+9,a-e-9),t.endCDATA(),a+3}var s=aO(n,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var u=s[1][0],l=!1,d=!1;o>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],d=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(d=s[3][0]));var h=s[o-1];return t.startDTD(u,l,d),t.endDTD(),h.index+h[0].length}}return-1}function nO(n,e,t){var i=n.indexOf("?>",e);if(i){var r=n.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){var a=r[0].length;return t.processingInstruction(r[1],r[2]),i+2}else return-1}return-1}function Ab(){this.attributeNames={}}Ab.prototype={setTagName:function(n){if(!Sb.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,e,t){if(!Sb.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:e,offset:t}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function aO(n,e){var t,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(n);t=r.exec(n);)if(i.push(t),t[1])return i}Og.XMLReader=Cb;Og.ParseError=no});var Mb=je(Kc=>{var sO=Vu(),oO=Pg(),Ib=xb(),Ob=kb(),uO=oO.DOMImplementation,Pb=sO.NAMESPACE,lO=Ob.ParseError,dO=Ob.XMLReader;function Lb(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Rb(n){this.options=n||{locator:{}}}Rb.prototype.parseFromString=function(n,e){var t=this.options,i=new dO,r=t.domBuilder||new el,a=t.errorHandler,s=t.locator,o=t.xmlns||{},u=/\/x?html?$/.test(e),l=u?Ib.HTML_ENTITIES:Ib.XML_ENTITIES;s&&r.setDocumentLocator(s),i.errorHandler=cO(a,r,s),i.domBuilder=t.domBuilder||r,u&&(o[""]=Pb.HTML),o.xml=o.xml||Pb.XML;var d=t.normalizeLineEndings||Lb;return n&&typeof n=="string"?i.parse(d(n),o,l):i.errorHandler.error("invalid doc source"),r.doc};function cO(n,e,t){if(!n){if(e instanceof el)return e;n=e}var i={},r=n instanceof Function;t=t||{};function a(s){var o=n[s];!o&&r&&(o=n.length==2?function(u){n(s,u)}:n),i[s]=o&&function(u){o("[xmldom "+s+"]	"+u+Lg(t))}||function(){}}return a("warning"),a("error"),a("fatalError"),i}function el(){this.cdata=!1}function ao(n,e){e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber}el.prototype={startDocument:function(){this.doc=new uO().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,e,t,i){var r=this.doc,a=r.createElementNS(n,t||e),s=i.length;zc(this,a),this.currentElement=a,this.locator&&ao(this.locator,a);for(var o=0;o<s;o++){var n=i.getURI(o),u=i.getValue(o),t=i.getQName(o),l=r.createAttributeNS(n,t);this.locator&&ao(i.getLocator(o),l),l.value=l.nodeValue=u,a.setAttributeNode(l)}},endElement:function(n,e,t){var i=this.currentElement,r=i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(n,e){},endPrefixMapping:function(n){},processingInstruction:function(n,e){var t=this.doc.createProcessingInstruction(n,e);this.locator&&ao(this.locator,t),zc(this,t)},ignorableWhitespace:function(n,e,t){},characters:function(n,e,t){if(n=Fb.apply(this,arguments),n){if(this.cdata)var i=this.doc.createCDATASection(n);else var i=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(n)&&this.doc.appendChild(i),this.locator&&ao(this.locator,i)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,e,t){n=Fb.apply(this,arguments);var i=this.doc.createComment(n);this.locator&&ao(this.locator,i),zc(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,e,t){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(n,e,t);this.locator&&ao(this.locator,r),zc(this,r),this.doc.doctype=r}},warning:function(n){console.warn("[xmldom warning]	"+n,Lg(this.locator))},error:function(n){console.error("[xmldom error]	"+n,Lg(this.locator))},fatalError:function(n){throw new lO(n,this.locator)}};function Lg(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function Fb(n,e,t){return typeof n=="string"?n.substr(e,t):n.length>=e+t||e?new java.lang.String(n,e,t)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){el.prototype[n]=function(){return null}});function zc(n,e){n.currentElement?n.currentElement.appendChild(e):n.doc.appendChild(e)}Kc.__DOMHandler=el;Kc.normalizeLineEndings=Lb;Kc.DOMParser=Rb});var Rg=je(Xc=>{var Nb=Pg();Xc.DOMImplementation=Nb.DOMImplementation;Xc.XMLSerializer=Nb.XMLSerializer;Xc.DOMParser=Mb().DOMParser});var iS=je((RH,tS)=>{var eS=Math.pow(2,32),tL=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t;return e.getBigUint64?(t=e.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):e.getUint32(0)*eS+e.getUint32(4)};tS.exports={getUint64:tL,MAX_UINT32:eS}});var aS=je((MH,nS)=>{var rS=iS().getUint64,iL=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;t.version===0?(t.earliestPresentationTime=e.getUint32(i),t.firstOffset=e.getUint32(i+4),i+=8):(t.earliestPresentationTime=rS(n.subarray(i)),t.firstOffset=rS(n.subarray(i+8)),i+=16),i+=2;var r=e.getUint16(i);for(i+=2;r>0;i+=12,r--)t.references.push({referenceType:(n[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(n[i+8]&128),sapType:(n[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return t};nS.exports=iL});var yS=je((s$,_S)=>{var qg=9e4,Gg,zg,th,Kg,mS,gS,vS;Gg=function(n){return n*qg};zg=function(n,e){return n*e};th=function(n){return n/qg};Kg=function(n,e){return n/e};mS=function(n,e){return Gg(Kg(n,e))};gS=function(n,e){return zg(th(n),e)};vS=function(n,e,t){return th(t?n:n-e)};_S.exports={ONE_SECOND_IN_TS:qg,secondsToVideoTs:Gg,secondsToAudioTs:zg,videoTsToSeconds:th,audioTsToSeconds:Kg,audioTsToVideoTs:mS,videoTsToAudioTs:gS,metadataTsToSeconds:vS}});var nC=je((es,rC)=>{function tC(n){if(n&&typeof n=="object"){var e=n.which||n.keyCode||n.charCode;e&&(n=e)}if(typeof n=="number")return iC[n];var t=String(n),i=xn[t.toLowerCase()];if(i)return i;var i=gf[t.toLowerCase()];if(i)return i;if(t.length===1)return t.charCodeAt(0)}tC.isEventKey=function(e,t){if(e&&typeof e=="object"){var i=e.which||e.keyCode||e.charCode;if(i==null)return!1;if(typeof t=="string"){var r=xn[t.toLowerCase()];if(r)return r===i;var r=gf[t.toLowerCase()];if(r)return r===i}else if(typeof t=="number")return t===i;return!1}};es=rC.exports=tC;var xn=es.code=es.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},gf=es.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(mt=97;mt<123;mt++)xn[String.fromCharCode(mt)]=mt-32;for(mt=48;mt<58;mt++)xn[mt-48]=mt;var mt;for(mt=1;mt<13;mt++)xn["f"+mt]=mt+111;for(mt=0;mt<10;mt++)xn["numpad "+mt]=mt+96;var iC=es.names=es.title={};for(mt in xn)iC[xn[mt]]=mt;for(Sv in gf)xn[Sv]=gf[Sv];var Sv});var IC=je(($$,kC)=>{var AC=Math.pow(2,32),TB=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t;return e.getBigUint64?(t=e.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):e.getUint32(0)*AC+e.getUint32(4)};kC.exports={getUint64:TB,MAX_UINT32:AC}});var OC=je((V$,FC)=>{var PC=IC().getUint64,xB=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;t.version===0?(t.earliestPresentationTime=e.getUint32(i),t.firstOffset=e.getUint32(i+4),i+=8):(t.earliestPresentationTime=PC(n.subarray(i)),t.firstOffset=PC(n.subarray(i+8)),i+=16),i+=2;var r=e.getUint16(i);for(i+=2;r>0;i+=12,r--)t.references.push({referenceType:(n[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(n[i+8]&128),sapType:(n[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return t};FC.exports=xB});var zC=je((fV,GC)=>{var Gv=9e4,zv,Kv,Ef,Xv,VC,WC,qC;zv=function(n){return n*Gv};Kv=function(n,e){return n*e};Ef=function(n){return n/Gv};Xv=function(n,e){return n/e};VC=function(n,e){return zv(Xv(n,e))};WC=function(n,e){return Kv(Ef(n),e)};qC=function(n,e,t){return Ef(t?n:n-e)};GC.exports={ONE_SECOND_IN_TS:Gv,secondsToVideoTs:zv,secondsToAudioTs:Kv,videoTsToSeconds:Ef,audioTsToSeconds:Xv,audioTsToVideoTs:VC,videoTsToAudioTs:WC,metadataTsToSeconds:qC}});var{replace:R1}="";var M1=/[&<>'"]/g,N1={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},B1=n=>N1[n],jy=n=>R1.call(n,M1,B1);function U1(n){for(var e=[],t=0;t<n.length;){var i=n[t];if(i==="*"||i==="+"||i==="?"){e.push({type:"MODIFIER",index:t,value:n[t++]});continue}if(i==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:n[t++]});continue}if(i==="{"){e.push({type:"OPEN",index:t,value:n[t++]});continue}if(i==="}"){e.push({type:"CLOSE",index:t,value:n[t++]});continue}if(i===":"){for(var r="",a=t+1;a<n.length;){var s=n.charCodeAt(a);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){r+=n[a++];continue}break}if(!r)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:r}),t=a;continue}if(i==="("){var o=1,u="",a=t+1;if(n[a]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<n.length;){if(n[a]==="\\"){u+=n[a++]+n[a++];continue}if(n[a]===")"){if(o--,o===0){a++;break}}else if(n[a]==="("&&(o++,n[a+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(a));u+=n[a++]}if(o)throw new TypeError("Unbalanced pattern at ".concat(t));if(!u)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:u}),t=a;continue}e.push({type:"CHAR",index:t,value:n[t++]})}return e.push({type:"END",index:t,value:""}),e}function j1(n,e){e===void 0&&(e={});for(var t=U1(n),i=e.prefixes,r=i===void 0?"./":i,a="[^".concat($1(e.delimiter||"/#?"),"]+?"),s=[],o=0,u=0,l="",d=function(K){if(u<t.length&&t[u].type===K)return t[u++].value},h=function(K){var z=d(K);if(z!==void 0)return z;var V=t[u],J=V.type,Q=V.index;throw new TypeError("Unexpected ".concat(J," at ").concat(Q,", expected ").concat(K))},p=function(){for(var K="",z;z=d("CHAR")||d("ESCAPED_CHAR");)K+=z;return K};u<t.length;){var _=d("CHAR"),D=d("NAME"),C=d("PATTERN");if(D||C){var S=_||"";r.indexOf(S)===-1&&(l+=S,S=""),l&&(s.push(l),l=""),s.push({name:D||o++,prefix:S,suffix:"",pattern:C||a,modifier:d("MODIFIER")||""});continue}var I=_||d("ESCAPED_CHAR");if(I){l+=I;continue}l&&(s.push(l),l="");var L=d("OPEN");if(L){var S=p(),G=d("NAME")||"",M=d("PATTERN")||"",O=p();h("CLOSE"),s.push({name:G||(M?o++:""),pattern:G&&!M?a:M,prefix:S,suffix:O,modifier:d("MODIFIER")||""});continue}h("END")}return s}function Hy(n,e){return H1(j1(n,e),e)}function H1(n,e){e===void 0&&(e={});var t=V1(e),i=e.encode,r=i===void 0?function(u){return u}:i,a=e.validate,s=a===void 0?!0:a,o=n.map(function(u){if(typeof u=="object")return new RegExp("^(?:".concat(u.pattern,")$"),t)});return function(u){for(var l="",d=0;d<n.length;d++){var h=n[d];if(typeof h=="string"){l+=h;continue}var p=u?u[h.name]:void 0,_=h.modifier==="?"||h.modifier==="*",D=h.modifier==="*"||h.modifier==="+";if(Array.isArray(p)){if(!D)throw new TypeError('Expected "'.concat(h.name,'" to not repeat, but got an array'));if(p.length===0){if(_)continue;throw new TypeError('Expected "'.concat(h.name,'" to not be empty'))}for(var C=0;C<p.length;C++){var S=r(p[C],h);if(s&&!o[d].test(S))throw new TypeError('Expected all "'.concat(h.name,'" to match "').concat(h.pattern,'", but got "').concat(S,'"'));l+=h.prefix+S+h.suffix}continue}if(typeof p=="string"||typeof p=="number"){var S=r(String(p),h);if(s&&!o[d].test(S))throw new TypeError('Expected "'.concat(h.name,'" to match "').concat(h.pattern,'", but got "').concat(S,'"'));l+=h.prefix+S+h.suffix;continue}if(!_){var I=D?"an array":"a string";throw new TypeError('Expected "'.concat(h.name,'" to be ').concat(I))}}return l}}function $1(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function V1(n){return n&&n.sensitive?"":"i"}var wT=Le(am(),1),Iu=Le(om(),1);var um,Xy,Yy,Qy,Jy=!0;typeof process<"u"&&({FORCE_COLOR:um,NODE_DISABLE_COLORS:Xy,NO_COLOR:Yy,TERM:Qy}=process.env||{},Jy=process.stdout&&process.stdout.isTTY);var J1={enabled:!Xy&&Yy==null&&Qy!=="dumb"&&(um!=null&&um!=="0"||Jy)};function nt(n,e){let t=new RegExp(`\\x1b\\[${e}m`,"g"),i=`\x1B[${n}m`,r=`\x1B[${e}m`;return function(a){return!J1.enabled||a==null?a:i+(~(""+a).indexOf(r)?a.replace(t,r+i):a)+r}}var Zy=nt(0,0),lc=nt(1,22),eT=nt(2,22),t6=nt(3,23),i6=nt(4,24),r6=nt(7,27),n6=nt(8,28),a6=nt(9,29),s6=nt(30,39),tT=nt(31,39),o6=nt(32,39),lm=nt(33,39),u6=nt(34,39),l6=nt(35,39),iT=nt(36,39),d6=nt(37,39),c6=nt(90,39),h6=nt(90,39),f6=nt(40,49),p6=nt(41,49),m6=nt(42,49),g6=nt(43,49),v6=nt(44,49),_6=nt(45,49),y6=nt(46,49),T6=nt(47,49);var Z1=Le(nT(),1),eI=Le(sT(),1);function cm(n){let e=/^\\\\\?\\/.test(n),t=/[^\u0000-\u0080]+/.test(n);return e||t?n:n.replace(/\\/g,"/")}var Mm=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},_i=(n,e,t)=>(Mm(n,e,"read from private field"),t?t.call(n):e.get(n)),Hs=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},Ws=(n,e,t,i)=>(Mm(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),Du=(n,e,t)=>(Mm(n,e,"access private method"),t),vc,zn,vi,dc,Sm,cc,Dm,Nm,AT,tI=new Date(0),oT="deleted",wu=class{constructor(e){this.value=e}json(){if(this.value===void 0)throw new Error("Cannot convert undefined to an object.");return JSON.parse(this.value)}number(){return Number(this.value)}boolean(){return this.value==="false"||this.value==="0"?!1:Boolean(this.value)}},_c=class{constructor(e){Hs(this,dc),Hs(this,cc),Hs(this,Nm),Hs(this,vc,void 0),Hs(this,zn,void 0),Hs(this,vi,void 0),Ws(this,vc,e),Ws(this,zn,null),Ws(this,vi,null)}delete(e,t){let i={expires:tI};t?.domain&&(i.domain=t.domain),t?.path&&(i.path=t.path),Du(this,cc,Dm).call(this).set(e,[oT,(0,Iu.serialize)(e,oT,i),!1])}get(e){if(_i(this,vi)!==null&&_i(this,vi).has(e)){let[r,,a]=_i(this,vi).get(e);return a?new wu(r):new wu(void 0)}let i=Du(this,dc,Sm).call(this)[e];return new wu(i)}has(e){if(_i(this,vi)!==null&&_i(this,vi).has(e)){let[,,i]=_i(this,vi).get(e);return i}return!!Du(this,dc,Sm).call(this)[e]}set(e,t,i){let r;if(typeof t=="string")r=t;else{let s=t.toString();s===Object.prototype.toString.call(t)?r=JSON.stringify(t):r=s}let a={};i&&Object.assign(a,i),Du(this,cc,Dm).call(this).set(e,[r,(0,Iu.serialize)(e,r,a),!0])}*headers(){if(_i(this,vi)!=null)for(let[,e]of _i(this,vi))yield e[1]}};vc=new WeakMap;zn=new WeakMap;vi=new WeakMap;dc=new WeakSet;Sm=function(){return _i(this,zn)||Du(this,Nm,AT).call(this),_i(this,zn)||Ws(this,zn,{}),_i(this,zn)};cc=new WeakSet;Dm=function(){return _i(this,vi)||Ws(this,vi,new Map),_i(this,vi)};Nm=new WeakSet;AT=function(){let n=_i(this,vc).headers.get("cookie");!n||Ws(this,zn,(0,Iu.parse)(n))};var kT=Symbol.for("astro.cookies");function Bm(n,e){Reflect.set(n,kT,e)}function iI(n){let e=Reflect.get(n,kT);if(e!=null)return e}function*rI(n){let e=iI(n);if(!e)return[];for(let t of e.headers())yield t;return[]}var nI=n=>n,ke=nI({UnknownCompilerError:{title:"Unknown compiler error.",code:1e3,hint:"This is almost always a problem with the Astro compiler, not your code. Please open an issue at https://astro.build/issues/compiler."},StaticRedirectNotAvailable:{title:"`Astro.redirect` is not available in static mode.",code:3001,message:"Redirects are only available when using `output: 'server'`. Update your Astro config if you need SSR features.",hint:"See https://docs.astro.build/en/guides/server-side-rendering/#enabling-ssr-in-your-project for more information on how to enable SSR."},ClientAddressNotAvailable:{title:"`Astro.clientAddress` is not available in current adapter.",code:3002,message:n=>`\`Astro.clientAddress\` is not available in the \`${n}\` adapter. File an issue with the adapter to add support.`},StaticClientAddressNotAvailable:{title:"`Astro.clientAddress` is not available in static mode.",code:3003,message:"`Astro.clientAddress` is only available when using `output: 'server'`. Update your Astro config if you need SSR features.",hint:"See https://docs.astro.build/en/guides/server-side-rendering/#enabling-ssr-in-your-project for more information on how to enable SSR."},NoMatchingStaticPathFound:{title:"No static path found for requested path.",code:3004,message:n=>`A \`getStaticPaths()\` route pattern was matched, but no matching static path was found for requested path \`${n}\`.`,hint:n=>`Possible dynamic routes being matched: ${n.join(", ")}.`},OnlyResponseCanBeReturned:{title:"Invalid type returned by Astro page.",code:3005,message:(n,e)=>`Route \`${n||""}\` returned a \`${e}\`. Only a [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) can be returned from Astro files.`,hint:"See https://docs.astro.build/en/guides/server-side-rendering/#response for more information."},MissingMediaQueryDirective:{title:"Missing value for `client:media` directive.",code:3006,message:'Media query not provided for `client:media` directive. A media query similar to `client:media="(max-width: 600px)"` must be provided'},NoMatchingRenderer:{title:"No matching renderer found.",code:3007,message:(n,e,t,i)=>`Unable to render \`${n}\`.

${i>0?`There ${t?"are.":"is."} ${i} renderer${t?"s.":""} configured in your \`astro.config.mjs\` file,
but ${t?"none were.":"it was not."} able to server-side render \`${n}\`.`:`No valid renderer was found ${e?`for the \`.${e}\` file extension.`:"for this file extension."}`}`,hint:n=>`Did you mean to enable the ${n} integration?

See https://docs.astro.build/en/core-concepts/framework-components/ for more information on how to install and configure integrations.`},NoClientEntrypoint:{title:"No client entrypoint specified in renderer.",code:3008,message:(n,e,t)=>`\`${n}\` component has a \`client:${e}\` directive, but no client entrypoint was provided by \`${t}\`.`,hint:"See https://docs.astro.build/en/reference/integrations-reference/#addrenderer-option for more information on how to configure your renderer."},NoClientOnlyHint:{title:"Missing hint on client:only directive.",code:3009,message:n=>`Unable to render \`${n}\`. When using the \`client:only\` hydration strategy, Astro needs a hint to use the correct renderer.`,hint:n=>`Did you mean to pass \`client:only="${n}"\`? See https://docs.astro.build/en/reference/directives-reference/#clientonly for more information on client:only`},InvalidGetStaticPathParam:{title:"Invalid value returned by a `getStaticPaths` path.",code:3010,message:n=>`Invalid params given to \`getStaticPaths\` path. Expected an \`object\`, got \`${n}\``,hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},InvalidGetStaticPathsReturn:{title:"Invalid value returned by getStaticPaths.",code:3011,message:n=>`Invalid type returned by \`getStaticPaths\`. Expected an \`array\`, got \`${n}\``,hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},GetStaticPathsRemovedRSSHelper:{title:"getStaticPaths RSS helper is not available anymore.",code:3012,message:"The RSS helper has been removed from `getStaticPaths`. Try the new @astrojs/rss package instead.",hint:"See https://docs.astro.build/en/guides/rss/ for more information."},GetStaticPathsExpectedParams:{title:"Missing params property on `getStaticPaths` route.",code:3013,message:"Missing or empty required `params` property on `getStaticPaths` route.",hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},GetStaticPathsInvalidRouteParam:{title:"Invalid value for `getStaticPaths` route parameter.",code:3014,message:(n,e,t)=>`Invalid getStaticPaths route parameter for \`${n}\`. Expected undefined, a string or a number, received \`${t}\` (\`${e}\`)`,hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},GetStaticPathsRequired:{title:"`getStaticPaths()` function required for dynamic routes.",code:3015,message:"`getStaticPaths()` function is required for dynamic routes. Make sure that you `export` a `getStaticPaths` function from your dynamic route.",hint:'See https://docs.astro.build/en/core-concepts/routing/#dynamic-routes for more information on dynamic routes.\n\nAlternatively, set `output: "server"` in your Astro config file to switch to a non-static server build. This error can also occur if using `export const prerender = true;`.\nSee https://docs.astro.build/en/guides/server-side-rendering/ for more information on non-static rendering.'},ReservedSlotName:{title:"Invalid slot name.",code:3016,message:n=>`Unable to create a slot named \`${n}\`. \`${n}\` is a reserved slot name. Please update the name of this slot.`},NoAdapterInstalled:{title:"Cannot use Server-side Rendering without an adapter.",code:3017,message:"Cannot use `output: 'server'` without an adapter. Please install and configure the appropriate server adapter for your final deployment.",hint:"See https://docs.astro.build/en/guides/server-side-rendering/ for more information."},NoMatchingImport:{title:"No import found for component.",code:3018,message:n=>`Could not render \`${n}\`. No matching import has been found for \`${n}\`.`,hint:"Please make sure the component is properly imported."},InvalidPrerenderExport:{title:"Invalid prerender export.",code:3019,message:(n,e)=>{let t="A `prerender` export has been detected, but its value cannot be statically analyzed.";return n!=="const"&&(t+=`
Expected \`const\` declaration but got \`${n}\`.`),e!=="true"&&(t+=`
Expected \`true\` value but got \`${e}\`.`),t},hint:"Mutable values declared at runtime are not supported. Please make sure to use exactly `export const prerender = true`."},InvalidComponentArgs:{title:"Invalid component arguments.",code:3020,message:n=>`Invalid arguments passed to${n?` <${n}>`:""} component.`,hint:"Astro components cannot be rendered directly via function call, such as `Component()` or `{items.map(Component)}`."},PageNumberParamNotFound:{title:"Page number param not found.",code:3021,message:n=>`[paginate()] page number param \`${n}\` not found in your filepath.`,hint:"Rename your file to `[page].astro` or `[...page].astro`."},UnknownViteError:{title:"Unknown Vite Error.",code:4e3},FailedToLoadModuleSSR:{title:"Could not import file.",code:4001,message:n=>`Could not import \`${n}\`.`,hint:"This is often caused by a typo in the import path. Please make sure the file exists."},InvalidGlob:{title:"Invalid glob pattern.",code:4002,message:n=>`Invalid glob pattern: \`${n}\`. Glob patterns must start with './', '../' or '/'.`,hint:"See https://docs.astro.build/en/guides/imports/#glob-patterns for more information on supported glob patterns."},UnknownCSSError:{title:"Unknown CSS Error.",code:5e3},CSSSyntaxError:{title:"CSS Syntax Error.",code:5001},UnknownMarkdownError:{title:"Unknown Markdown Error.",code:6e3},MarkdownFrontmatterParseError:{title:"Failed to parse Markdown frontmatter.",code:6001},InvalidFrontmatterInjectionError:{title:"Invalid frontmatter injection.",code:6003,message:'A remark or rehype plugin attempted to inject invalid frontmatter. Ensure "astro.frontmatter" is set to a valid JSON object that is not `null` or `undefined`.',hint:"See the frontmatter injection docs https://docs.astro.build/en/guides/markdown-content/#modifying-frontmatter-programmatically for more information."},MdxIntegrationMissingError:{title:"MDX integration missing.",code:6004,message:n=>`Unable to render ${n}. Ensure that the \`@astrojs/mdx\` integration is installed.`,hint:"See the MDX integration docs for installation and usage instructions: https://docs.astro.build/en/guides/integrations-guide/mdx/"},UnknownConfigError:{title:"Unknown configuration error.",code:7e3},ConfigNotFound:{title:"Specified configuration file not found.",code:7001,message:n=>`Unable to resolve \`--config "${n}"\`. Does the file exist?`},ConfigLegacyKey:{title:"Legacy configuration detected.",code:7002,message:n=>`Legacy configuration detected: \`${n}\`.`,hint:`Please update your configuration to the new format.
See https://astro.build/config for more information.`},UnknownCLIError:{title:"Unknown CLI Error.",code:8e3},GenerateContentTypesError:{title:"Failed to generate content types.",code:8001,message:"`astro sync` command failed to generate content collection types.",hint:"Check your `src/content/config.*` file for typos."},UnknownContentCollectionError:{title:"Unknown Content Collection Error.",code:9e3},InvalidContentEntryFrontmatterError:{title:"Content entry frontmatter does not match schema.",code:9001,message:(n,e,t)=>[`${String(n)} \u2192 ${String(e)} frontmatter does not match collection schema.`,...t.errors.map(i=>i.message)].join(`
`),hint:"See https://docs.astro.build/en/guides/content-collections/ for more information on content schemas."},InvalidContentEntrySlugError:{title:"Invalid content entry slug.",code:9002,message:(n,e)=>`${String(n)} \u2192 ${String(e)} has an invalid slug. \`slug\` must be a string.`,hint:"See https://docs.astro.build/en/guides/content-collections/ for more on the `slug` field."},ContentSchemaContainsSlugError:{title:"Content Schema should not contain `slug`.",code:9003,message:n=>`A content collection schema should not contain \`slug\` since it is reserved for slug generation. Remove this from your ${n} collection schema.`,hint:"See https://docs.astro.build/en/guides/content-collections/ for more on the `slug` field."},UnknownError:{title:"Unknown Error.",code:99999}});function aI(n){return n.replace(/\r\n|\r(?!\n)|\n/g,`
`)}function sI(n){let e=Object.entries(ke).find(t=>t[1].code===n);if(e)return{name:e[0],data:e[1]}}function oI(n,e){if(!e||e.line===void 0||e.column===void 0)return"";let t=aI(n).split(`
`).map(s=>s.replace(/\t/g,"  ")),i=[];for(let s=-2;s<=2;s++)t[e.line+s]&&i.push(e.line+s);let r=0;for(let s of i){let o=`> ${s}`;o.length>r&&(r=o.length)}let a="";for(let s of i){let o=s===e.line-1;a+=o?"> ":"  ",a+=`${s+1} | ${t[s]}
`,o&&(a+=`${Array.from({length:r}).join(" ")}  | ${Array.from({length:e.column}).join(" ")}^
`)}return a}var lt=class extends Error{constructor(e,...t){var i;super(...t),this.type="AstroError";let{code:r,name:a,title:s,message:o,stack:u,location:l,hint:d,frame:h}=e;this.errorCode=r,a&&a!=="Error"?this.name=a:this.name=((i=sI(this.errorCode))==null?void 0:i.name)??"UnknownError",this.title=s,o&&(this.message=o),this.stack=u||this.stack,this.loc=l,this.hint=d,this.frame=h}setErrorCode(e){this.errorCode=e}setLocation(e){this.loc=e}setName(e){this.name=e}setMessage(e){this.message=e}setHint(e){this.hint=e}setFrame(e,t){this.frame=oI(e,t)}static is(e){return e.type==="AstroError"}};function uI(n){return!(n.length!==3||!n[0]||typeof n[0]!="object")}function IT(n,e){var t;let i=((t=e?.split("/").pop())==null?void 0:t.replace(".astro",""))??"",r=(...a)=>{if(!uI(a))throw new lt({...ke.InvalidComponentArgs,message:ke.InvalidComponentArgs.message(i)});return n(...a)};return Object.defineProperty(r,"name",{value:i,writable:!1}),r.isAstroComponentFactory=!0,r.moduleId=e,r}function lI(n){let e=IT(n.factory,n.moduleId);return e.propagation=n.propagation,e}function Ec(n,e){return typeof n=="function"?IT(n,e):lI(n)}var PT="2.0.17";function dI(){return(e,t)=>{let i=[...Object.values(e)];if(i.length===0)throw new Error(`Astro.glob(${JSON.stringify(t())}) - no matches found.`);return Promise.all(i.map(r=>r()))}}function Cc(n){return{site:n?new URL(n):void 0,generator:`Astro v${PT}`,glob:dI()}}function cI(n,e){if(n[e])return n[e];if(e==="delete"&&n.del)return n.del;if(n.all)return n.all}async function hI(n,e,t){var i;let{request:r,params:a}=e,s=(i=r.method)==null?void 0:i.toLowerCase(),o=cI(n,s);if(!t&&t===!1&&s&&s!=="get"&&console.warn(`
${s} requests are not available when building a static site. Update your config to output: 'server' to handle ${s} requests.`),!o||typeof o!="function")return new Response(null,{status:404,headers:{"X-Astro-Response":"Not-Found"}});o.length>1&&console.warn(`
API routes with 2 arguments have been deprecated. Instead they take a single argument in the form of:

export function get({ params, request }) {
	//...
}

Update your code to remove this warning.`);let u=new Proxy(e,{get(l,d){return d in l?Reflect.get(l,d):d in a?(console.warn(`
API routes no longer pass params as the first argument. Instead an object containing a params property is provided in the form of:

export function get({ params }) {
	// ...
}

Update your code to remove this warning.`),Reflect.get(a,d)):void 0}});return o.call(n,u,r)}function FT(n){let e={};return t(n),Object.keys(e).join(" ");function t(i){i&&typeof i.forEach=="function"?i.forEach(t):i===Object(i)?Object.keys(i).forEach(r=>{i[r]&&t(r)}):(i=i===!1||i==null?"":String(i).trim(),i&&i.split(/\s+/).forEach(r=>{e[r]=!0}))}}function Um(n){return!!n&&typeof n=="object"&&typeof n.then=="function"}async function*uT(n){let e=n.getReader();try{for(;;){let{done:t,value:i}=await e.read();if(t)return;yield i}}finally{e.releaseLock()}}var Au=jy,Ma=class extends String{get[Symbol.toStringTag](){return"HTMLString"}},We=n=>n instanceof Ma?n:typeof n=="string"?new Ma(n):n;function jm(n){return Object.prototype.toString.call(n)==="[object HTMLString]"}var wc="astro:jsx",lT=Symbol("empty"),dT=n=>n;function ku(n){return n&&typeof n=="object"&&n[wc]}function fI(n){if(typeof n.type=="string")return n;let e={};if(ku(n.props.children)){let t=n.props.children;if(!ku(t)||!("slot"in t.props))return;let i=dT(t.props.slot);e[i]=[t],e[i].$$slot=!0,delete t.props.slot,delete n.props.children}Array.isArray(n.props.children)&&(n.props.children=n.props.children.map(t=>{if(!ku(t)||!("slot"in t.props))return t;let i=dT(t.props.slot);return Array.isArray(e[i])?e[i].push(t):(e[i]=[t],e[i].$$slot=!0),delete t.props.slot,lT}).filter(t=>t!==lT)),Object.assign(n.props,e)}function OT(n){return typeof n=="string"?We(n):Array.isArray(n)?n.map(e=>OT(e)):n}function pI(n){if("set:html"in n.props||"set:text"in n.props){if("set:html"in n.props){let e=OT(n.props["set:html"]);delete n.props["set:html"],Object.assign(n.props,{children:e});return}if("set:text"in n.props){let e=n.props["set:text"];delete n.props["set:text"],Object.assign(n.props,{children:e});return}}}function mI(n,e){let t={[Tc]:"astro:jsx",[wc]:!0,type:n,props:e??{}};return pI(t),fI(t),t}var gI='(self.Astro=self.Astro||{}).idle=t=>{const e=async()=>{await(await t())()};"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,200)},window.dispatchEvent(new Event("astro:idle"));',vI='(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));',_I='(self.Astro=self.Astro||{}).media=(s,a)=>{const t=async()=>{await(await s())()};if(a.value){const e=matchMedia(a.value);e.matches?t():e.addEventListener("change",t,{once:!0})}},window.dispatchEvent(new Event("astro:media"));',yI='(self.Astro=self.Astro||{}).only=t=>{(async()=>await(await t())())()},window.dispatchEvent(new Event("astro:only"));',TI='(self.Astro=self.Astro||{}).visible=(s,c,n)=>{const r=async()=>{await(await s())()};let i=new IntersectionObserver(e=>{for(const t of e)if(!!t.isIntersecting){i.disconnect(),r();break}});for(let e=0;e<n.children.length;e++){const t=n.children[e];i.observe(t)}},window.dispatchEvent(new Event("astro:visible"));',xI='var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}';function bI(n){return n._metadata.hasHydrationScript?!1:n._metadata.hasHydrationScript=!0}var cT={idle:gI,load:vI,only:yI,media:_I,visible:TI};function SI(n,e){return n._metadata.hasDirectives.has(e)?!1:(n._metadata.hasDirectives.add(e),!0)}function hT(n){if(!(n in cT))throw new Error(`Unknown directive: ${n}`);return cT[n]}function DI(n,e){switch(n){case"both":return`<style>astro-island,astro-slot{display:contents}</style><script>${hT(e)+xI}<\/script>`;case"directive":return`<script>${hT(e)}<\/script>`}return""}var Hm=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,EI=/^(allowfullscreen|async|autofocus|autoplay|controls|default|defer|disabled|disablepictureinpicture|disableremoteplayback|formnovalidate|hidden|loop|nomodule|novalidate|open|playsinline|readonly|required|reversed|scoped|seamless|itemscope)$/i,CI=/^(contenteditable|draggable|spellcheck|value)$/i,wI=/^(autoReverse|externalResourcesRequired|focusable|preserveAlpha)$/i,AI=new Set(["set:html","set:text"]),kI=n=>n.trim().replace(/(?:(?!^)\b\w|\s+|[^\w]+)/g,(e,t)=>/[^\w]|\s/.test(e)?"":t===0?e:e.toUpperCase()),Eu=(n,e=!0)=>e?String(n).replace(/&/g,"&#38;").replace(/"/g,"&#34;"):n,hm=n=>n.toLowerCase()===n?n:n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),II=n=>Object.entries(n).map(([e,t])=>e[0]!=="-"&&e[1]!=="-"?`${hm(e)}:${t}`:hm(e)!==e?`${hm(e)}:var(${e});${e}:${t}`:`${e}:${t}`).join(";");function PI(n){let e="";for(let[t,i]of Object.entries(n))e+=`const ${kI(t)} = ${JSON.stringify(i)};
`;return We(e)}function fT(n){return n.length===1?n[0]:`${n.slice(0,-1).join(", ")} or ${n[n.length-1]}`}function Ac(n,e,t=!0){if(n==null)return"";if(n===!1)return CI.test(e)||wI.test(e)?We(` ${e}="false"`):"";if(AI.has(e))return console.warn(`[astro] The "${e}" directive cannot be applied dynamically at runtime. It will not be rendered as an attribute.

Make sure to use the static attribute syntax (\`${e}={value}\`) instead of the dynamic spread syntax (\`{...{ "${e}": value }}\`).`),"";if(e==="class:list"){let i=Eu(FT(n),t);return i===""?"":We(` ${e.slice(0,-5)}="${i}"`)}return e==="style"&&!(n instanceof Ma)&&typeof n=="object"?We(` ${e}="${Eu(II(n),t)}"`):e==="className"?We(` class="${Eu(n,t)}"`):n===!0&&(e.startsWith("data-")||EI.test(e))?We(` ${e}`):We(` ${e}="${Eu(n,t)}"`)}function Em(n,e=!0){let t="";for(let[i,r]of Object.entries(n))t+=Ac(r,i,e);return We(t)}function hc(n,{props:e,children:t=""},i=!0){let{lang:r,"data-astro-id":a,"define:vars":s,...o}=e;return s&&(n==="style"&&(delete o["is:global"],delete o["is:scoped"]),n==="script"&&(delete o.hoist,t=PI(s)+`
`+t)),(t==null||t=="")&&Hm.test(n)?`<${n}${Em(o,i)} />`:`<${n}${Em(o,i)}>${t}</${n}>`}var fm=(n,e,t)=>{let i=JSON.stringify(n.props),r=n.children;return e===t.findIndex(a=>JSON.stringify(a.props)===i&&a.children==r)};function pT(n){n._metadata.hasRenderedHead=!0;let e=Array.from(n.styles).filter(fm).map(a=>hc("style",a));n.styles.clear();let t=Array.from(n.scripts).filter(fm).map((a,s)=>hc("script",a,!1)),r=Array.from(n.links).filter(fm).map(a=>hc("link",a,!1)).join(`
`)+e.join(`
`)+t.join(`
`);if(n.extraHead.length>0)for(let a of n.extraHead)r+=a;return We(r)}function*LT(n){yield{type:"head",result:n}}function*kc(n){n._metadata.hasRenderedHead||(yield{type:"maybe-head",result:n,scope:n.scope})}var Me={Astro:1<<0,JSX:1<<1,Slot:1<<2,HeadBuffer:1<<3,RenderSlot:1<<4};function FI(n,e){n.scope|=e}function pm(n,e){return(n.scope&e)===e}function zs(n,e){let t=Object.create(n,{scope:{writable:!0,value:n.scope}});return e!=null&&FI(t,e),t}var OI=Symbol.for("astro.headAndContent");function Ic(n){return typeof n=="object"&&!!n[OI]}var mT,RT=Symbol.for("astro.renderTemplateResult"),Cm=class{constructor(e,t){this[mT]=!0,this.htmlParts=e,this.error=void 0,this.expressions=t.map(i=>Um(i)?Promise.resolve(i).catch(r=>{if(!this.error)throw this.error=r,r}):i)}async*[(mT=RT,Symbol.asyncIterator)](){let{htmlParts:e,expressions:t}=this;for(let i=0;i<e.length;i++){let r=e[i],a=t[i];yield We(r),yield*Gs(a)}}};function MT(n){return typeof n=="object"&&!!n[RT]}async function*Pc(n){for await(let e of n)if(e||e===0)for await(let t of Gs(e))switch(t.type){case"directive":{yield t;break}default:{yield We(t);break}}}function Ba(n,...e){return new Cm(n,e)}function NT(n){return n==null?!1:n.isAstroComponentFactory===!0}async function LI(n,e,t,i){let r=zs(n,Me.Astro),a=await e(r,t,i);if(a instanceof Response)throw a;let s=new Pu,o=Ic(a)?a.content:a;for await(let u of Pc(o))s.append(u,n);return s.toString()}function RI(n,e){let t=e.propagation||"none";return e.moduleId&&n.propagation.has(e.moduleId)&&t==="none"&&(t=n.propagation.get(e.moduleId)),t==="in-tree"||t==="self"}var Ki={Value:0,JSON:1,RegExp:2,Date:3,Map:4,Set:5,BigInt:6,URL:7,Uint8Array:8,Uint16Array:9,Uint32Array:10};function mm(n,e={},t=new WeakSet){if(t.has(n))throw new Error(`Cyclic reference detected while serializing props for <${e.displayName} client:${e.hydrate}>!

Cyclic references cannot be safely serialized for client-side usage. Please remove the cyclic reference.`);t.add(n);let i=n.map(r=>UT(r,e,t));return t.delete(n),i}function BT(n,e={},t=new WeakSet){if(t.has(n))throw new Error(`Cyclic reference detected while serializing props for <${e.displayName} client:${e.hydrate}>!

Cyclic references cannot be safely serialized for client-side usage. Please remove the cyclic reference.`);t.add(n);let i=Object.fromEntries(Object.entries(n).map(([r,a])=>[r,UT(a,e,t)]));return t.delete(n),i}function UT(n,e={},t=new WeakSet){switch(Object.prototype.toString.call(n)){case"[object Date]":return[Ki.Date,n.toISOString()];case"[object RegExp]":return[Ki.RegExp,n.source];case"[object Map]":return[Ki.Map,JSON.stringify(mm(Array.from(n),e,t))];case"[object Set]":return[Ki.Set,JSON.stringify(mm(Array.from(n),e,t))];case"[object BigInt]":return[Ki.BigInt,n.toString()];case"[object URL]":return[Ki.URL,n.toString()];case"[object Array]":return[Ki.JSON,JSON.stringify(mm(n,e,t))];case"[object Uint8Array]":return[Ki.Uint8Array,JSON.stringify(Array.from(n))];case"[object Uint16Array]":return[Ki.Uint16Array,JSON.stringify(Array.from(n))];case"[object Uint32Array]":return[Ki.Uint32Array,JSON.stringify(Array.from(n))];default:return n!==null&&typeof n=="object"?[Ki.Value,BT(n,e,t)]:[Ki.Value,n]}}function jT(n,e){return JSON.stringify(BT(n,e))}var HT=["load","idle","media","visible","only"],MI=new Set(HT),$T=new Set(HT.map(n=>`client:${n}`));function NI(n,e){let t={isPage:!1,hydration:null,props:{}};for(let[i,r]of Object.entries(e))if(i.startsWith("server:")&&i==="server:root"&&(t.isPage=!0),i.startsWith("client:"))switch(t.hydration||(t.hydration={directive:"",value:"",componentUrl:"",componentExport:{value:""}}),i){case"client:component-path":{t.hydration.componentUrl=r;break}case"client:component-export":{t.hydration.componentExport.value=r;break}case"client:component-hydration":break;case"client:display-name":break;default:{if(t.hydration.directive=i.split(":")[1],t.hydration.value=r,!MI.has(t.hydration.directive))throw new Error(`Error: invalid hydration directive "${i}". Supported hydration methods: ${Array.from($T).join(", ")}`);if(t.hydration.directive==="media"&&typeof t.hydration.value!="string")throw new lt(ke.MissingMediaQueryDirective);break}}else i==="class:list"?r&&(t.props[i.slice(0,-5)]=FT(r)):t.props[i]=r;for(let i of Object.getOwnPropertySymbols(e))t.props[i]=e[i];return t}async function BI(n,e){let{renderer:t,result:i,astroId:r,props:a,attrs:s}=n,{hydrate:o,componentUrl:u,componentExport:l}=e;if(!l.value)throw new Error(`Unable to resolve a valid export for "${e.displayName}"! Please open an issue at https://astro.build/issues!`);let d={children:"",props:{uid:r}};if(s)for(let[p,_]of Object.entries(s))d.props[p]=Au(_);d.props["component-url"]=await i.resolve(decodeURI(u)),t.clientEntrypoint&&(d.props["component-export"]=l.value,d.props["renderer-url"]=await i.resolve(decodeURI(t.clientEntrypoint)),d.props.props=Au(jT(a,e))),d.props.ssr="",d.props.client=o;let h=await i.resolve("astro:scripts/before-hydration.js");return h.length&&(d.props["before-hydration-url"]=h),d.props.opts=Au(JSON.stringify({name:e.displayName,value:e.hydrateArgs||""})),d}var VT,WT=Symbol.for("astro.componentInstance"),wm=class{constructor(e,t,i,r){this[VT]=!0,this.result=e,this.props=t,this.factory=r,this.slotValues={};let a=zs(e,Me.Slot);for(let s in i){let o=i[s](a);this.slotValues[s]=()=>o}}async init(e){return this.returnValue=this.factory(e,this.props,this.slotValues),this.returnValue}async*render(){this.returnValue===void 0&&await this.init(this.result);let e=this.returnValue;Um(e)&&(e=await e),Ic(e)?yield*e.content:yield*Gs(e)}};VT=WT;function UI(n,e){if(n!=null)for(let t of Object.keys(n))$T.has(t)&&console.warn(`You are attempting to render <${e} ${t} />, but ${e} is an Astro component. Astro components do not render in the client and should not have a hydration directive. Please use a framework component for client rendering.`)}function jI(n,e,t,i,r={}){UI(i,e);let a=new wm(n,i,r,t);return RI(n,t)&&!n.propagators.has(t)&&n.propagators.set(t,a),a}function $m(n){return typeof n=="object"&&!!n[WT]}async function*Gs(n){if(n=await n,n instanceof yc)n.instructions&&(yield*n.instructions),yield n;else if(jm(n))yield n;else if(Array.isArray(n))for(let e of n)yield We(await Gs(e));else typeof n=="function"?yield*Gs(n()):typeof n=="string"?yield We(Au(n)):!n&&n!==0||(MT(n)?yield*Pc(n):$m(n)?yield*n.render():ArrayBuffer.isView(n)?yield n:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n)?yield*n:yield n)}var qT=Symbol.for("astro:slot-string"),yc=class extends Ma{constructor(e,t){super(e),this.instructions=t,this[qT]=!0}};function HI(n){return!!n[qT]}async function on(n,e,t){if(e){let i=zs(n,Me.Slot),r=Gs(typeof e=="function"?e(i):e),a="",s=null;for await(let o of r)typeof o.type=="string"?(s===null&&(s=[]),s.push(o)):a+=o;return We(new yc(a,s))}return t?on(n,t):""}async function GT(n,e={}){let t=null,i={};return e&&await Promise.all(Object.entries(e).map(([r,a])=>on(n,a).then(s=>{s.instructions&&(t===null&&(t=[]),t.push(...s.instructions)),i[r]=s}))),{slotInstructions:t,children:i}}var $I=Symbol.for("astro:fragment"),Tc=Symbol.for("astro:renderer"),Vm=new TextEncoder,VI=new TextDecoder;function Ou(n,e){if(typeof e.type=="string"){let t=e;switch(t.type){case"directive":{let{hydration:i}=t,r=i&&bI(n),a=i&&SI(n,i.directive),s=r?"both":a?"directive":null;if(s){let o=DI(s,i.directive);return We(o)}else return""}case"head":return n._metadata.hasRenderedHead?"":pT(n);case"maybe-head":{if(n._metadata.hasRenderedHead)return"";switch(t.scope){case Me.JSX|Me.Slot|Me.Astro:case Me.JSX|Me.Astro|Me.HeadBuffer:case Me.JSX|Me.Slot|Me.Astro|Me.HeadBuffer:return"";case Me.JSX|Me.Astro:{if(pm(n,Me.JSX))return"";break}case Me.Slot:case Me.Slot|Me.HeadBuffer:{if(pm(n,Me.RenderSlot))return"";break}case Me.HeadBuffer:{if(pm(n,Me.JSX|Me.HeadBuffer))return"";break}case Me.RenderSlot|Me.Astro:case Me.RenderSlot|Me.Astro|Me.JSX:case Me.RenderSlot|Me.Astro|Me.JSX|Me.HeadBuffer:return""}return pT(n)}}}else{if(HI(e)){let t="",i=e;if(i.instructions)for(let r of i.instructions)t+=Ou(n,r);return t+=e.toString(),t}return e.toString()}}var Pu=class{constructor(){this.parts=""}append(e,t){ArrayBuffer.isView(e)?this.parts+=VI.decode(e):this.parts+=Ou(t,e)}toString(){return this.parts}toArrayBuffer(){return Vm.encode(this.parts)}};function WI(n,e){if(e instanceof Uint8Array)return e;let t=Ou(n,e);return Vm.encode(t.toString())}var gT="astro-client-only",Kn=class{constructor(e){this.vnode=e,this.count=0}increment(){this.count++}haveNoTried(){return this.count===0}isCompleted(){return this.count>2}};Kn.symbol=Symbol("astro:jsx:skip");var Am,Wm=0;async function Xn(n,e){switch(!0){case e instanceof Ma:return e.toString().trim()===""?"":e;case typeof e=="string":return We(Au(e));case typeof e=="function":return e;case(!e&&e!==0):return"";case Array.isArray(e):return We((await Promise.all(e.map(i=>Xn(n,i)))).join(""))}let t;return e.props?e.props[Kn.symbol]?t=e.props[Kn.symbol]:t=new Kn(e):t=new Kn(e),km(n,e,t)}async function km(n,e,t){if(ku(e)){switch(!0){case!e.type:throw new Error(`Unable to render ${n._metadata.pathname} because it contains an undefined Component!
Did you forget to import the component or is it possible there is a typo?`);case e.type===Symbol.for("astro:fragment"):return Xn(n,e.props.children);case e.type.isAstroComponentFactory:{let i={},r={};for(let[o,u]of Object.entries(e.props??{}))o==="children"||u&&typeof u=="object"&&u.$$slot?r[o==="children"?"default":o]=()=>Xn(n,u):i[o]=u;let a=zs(n,Me.JSX);return We(await LI(a,e.type,i,r))}case(!e.type&&e.type!==0):return"";case(typeof e.type=="string"&&e.type!==gT):return We(await qI(n,e.type,e.props??{}))}if(e.type){let i=function(d){if(Array.isArray(d))return d.map(h=>i(h));if(!ku(d)){s.default.push(d);return}if("slot"in d.props){s[d.props.slot]=[...s[d.props.slot]??[],d],delete d.props.slot;return}s.default.push(d)};if(typeof e.type=="function"&&e.type["astro:renderer"]&&t.increment(),typeof e.type=="function"&&e.props["server:root"]){let d=await e.type(e.props??{});return await Xn(n,d)}if(typeof e.type=="function")if(t.haveNoTried()||t.isCompleted()){GI();try{let d=await e.type(e.props??{}),h;if(d&&d[wc])return h=await km(n,d,t),h;if(!d)return h=await km(n,d,t),h}catch(d){if(t.isCompleted())throw d;t.increment()}finally{zI()}}else t.increment();let{children:r=null,...a}=e.props??{},s={default:[]};i(r);for(let[d,h]of Object.entries(a))h.$$slot&&(s[d]=h,delete a[d]);let o=[],u={};for(let[d,h]of Object.entries(s))o.push(Xn(n,h).then(p=>{p.toString().trim().length!==0&&(u[d]=()=>p)}));await Promise.all(o),a[Kn.symbol]=t;let l;if(e.type===gT&&e.props["client:only"]?l=await _T(n,e.props["client:display-name"]??"",null,a,u):l=await _T(n,typeof e.type=="function"?e.type.name:e.type,e.type,a,u),typeof l!="string"&&Symbol.asyncIterator in l){let d=new Pu;for await(let h of l)d.append(h,n);return We(d.toString())}else return We(l)}}return We(`${e}`)}async function qI(n,e,{children:t,...i}){return We(`<${e}${hP(i)}${We((t==null||t=="")&&Hm.test(e)?"/>":`>${t==null?"":await Xn(n,t)}</${e}>`)}`)}function GI(){if(Wm++,!Am){Am=console.error;try{console.error=KI}catch{}}}function zI(){Wm--}function KI(n,...e){Wm>0&&typeof n=="string"&&n.includes("Warning: Invalid hook call.")&&n.includes("https://reactjs.org/link/invalid-hook-call")||Am(n,...e)}var Im="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXY",gm=Im.length;function XI(n){let e=0;if(n.length===0)return e;for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);e=(e<<5)-e+i,e=e&e}return e}function YI(n){let e,t="",i=XI(n),r=i<0?"Z":"";for(i=Math.abs(i);i>=gm;)e=i%gm,i=Math.floor(i/gm),t=Im[e]+t;return i>0&&(t=Im[i]+t),r+t}function QI(n){return typeof HTMLElement<"u"&&HTMLElement.isPrototypeOf(n)}async function JI(n,e,t,i){let r=ZI(e),a="";for(let s in t)a+=` ${s}="${Eu(await t[s])}"`;return We(`<${r}${a}>${await on(n,i?.default)}</${r}>`)}function ZI(n){let e=customElements.getName(n);return e||n.name.replace(/^HTML|Element$/g,"").replace(/[A-Z]/g,"-$&").toLowerCase().replace(/^-/,"html-")}var vT=new Map([["solid","solid-js"]]);function eP(n){switch(n?.split(".").pop()){case"svelte":return["@astrojs/svelte"];case"vue":return["@astrojs/vue"];case"jsx":case"tsx":return["@astrojs/react","@astrojs/preact","@astrojs/solid-js","@astrojs/vue (jsx)"];default:return["@astrojs/react","@astrojs/preact","@astrojs/solid-js","@astrojs/vue","@astrojs/svelte","@astrojs/lit"]}}function tP(n){return n===$I}function iP(n){return n&&typeof n=="object"&&n["astro:html"]}async function rP(n,e,t,i,r={}){var a,s;if(!t&&!i["client:only"])throw new Error(`Unable to render ${e} because it is ${t}!
Did you forget to import the component or is it possible there is a typo?`);let{renderers:o}=n._metadata,u={displayName:e},{hydration:l,isPage:d,props:h}=NI(e,i),p="",_;l&&(u.hydrate=l.directive,u.hydrateArgs=l.value,u.componentExport=l.componentExport,u.componentUrl=l.componentUrl);let D=eP(u.componentUrl),C=o.filter(V=>V.name!=="astro:jsx"),{children:S,slotInstructions:I}=await GT(n,r),L;if(u.hydrate!=="only"){let V=!1;try{V=t&&t[Tc]}catch{}if(V){let J=t[Tc];L=o.find(({name:Q})=>Q===J)}if(!L){let J;for(let Q of o)try{if(await Q.ssr.check.call({result:n},t,h,S)){L=Q;break}}catch(oe){J??(J=oe)}if(!L&&J)throw J}if(!L&&typeof HTMLElement=="function"&&QI(t))return JI(n,t,i,r)}else{if(u.hydrateArgs){let V=u.hydrateArgs,J=vT.has(V)?vT.get(V):V;L=o.find(({name:Q})=>Q===`@astrojs/${J}`||Q===J)}if(!L&&C.length===1&&(L=C[0]),!L){let V=(a=u.componentUrl)==null?void 0:a.split(".").pop();L=o.filter(({name:J})=>J===`@astrojs/${V}`||J===V)[0]}}if(L)u.hydrate==="only"?p=await on(n,r?.fallback):{html:p,attrs:_}=await L.ssr.renderToStaticMarkup.call({result:n},t,h,S,u);else{if(u.hydrate==="only")throw new lt({...ke.NoClientOnlyHint,message:ke.NoClientOnlyHint.message(u.displayName),hint:ke.NoClientOnlyHint.hint(D.map(V=>V.replace("@astrojs/","")).join("|"))});if(typeof t!="string"){let V=C.filter(Q=>D.includes(Q.name)),J=C.length>1;if(V.length===0)throw new lt({...ke.NoMatchingRenderer,message:ke.NoMatchingRenderer.message(u.displayName,(s=u?.componentUrl)==null?void 0:s.split(".").pop(),J,C.length),hint:ke.NoMatchingRenderer.hint(fT(D.map(Q=>"`"+Q+"`")))});if(V.length===1)L=V[0],{html:p,attrs:_}=await L.ssr.renderToStaticMarkup.call({result:n},t,h,S,u);else throw new Error(`Unable to render ${u.displayName}!

This component likely uses ${fT(D)},
but Astro encountered an error during server-side rendering.

Please ensure that ${u.displayName}:
1. Does not unconditionally access browser-specific globals like \`window\` or \`document\`.
   If this is unavoidable, use the \`client:only\` hydration directive.
2. Does not conditionally return \`null\` or \`undefined\` when rendered on the server.

If you're still stuck, please open an issue on GitHub or join us at https://astro.build/chat.`)}}if(L&&!L.clientEntrypoint&&L.name!=="@astrojs/lit"&&u.hydrate)throw new lt({...ke.NoClientEntrypoint,message:ke.NoClientEntrypoint.message(e,u.hydrate,L.name)});if(!p&&typeof t=="string"){let V=nP(t),J=Object.values(S).join(""),Q=Pc(await Ba`<${V}${Em(h)}${We(J===""&&Hm.test(V)?"/>":`>${J}</${V}>`)}`);p="";for await(let oe of Q)p+=oe}if(!l)return async function*(){I&&(yield*I),d||L?.name==="astro:jsx"?yield p:p&&p.length>0?yield We(p.replace(/\<\/?astro-slot\>/g,"")):yield""}();let G=YI(`<!--${u.componentExport.value}:${u.componentUrl}-->
${p}
${jT(h,u)}`),M=await BI({renderer:L,result:n,astroId:G,props:h,attrs:_},u),O=[];if(p){if(Object.keys(S).length>0)for(let V of Object.keys(S))p.includes(V==="default"?"<astro-slot>":`<astro-slot name="${V}">`)||O.push(V)}else O=Object.keys(S);let K=O.length>0?O.map(V=>`<template data-astro-template${V!=="default"?`="${V}"`:""}>${S[V]}</template>`).join(""):"";M.children=`${p??""}${K}`,M.children&&(M.props["await-children"]="");async function*z(){I&&(yield*I),yield{type:"directive",hydration:l,result:n},yield We(hc("astro-island",M,!1))}return z()}function nP(n){let e=/[&<>'"\s]+/g;return e.test(n)?n.trim().split(e)[0].trim():n}async function aP(n,e={}){let t=await on(n,e?.default);return t==null?t:We(t)}async function sP(n,e,t,i={}){let{slotInstructions:r,children:a}=await GT(n,i),s=e.render({slots:a}),o=r?r.map(u=>Ou(n,u)).join(""):"";return We(o+s)}function Xi(n,e,t,i,r={}){return Um(t)?Promise.resolve(t).then(a=>Xi(n,e,a,i,r)):tP(t)?aP(n,r):iP(t)?sP(n,t,i,r):NT(t)?jI(n,e,t,i,r):rP(n,e,t,i,r)}function _T(n,e,t,i,r={}){let a=Xi(n,e,t,i,r);return $m(a)?a.render():a}var zT=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Su=(n,e,t)=>(zT(n,e,"read from private field"),t?t.call(n):e.get(n)),yT=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},TT=(n,e,t,i)=>(zT(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),Pm=typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]",xc;function oP(){var n,e,t;return xc=(t=class extends Response{constructor(i,r){let a=i instanceof ReadableStream;super(a?null:i,r),yT(this,n,void 0),yT(this,e,void 0),TT(this,n,a),TT(this,e,i)}get body(){return Su(this,e)}async text(){if(Su(this,n)&&Pm){let i=new TextDecoder,r=Su(this,e),a="";for await(let s of uT(r))a+=i.decode(s);return a}return super.text()}async arrayBuffer(){if(Su(this,n)&&Pm){let i=Su(this,e),r=[],a=0;for await(let u of uT(i))r.push(u),a+=u.length;let s=new Uint8Array(a),o=0;for(let u of r)s.set(u,o),o+=u.length;return s}return super.arrayBuffer()}},n=new WeakMap,e=new WeakMap,t),xc}var uP=Pm?(n,e)=>typeof n=="string"||ArrayBuffer.isView(n)?new Response(n,e):typeof xc>"u"?new(oP())(n,e):new xc(n,e):(n,e)=>new Response(n,e),xT=Symbol.for("astro.needsHeadRendering");function lP(n){return xT in n&&!!n[xT]}async function bT(n,e,t){let i=new Pu,r=0;for await(let a of e)jm(a)&&r===0&&(r++,/<!doctype html/i.test(String(a))||(i.append(`<!DOCTYPE html>
`,n),t&&await t(i))),i.append(a,n);return i.toArrayBuffer()}async function dP(n){let e=n.propagators.values(),t=zs(n,Me.HeadBuffer);for(;;){let{value:i,done:r}=e.next();if(r)break;let a=await i.init(t);Ic(a)&&n.extraHead.push(a.head)}}async function cP(n,e,t,i,r,a){if(!NT(e)){let u={...t??{},"server:root":!0},l;try{let h=await Xi(n,e.name,e,u,null);$m(h)?l=h.render():l=h}catch(h){throw lt.is(h)&&!h.loc&&h.setLocation({file:a?.component}),h}let d=await bT(n,l,async h=>{if(lP(e))for await(let p of kc(n))h.append(p,n)});return new Response(d,{headers:new Headers([["Content-Type","text/html; charset=utf-8"],["Content-Length",d.byteLength.toString()]])})}let s=await e(n,t,i),o=Ic(s);if(MT(s)||o){await dP(n);let u=o?s.content:s,l=Pc(u),d=n.response,h=new Headers(d.headers),p;return r?p=new ReadableStream({start(D){async function C(){let S=0;try{for await(let I of l){jm(I)&&S===0&&(/<!doctype html/i.test(String(I))||D.enqueue(Vm.encode(`<!DOCTYPE html>
`)));let L=WI(n,I);D.enqueue(L),S++}D.close()}catch(I){lt.is(I)&&!I.loc&&I.setLocation({file:a?.component}),D.error(I)}}C()}}):(p=await bT(n,l),h.set("Content-Length",p.byteLength.toString())),uP(p,{...d,headers:h})}if(!(s instanceof Response))throw new lt({...ke.OnlyResponseCanBeReturned,message:ke.OnlyResponseCanBeReturned.message(a?.route,typeof s),location:{file:a?.component}});return s}function Lu(n,e){!n||typeof n=="function"&&Object.defineProperty(n,Tc,{value:e,enumerable:!1,writable:!1})}function hP(n,e,{class:t}={}){let i="";t&&(typeof n.class<"u"?n.class+=` ${t}`:typeof n["class:list"]<"u"?n["class:list"]=[n["class:list"],t]:n.class=t);for(let[r,a]of Object.entries(n))i+=Ac(a,r,!0);return We(i)}var fP=new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),bc={debug:20,info:30,warn:40,error:50,silent:90};function KT(n,e,t,i){let r=n.level,a=n.dest,s={type:t,level:e,message:i};bc[r]>bc[e]||a.write(s)}function Na(n,e,t){return KT(n,"warn",e,t)}function pP(n,e,t){return KT(n,"error",e,t)}function mP(...n){"_astroGlobalDebug"in globalThis&&globalThis._astroGlobalDebug(...n)}if(typeof process<"u"){let n=process;"argv"in n&&Array.isArray(n.argv)&&(n.argv.includes("--verbose")||n.argv.includes("--silent"))}var gP=["string","number","undefined"];function vP([n,e],t){if(!gP.includes(typeof e))throw new lt({...ke.GetStaticPathsInvalidRouteParam,message:ke.GetStaticPathsInvalidRouteParam.message(n,e,typeof e),location:{file:t}})}function _P(n,{ssr:e,logging:t,route:i}){if(e&&n.getStaticPaths&&!n.prerender&&Na(t,"getStaticPaths",'getStaticPaths() is ignored when "output: server" is set.'),(!e||n.prerender)&&!n.getStaticPaths)throw new lt({...ke.GetStaticPathsRequired,location:{file:i.component}})}function yP(n,e,t){if(!Array.isArray(n))throw new lt({...ke.InvalidGetStaticPathsReturn,message:ke.InvalidGetStaticPathsReturn.message(typeof n),location:{file:t.component}});n.forEach(i=>{if(i.params===void 0||i.params===null||i.params&&Object.keys(i.params).length===0)throw new lt({...ke.GetStaticPathsExpectedParams,location:{file:t.component}});if(typeof i.params!="object")throw new lt({...ke.InvalidGetStaticPathParam,message:ke.InvalidGetStaticPathParam.message(typeof i.params),location:{file:t.component}});for(let[r,a]of Object.entries(i.params))typeof a>"u"||typeof a=="string"||typeof a=="number"||Na(e,"getStaticPaths",`invalid path param: ${r}. A string, number or undefined value was expected, but got \`${JSON.stringify(a)}\`.`),typeof a=="string"&&a===""&&Na(e,"getStaticPaths",`invalid path param: ${r}. \`undefined\` expected for an optional param, but got empty string.`)})}function TP(n){return t=>{let i={};return n.forEach((r,a)=>{r.startsWith("...")?i[r.slice(3)]=t[a+1]?decodeURIComponent(t[a+1]):void 0:i[r]=decodeURIComponent(t[a+1])}),i}}function XT(n,e){let t=Object.entries(n).reduce((i,r)=>{vP(r,e);let[a,s]=r;return i[a]=s?.toString(),i},{});return JSON.stringify(t,Object.keys(n).sort())}var YT=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Ra=(n,e,t)=>(YT(n,e,"read from private field"),t?t.call(n):e.get(n)),vm=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},_m=(n,e,t,i)=>(YT(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),fc,Gn,pc,ST=Symbol.for("astro.clientAddress");function xP(n){return function(){switch(n){case"Astro.redirect":throw new lt(ke.StaticRedirectNotAvailable)}}}function bP(n){var e;if(!!n&&((e=n.expressions)==null?void 0:e.length)===1)return n.expressions[0]}var Fm=class{constructor(e,t,i){if(vm(this,fc,void 0),vm(this,Gn,void 0),vm(this,pc,void 0),_m(this,fc,e),_m(this,Gn,t),_m(this,pc,i),t)for(let r of Object.keys(t)){if(this[r]!==void 0)throw new lt({...ke.ReservedSlotName,message:ke.ReservedSlotName.message(r)});Object.defineProperty(this,r,{get(){return!0},enumerable:!0})}}has(e){return Ra(this,Gn)?Boolean(Ra(this,Gn)[e]):!1}async render(e,t=[]){if(!Ra(this,Gn)||!this.has(e))return;let i=zs(Ra(this,fc),Me.RenderSlot);if(!Array.isArray(t))Na(Ra(this,pc),"Astro.slots.render",`Expected second parameter to be an array, received a ${typeof t}. If you're trying to pass an array as a single argument and getting unexpected results, make sure you're passing your array as a item of an array. Ex: Astro.slots.render('default', [["Hello", "World"]])`);else if(t.length>0){let s=Ra(this,Gn)[e],o=typeof s=="function"?await s(i):await s,u=bP(o);if(u)return await on(i,()=>u(...t)).then(d=>d!=null?String(d):d);if(typeof o=="function")return await Xn(i,o(...t)).then(l=>l!=null?String(l):l)}let r=await on(i,Ra(this,Gn)[e]);return Ou(i,r)}};fc=new WeakMap;Gn=new WeakMap;pc=new WeakMap;var ym=null;function SP(n){let{markdown:e,params:t,pathname:i,renderers:r,request:a,resolve:s}=n,o=new URL(a.url),u=new Headers;u.set("Content-Type","text/html");let l={status:n.status,statusText:"OK",headers:u};Object.defineProperty(l,"headers",{value:l.headers,enumerable:!0,writable:!1});let d,h={styles:n.styles??new Set,scripts:n.scripts??new Set,links:n.links??new Set,propagation:n.propagation??new Map,propagators:new Map,extraHead:[],scope:0,cookies:d,createAstro(p,_,D){let C=new Fm(h,D,n.logging),S={__proto__:p,get clientAddress(){if(!(ST in a))throw n.adapterName?new lt({...ke.ClientAddressNotAvailable,message:ke.ClientAddressNotAvailable.message(n.adapterName)}):new lt(ke.StaticClientAddressNotAvailable);return Reflect.get(a,ST)},get cookies(){return d||(d=new _c(a),h.cookies=d,d)},params:t,props:_,request:a,url:o,redirect:n.ssr?(I,L)=>new Response(null,{status:L||302,headers:{Location:I}}):xP("Astro.redirect"),response:l,slots:C};return Object.defineProperty(S,"__renderMarkdown",{enumerable:!1,writable:!1,value:async function(I,L){if(typeof Deno<"u")throw new Error("Markdown is not supported in Deno SSR");if(!ym){let M="@astrojs/";M+="markdown-remark",ym=(await import(M)).renderMarkdown}let{code:G}=await ym(I,{...e,...L??{}});return G}}),S},resolve:s,_metadata:{renderers:r,pathname:i,hasHydrationScript:!1,hasRenderedHead:!1,hasDirectives:new Set},response:l};return h}function DP(n){return function(t,i={}){let{pageSize:r,params:a,props:s}=i,o=r||10,u="page",l=a||{},d=s||{},h;if(n.params.includes(`...${u}`))h=!1;else if(n.params.includes(`${u}`))h=!0;else throw new lt({...ke.PageNumberParamNotFound,message:ke.PageNumberParamNotFound.message(u)});let p=Math.max(1,Math.ceil(t.length/o));return[...Array(p).keys()].map(D=>{let C=D+1,S=o===1/0?0:(C-1)*o,I=Math.min(S+o,t.length),L={...l,[u]:h||C>1?String(C):void 0};return{params:L,props:{...d,page:{data:t.slice(S,I),start:S,end:I-1,size:o,total:t.length,currentPage:C,lastPage:p,url:{current:n.generate({...L}),next:C===p?void 0:n.generate({...L,page:String(C+1)}),prev:C===1?void 0:n.generate({...L,page:!h&&C-1===1?"":String(C-1)})}}}}})}}async function EP({isValidate:n,logging:e,mod:t,route:i,ssr:r}){if(_P(t,{ssr:r,logging:e,route:i}),r&&!t.prerender)return{staticPaths:Object.assign([],{keyed:new Map})};if(!t.getStaticPaths)throw new Error("Unexpected Error.");let a=[];a=await t.getStaticPaths({paginate:DP(i),rss(){throw new lt(ke.GetStaticPathsRemovedRSSHelper)}}),Array.isArray(a)&&(a=a.flat()),n&&yP(a,e,i);let s=a;s.keyed=new Map;for(let o of s){let u=XT(o.params,i.component);s.keyed.set(u,o)}return{staticPaths:s}}var Om=class{constructor(e,t="production"){this.cache={},this.logging=e,this.mode=t}clearAll(){this.cache={}}set(e,t){this.mode==="production"&&this.cache[e.component]&&Na(this.logging,"routeCache",`Internal Warning: route cache overwritten. (${e.component})`),this.cache[e.component]=t}get(e){return this.cache[e.component]}};function CP(n,e,t){let i=XT(e,t.component),r=n.keyed.get(i);if(r)return r;mP("findPathItemByKey",`Unexpected cache miss looking for ${i}`)}var QT=(n=>(n[n.NoMatchingStaticPath=0]="NoMatchingStaticPath",n))(QT||{});async function JT(n){let{logging:e,mod:t,route:i,routeCache:r,pathname:a,ssr:s}=n,o={},u;if(i&&!i.pathname){if(i.params.length){let h=i.pattern.exec(a);h&&(o=TP(i.params)(h))}let l=r.get(i);l||(l=await EP({mod:t,route:i,isValidate:!0,logging:e,ssr:s}),r.set(i,l));let d=CP(l.staticPaths,o,i);if(!d&&(s?t.prerender:!0))return 0;u=d?.props?{...d.props}:{}}else u={};return[o,u]}async function wP(n,e,t){var i,r;let a=await JT({logging:t.logging,mod:n,route:e.route,routeCache:t.routeCache,pathname:e.pathname,ssr:t.ssr});if(a===0)throw new lt({...ke.NoMatchingStaticPathFound,message:ke.NoMatchingStaticPathFound.message(e.pathname),hint:(i=e.route)!=null&&i.component?ke.NoMatchingStaticPathFound.hint([(r=e.route)==null?void 0:r.component]):""});let[s,o]=a,u=n.default;if(!u)throw new Error(`Expected an exported Astro component but received typeof ${typeof u}`);let l=SP({adapterName:t.adapterName,links:e.links,styles:e.styles,logging:t.logging,markdown:t.markdown,mode:t.mode,origin:e.origin,params:s,props:o,pathname:e.pathname,propagation:e.propagation,resolve:t.resolve,renderers:t.renderers,request:e.request,site:t.site,scripts:e.scripts,ssr:t.ssr,status:e.status??200});typeof n.components=="object"&&Object.assign(o,{components:n.components});let d=await cP(l,u,o,null,t.streaming,e.route);return l.cookies&&Bm(d,l.cookies),d}var DT=Symbol.for("astro.clientAddress");function AP({request:n,params:e,site:t,props:i,adapterName:r}){return{cookies:new _c(n),request:n,params:e,site:t?new URL(t):void 0,generator:`Astro v${PT}`,props:i,redirect(a,s){return new Response(null,{status:s||302,headers:{Location:a}})},url:new URL(n.url),get clientAddress(){if(!(DT in n))throw r?new lt({...ke.ClientAddressNotAvailable,message:ke.ClientAddressNotAvailable.message(r)}):new lt(ke.StaticClientAddressNotAvailable);return Reflect.get(n,DT)}}}async function kP(n,e,t,i){var r,a;let s=await JT({mod:n,route:t.route,routeCache:e.routeCache,pathname:t.pathname,logging:e.logging,ssr:e.ssr});if(s===QT.NoMatchingStaticPath)throw new lt({...ke.NoMatchingStaticPathFound,message:ke.NoMatchingStaticPathFound.message(t.pathname),hint:(r=t.route)!=null&&r.component?ke.NoMatchingStaticPathFound.hint([(a=t.route)==null?void 0:a.component]):""});let[o,u]=s,l=AP({request:t.request,params:o,props:u,site:e.site,adapterName:e.adapterName}),d=await hI(n,l,e.ssr);return d instanceof Response?(Bm(d,l.cookies),{type:"response",response:d}):(e.ssr&&!n.prerender&&(d.hasOwnProperty("headers")&&Na(i,"ssr","Setting headers is not supported when returning an object. Please return an instance of Response. See https://docs.astro.build/en/core-concepts/endpoints/#server-endpoints-api-routes for more information."),d.encoding&&Na(i,"ssr","`encoding` is ignored in SSR. To return a charset other than UTF-8, please return an instance of Response. See https://docs.astro.build/en/core-concepts/endpoints/#server-endpoints-api-routes for more information.")),{type:"simple",body:d.body,encoding:d.encoding,cookies:l.cookies})}var ET,Tm=1,IP={write(n){let e=console.error;bc[n.level]<bc.error&&(e=console.log);function t(){let a="",s=n.type;return s&&(a+=eT(fP.format(new Date)+" "),n.level==="info"?s=lc(iT(`[${s}]`)):n.level==="warn"?s=lc(lm(`[${s}]`)):n.level==="error"&&(s=lc(tT(`[${s}]`))),a+=`${s} `),Zy(a)}let i=n.message;i===ET?(Tm++,i=`${i} ${lm(`(x${Tm})`)}`):(ET=i,Tm=1);let r=t()+i;return e(r),!0}};function ZT(n){return n.endsWith("/")?n:n+"/"}function PP(n){return n[0]==="/"?n:"/"+n}function FP(n){return n.endsWith("/")?n.slice(0,n.length-1):n}function OP(n){return n.startsWith("/")?n.substring(1):n}function LP(n){return n.replace(/^\/|\/$/g,"")}function RP(n){return typeof n=="string"||n instanceof String}function MP(...n){return n.filter(RP).map(LP).join("/")}function ex(n){let e=n.request,t=new URL(e.url),i=n.origin??t.origin,r=n.pathname??t.pathname;return{...n,origin:i,pathname:r,url:t}}function NP(n){return ZT(new URL(n||"/","http://localhost/").pathname)}function tx(n,e){let t=NP(e),i=cm(n);return ZT(t)+OP(i)}function BP(n,e){return{props:{rel:"stylesheet",href:tx(n,e)},children:""}}function UP(n,e){return new Set(n.map(t=>BP(t,e)))}function jP(n,e){return n.type==="external"?HP(n.value,e):{props:{type:"module"},children:n.value}}function HP(n,e){return{props:{type:"module",src:tx(n,e)},children:""}}function xm(n,e){return e.routes.find(t=>t.pattern.test(decodeURI(n)))}function $P(n,e){let t=n.map(a=>"/"+a.map(s=>s.spread?`:${s.content.slice(3)}(.*)?`:s.dynamic?`:${s.content}`:s.content.normalize().replace(/\?/g,"%3F").replace(/#/g,"%23").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("")).join(""),i="";return e==="always"&&n.length&&(i="/"),Hy(t+i)}function CT(n){return{route:n.route,type:n.type,pattern:new RegExp(n.pattern),params:n.params,component:n.component,generate:$P(n.segments,n._meta.trailingSlash),pathname:n.pathname||void 0,segments:n.segments,prerender:n.prerender}}function ix(n){let e=[];for(let r of n.routes){e.push({...r,routeData:CT(r.routeData)});let a=r;a.routeData=CT(r.routeData)}let t=new Set(n.assets),i=new Map(n.propagation);return{...n,assets:t,propagation:i,routes:e}}var qm=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)},Ct=(n,e,t)=>(qm(n,e,"read from private field"),t?t.call(n):e.get(n)),br=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},$s=(n,e,t,i)=>(qm(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),bm=(n,e,t)=>(qm(n,e,"access private method"),t),Fu,sn,Vs,Sc,Gm,qs,Cu,mc,gc,Lm,Rm,rx,Dc=class{constructor(e,t=!0){br(this,gc),br(this,Rm),br(this,Fu,void 0),br(this,sn,void 0),br(this,Vs,void 0),br(this,Sc,void 0),br(this,Gm,new TextEncoder),br(this,qs,{dest:IP,level:"info"}),br(this,Cu,void 0),br(this,mc,void 0),$s(this,sn,e),$s(this,Vs,{routes:e.routes.map(i=>i.routeData)}),$s(this,Sc,new Map(e.routes.map(i=>[i.routeData,i]))),$s(this,Fu,{adapterName:e.adapterName,logging:Ct(this,qs),markdown:e.markdown,mode:"production",renderers:e.renderers,async resolve(i){if(!(i in e.entryModules))throw new Error(`Unable to resolve [${i}]`);let r=e.entryModules[i];switch(!0){case r.startsWith("data:"):case r.length===0:return r;default:return PP(MP(e.base,r))}},routeCache:new Om(Ct(this,qs)),site:Ct(this,sn).site,ssr:!0,streaming:t}),$s(this,Cu,Ct(this,sn).base||"/"),$s(this,mc,FP(Ct(this,Cu)))}removeBase(e){return e.startsWith(Ct(this,Cu))?e.slice(Ct(this,mc).length+1):e}match(e,{matchNotFound:t=!1}={}){let i=new URL(e.url);if(Ct(this,sn).assets.has(i.pathname))return;let r="/"+this.removeBase(i.pathname),a=xm(r,Ct(this,Vs));return a?a.prerender?void 0:a:t?xm("/404",Ct(this,Vs)):void 0}async render(e,t){let i=200;if(!t&&(t=this.match(e),t||(i=404,t=this.match(e,{matchNotFound:!0})),!t))return new Response(null,{status:404,statusText:"Not found"});t.route==="/404"&&(i=404);let r=Ct(this,sn).pageMap.get(t.component);if(t.type==="page"){let a=await bm(this,gc,Lm).call(this,e,t,r,i);if(a.status===500){let s=xm("/500",Ct(this,Vs));if(s){r=Ct(this,sn).pageMap.get(s.component);try{return await bm(this,gc,Lm).call(this,e,s,r,500)}catch{}}}return a}else{if(t.type==="endpoint")return bm(this,Rm,rx).call(this,e,t,r,i);throw new Error(`Unsupported route type [${t.type}].`)}}setCookieHeaders(e){return rI(e)}};Fu=new WeakMap;sn=new WeakMap;Vs=new WeakMap;Sc=new WeakMap;Gm=new WeakMap;qs=new WeakMap;Cu=new WeakMap;mc=new WeakMap;gc=new WeakSet;Lm=async function(n,e,t,i=200){let r=new URL(n.url),a="/"+this.removeBase(r.pathname),s=Ct(this,Sc).get(e),o=UP(s.links),u=new Set;for(let l of s.scripts)"stage"in l?l.stage==="head-inline"&&u.add({props:{},children:l.children}):u.add(jP(l));try{let l=ex({request:n,origin:r.origin,pathname:a,propagation:Ct(this,sn).propagation,scripts:u,links:o,route:e,status:i});return await wP(t,l,Ct(this,Fu))}catch(l){return pP(Ct(this,qs),"ssr",l.stack||l.message||String(l)),new Response(null,{status:500,statusText:"Internal server error"})}};Rm=new WeakSet;rx=async function(n,e,t,i=200){let r=new URL(n.url),a="/"+this.removeBase(r.pathname),s=t,o=ex({request:n,origin:r.origin,pathname:a,route:e,status:i}),u=await kP(s,Ct(this,Fu),o,Ct(this,qs));if(u.type==="response"){if(u.response.headers.get("X-Astro-Response")==="Not-Found"){let l=new Request(new URL("/404",n.url)),d=this.match(l);if(d)return this.render(l,d)}return u.response}else{let l=u.body,d=new Headers,h=wT.default.getType(r.pathname);h?d.set("Content-Type",`${h};charset=utf-8`):d.set("Content-Type","text/plain;charset=utf-8");let p=Ct(this,Gm).encode(l);d.set("Content-Length",p.byteLength.toString());let _=new Response(p,{status:200,headers:d});return Bm(_,u.cookies),_}};var nx=n=>n.trim().replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase());async function VP(n,e,{default:t=null,...i}={}){if(typeof n!="function")return!1;let r={};for(let[a,s]of Object.entries(i)){let o=nx(a);r[o]=s}try{return(await n({...e,...r,children:t}))[wc]}catch{}return!1}async function WP(n,e={},{default:t=null,...i}={}){let r={};for(let[o,u]of Object.entries(i)){let l=nx(o);r[l]=u}let{result:a}=this;return{html:await Xn(a,mI(n,{...e,...r,children:t}))}}var ax={check:VP,renderToStaticMarkup:WP};var q=Le(Ht()),he=Le(Nu()),Ce=Le(fx()),lD=Le(Km()),Z0=Le(Qm()),l0=Le(ig());var ag=Le(ng()),cn=Le(Ht()),Mx="http://example.com",CF=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=cn.default.location&&cn.default.location.href||"");var i=typeof cn.default.URL=="function",r=/^\/\//.test(e),a=!cn.default.location&&!/\/\//i.test(e);if(i?e=new cn.default.URL(e,cn.default.location||Mx):/\/\//i.test(e)||(e=ag.default.buildAbsoluteURL(cn.default.location&&cn.default.location.href||"",e)),i){var s=new URL(t,e);return a?s.href.slice(Mx.length):r?s.href.slice(s.protocol.length):s.href}return ag.default.buildAbsoluteURL(e,t)},Nx=CF;function vt(){return vt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vt.apply(this,arguments)}var Yn=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(i,r){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(r)},e.off=function(i,r){if(!this.listeners[i])return!1;var a=this.listeners[i].indexOf(r);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(a,1),a>-1},e.trigger=function(i){var r=this.listeners[i];if(!!r)if(arguments.length===2)for(var a=r.length,s=0;s<a;++s)r[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),u=r.length,l=0;l<u;++l)r[l].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(r){i.push(r)})},n}();var sg=Le(Ht()),wF=function(e){return sg.default.atob?sg.default.atob(e):Buffer.from(e,"base64").toString("binary")};function hn(n){for(var e=wF(n),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}var lg=class extends Yn{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}},AF=String.fromCharCode(9),og=function(n){let e=/([0-9.]*)?@?([0-9.]*)?/.exec(n||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},kF=function(){let n="[^=]*",e='"[^"]*"|[^,]*',t="(?:"+n+")=(?:"+e+")";return new RegExp("(?:^|,)("+t+")")},rr=function(n){let e={};if(!n)return e;let t=n.split(kF()),i=t.length,r;for(;i--;)t[i]!==""&&(r=/([^=]*)=(.*)/.exec(t[i]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),e[r[0]]=r[1]);return e},dg=class extends Yn{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((a,s)=>{let o=s(e);return o===e?a:a.concat([o])},[e]).forEach(a=>{for(let s=0;s<this.customParsers.length;s++)if(this.customParsers[s].call(this,a))return;if(a.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:a.slice(1)});return}if(a=a.replace("\r",""),t=/^#EXTM3U/.exec(a),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(a),t){i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),this.trigger("data",i);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(a),t){i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(a),t){i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(a),t){i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(a),t){i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(a),t){i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(a),t){i=vt(og(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(a),t){i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(a),t){if(i={type:"tag",tagType:"map"},t[1]){let s=rr(t[1]);s.URI&&(i.uri=s.URI),s.BYTERANGE&&(i.byterange=og(s.BYTERANGE))}this.trigger("data",i);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(a),t){if(i={type:"tag",tagType:"stream-inf"},t[1]){if(i.attributes=rr(t[1]),i.attributes.RESOLUTION){let s=i.attributes.RESOLUTION.split("x"),o={};s[0]&&(o.width=parseInt(s[0],10)),s[1]&&(o.height=parseInt(s[1],10)),i.attributes.RESOLUTION=o}i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))}this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(a),t){i={type:"tag",tagType:"media"},t[1]&&(i.attributes=rr(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-ENDLIST/.exec(a),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(a),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(a),t){i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(a),t){i={type:"tag",tagType:"key"},t[1]&&(i.attributes=rr(t[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(t=/^#EXT-X-START:(.*)$/.exec(a),t){i={type:"tag",tagType:"start"},t[1]&&(i.attributes=rr(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(a),t){i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(a),t){i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(a),t){i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(a),t&&t[1]){i={type:"tag",tagType:"skip"},i.attributes=rr(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(AF)),this.trigger("data",i);return}if(t=/^#EXT-X-PART:(.*)$/.exec(a),t&&t[1]){i={type:"tag",tagType:"part"},i.attributes=rr(t[1]),["DURATION"].forEach(function(s){i.attributes.hasOwnProperty(s)&&(i.attributes[s]=parseFloat(i.attributes[s]))}),["INDEPENDENT","GAP"].forEach(function(s){i.attributes.hasOwnProperty(s)&&(i.attributes[s]=/YES/.test(i.attributes[s]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=og(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(a),t&&t[1]){i={type:"tag",tagType:"server-control"},i.attributes=rr(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(s){i.attributes.hasOwnProperty(s)&&(i.attributes[s]=parseFloat(i.attributes[s]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(s){i.attributes.hasOwnProperty(s)&&(i.attributes[s]=/YES/.test(i.attributes[s]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(a),t&&t[1]){i={type:"tag",tagType:"part-inf"},i.attributes=rr(t[1]),["PART-TARGET"].forEach(function(s){i.attributes.hasOwnProperty(s)&&(i.attributes[s]=parseFloat(i.attributes[s]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(a),t&&t[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=rr(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(s){if(i.attributes.hasOwnProperty(s)){i.attributes[s]=parseInt(i.attributes[s],10);let o=s==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[o]=i.attributes[s],delete i.attributes[s]}}),this.trigger("data",i);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(a),t&&t[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=rr(t[1]),["LAST-MSN","LAST-PART"].forEach(function(s){i.attributes.hasOwnProperty(s)&&(i.attributes[s]=parseInt(i.attributes[s],10))}),this.trigger("data",i);return}this.trigger("data",{type:"tag",data:a.slice(4)})})}addParser({expression:e,customType:t,dataParser:i,segment:r}){typeof i!="function"&&(i=a=>a),this.customParsers.push(a=>{if(e.exec(a))return this.trigger("data",{type:"custom",data:i(a),customType:t,segment:r}),!0})}addTagMapper({expression:e,map:t}){let i=r=>e.test(r)?t(r):r;this.tagMappers.push(i)}},IF=n=>n.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Xs=function(n){let e={};return Object.keys(n).forEach(function(t){e[IF(t)]=n[t]}),e},ug=function(n){let{serverControl:e,targetDuration:t,partTargetDuration:i}=n;if(!e)return;let r="#EXT-X-SERVER-CONTROL",a="holdBack",s="partHoldBack",o=t&&t*3,u=i&&i*2;t&&!e.hasOwnProperty(a)&&(e[a]=o,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[a]<o&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${e[a]}) to targetDuration * 3 (${o})`}),e[a]=o),i&&!e.hasOwnProperty(s)&&(e[s]=i*3,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[s]}).`})),i&&e[s]<u&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${e[s]}) to partTargetDuration * 2 (${u}).`}),e[s]=u)},Rc=class extends Yn{constructor(){super(),this.lineStream=new lg,this.parseStream=new dg,this.lineStream.pipe(this.parseStream);let e=this,t=[],i={},r,a,s=!1,o=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",d=0;this.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};let h=0,p=0;this.on("end",()=>{i.uri||!i.parts&&!i.preloadHints||(!i.map&&r&&(i.map=r),!i.key&&a&&(i.key=a),!i.timeline&&typeof d=="number"&&(i.timeline=d),this.manifest.preloadSegment=i)}),this.parseStream.on("data",function(_){let D,C;({tag(){({version(){_.version&&(this.manifest.version=_.version)},"allow-cache"(){this.manifest.allowCache=_.allowed,"allowed"in _||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){let S={};"length"in _&&(i.byterange=S,S.length=_.length,"offset"in _||(_.offset=h)),"offset"in _&&(i.byterange=S,S.offset=_.offset),h=S.offset+S.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),_.duration>0&&(i.duration=_.duration),_.duration===0&&(i.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=t},key(){if(!_.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(_.attributes.METHOD==="NONE"){a=null;return}if(!_.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(_.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:_.attributes};return}if(_.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:_.attributes.URI};return}if(_.attributes.KEYFORMAT===l){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(_.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(_.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),_.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(_.attributes.KEYID&&_.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:_.attributes.KEYFORMAT,keyId:_.attributes.KEYID.substring(2)},pssh:hn(_.attributes.URI.split(",")[1])};return}_.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:_.attributes.METHOD||"AES-128",uri:_.attributes.URI},typeof _.attributes.IV<"u"&&(a.iv=_.attributes.IV)},"media-sequence"(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+_.number});return}this.manifest.mediaSequence=_.number},"discontinuity-sequence"(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+_.number});return}this.manifest.discontinuitySequence=_.number,d=_.number},"playlist-type"(){if(!/VOD|EVENT/.test(_.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+_.playlist});return}this.manifest.playlistType=_.playlistType},map(){r={},_.uri&&(r.uri=_.uri),_.byterange&&(r.byterange=_.byterange),a&&(r.key=a)},"stream-inf"(){if(this.manifest.playlists=t,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!_.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}i.attributes||(i.attributes={}),vt(i.attributes,_.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(_.attributes&&_.attributes.TYPE&&_.attributes["GROUP-ID"]&&_.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}let S=this.manifest.mediaGroups[_.attributes.TYPE];S[_.attributes["GROUP-ID"]]=S[_.attributes["GROUP-ID"]]||{},D=S[_.attributes["GROUP-ID"]],C={default:/yes/i.test(_.attributes.DEFAULT)},C.default?C.autoselect=!0:C.autoselect=/yes/i.test(_.attributes.AUTOSELECT),_.attributes.LANGUAGE&&(C.language=_.attributes.LANGUAGE),_.attributes.URI&&(C.uri=_.attributes.URI),_.attributes["INSTREAM-ID"]&&(C.instreamId=_.attributes["INSTREAM-ID"]),_.attributes.CHARACTERISTICS&&(C.characteristics=_.attributes.CHARACTERISTICS),_.attributes.FORCED&&(C.forced=/yes/i.test(_.attributes.FORCED)),D[_.attributes.NAME]=C},discontinuity(){d+=1,i.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=_.dateTimeString,this.manifest.dateTimeObject=_.dateTimeObject),i.dateTimeString=_.dateTimeString,i.dateTimeObject=_.dateTimeObject},targetduration(){if(!isFinite(_.duration)||_.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+_.duration});return}this.manifest.targetDuration=_.duration,ug.call(this,this.manifest)},start(){if(!_.attributes||isNaN(_.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:_.attributes["TIME-OFFSET"],precise:_.attributes.PRECISE}},"cue-out"(){i.cueOut=_.data},"cue-out-cont"(){i.cueOutCont=_.data},"cue-in"(){i.cueIn=_.data},skip(){this.manifest.skip=Xs(_.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",_.attributes,["SKIPPED-SEGMENTS"])},part(){s=!0;let S=this.manifest.segments.length,I=Xs(_.attributes);i.parts=i.parts||[],i.parts.push(I),I.byterange&&(I.byterange.hasOwnProperty("offset")||(I.byterange.offset=p),p=I.byterange.offset+I.byterange.length);let L=i.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${L} for segment #${S}`,_.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((G,M)=>{G.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${M} lacks required attribute(s): LAST-PART`})})},"server-control"(){let S=this.manifest.serverControl=Xs(_.attributes);S.hasOwnProperty("canBlockReload")||(S.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),ug.call(this,this.manifest),S.canSkipDateranges&&!S.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){let S=this.manifest.segments.length,I=Xs(_.attributes),L=I.type&&I.type==="PART";i.preloadHints=i.preloadHints||[],i.preloadHints.push(I),I.byterange&&(I.byterange.hasOwnProperty("offset")||(I.byterange.offset=L?p:0,L&&(p=I.byterange.offset+I.byterange.length)));let G=i.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${G} for segment #${S}`,_.attributes,["TYPE","URI"]),!!I.type)for(let M=0;M<i.preloadHints.length-1;M++){let O=i.preloadHints[M];!O.type||O.type===I.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${G} for segment #${S} has the same TYPE ${I.type} as preload hint #${M}`})}},"rendition-report"(){let S=Xs(_.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(S);let I=this.manifest.renditionReports.length-1,L=["LAST-MSN","URI"];s&&L.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${I}`,_.attributes,L)},"part-inf"(){this.manifest.partInf=Xs(_.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",_.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),ug.call(this,this.manifest)}}[_.tagType]||o).call(e)},uri(){i.uri=_.uri,t.push(i),this.manifest.targetDuration&&!("duration"in i)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),i.duration=this.manifest.targetDuration),a&&(i.key=a),i.timeline=d,r&&(i.map=r),p=0,i={}},comment(){},custom(){_.segment?(i.custom=i.custom||{},i.custom[_.customType]=_.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[_.customType]=_.data)}})[_.type].call(e)})}warnOnMissingAttributes_(e,t,i){let r=[];i.forEach(function(a){t.hasOwnProperty(a)||r.push(a)}),r.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${r.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}};var Mc=Le(Ht()),Ha={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},PF=["video","audio","text"],Bx=["Video","Audio","Text"],cg=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,r){var a=("00"+Number(i).toString(16)).slice(-2),s=("00"+Number(r).toString(16)).slice(-2);return"avc1."+a+"00"+s})};var nr=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(r){r=r.trim();var a;PF.forEach(function(s){var o=Ha[s].exec(r.toLowerCase());if(!(!o||o.length<=1)){a=s;var u=r.substring(0,o[1].length),l=r.replace(u,"");i.push({type:u,details:l,mediaType:s})}}),a||i.push({type:r,details:"",mediaType:"unknown"})}),i},Ux=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var r in i){var a=i[r];if(a.default&&a.playlists)return nr(a.playlists[0].attributes.CODECS)}return null};var hg=function(e){return e===void 0&&(e=""),Ha.audio.test(e.trim().toLowerCase())},FF=function(e){return e===void 0&&(e=""),Ha.text.test(e.trim().toLowerCase())},Ys=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(a){return cg(a.trim())}),i="video";t.length===1&&hg(t[0])?i="audio":t.length===1&&FF(t[0])&&(i="application");var r="mp4";return t.every(function(a){return Ha.mp4.test(a)})?r="mp4":t.every(function(a){return Ha.webm.test(a)})?r="webm":t.every(function(a){return Ha.ogg.test(a)})&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},$u=function(e){return e===void 0&&(e=""),Mc.default.MediaSource&&Mc.default.MediaSource.isTypeSupported&&Mc.default.MediaSource.isTypeSupported(Ys(e))||!1},Nc=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<Bx.length;i++){var r=Bx[i];if(Ha["muxer"+r].test(t))return!0}return!1})},fg="mp4a.40.2",jx="avc1.4d400d";var OF=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,LF=/^application\/dash\+xml/i,pg=function(e){return OF.test(e)?"hls":LF.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null};var Hx=Le(Ht());var RF=function(e){return e.toString(2).length},MF=function(e){return Math.ceil(RF(e)/8)};var gg=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},NF=function(e){return gg(e)},ve=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!NF(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))};var Nt=Hx.default.BigInt||Number,mg=[Nt("0x1"),Nt("0x100"),Nt("0x10000"),Nt("0x1000000"),Nt("0x100000000"),Nt("0x10000000000"),Nt("0x1000000000000"),Nt("0x100000000000000"),Nt("0x10000000000000000")],uH=function(){var n=new Uint16Array([65484]),e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"}();var vg=function(e,t){var i=t===void 0?{}:t,r=i.signed,a=r===void 0?!1:r,s=i.le,o=s===void 0?!1:s;e=ve(e);var u=o?"reduce":"reduceRight",l=e[u]?e[u]:Array.prototype[u],d=l.call(e,function(p,_,D){var C=o?D:Math.abs(D+1-e.length);return p+Nt(_)*mg[C]},Nt(0));if(a){var h=mg[e.length]/Nt(2)-Nt(1);d=Nt(d),d>h&&(d-=h,d-=h,d-=Nt(2))}return Number(d)},$x=function(e,t){var i=t===void 0?{}:t,r=i.le,a=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Nt(e);for(var s=MF(e),o=new Uint8Array(new ArrayBuffer(s)),u=0;u<s;u++){var l=a?u:Math.abs(u+1-o.length);o[l]=Number(e/mg[u]&Nt(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=u===0?1:2)}return o},_g=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,ve(e));try{return decodeURIComponent(escape(t))}catch{}return t},Bc=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i},Vx=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return ve(t[0]);var r=t.reduce(function(o,u,l){return o+(u.byteLength||u.length)},0),a=new Uint8Array(r),s=0;return t.forEach(function(o){o=ve(o),a.set(o,s),s+=o.byteLength}),a},ze=function(e,t,i){var r=i===void 0?{}:i,a=r.offset,s=a===void 0?0:a,o=r.mask,u=o===void 0?[]:o;e=ve(e),t=ve(t);var l=t.every?t.every:Array.prototype.every;return t.length&&e.length-s>=t.length&&l.call(t,function(d,h){var p=u[h]?u[h]&e[s+h]:e[s+h];return d===p})};var yg=Le(ng()),fn=Le(Ht()),Wx="http://example.com",BF=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=fn.default.location&&fn.default.location.href||"");var i=typeof fn.default.URL=="function",r=/^\/\//.test(e),a=!fn.default.location&&!/\/\//i.test(e);if(i?e=new fn.default.URL(e,fn.default.location||Wx):/\/\//i.test(e)||(e=yg.default.buildAbsoluteURL(fn.default.location&&fn.default.location.href||"",e)),i){var s=new URL(t,e);return a?s.href.slice(Wx.length):r?s.href.slice(s.protocol.length):s.href}return yg.default.buildAbsoluteURL(e,t)},Dr=BF;var Zt=Le(Ht());var Uc=function(e,t,i){t.forEach(function(r){for(var a in e.mediaGroups[r])for(var s in e.mediaGroups[r][a]){var o=e.mediaGroups[r][a][s];i(o,r,a,s)}})};var qb=Le(Rg());var Bb=n=>!!n&&typeof n=="object",Wt=(...n)=>n.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(i=>{Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):Bb(e[i])&&Bb(t[i])?e[i]=Wt(e[i],t[i]):e[i]=t[i]}),e),{}),Gb=n=>Object.keys(n).map(e=>n[e]),hO=(n,e)=>{let t=[];for(let i=n;i<e;i++)t.push(i);return t},Yc=n=>n.reduce((e,t)=>e.concat(t),[]),zb=n=>{if(!n.length)return[];let e=[];for(let t=0;t<n.length;t++)e.push(n[t]);return e},fO=(n,e)=>n.reduce((t,i,r)=>(i[e]&&t.push(r),t),[]),pO=(n,e)=>Gb(n.reduce((t,i)=>(i.forEach(r=>{t[e(r)]=r}),t),{})),oo={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},tl=({baseUrl:n="",source:e="",range:t="",indexRange:i=""})=>{let r={uri:e,resolvedUri:Dr(n||"",e)};if(t||i){let s=(t||i).split("-"),o=Zt.default.BigInt?Zt.default.BigInt(s[0]):parseInt(s[0],10),u=Zt.default.BigInt?Zt.default.BigInt(s[1]):parseInt(s[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),u<Number.MAX_SAFE_INTEGER&&typeof u=="bigint"&&(u=Number(u));let l;typeof u=="bigint"||typeof o=="bigint"?l=Zt.default.BigInt(u)-Zt.default.BigInt(o)+Zt.default.BigInt(1):l=u-o+1,typeof l=="bigint"&&l<Number.MAX_SAFE_INTEGER&&(l=Number(l)),r.byterange={length:l,offset:o}}return r},mO=n=>{let e;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=Zt.default.BigInt(n.offset)+Zt.default.BigInt(n.length)-Zt.default.BigInt(1):e=n.offset+n.length-1,`${n.offset}-${e}`},Ub=n=>(n&&typeof n!="number"&&(n=parseInt(n,10)),isNaN(n)?null:n),gO={static(n){let{duration:e,timescale:t=1,sourceDuration:i,periodDuration:r}=n,a=Ub(n.endNumber),s=e/t;return typeof a=="number"?{start:0,end:a}:typeof r=="number"?{start:0,end:r/s}:{start:0,end:i/s}},dynamic(n){let{NOW:e,clientOffset:t,availabilityStartTime:i,timescale:r=1,duration:a,periodStart:s=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:u=1/0}=n,l=Ub(n.endNumber),d=(e+t)/1e3,h=i+s,_=d+o-h,D=Math.ceil(_*r/a),C=Math.floor((d-h-u)*r/a),S=Math.floor((d-h)*r/a);return{start:Math.max(0,C),end:typeof l=="number"?l:Math.min(D,S)}}},vO=n=>e=>{let{duration:t,timescale:i=1,periodStart:r,startNumber:a=1}=n;return{number:a+e,duration:t/i,timeline:r,time:e*t}},Ng=n=>{let{type:e,duration:t,timescale:i=1,periodDuration:r,sourceDuration:a}=n,{start:s,end:o}=gO[e](n),u=hO(s,o).map(vO(n));if(e==="static"){let l=u.length-1,d=typeof r=="number"?r:a;u[l].duration=d-t/i*l}return u},Kb=n=>{let{baseUrl:e,initialization:t={},sourceDuration:i,indexRange:r="",periodStart:a,presentationTime:s,number:o=0,duration:u}=n;if(!e)throw new Error(oo.NO_BASE_URL);let l=tl({baseUrl:e,source:t.sourceURL,range:t.range}),d=tl({baseUrl:e,source:e,indexRange:r});if(d.map=l,u){let h=Ng(n);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else i&&(d.duration=i,d.timeline=a);return d.presentationTime=s||a,d.number=o,[d]},Qc=(n,e,t)=>{let i=n.sidx.map?n.sidx.map:null,r=n.sidx.duration,a=n.timeline||0,s=n.sidx.byterange,o=s.offset+s.length,u=e.timescale,l=e.references.filter(S=>S.referenceType!==1),d=[],h=n.endList?"static":"dynamic",p=n.sidx.timeline,_=p,D=n.mediaSequence||0,C;typeof e.firstOffset=="bigint"?C=Zt.default.BigInt(o)+e.firstOffset:C=o+e.firstOffset;for(let S=0;S<l.length;S++){let I=e.references[S],L=I.referencedSize,G=I.subsegmentDuration,M;typeof C=="bigint"?M=C+Zt.default.BigInt(L)-Zt.default.BigInt(1):M=C+L-1;let O=`${C}-${M}`,z=Kb({baseUrl:t,timescale:u,timeline:a,periodStart:p,presentationTime:_,number:D,duration:G,sourceDuration:r,indexRange:O,type:h})[0];i&&(z.map=i),d.push(z),typeof C=="bigint"?C+=Zt.default.BigInt(L):C+=L,_+=G/u,D++}return n.segments=d,n},_O=["AUDIO","SUBTITLES"],yO=1/60,Xb=n=>pO(n,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),TO=(n,e)=>{for(let t=0;t<n.length;t++)if(n[t].attributes.NAME===e)return n[t];return null},jb=n=>{let e=[];return Uc(n,_O,(t,i,r,a)=>{e=e.concat(t.playlists||[])}),e},Hb=({playlist:n,mediaSequence:e})=>{n.mediaSequence=e,n.segments.forEach((t,i)=>{t.number=n.mediaSequence+i})},xO=({oldPlaylists:n,newPlaylists:e,timelineStarts:t})=>{e.forEach(i=>{i.discontinuitySequence=t.findIndex(function({timeline:u}){return u===i.timeline});let r=TO(n,i.attributes.NAME);if(!r||i.sidx)return;let a=i.segments[0],s=r.segments.findIndex(function(u){return Math.abs(u.presentationTime-a.presentationTime)<yO});if(s===-1){Hb({playlist:i,mediaSequence:r.mediaSequence+r.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!r.segments.length&&i.timeline>r.timeline||r.segments.length&&i.timeline>r.segments[r.segments.length-1].timeline)&&i.discontinuitySequence--;return}r.segments[s].discontinuity&&!a.discontinuity&&(a.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),Hb({playlist:i,mediaSequence:r.segments[s].number})})},bO=({oldManifest:n,newManifest:e})=>{let t=n.playlists.concat(jb(n)),i=e.playlists.concat(jb(e));return e.timelineStarts=Xb([n.timelineStarts,e.timelineStarts]),xO({oldPlaylists:t,newPlaylists:i,timelineStarts:e.timelineStarts}),e},il=n=>n&&n.uri+"-"+mO(n.byterange),Mg=n=>Gb(n.reduce((t,i)=>{let r=i.attributes.id+(i.attributes.lang||"");return t[r]?(i.segments&&(i.segments[0]&&(i.segments[0].discontinuity=!0),t[r].segments.push(...i.segments)),i.attributes.contentProtection&&(t[r].attributes.contentProtection=i.attributes.contentProtection)):(t[r]=i,t[r].attributes.timelineStarts=[]),t[r].attributes.timelineStarts.push({start:i.attributes.periodStart,timeline:i.attributes.periodStart}),t},{})).map(t=>(t.discontinuityStarts=fO(t.segments||[],"discontinuity"),t)),Bg=(n,e)=>{let t=il(n.sidx),i=t&&e[t]&&e[t].sidx;return i&&Qc(n,i,n.sidx.resolvedUri),n},SO=(n,e={})=>{if(!Object.keys(e).length)return n;for(let t in n)n[t]=Bg(n[t],e);return n},DO=({attributes:n,segments:e,sidx:t,mediaSequence:i,discontinuitySequence:r,discontinuityStarts:a},s)=>{let o={attributes:{NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs,["PROGRAM-ID"]:1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuitySequence:r,discontinuityStarts:a,timelineStarts:n.timelineStarts,mediaSequence:i,segments:e};return n.contentProtection&&(o.contentProtection=n.contentProtection),t&&(o.sidx=t),s&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},EO=({attributes:n,segments:e,mediaSequence:t,discontinuityStarts:i,discontinuitySequence:r})=>{typeof e>"u"&&(e=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);let a={NAME:n.id,BANDWIDTH:n.bandwidth,["PROGRAM-ID"]:1};return n.codecs&&(a.CODECS=n.codecs),{attributes:a,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:i,discontinuitySequence:r,mediaSequence:t,segments:e}},CO=(n,e={},t=!1)=>{let i,r=n.reduce((a,s)=>{let o=s.attributes.role&&s.attributes.role.value||"",u=s.attributes.lang||"",l=s.attributes.label||"main";if(u&&!s.attributes.label){let h=o?` (${o})`:"";l=`${s.attributes.lang}${h}`}a[l]||(a[l]={language:u,autoselect:!0,default:o==="main",playlists:[],uri:""});let d=Bg(DO(s,t),e);return a[l].playlists.push(d),typeof i>"u"&&o==="main"&&(i=s,i.default=!0),a},{});if(!i){let a=Object.keys(r)[0];r[a].default=!0}return r},wO=(n,e={})=>n.reduce((t,i)=>{let r=i.attributes.lang||"text";return t[r]||(t[r]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),t[r].playlists.push(Bg(EO(i),e)),t},{}),AO=n=>n.reduce((e,t)=>(t&&t.forEach(i=>{let{channel:r,language:a}=i;e[a]={autoselect:!1,default:!1,instreamId:r,language:a},i.hasOwnProperty("aspectRatio")&&(e[a].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[a].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[a]["3D"]=i["3D"])}),e),{}),kO=({attributes:n,segments:e,sidx:t,discontinuityStarts:i})=>{let r={attributes:{NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth,["PROGRAM-ID"]:1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:i,timelineStarts:n.timelineStarts,segments:e};return n.frameRate&&(r.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(r.contentProtection=n.contentProtection),t&&(r.sidx=t),r},IO=({attributes:n})=>n.mimeType==="video/mp4"||n.mimeType==="video/webm"||n.contentType==="video",PO=({attributes:n})=>n.mimeType==="audio/mp4"||n.mimeType==="audio/webm"||n.contentType==="audio",FO=({attributes:n})=>n.mimeType==="text/vtt"||n.contentType==="text",OO=(n,e)=>{n.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:i}){return i===t.timeline}),t.segments&&t.segments.forEach((i,r)=>{i.number=r})})},$b=n=>n?Object.keys(n).reduce((e,t)=>{let i=n[t];return e.concat(i.playlists)},[]):[],LO=({dashPlaylists:n,locations:e,sidxMapping:t={},previousManifest:i})=>{if(!n.length)return{};let{sourceDuration:r,type:a,suggestedPresentationDelay:s,minimumUpdatePeriod:o}=n[0].attributes,u=Mg(n.filter(IO)).map(kO),l=Mg(n.filter(PO)),d=Mg(n.filter(FO)),h=n.map(L=>L.attributes.captionServices).filter(Boolean),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},["CLOSED-CAPTIONS"]:{},SUBTITLES:{}},uri:"",duration:r,playlists:SO(u,t)};o>=0&&(p.minimumUpdatePeriod=o*1e3),e&&(p.locations=e),a==="dynamic"&&(p.suggestedPresentationDelay=s);let _=p.playlists.length===0,D=l.length?CO(l,t,_):null,C=d.length?wO(d,t):null,S=u.concat($b(D),$b(C)),I=S.map(({timelineStarts:L})=>L);return p.timelineStarts=Xb(I),OO(S,p.timelineStarts),D&&(p.mediaGroups.AUDIO.audio=D),C&&(p.mediaGroups.SUBTITLES.subs=C),h.length&&(p.mediaGroups["CLOSED-CAPTIONS"].cc=AO(h)),i?bO({oldManifest:i,newManifest:p}):p},RO=(n,e,t)=>{let{NOW:i,clientOffset:r,availabilityStartTime:a,timescale:s=1,periodStart:o=0,minimumUpdatePeriod:u=0}=n,l=(i+r)/1e3,d=a+o,p=l+u-d;return Math.ceil((p*s-e)/t)},Yb=(n,e)=>{let{type:t,minimumUpdatePeriod:i=0,media:r="",sourceDuration:a,timescale:s=1,startNumber:o=1,periodStart:u}=n,l=[],d=-1;for(let h=0;h<e.length;h++){let p=e[h],_=p.d,D=p.r||0,C=p.t||0;d<0&&(d=C),C&&C>d&&(d=C);let S;if(D<0){let G=h+1;G===e.length?t==="dynamic"&&i>0&&r.indexOf("$Number$")>0?S=RO(n,d,_):S=(a*s-d)/_:S=(e[G].t-d)/_}else S=D+1;let I=o+l.length+S,L=o+l.length;for(;L<I;)l.push({number:L,duration:_/s,time:d,timeline:u}),d+=_,L++}return l},MO=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,NO=n=>(e,t,i,r)=>{if(e==="$$")return"$";if(typeof n[t]>"u")return e;let a=""+n[t];return t==="RepresentationID"||(i?r=parseInt(r,10):r=1,a.length>=r)?a:`${new Array(r-a.length+1).join("0")}${a}`},Vb=(n,e)=>n.replace(MO,NO(e)),BO=(n,e)=>!n.duration&&!e?[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodStart}]:n.duration?Ng(n):Yb(n,e),UO=(n,e)=>{let t={RepresentationID:n.id,Bandwidth:n.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=n,r=tl({baseUrl:n.baseUrl,source:Vb(i.sourceURL,t),range:i.range});return BO(n,e).map(s=>{t.Number=s.number,t.Time=s.time;let o=Vb(n.media||"",t),u=n.timescale||1,l=n.presentationTimeOffset||0,d=n.periodStart+(s.time-l)/u;return{uri:o,timeline:s.timeline,duration:s.duration,resolvedUri:Dr(n.baseUrl||"",o),map:r,number:s.number,presentationTime:d}})},jO=(n,e)=>{let{baseUrl:t,initialization:i={}}=n,r=tl({baseUrl:t,source:i.sourceURL,range:i.range}),a=tl({baseUrl:t,source:e.media,range:e.mediaRange});return a.map=r,a},HO=(n,e)=>{let{duration:t,segmentUrls:i=[],periodStart:r}=n;if(!t&&!e||t&&e)throw new Error(oo.SEGMENT_TIME_UNSPECIFIED);let a=i.map(u=>jO(n,u)),s;return t&&(s=Ng(n)),e&&(s=Yb(n,e)),s.map((u,l)=>{if(a[l]){let d=a[l],h=n.timescale||1,p=n.presentationTimeOffset||0;return d.timeline=u.timeline,d.duration=u.duration,d.number=u.number,d.presentationTime=r+(u.time-p)/h,d}}).filter(u=>u)},$O=({attributes:n,segmentInfo:e})=>{let t,i;e.template?(i=UO,t=Wt(n,e.template)):e.base?(i=Kb,t=Wt(n,e.base)):e.list&&(i=HO,t=Wt(n,e.list));let r={attributes:n};if(!i)return r;let a=i(t,e.segmentTimeline);if(t.duration){let{duration:s,timescale:o=1}=t;t.duration=s/o}else a.length?t.duration=a.reduce((s,o)=>Math.max(s,Math.ceil(o.duration)),0):t.duration=0;return r.attributes=t,r.segments=a,e.base&&t.indexRange&&(r.sidx=a[0],r.segments=[]),r},VO=n=>n.map($O),bt=(n,e)=>zb(n.childNodes).filter(({tagName:t})=>t===e),Ug=n=>n.textContent.trim(),WO=n=>parseFloat(n.split("/").reduce((e,t)=>e/t)),so=n=>{let o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!o)return 0;let[u,l,d,h,p,_]=o.slice(1);return parseFloat(u||0)*31536e3+parseFloat(l||0)*2592e3+parseFloat(d||0)*86400+parseFloat(h||0)*3600+parseFloat(p||0)*60+parseFloat(_||0)},qO=n=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),Date.parse(n)),Wb={mediaPresentationDuration(n){return so(n)},availabilityStartTime(n){return qO(n)/1e3},minimumUpdatePeriod(n){return so(n)},suggestedPresentationDelay(n){return so(n)},type(n){return n},timeShiftBufferDepth(n){return so(n)},start(n){return so(n)},width(n){return parseInt(n,10)},height(n){return parseInt(n,10)},bandwidth(n){return parseInt(n,10)},frameRate(n){return WO(n)},startNumber(n){return parseInt(n,10)},timescale(n){return parseInt(n,10)},presentationTimeOffset(n){return parseInt(n,10)},duration(n){let e=parseInt(n,10);return isNaN(e)?so(n):e},d(n){return parseInt(n,10)},t(n){return parseInt(n,10)},r(n){return parseInt(n,10)},DEFAULT(n){return n}},Vt=n=>n&&n.attributes?zb(n.attributes).reduce((e,t)=>{let i=Wb[t.name]||Wb.DEFAULT;return e[t.name]=i(t.value),e},{}):{},GO={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Jc=(n,e)=>e.length?Yc(n.map(function(t){return e.map(function(i){return Dr(t,Ug(i))})})):n,jg=n=>{let e=bt(n,"SegmentTemplate")[0],t=bt(n,"SegmentList")[0],i=t&&bt(t,"SegmentURL").map(h=>Wt({tag:"SegmentURL"},Vt(h))),r=bt(n,"SegmentBase")[0],a=t||e,s=a&&bt(a,"SegmentTimeline")[0],o=t||r||e,u=o&&bt(o,"Initialization")[0],l=e&&Vt(e);l&&u?l.initialization=u&&Vt(u):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});let d={template:l,segmentTimeline:s&&bt(s,"S").map(h=>Vt(h)),list:t&&Wt(Vt(t),{segmentUrls:i,initialization:Vt(u)}),base:r&&Wt(Vt(r),{initialization:Vt(u)})};return Object.keys(d).forEach(h=>{d[h]||delete d[h]}),d},zO=(n,e,t)=>i=>{let r=bt(i,"BaseURL"),a=Jc(e,r),s=Wt(n,Vt(i)),o=jg(i);return a.map(u=>({segmentInfo:Wt(t,o),attributes:Wt(s,{baseUrl:u})}))},KO=n=>n.reduce((e,t)=>{let i=Vt(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());let r=GO[i.schemeIdUri];if(r){e[r]={attributes:i};let a=bt(t,"cenc:pssh")[0];if(a){let s=Ug(a);e[r].pssh=s&&hn(s)}}return e},{}),XO=n=>{if(n.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{let i,r;return r=t,/^CC\d=/.test(t)?[i,r]=t.split("="):/^CC\d$/.test(t)&&(i=t),{channel:i,language:r}});if(n.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{let i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){let[r,a=""]=t.split("=");i.channel=r,i.language=t,a.split(",").forEach(s=>{let[o,u]=s.split(":");o==="lang"?i.language=u:o==="er"?i.easyReader=Number(u):o==="war"?i.aspectRatio=Number(u):o==="3D"&&(i["3D"]=Number(u))})}else i.language=t;return i.channel&&(i.channel="SERVICE"+i.channel),i})},YO=(n,e,t)=>i=>{let r=Vt(i),a=Jc(e,bt(i,"BaseURL")),s=bt(i,"Role")[0],o={role:Vt(s)},u=Wt(n,r,o),l=bt(i,"Accessibility")[0],d=XO(Vt(l));d&&(u=Wt(u,{captionServices:d}));let h=bt(i,"Label")[0];if(h&&h.childNodes.length){let S=h.childNodes[0].nodeValue.trim();u=Wt(u,{label:S})}let p=KO(bt(i,"ContentProtection"));Object.keys(p).length&&(u=Wt(u,{contentProtection:p}));let _=jg(i),D=bt(i,"Representation"),C=Wt(t,_);return Yc(D.map(zO(u,a,C)))},QO=(n,e)=>(t,i)=>{let r=Jc(e,bt(t.node,"BaseURL")),a=Wt(n,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(a.periodDuration=t.attributes.duration);let s=bt(t.node,"AdaptationSet"),o=jg(t.node);return Yc(s.map(YO(a,r,o)))},JO=({attributes:n,priorPeriodAttributes:e,mpdType:t})=>typeof n.start=="number"?n.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,ZO=(n,e={})=>{let{manifestUri:t="",NOW:i=Date.now(),clientOffset:r=0}=e,a=bt(n,"Period");if(!a.length)throw new Error(oo.INVALID_NUMBER_OF_PERIOD);let s=bt(n,"Location"),o=Vt(n),u=Jc([t],bt(n,"BaseURL"));o.type=o.type||"static",o.sourceDuration=o.mediaPresentationDuration||0,o.NOW=i,o.clientOffset=r,s.length&&(o.locations=s.map(Ug));let l=[];return a.forEach((d,h)=>{let p=Vt(d),_=l[h-1];p.start=JO({attributes:p,priorPeriodAttributes:_?_.attributes:null,mpdType:o.type}),l.push({node:d,attributes:p})}),{locations:o.locations,representationInfo:Yc(l.map(QO(o,u)))}},Qb=n=>{if(n==="")throw new Error(oo.DASH_EMPTY_MANIFEST);let e=new qb.DOMParser,t,i;try{t=e.parseFromString(n,"application/xml"),i=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(oo.DASH_INVALID_XML);return i},eL=n=>{let e=bt(n,"UTCTiming")[0];if(!e)return null;let t=Vt(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(oo.UNSUPPORTED_UTC_TIMING_SCHEME)}return t};var Jb=(n,e={})=>{let t=ZO(Qb(n),e),i=VO(t.representationInfo);return LO({dashPlaylists:i,locations:t.locations,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest})},Zb=n=>eL(Qb(n));var dD=Le(aS());var rL=ve([73,68,51]),nL=function(e,t){t===void 0&&(t=0),e=ve(e);var i=e[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],a=(i&16)>>4;return a?r+20:r+10},Va=function n(e,t){return t===void 0&&(t=0),e=ve(e),e.length-t<10||!ze(e,rL,{offset:t})?t:(t+=nL(e,t),n(e,t))};var $H=new Uint8Array([79,112,117,115,72,101,97,100]);var oS=function(e){return typeof e=="string"?Bc(e):e},lL=function(e){return Array.isArray(e)?e.map(function(t){return oS(t)}):[oS(e)]},Hg,uS=function(e){e=ve(e);for(var t=[],i=0;e.length>i;){var r=e[i],a=0,s=0;s++;var o=e[s];for(s++;o&128;)a=(o&127)<<7,o=e[s],s++;a+=o&127;for(var u=0;u<Hg.length;u++){var l=Hg[u],d=l.id,h=l.parser;if(r===d){t.push(h(e.subarray(s,s+a)));break}}i+=a+s}return t};Hg=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(t.flags&128&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.flags&64){var i=e[t.size];t.url=_g(e.subarray(t.size+1,t.size+1+i)),t.size+=i}return t.flags&32&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=uS(e.subarray(t.size))||[],t}},{id:4,parser:function(e){var t={tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:uS(e.subarray(13))};return t}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var lS=function n(e,t,i){i===void 0&&(i=!1),t=lL(t),e=ve(e);var r=[];if(!t.length)return r;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(s===0)break;var u=a+s;if(u>e.length){if(i)break;u=e.length}var l=e.subarray(a+8,u);ze(o,t[0])&&(t.length===1?r.push(l):r.push.apply(r,n(l,t.slice(1),i))),a=u}return r};var rl={EBML:ve([26,69,223,163]),DocType:ve([66,130]),Segment:ve([24,83,128,103]),SegmentInfo:ve([21,73,169,102]),Tracks:ve([22,84,174,107]),Track:ve([174]),TrackNumber:ve([215]),DefaultDuration:ve([35,227,131]),TrackEntry:ve([174]),TrackType:ve([131]),FlagDefault:ve([136]),CodecID:ve([134]),CodecPrivate:ve([99,162]),VideoTrack:ve([224]),AudioTrack:ve([225]),Cluster:ve([31,67,182,117]),Timestamp:ve([231]),TimestampScale:ve([42,215,177]),BlockGroup:ve([160]),BlockDuration:ve([155]),Block:ve([161]),SimpleBlock:ve([163])},$g=[128,64,32,16,8,4,2,1],dL=function(e){for(var t=1,i=0;i<$g.length&&!(e&$g[i]);i++)t++;return t},Zc=function(e,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var a=dL(e[t]),s=e.subarray(t,t+a);return i&&(s=Array.prototype.slice.call(e,t,t+a),s[0]^=$g[a-1]),{length:a,value:vg(s,{signed:r}),bytes:s}},dS=function n(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return n(t)}):typeof e=="number"?$x(e):e},cL=function(e){return Array.isArray(e)?e.map(function(t){return dS(t)}):[dS(e)]},hL=function n(e,t,i){if(i>=t.length)return t.length;var r=Zc(t,i,!1);if(ze(e.bytes,r.bytes))return i;var a=Zc(t,i+r.length);return n(e,t,i+a.length+a.value+r.length)},Vg=function n(e,t){t=cL(t),e=ve(e);var i=[];if(!t.length)return i;for(var r=0;r<e.length;){var a=Zc(e,r,!1),s=Zc(e,r+a.length),o=r+a.length+s.length;s.value===127&&(s.value=hL(a,e,o),s.value!==e.length&&(s.value-=o));var u=o+s.value>e.length?e.length:o+s.value,l=e.subarray(o,u);ze(t[0],a.bytes)&&(t.length===1?i.push(l):i=i.concat(n(l,t.slice(1))));var d=a.length+s.length+l.length;r+=d}return i};var fL=ve([0,0,0,1]),pL=ve([0,0,1]),mL=ve([0,0,3]),gL=function(e){for(var t=[],i=1;i<e.length-2;)ze(e.subarray(i,i+3),mL)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var r=e.length-t.length,a=new Uint8Array(r),s=0;for(i=0;i<r;s++,i++)s===t[0]&&(s++,t.shift()),a[i]=e[s];return a},cS=function(e,t,i,r){r===void 0&&(r=1/0),e=ve(e),i=[].concat(i);for(var a=0,s,o=0;a<e.length&&(o<r||s);){var u=void 0;if(ze(e.subarray(a),fL)?u=4:ze(e.subarray(a),pL)&&(u=3),!u){a++;continue}if(o++,s)return gL(e.subarray(s,a));var l=void 0;t==="h264"?l=e[a+u]&31:t==="h265"&&(l=e[a+u]>>1&63),i.indexOf(l)!==-1&&(s=a+u),a+=u+(t==="h264"?1:2)}return e.subarray(0,0)},hS=function(e,t,i){return cS(e,"h264",t,i)},fS=function(e,t,i){return cS(e,"h265",t,i)};var ei={webm:ve([119,101,98,109]),matroska:ve([109,97,116,114,111,115,107,97]),flac:ve([102,76,97,67]),ogg:ve([79,103,103,83]),ac3:ve([11,119]),riff:ve([82,73,70,70]),avi:ve([65,86,73]),wav:ve([87,65,86,69]),"3gp":ve([102,116,121,112,51,103]),mp4:ve([102,116,121,112]),fmp4:ve([115,116,121,112]),mov:ve([102,116,121,112,113,116]),moov:ve([109,111,111,118]),moof:ve([109,111,111,102])},uo={aac:function(e){var t=Va(e);return ze(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Va(e);return ze(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Vg(e,[rl.EBML,rl.DocType])[0];return ze(t,ei.webm)},mkv:function(e){var t=Vg(e,[rl.EBML,rl.DocType])[0];return ze(t,ei.matroska)},mp4:function(e){if(uo["3gp"](e)||uo.mov(e))return!1;if(ze(e,ei.mp4,{offset:4})||ze(e,ei.fmp4,{offset:4})||ze(e,ei.moof,{offset:4})||ze(e,ei.moov,{offset:4}))return!0},mov:function(e){return ze(e,ei.mov,{offset:4})},"3gp":function(e){return ze(e,ei["3gp"],{offset:4})},ac3:function(e){var t=Va(e);return ze(e,ei.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=Va(e);return ze(e,ei.flac,{offset:t})},ogg:function(e){return ze(e,ei.ogg)},avi:function(e){return ze(e,ei.riff)&&ze(e,ei.avi,{offset:8})},wav:function(e){return ze(e,ei.riff)&&ze(e,ei.wav,{offset:8})},h264:function(e){return hS(e,7,3).length},h265:function(e){return fS(e,[32,33],3).length}},Wg=Object.keys(uo).filter(function(n){return n!=="ts"&&n!=="h264"&&n!=="h265"}).concat(["ts","h264","h265"]);Wg.forEach(function(n){var e=uo[n];uo[n]=function(t){return e(ve(t))}});var vL=uo,eh=function(e){e=ve(e);for(var t=0;t<Wg.length;t++){var i=Wg[t];if(vL[i](e))return i}return""},pS=function(e){return lS(e,["moof"]).length>0};var pl=Le(yS());var cD="8.0.4",_n={},ta=function(n,e){return _n[n]=_n[n]||[],e&&(_n[n]=_n[n].concat(e)),_n[n]},_L=function(n,e){ta(n,e)},hD=function(n,e){let t=ta(n).indexOf(e);return t<=-1?!1:(_n[n]=_n[n].slice(),_n[n].splice(t,1),!0)},yL=function(n,e){ta(n,[].concat(e).map(t=>{let i=(...r)=>(hD(n,i),t(...r));return i}))},dh={prefixed:!0},oh=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],TS=oh[0],ol;for(let n=0;n<oh.length;n++)if(oh[n][1]in he.default){ol=oh[n];break}if(ol){for(let n=0;n<ol.length;n++)dh[TS[n]]=ol[n];dh.prefixed=ol[0]!==TS[0]}var bi=[],TL=(n,e)=>(t,i,r)=>{let a=e.levels[i],s=new RegExp(`^(${a})$`);if(t!=="log"&&r.unshift(t.toUpperCase()+":"),r.unshift(n+":"),bi){bi.push([].concat(r));let u=bi.length-1e3;bi.splice(0,u>0?u:0)}if(!q.default.console)return;let o=q.default.console[t];!o&&t==="debug"&&(o=q.default.console.info||q.default.console.log),!(!o||!a||!s.test(t))&&o[Array.isArray(r)?"apply":"call"](q.default.console,r)};function fD(n){let e="info",t,i=function(...r){t("log",e,r)};return t=TL(n,i),i.createLogger=r=>fD(n+": "+r),i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},i.level=r=>{if(typeof r=="string"){if(!i.levels.hasOwnProperty(r))throw new Error(`"${r}" in not a valid log level`);e=r}return e},i.history=()=>bi?[].concat(bi):[],i.history.filter=r=>(bi||[]).filter(a=>new RegExp(`.*${r}.*`).test(a[0])),i.history.clear=()=>{bi&&(bi.length=0)},i.history.disable=()=>{bi!==null&&(bi.length=0,bi=null)},i.history.enable=()=>{bi===null&&(bi=[])},i.error=(...r)=>t("error",e,r),i.warn=(...r)=>t("warn",e,r),i.debug=(...r)=>t("debug",e,r),i}var Ne=fD("VIDEOJS"),pD=Ne.createLogger,xL=Object.prototype.toString,mD=function(n){return Fr(n)?Object.keys(n):[]};function po(n,e){mD(n).forEach(t=>e(n[t],t))}function gD(n,e,t=0){return mD(n).reduce((i,r)=>e(i,n[r],r),t)}function Fr(n){return!!n&&typeof n=="object"}function To(n){return Fr(n)&&xL.call(n)==="[object Object]"&&n.constructor===Object}function at(...n){let e={};return n.forEach(t=>{!t||po(t,(i,r)=>{if(!To(i)){e[r]=i;return}To(e[r])||(e[r]={}),e[r]=at(e[r],i)})}),e}function Qh(n,e,t,i=!0){let r=s=>Object.defineProperty(n,e,{value:s,enumerable:!0,writable:!0}),a={configurable:!0,enumerable:!0,get(){let s=t();return r(s),s}};return i&&(a.set=r),Object.defineProperty(n,e,a)}var bL=Object.freeze({__proto__:null,each:po,reduce:gD,isObject:Fr,isPlain:To,merge:at,defineLazyProperty:Qh}),ev=!1,vD=null,Or=!1,_D,yD=!1,mo=!1,go=!1,Lr=!1,tv=null,Jh=null,TD=null,ch=!1,Zh=!1,hh=!1,ef=!1,ml=Boolean(Io()&&("ontouchstart"in q.default||q.default.navigator.maxTouchPoints||q.default.DocumentTouch&&q.default.document instanceof q.default.DocumentTouch)),lo=q.default.navigator&&q.default.navigator.userAgentData;lo&&(Or=lo.platform==="Android",mo=Boolean(lo.brands.find(n=>n.brand==="Microsoft Edge")),go=Boolean(lo.brands.find(n=>n.brand==="Chromium")),Lr=!mo&&go,tv=Jh=(lo.brands.find(n=>n.brand==="Chromium")||{}).version||null,Zh=lo.platform==="Windows");if(!go){let n=q.default.navigator&&q.default.navigator.userAgent||"";ev=/iPod/i.test(n),vD=function(){let e=n.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),Or=/Android/i.test(n),_D=function(){let e=n.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;let t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),yD=/Firefox/i.test(n),mo=/Edg/i.test(n),go=/Chrome/i.test(n)||/CriOS/i.test(n),Lr=!mo&&go,tv=Jh=function(){let e=n.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),TD=function(){let e=/MSIE\s(\d+)\.\d/.exec(n),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(n)&&/rv:11.0/.test(n)&&(t=11),t}(),ch=/Safari/i.test(n)&&!Lr&&!Or&&!mo,Zh=/Windows/i.test(n),hh=/iPad/i.test(n)||ch&&ml&&!/iPhone/i.test(n),ef=/iPhone/i.test(n)&&!hh}var ai=ef||hh||ev,tf=(ch||ai)&&!Lr,SL=Object.freeze({__proto__:null,get IS_IPOD(){return ev},get IOS_VERSION(){return vD},get IS_ANDROID(){return Or},get ANDROID_VERSION(){return _D},get IS_FIREFOX(){return yD},get IS_EDGE(){return mo},get IS_CHROMIUM(){return go},get IS_CHROME(){return Lr},get CHROMIUM_VERSION(){return tv},get CHROME_VERSION(){return Jh},get IE_VERSION(){return TD},get IS_SAFARI(){return ch},get IS_WINDOWS(){return Zh},get IS_IPAD(){return hh},get IS_IPHONE(){return ef},TOUCH_ENABLED:ml,IS_IOS:ai,IS_ANY_SAFARI:tf});function xS(n){return typeof n=="string"&&Boolean(n.trim())}function DL(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Io(){return he.default===q.default.document}function Po(n){return Fr(n)&&n.nodeType===1}function xD(){try{return q.default.parent!==q.default.self}catch{return!0}}function bD(n){return function(e,t){if(!xS(e))return he.default[n](null);xS(t)&&(t=he.default.querySelector(t));let i=Po(t)?t:he.default;return i[n]&&i[n](e)}}function Fe(n="div",e={},t={},i){let r=he.default.createElement(n);return Object.getOwnPropertyNames(e).forEach(function(a){let s=e[a];a==="textContent"?ua(r,s):(r[a]!==s||a==="tabIndex")&&(r[a]=s)}),Object.getOwnPropertyNames(t).forEach(function(a){r.setAttribute(a,t[a])}),i&&iv(r,i),r}function ua(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function d0(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function ll(n,e){return DL(e),n.classList.contains(e)}function Ka(n,...e){return n.classList.add(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n}function rf(n,...e){return n?(n.classList.remove(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n):(Ne.warn("removeClass was called with an element that doesn't exist"),null)}function SD(n,e,t){return typeof t=="function"&&(t=t(n,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(i=>n.classList.toggle(i,t)),n}function DD(n,e){Object.getOwnPropertyNames(e).forEach(function(t){let i=e[t];i===null||typeof i>"u"||i===!1?n.removeAttribute(t):n.setAttribute(t,i===!0?"":i)})}function Zn(n){let e={},t=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(n&&n.attributes&&n.attributes.length>0){let i=n.attributes;for(let r=i.length-1;r>=0;r--){let a=i[r].name,s=i[r].value;(typeof n[a]=="boolean"||t.indexOf(","+a+",")!==-1)&&(s=s!==null),e[a]=s}}return e}function ED(n,e){return n.getAttribute(e)}function xo(n,e,t){n.setAttribute(e,t)}function nf(n,e){n.removeAttribute(e)}function CD(){he.default.body.focus(),he.default.onselectstart=function(){return!1}}function wD(){he.default.onselectstart=function(){return!0}}function bo(n){if(n&&n.getBoundingClientRect&&n.parentNode){let e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(So(n,"height"))),t.width||(t.width=parseFloat(So(n,"width"))),t}}function gl(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};let e=n.offsetWidth,t=n.offsetHeight,i=0,r=0;for(;n.offsetParent&&n!==he.default[dh.fullscreenElement];)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return{left:i,top:r,width:e,height:t}}function af(n,e){let t={x:0,y:0};if(ai){let d=n;for(;d&&d.nodeName.toLowerCase()!=="html";){let h=So(d,"transform");if(/^matrix/.test(h)){let p=h.slice(7,-1).split(/,\s/).map(Number);t.x+=p[4],t.y+=p[5]}else if(/^matrix3d/.test(h)){let p=h.slice(9,-1).split(/,\s/).map(Number);t.x+=p[12],t.y+=p[13]}d=d.parentNode}}let i={},r=gl(e.target),a=gl(n),s=a.width,o=a.height,u=e.offsetY-(a.top-r.top),l=e.offsetX-(a.left-r.left);return e.changedTouches&&(l=e.changedTouches[0].pageX-a.left,u=e.changedTouches[0].pageY+a.top,ai&&(l-=t.x,u-=t.y)),i.y=1-Math.max(0,Math.min(1,u/o)),i.x=Math.max(0,Math.min(1,l/s)),i}function AD(n){return Fr(n)&&n.nodeType===3}function sf(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function kD(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(e=>{if(typeof e=="function"&&(e=e()),Po(e)||AD(e))return e;if(typeof e=="string"&&/\S/.test(e))return he.default.createTextNode(e)}).filter(e=>e)}function iv(n,e){return kD(e).forEach(t=>n.appendChild(t)),n}function ID(n,e){return iv(sf(n),e)}function vl(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0||n.type==="mouseup"&&n.button===0&&n.buttons===0?!0:!(n.button!==0||n.buttons!==1)}var ia=bD("querySelector"),PD=bD("querySelectorAll");function So(n,e){if(!n||!e)return"";if(typeof q.default.getComputedStyle=="function"){let t;try{t=q.default.getComputedStyle(n)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var FD=Object.freeze({__proto__:null,isReal:Io,isEl:Po,isInFrame:xD,createEl:Fe,textContent:ua,prependTo:d0,hasClass:ll,addClass:Ka,removeClass:rf,toggleClass:SD,setAttributes:DD,getAttributes:Zn,getAttribute:ED,setAttribute:xo,removeAttribute:nf,blockTextSelection:CD,unblockTextSelection:wD,getBoundingClientRect:bo,findPosition:gl,getPointerPosition:af,isTextNode:AD,emptyEl:sf,normalizeContent:kD,appendContent:iv,insertContent:ID,isSingleLeftClick:vl,$:ia,$$:PD,computedStyle:So}),OD=!1,c0,EL=function(){if(c0.options.autoSetup===!1)return;let n=Array.prototype.slice.call(he.default.getElementsByTagName("video")),e=Array.prototype.slice.call(he.default.getElementsByTagName("audio")),t=Array.prototype.slice.call(he.default.getElementsByTagName("video-js")),i=n.concat(e,t);if(i&&i.length>0)for(let r=0,a=i.length;r<a;r++){let s=i[r];if(s&&s.getAttribute)s.player===void 0&&s.getAttribute("data-setup")!==null&&c0(s);else{h0(1);break}}else OD||h0(1)};function h0(n,e){!Io()||(e&&(c0=e),q.default.setTimeout(EL,n))}function f0(){OD=!0,q.default.removeEventListener("load",f0)}Io()&&(he.default.readyState==="complete"?f0():q.default.addEventListener("load",f0));var LD=function(n){let e=he.default.createElement("style");return e.className=n,e},RD=function(n,e){n.styleSheet?n.styleSheet.cssText=e:n.textContent=e},ii=new WeakMap,CL=3,wL=CL;function Rr(){return wL++}function bS(n,e){if(!ii.has(n))return;let t=ii.get(n);t.handlers[e].length===0&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&ii.delete(n)}function rv(n,e,t,i){t.forEach(function(r){n(e,r,i)})}function of(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){let i=n||q.default.event;n={};for(let r in i)r!=="layerX"&&r!=="layerY"&&r!=="keyLocation"&&r!=="webkitMovementX"&&r!=="webkitMovementY"&&r!=="path"&&(r==="returnValue"&&i.preventDefault||(n[r]=i[r]));if(n.target||(n.target=n.srcElement||he.default),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){i.preventDefault&&i.preventDefault(),n.returnValue=!1,i.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),n.cancelBubble=!0,i.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,n.clientX!==null&&n.clientX!==void 0){let r=he.default.documentElement,a=he.default.body;n.pageX=n.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),n.pageY=n.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n.fixed_=!0,n}var ih,AL=function(){if(typeof ih!="boolean"){ih=!1;try{let n=Object.defineProperty({},"passive",{get(){ih=!0}});q.default.addEventListener("test",null,n),q.default.removeEventListener("test",null,n)}catch{}}return ih},kL=["touchstart","touchmove"];function Ri(n,e,t){if(Array.isArray(e))return rv(Ri,n,e,t);ii.has(n)||ii.set(n,{});let i=ii.get(n);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=Rr()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(r,a){if(i.disabled)return;r=of(r);let s=i.handlers[r.type];if(s){let o=s.slice(0);for(let u=0,l=o.length;u<l&&!r.isImmediatePropagationStopped();u++)try{o[u].call(n,r,a)}catch(d){Ne.error(d)}}}),i.handlers[e].length===1)if(n.addEventListener){let r=!1;AL()&&kL.indexOf(e)>-1&&(r={passive:!0}),n.addEventListener(e,i.dispatcher,r)}else n.attachEvent&&n.attachEvent("on"+e,i.dispatcher)}function Gt(n,e,t){if(!ii.has(n))return;let i=ii.get(n);if(!i.handlers)return;if(Array.isArray(e))return rv(Gt,n,e,t);let r=function(s,o){i.handlers[o]=[],bS(s,o)};if(e===void 0){for(let s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(n,s);return}let a=i.handlers[e];if(!!a){if(!t){r(n,e);return}if(t.guid)for(let s=0;s<a.length;s++)a[s].guid===t.guid&&a.splice(s--,1);bS(n,e)}}function Fo(n,e,t){let i=ii.has(n)?ii.get(n):{},r=n.parentNode||n.ownerDocument;if(typeof e=="string"?e={type:e,target:n}:e.target||(e.target=n),e=of(e),i.dispatcher&&i.dispatcher.call(n,e,t),r&&!e.isPropagationStopped()&&e.bubbles===!0)Fo.call(null,r,e,t);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){ii.has(e.target)||ii.set(e.target,{});let a=ii.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function uf(n,e,t){if(Array.isArray(e))return rv(uf,n,e,t);let i=function(){Gt(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||Rr(),Ri(n,e,i)}function nv(n,e,t){let i=function(){Gt(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||Rr(),Ri(n,e,i)}var IL=Object.freeze({__proto__:null,fixEvent:of,on:Ri,off:Gt,trigger:Fo,one:uf,any:nv}),Ji=30,st=function(n,e,t){e.guid||(e.guid=Rr());let i=e.bind(n);return i.guid=t?t+"_"+e.guid:e.guid,i},Mr=function(n,e){let t=q.default.performance.now();return function(...r){let a=q.default.performance.now();a-t>=e&&(n(...r),t=a)}},MD=function(n,e,t,i=q.default){let r,a=()=>{i.clearTimeout(r),r=null},s=function(){let o=this,u=arguments,l=function(){r=null,l=null,t||n.apply(o,u)};!r&&t&&n.apply(o,u),i.clearTimeout(r),r=i.setTimeout(l,e)};return s.cancel=a,s},PL=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Ji,bind_:st,throttle:Mr,debounce:MD}),nl,Di=class{on(e,t){let i=this.addEventListener;this.addEventListener=()=>{},Ri(this,e,t),this.addEventListener=i}off(e,t){Gt(this,e,t)}one(e,t){let i=this.addEventListener;this.addEventListener=()=>{},uf(this,e,t),this.addEventListener=i}any(e,t){let i=this.addEventListener;this.addEventListener=()=>{},nv(this,e,t),this.addEventListener=i}trigger(e){let t=e.type||e;typeof e=="string"&&(e={type:t}),e=of(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Fo(this,e)}queueTrigger(e){nl||(nl=new Map);let t=e.type||e,i=nl.get(this);i||(i=new Map,nl.set(this,i));let r=i.get(t);i.delete(t),q.default.clearTimeout(r);let a=q.default.setTimeout(()=>{i.delete(t),i.size===0&&(i=null,nl.delete(this)),this.trigger(e)},0);i.set(t,a)}};Di.prototype.allowedEvents_={};Di.prototype.addEventListener=Di.prototype.on;Di.prototype.removeEventListener=Di.prototype.off;Di.prototype.dispatchEvent=Di.prototype.trigger;var lf=n=>typeof n.name=="function"?n.name():typeof n.name=="string"?n.name:n.name_?n.name_:n.constructor&&n.constructor.name?n.constructor.name:typeof n,Tn=n=>n instanceof Di||!!n.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof n[e]=="function"),FL=(n,e)=>{Tn(n)?e():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(e))},p0=n=>typeof n=="string"&&/\S/.test(n)||Array.isArray(n)&&!!n.length,fh=(n,e,t)=>{if(!n||!n.nodeName&&!Tn(n))throw new Error(`Invalid target for ${lf(e)}#${t}; must be a DOM node or evented object.`)},ND=(n,e,t)=>{if(!p0(n))throw new Error(`Invalid event type for ${lf(e)}#${t}; must be a non-empty string or array.`)},BD=(n,e,t)=>{if(typeof n!="function")throw new Error(`Invalid listener for ${lf(e)}#${t}; must be a function.`)},Xg=(n,e,t)=>{let i=e.length<3||e[0]===n||e[0]===n.eventBusEl_,r,a,s;return i?(r=n.eventBusEl_,e.length>=3&&e.shift(),[a,s]=e):[r,a,s]=e,fh(r,n,t),ND(a,n,t),BD(s,n,t),s=st(n,s),{isTargetingSelf:i,target:r,type:a,listener:s}},Wa=(n,e,t,i)=>{fh(n,n,e),n.nodeName?IL[e](n,t,i):n[e](t,i)},OL={on(...n){let{isTargetingSelf:e,target:t,type:i,listener:r}=Xg(this,n,"on");if(Wa(t,"on",i,r),!e){let a=()=>this.off(t,i,r);a.guid=r.guid;let s=()=>this.off("dispose",a);s.guid=r.guid,Wa(this,"on","dispose",a),Wa(t,"on","dispose",s)}},one(...n){let{isTargetingSelf:e,target:t,type:i,listener:r}=Xg(this,n,"one");if(e)Wa(t,"one",i,r);else{let a=(...s)=>{this.off(t,i,a),r.apply(null,s)};a.guid=r.guid,Wa(t,"one",i,a)}},any(...n){let{isTargetingSelf:e,target:t,type:i,listener:r}=Xg(this,n,"any");if(e)Wa(t,"any",i,r);else{let a=(...s)=>{this.off(t,i,a),r.apply(null,s)};a.guid=r.guid,Wa(t,"any",i,a)}},off(n,e,t){if(!n||p0(n))Gt(this.eventBusEl_,n,e);else{let i=n,r=e;fh(i,this,"off"),ND(r,this,"off"),BD(t,this,"off"),t=st(this,t),this.off("dispose",t),i.nodeName?(Gt(i,r,t),Gt(i,"dispose",t)):Tn(i)&&(i.off(r,t),i.off("dispose",t))}},trigger(n,e){fh(this.eventBusEl_,this,"trigger");let t=n&&typeof n!="string"?n.type:n;if(!p0(t))throw new Error(`Invalid event type for ${lf(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Fo(this.eventBusEl_,n,e)}};function av(n,e={}){let{eventBusKey:t}=e;if(t){if(!n[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);n.eventBusEl_=n[t]}else n.eventBusEl_=Fe("span",{className:"vjs-event-bus"});return Object.assign(n,OL),n.eventedCallbacks&&n.eventedCallbacks.forEach(i=>{i()}),n.on("dispose",()=>{n.off(),[n,n.el_,n.eventBusEl_].forEach(function(i){i&&ii.has(i)&&ii.delete(i)}),q.default.setTimeout(()=>{n.eventBusEl_=null},0)}),n}var LL={state:{},setState(n){typeof n=="function"&&(n=n());let e;return po(n,(t,i)=>{this.state[i]!==t&&(e=e||{},e[i]={from:this.state[i],to:t}),this.state[i]=t}),e&&Tn(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function UD(n,e){return Object.assign(n,LL),n.state=Object.assign({},n.state,e),typeof n.handleStateChanged=="function"&&Tn(n)&&n.on("statechanged",n.handleStateChanged),n}var dl=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toLowerCase())},_t=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},jD=function(n,e){return _t(n)===_t(e)},RL=Object.freeze({__proto__:null,toLowerCase:dl,toTitleCase:_t,titleCaseEquals:jD}),ie=class{constructor(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=at({},this.options_),t=this.options_=at(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){let r=e&&e.id&&e.id()||"no_player";this.id_=`${r}_component_${Rr()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(r=>this.addClass(r)),t.evented!==!1&&(av(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),UD(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(i),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return Boolean(this.isDisposed_)}player(){return this.player_}options(e){return e?(this.options_=at(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,i){return Fe(e,t,i)}localize(e,t,i=e){let r=this.player_.language&&this.player_.language(),a=this.player_.languages&&this.player_.languages(),s=a&&a[r],o=r&&r.split("-")[0],u=a&&a[o],l=i;return s&&s[e]?l=s[e]:u&&u[e]&&(l=u[e]),t&&(l=l.replace(/\{(\d+)\}/g,function(d,h){let p=t[h-1],_=p;return typeof p>"u"&&(_=d),_})),l}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(!!e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,r)=>i.concat(r),[]);let t=this;for(let i=0;i<e.length;i++)if(t=t.getChild(e[i]),!t||!t.getChild)return;return t}addChild(e,t={},i=this.children_.length){let r,a;if(typeof e=="string"){a=_t(e);let s=t.componentClass||a;t.name=a;let o=ie.getComponent(s);if(!o)throw new Error(`Component ${s} does not exist`);if(typeof o!="function")return null;r=new o(this.player_||this,t)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,typeof r.id=="function"&&(this.childIndex_[r.id()]=r),a=a||r.name&&_t(r.name()),a&&(this.childNameIndex_[a]=r,this.childNameIndex_[dl(a)]=r),typeof r.el=="function"&&r.el()){let s=null;this.children_[i+1]&&(this.children_[i+1].el_?s=this.children_[i+1].el_:Po(this.children_[i+1])&&(s=this.children_[i+1])),this.contentEl().insertBefore(r.el(),s)}return r}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){t=!0,this.children_.splice(r,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[_t(e.name())]=null,this.childNameIndex_[dl(e.name())]=null;let i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){let e=this.options_.children;if(e){let t=this.options_,i=s=>{let o=s.name,u=s.opts;if(t[o]!==void 0&&(u=t[o]),u===!1)return;u===!0&&(u={}),u.playerOptions=this.options_.playerOptions;let l=this.addChild(o,u);l&&(this[o]=l)},r,a=ie.getComponent("Tech");Array.isArray(e)?r=e:r=Object.keys(e),r.concat(Object.keys(this.options_).filter(function(s){return!r.some(function(o){return typeof o=="string"?s===o:s===o.name})})).map(s=>{let o,u;return typeof s=="string"?(o=s,u=e[o]||this.options_[o]||{}):(o=s.name,u=s),{name:o,opts:u}}).filter(s=>{let o=ie.getComponent(s.opts.componentClass||_t(s.name));return o&&!a.isTech(o)}).forEach(i)}}buildCSSClass(){return""}ready(e,t=!1){if(!!e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){let e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return ia(e,t||this.contentEl())}$$(e,t){return PD(e,t||this.contentEl())}hasClass(e){return ll(this.el_,e)}addClass(...e){Ka(this.el_,...e)}removeClass(...e){rf(this.el_,...e)}toggleClass(e,t){SD(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return ED(this.el_,e)}setAttribute(e,t){xo(this.el_,e,t)}removeAttribute(e){nf(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,i){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;let r=this.el_.style[e],a=r.indexOf("px");return parseInt(a!==-1?r.slice(0,a):this.el_["offset"+_t(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=So(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){let i=`offset${_t(e)}`;t=this.el_[i]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(Ce.default.isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null,i=10,r=200,a;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=q.default.performance.now(),a=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)a=!1;else if(t){let u=o.touches[0].pageX-t.pageX,l=o.touches[0].pageY-t.pageY;Math.sqrt(u*u+l*l)>i&&(a=!1)}});let s=function(){a=!1};this.on("touchleave",s),this.on("touchcancel",s),this.on("touchend",function(o){t=null,a===!0&&q.default.performance.now()-e<r&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;let e=st(this.player(),this.player().reportUserActivity),t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});let i=function(r){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,t){var i;return e=st(this,e),this.clearTimersOnDispose_(),i=q.default.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),q.default.clearTimeout(e)),e}setInterval(e,t){e=st(this,e),this.clearTimersOnDispose_();let i=q.default.setInterval(e,t);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),q.default.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=st(this,e),t=q.default.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){if(this.namedRafs_.has(e))return;this.clearTimersOnDispose_(),t=st(this,t);let i=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){!this.namedRafs_.has(e)||(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),q.default.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((i,r)=>this[t](r))}),this.clearingTimersOnDispose_=!1}))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);let i=ie.getComponent("Tech"),r=i&&i.isTech(t),a=ie===t||ie.prototype.isPrototypeOf(t.prototype);if(r||!a){let o;throw r?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=_t(e),ie.components_||(ie.components_={});let s=ie.getComponent("Player");if(e==="Player"&&s&&s.players){let o=s.players,u=Object.keys(o);if(o&&u.length>0&&u.map(l=>o[l]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return ie.components_[e]=t,ie.components_[dl(e)]=t,t}static getComponent(e){if(!(!e||!ie.components_))return ie.components_[e]}};ie.registerComponent("Component",ie);function ML(n,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${n}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function SS(n,e,t,i){return ML(n,i,t.length-1),t[i][e]}function Yg(n){let e;return n===void 0||n.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:n.length,start:SS.bind(null,"start",0,n),end:SS.bind(null,"end",1,n)},q.default.Symbol&&q.default.Symbol.iterator&&(e[q.default.Symbol.iterator]=()=>(n||[]).values()),e}function Pr(n,e){return Array.isArray(n)?Yg(n):n===void 0||e===void 0?Yg():Yg([[n,e]])}var HD=function(n,e){n=n<0?0:n;let t=Math.floor(n%60),i=Math.floor(n/60%60),r=Math.floor(n/3600),a=Math.floor(e/60%60),s=Math.floor(e/3600);return(isNaN(n)||n===1/0)&&(r=i=t="-"),r=r>0||s>0?r+":":"",i=((r||a>=10)&&i<10?"0"+i:i)+":",t=t<10?"0"+t:t,r+i+t},sv=HD;function $D(n){sv=n}function VD(){sv=HD}function Ya(n,e=n){return sv(n,e)}var NL=Object.freeze({__proto__:null,createTimeRanges:Pr,createTimeRange:Pr,setFormatTime:$D,resetFormatTime:VD,formatTime:Ya});function WD(n,e){let t=0,i,r;if(!e)return 0;(!n||!n.length)&&(n=Pr(0,0));for(let a=0;a<n.length;a++)i=n.start(a),r=n.end(a),r>e&&(r=e),t+=r-i;return t/e}function ri(n){if(n instanceof ri)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:Fr(n)&&(typeof n.code=="number"&&(this.code=n.code),Object.assign(this,n)),this.message||(this.message=ri.defaultMessages[this.code]||"")}ri.prototype.code=0;ri.prototype.message="";ri.prototype.status=null;ri.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];ri.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(let n=0;n<ri.errorTypes.length;n++)ri[ri.errorTypes[n]]=n,ri.prototype[ri.errorTypes[n]]=n;function cl(n){return n!=null&&typeof n.then=="function"}function Ar(n){cl(n)&&n.then(null,e=>{})}var m0=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,i,r)=>(n[i]&&(t[i]=n[i]),t),{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},BL=function(n){let e=n.$$("track"),t=Array.prototype.map.call(e,r=>r.track);return Array.prototype.map.call(e,function(r){let a=m0(r.track);return r.src&&(a.src=r.src),a}).concat(Array.prototype.filter.call(n.textTracks(),function(r){return t.indexOf(r)===-1}).map(m0))},UL=function(n,e){return n.forEach(function(t){let i=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(r=>i.addCue(r))}),e.textTracks()},DS={textTracksToJson:BL,jsonToTextTracks:UL,trackToJson_:m0},Qg="vjs-modal-dialog",ra=class extends ie{constructor(e,t){super(e,t),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Fe("div",{className:`${Qg}-content`},{role:"document"}),this.descEl_=Fe("p",{className:`${Qg}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),ua(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Qg} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(!this.opened_){let e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;let e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){let t=this.closeable_=!!e,i=this.getChild("closeButton");if(t&&!i){let r=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){let t=this.contentEl(),i=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),ID(t,e),this.trigger("modalfill"),r?i.insertBefore(t,r):i.appendChild(t);let a=this.getChild("closeButton");a&&i.appendChild(a.el_)}empty(){this.trigger("beforemodalempty"),sf(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){let e=he.default.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(e.stopPropagation(),Ce.default.isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(!Ce.default.isEventKey(e,"Tab"))return;let t=this.focusableEls_(),i=this.el_.querySelector(":focus"),r;for(let a=0;a<t.length;a++)if(i===t[a]){r=a;break}he.default.activeElement===this.el_&&(r=0),e.shiftKey&&r===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&r===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){let e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof q.default.HTMLAnchorElement||t instanceof q.default.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof q.default.HTMLInputElement||t instanceof q.default.HTMLSelectElement||t instanceof q.default.HTMLTextAreaElement||t instanceof q.default.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof q.default.HTMLIFrameElement||t instanceof q.default.HTMLObjectElement||t instanceof q.default.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}};ra.prototype.options_={pauseOnOpen:!0,temporary:!0};ie.registerComponent("ModalDialog",ra);var na=class extends Di{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){let t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Tn(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}!t||this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let i=0,r=this.length;i<r;i++){let a=this[i];if(a.id===e){t=a;break}}return t}};na.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(let n in na.prototype.allowedEvents_)na.prototype["on"+n]=null;var Jg=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].enabled=!1)},g0=class extends na{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){Jg(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&Jg(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,Jg(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}},Zg=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].selected=!1)},v0=class extends na{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){Zg(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&Zg(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,Zg(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}},ph=class extends na{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}},_0=class{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}addTrackElement_(e){let t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let i=0,r=this.trackElements_.length;i<r;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(e){for(let t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}},Do=class{constructor(e){Do.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){let t=this.length||0,i=0,r=e.length;this.cues_=e,this.length_=e.length;let a=function(s){""+s in this||Object.defineProperty(this,""+s,{get(){return this.cues_[s]}})};if(t<r)for(i=t;i<r;i++)a.call(this,i)}getCueById(e){let t=null;for(let i=0,r=this.length;i<r;i++){let a=this[i];if(a.id===e){t=a;break}}return t}},jL={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},HL={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},$L={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ES={disabled:"disabled",hidden:"hidden",showing:"showing"},_l=class extends Di{constructor(e={}){super();let t={id:e.id||"vjs_track_"+Rr(),kind:e.kind||"",language:e.language||""},i=e.label||"";for(let r in t)Object.defineProperty(this,r,{get(){return t[r]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(r){r!==i&&(i=r,this.trigger("labelchange"))}})}},ov=function(n){let e=["protocol","hostname","port","pathname","search","hash","host"],t=he.default.createElement("a");t.href=n;let i={};for(let r=0;r<e.length;r++)i[e[r]]=t[e[r]];return i.protocol==="http:"&&(i.host=i.host.replace(/:80$/,"")),i.protocol==="https:"&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=q.default.location.protocol),i.host||(i.host=q.default.location.host),i},qD=function(n){if(!n.match(/^https?:\/\//)){let e=he.default.createElement("a");e.href=n,n=e.href}return n},uv=function(n){if(typeof n=="string"){let t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n);if(t)return t.pop().toLowerCase()}return""},df=function(n,e=q.default.location){let t=ov(n);return(t.protocol===":"?e.protocol:t.protocol)+t.host!==e.protocol+e.host},VL=Object.freeze({__proto__:null,parseUrl:ov,getAbsoluteURL:qD,getFileExtension:uv,isCrossOrigin:df}),CS=function(n,e){let t=new q.default.WebVTT.Parser(q.default,q.default.vttjs,q.default.WebVTT.StringDecoder()),i=[];t.oncue=function(r){e.addCue(r)},t.onparsingerror=function(r){i.push(r)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(n),i.length>0&&(q.default.console&&q.default.console.groupCollapsed&&q.default.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),i.forEach(r=>Ne.error(r)),q.default.console&&q.default.console.groupEnd&&q.default.console.groupEnd()),t.flush()},wS=function(n,e){let t={uri:n},i=df(n);i&&(t.cors=i);let r=e.tech_.crossOrigin()==="use-credentials";r&&(t.withCredentials=r),(0,Z0.default)(t,st(this,function(a,s,o){if(a)return Ne.error(a,s);e.loaded_=!0,typeof q.default.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],u=>{if(u.type==="vttjserror"){Ne.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return CS(o,e)}):CS(o,e)}))},Qa=class extends _l{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");let t=at(e,{kind:$L[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=ES[t.mode]||"disabled",r=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;let a=new Do(this.cues_),s=new Do(this.activeCues_),o=!1;this.timeupdateHandler=st(this,function(l={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){l.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),l.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});let u=()=>{this.stopTracking()};this.tech_.one("dispose",u),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return r},set(){}},mode:{get(){return i},set(l){!ES[l]||i!==l&&(i=l,!this.preload_&&i!=="disabled"&&this.cues.length===0&&wS(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?a:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return s;let l=this.tech_.currentTime(),d=[];for(let h=0,p=this.cues.length;h<p;h++){let _=this.cues[h];_.startTime<=l&&_.endTime>=l&&d.push(_)}if(o=!1,d.length!==this.activeCues_.length)o=!0;else for(let h=0;h<d.length;h++)this.activeCues_.indexOf(d[h])===-1&&(o=!0);return this.activeCues_=d,s.setCues_(this.activeCues_),s},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&wS(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(q.default.vttjs&&!(e instanceof q.default.vttjs.VTTCue)){t=new q.default.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(let r in e)r in t||(t[r]=e[r]);t.id=e.id,t.originalCue_=e}let i=this.tech_.textTracks();for(let r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){let i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}};Qa.prototype.allowedEvents_={cuechange:"cuechange"};var mh=class extends _l{constructor(e={}){let t=at(e,{kind:HL[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}},gh=class extends _l{constructor(e={}){let t=at(e,{kind:jL[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}},or=class extends Di{constructor(e={}){super();let t,i=new Qa(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return i}}}),t=or.NONE,i.addEventListener("loadeddata",()=>{t=or.LOADED,this.trigger({type:"load",target:this})})}};or.prototype.allowedEvents_={load:"load"};or.NONE=0;or.LOADING=1;or.LOADED=2;or.ERROR=3;var Qi={audio:{ListClass:g0,TrackClass:mh,capitalName:"Audio"},video:{ListClass:v0,TrackClass:gh,capitalName:"Video"},text:{ListClass:ph,TrackClass:Qa,capitalName:"Text"}};Object.keys(Qi).forEach(function(n){Qi[n].getterName=`${n}Tracks`,Qi[n].privateName=`${n}Tracks_`});var Eo={remoteText:{ListClass:ph,TrackClass:Qa,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:_0,TrackClass:or,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ti=Object.assign({},Qi,Eo);Eo.names=Object.keys(Eo);Qi.names=Object.keys(Qi);ti.names=[].concat(Eo.names).concat(Qi.names);function WL(n,e,t,i,r={}){let a=n.textTracks();r.kind=e,t&&(r.label=t),i&&(r.language=i),r.tech=n;let s=new ti.text.TrackClass(r);return a.addTrack(s),s}var Ee=class extends ie{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),ti.names.forEach(i=>{let r=ti[i];e&&e[r.getterName]&&(this[r.privateName]=e[r.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new ti.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(st(this,function(){let t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return Pr(0,0)}bufferedPercent(){return WD(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Qi.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{let i=this[`${t}Tracks`]()||[],r=i.length;for(;r--;){let a=i[r];t==="text"&&this.removeRemoteTextTrack(a),i.removeTrack(a)}})}cleanupAutoTextTracks(){let e=this.autoRemoteTextTracks_||[],t=e.length;for(;t--;){let i=e[t];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new ri(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?Pr(0,0):Pr()}play(){}setScrubbing(){}scrubbing(){}setCurrentTime(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Qi.names.forEach(e=>{let t=Qi[e],i=()=>{this.trigger(`${e}trackchange`)},r=this[t.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),this.on("dispose",()=>{r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!q.default.WebVTT)if(he.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&To(l0.default)&&Object.keys(l0.default).length>0){this.trigger("vttjsloaded");return}let e=he.default.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),q.default.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){let e=this.textTracks(),t=this.remoteTextTracks(),i=o=>e.addTrack(o.track),r=o=>e.removeTrack(o.track);t.on("addtrack",i),t.on("removetrack",r),this.addWebVttScript_();let a=()=>this.trigger("texttrackchange"),s=()=>{a();for(let o=0;o<e.length;o++){let u=e[o];u.removeEventListener("cuechange",a),u.mode==="showing"&&u.addEventListener("cuechange",a)}};s(),e.addEventListener("change",s),e.addEventListener("addtrack",s),e.addEventListener("removetrack",s),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",r),e.removeEventListener("change",s),e.removeEventListener("addtrack",s),e.removeEventListener("removetrack",s);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",a)})}addTextTrack(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return WL(this,e,t,i)}createRemoteTextTrack(e){let t=at(e,{tech:this});return new Eo.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){let i=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){let t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){let t=Rr();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(){}overrideNativeVideoTracks(){}canPlayType(){return""}static canPlayType(){return""}static canPlaySource(e,t){return Ee.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Ee||e instanceof Ee||e===Ee}static registerTech(e,t){if(Ee.techs_||(Ee.techs_={}),!Ee.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Ee.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Ee.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=_t(e),Ee.techs_[e]=t,Ee.techs_[dl(e)]=t,e!=="Tech"&&Ee.defaultTechOrder_.push(e),t}static getTech(e){if(!!e){if(Ee.techs_&&Ee.techs_[e])return Ee.techs_[e];if(e=_t(e),q.default&&q.default.videojs&&q.default.videojs[e])return Ne.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),q.default.videojs[e]}}};ti.names.forEach(function(n){let e=ti[n];Ee.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Ee.prototype.featuresVolumeControl=!0;Ee.prototype.featuresMuteControl=!0;Ee.prototype.featuresFullscreenResize=!1;Ee.prototype.featuresPlaybackRate=!1;Ee.prototype.featuresProgressEvents=!1;Ee.prototype.featuresSourceset=!1;Ee.prototype.featuresTimeupdateEvents=!1;Ee.prototype.featuresNativeTextTracks=!1;Ee.prototype.featuresVideoFrameCallback=!1;Ee.withSourceHandlers=function(n){n.registerSourceHandler=function(t,i){let r=n.sourceHandlers;r||(r=n.sourceHandlers=[]),i===void 0&&(i=r.length),r.splice(i,0,t)},n.canPlayType=function(t){let i=n.sourceHandlers||[],r;for(let a=0;a<i.length;a++)if(r=i[a].canPlayType(t),r)return r;return""},n.selectSourceHandler=function(t,i){let r=n.sourceHandlers||[],a;for(let s=0;s<r.length;s++)if(a=r[s].canHandleSource(t,i),a)return r[s];return null},n.canPlaySource=function(t,i){let r=n.selectSourceHandler(t,i);return r?r.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){let i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){let i=n.selectSourceHandler(t,this.options_);i||(n.nativeSourceHandler?i=n.nativeSourceHandler:Ne.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};ie.registerComponent("Tech",Ee);Ee.registerTech("Tech",Ee);Ee.defaultTechOrder_=[];var Xa={},y0={},vh={};function qL(n,e){Xa[n]=Xa[n]||[],Xa[n].push(e)}function GL(n,e,t){n.setTimeout(()=>qa(e,Xa[e.type],t,n),1)}function zL(n,e){n.forEach(t=>t.setTech&&t.setTech(e))}function KL(n,e,t){return n.reduceRight(lv(t),e[t]())}function XL(n,e,t,i){return e[t](n.reduce(lv(t),i))}function AS(n,e,t,i=null){let r="call"+_t(t),a=n.reduce(lv(r),i),s=a===vh,o=s?null:e[t](a);return JL(n,t,o,s),o}var YL={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},QL={setCurrentTime:1,setMuted:1,setVolume:1},kS={play:1,pause:1};function lv(n){return(e,t)=>e===vh?vh:t[n]?t[n](e):e}function JL(n,e,t,i){for(let r=n.length-1;r>=0;r--){let a=n[r];a[e]&&a[e](i,t)}}function ZL(n){y0[n.id()]=null}function e2(n,e){let t=y0[n.id()],i=null;if(t==null)return i=e(n),y0[n.id()]=[[e,i]],i;for(let r=0;r<t.length;r++){let[a,s]=t[r];a===e&&(i=s)}return i===null&&(i=e(n),t.push([e,i])),i}function qa(n={},e=[],t,i,r=[],a=!1){let[s,...o]=e;if(typeof s=="string")qa(n,Xa[s],t,i,r,a);else if(s){let u=e2(i,s);if(!u.setSource)return r.push(u),qa(n,o,t,i,r,a);u.setSource(Object.assign({},n),function(l,d){if(l)return qa(n,o,t,i,r,a);r.push(u),qa(d,n.type===d.type?o:Xa[d.type],t,i,r,a)})}else o.length?qa(n,o,t,i,r,a):a?t(n,r):qa(n,Xa["*"],t,i,r,!0)}var t2={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},_h=function(n=""){let e=uv(n);return t2[e.toLowerCase()]||""},i2=(n,e)=>{if(!e)return"";if(n.cache_.source.src===e&&n.cache_.source.type)return n.cache_.source.type;let t=n.cache_.sources.filter(r=>r.src===e);if(t.length)return t[0].type;let i=n.$$("source");for(let r=0;r<i.length;r++){let a=i[r];if(a.type&&a.src&&a.src===e)return a.type}return _h(e)},GD=function(n){if(Array.isArray(n)){let e=[];n.forEach(function(t){t=GD(t),Array.isArray(t)?e=e.concat(t):Fr(t)&&e.push(t)}),n=e}else typeof n=="string"&&n.trim()?n=[IS({src:n})]:Fr(n)&&typeof n.src=="string"&&n.src&&n.src.trim()?n=[IS(n)]:n=[];return n};function IS(n){if(!n.type){let e=_h(n.src);e&&(n.type=e)}return n}var T0=class extends ie{constructor(e,t,i){let r=at({createEl:!1},t);if(super(e,r,i),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let a=0,s=t.playerOptions.techOrder;a<s.length;a++){let o=_t(s[a]),u=Ee.getTech(o);if(o||(u=ie.getComponent(o)),u&&u.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}};ie.registerComponent("MediaLoader",T0);var Co=class extends ie{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",t={},i={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&Ne.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=t.tabIndex;let r=Fe(e,t,i);return r.appendChild(Fe("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Fe("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";let i=this.localize(e);this.controlText_=e,ua(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){Ce.default.isEventKey(e,"Space")||Ce.default.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};ie.registerComponent("ClickableComponent",Co);var yl=class extends Co{constructor(e,t){super(e,t),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Fe("picture",{className:"vjs-poster",tabIndex:-1},{},Fe("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))}crossOrigin(e){if(typeof e>"u")return this.el_?this.el_.querySelector("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.el_.querySelector("img").crossOrigin=e}update(e){let t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){this.el_.querySelector("img").src=e}handleClick(e){!this.player_.controls()||(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Ar(this.player_.play()):this.player_.pause())}};yl.prototype.crossorigin=yl.prototype.crossOrigin;ie.registerComponent("PosterImage",yl);var Yi="#222",PS="#ccc",r2={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function e0(n,e){let t;if(n.length===4)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)t=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function t0(n,e,t){try{n.style[e]=t}catch{return}}var x0=class extends ie{constructor(e,t,i){super(e,t,i);let r=a=>this.updateDisplay(a);e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",r),e.on("loadedmetadata",a=>this.preselectTrack(a)),e.ready(st(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",r),e.on("playerresize",r);let a=q.default.screen.orientation||q.default,s=q.default.screen.orientation?"change":"orientationchange";a.addEventListener(s,r),e.on("dispose",()=>a.removeEventListener(s,r));let o=this.options_.playerOptions.tracks||[];for(let u=0;u<o.length;u++)this.player_.addRemoteTextTrack(o[u],!0);this.preselectTrack()}))}preselectTrack(){let e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage,r,a,s;for(let o=0;o<t.length;o++){let u=t[o];i&&i.enabled&&i.language&&i.language===u.language&&u.kind in e?u.kind===i.kind?s=u:s||(s=u):i&&!i.enabled?(s=null,r=null,a=null):u.default&&(u.kind==="descriptions"&&!r?r=u:u.kind in e&&!a&&(a=u))}s?s.mode="showing":a?a.mode="showing":r&&(r.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof q.default.WebVTT=="function"&&q.default.WebVTT.processCues(q.default,[],this.el_)}updateDisplay(){let e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){let s=[];for(let o=0;o<e.length;++o){let u=e[o];u.mode==="showing"&&s.push(u)}this.updateForTrack(s);return}let i=null,r=null,a=e.length;for(;a--;){let s=e[a];s.mode==="showing"&&(s.kind==="descriptions"?i=s:r=s)}r?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i))}updateDisplayState(e){let t=this.player_.textTrackSettings.getValues(),i=e.activeCues,r=i.length;for(;r--;){let a=i[r];if(!a)continue;let s=a.displayState;if(t.color&&(s.firstChild.style.color=t.color),t.textOpacity&&t0(s.firstChild,"color",e0(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(s.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&t0(s.firstChild,"backgroundColor",e0(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?t0(s,"backgroundColor",e0(t.windowColor,t.windowOpacity)):s.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?s.firstChild.style.textShadow=`2px 2px 3px ${Yi}, 2px 2px 4px ${Yi}, 2px 2px 5px ${Yi}`:t.edgeStyle==="raised"?s.firstChild.style.textShadow=`1px 1px ${Yi}, 2px 2px ${Yi}, 3px 3px ${Yi}`:t.edgeStyle==="depressed"?s.firstChild.style.textShadow=`1px 1px ${PS}, 0 1px ${PS}, -1px -1px ${Yi}, 0 -1px ${Yi}`:t.edgeStyle==="uniform"&&(s.firstChild.style.textShadow=`0 0 4px ${Yi}, 0 0 4px ${Yi}, 0 0 4px ${Yi}, 0 0 4px ${Yi}`)),t.fontPercent&&t.fontPercent!==1){let o=q.default.parseFloat(s.style.fontSize);s.style.fontSize=o*t.fontPercent+"px",s.style.height="auto",s.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=r2[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof q.default.WebVTT!="function"||e.every(i=>!i.activeCues))return;let t=[];for(let i=0;i<e.length;++i){let r=e[i];for(let a=0;a<r.activeCues.length;++a)t.push(r.activeCues[a])}q.default.WebVTT.processCues(q.default,t,this.el_);for(let i=0;i<e.length;++i){let r=e[i];for(let a=0;a<r.activeCues.length;++a){let s=r.activeCues[a].displayState;Ka(s,"vjs-text-track-cue","vjs-text-track-cue-"+(r.language?r.language:i)),r.language&&xo(s,"lang",r.language)}this.player_.textTrackSettings&&this.updateDisplayState(r)}}};ie.registerComponent("TextTrackDisplay",x0);var b0=class extends ie{createEl(){let e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=Fe("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),r=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r}};ie.registerComponent("LoadingSpinner",b0);var Li=class extends Co{createEl(e,t={},i={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),i=Object.assign({type:"button"},i);let r=Fe(e,t,i);return r.appendChild(Fe("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}addChild(e,t={}){let i=this.constructor.name;return Ne.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),ie.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(Ce.default.isEventKey(e,"Space")||Ce.default.isEventKey(e,"Enter")){e.stopPropagation();return}super.handleKeyDown(e)}};ie.registerComponent("Button",Li);var yh=class extends Li{constructor(e,t){super(e,t),this.mouseused_=!1,this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){let t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){Ar(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}let i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(!r){this.player_.tech(!0).focus();return}let a=()=>r.focus();cl(t)?t.then(a,()=>{}):this.setTimeout(a,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}};yh.prototype.controlText_="Play Video";ie.registerComponent("BigPlayButton",yh);var S0=class extends Li{constructor(e,t){super(e,t),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){Ce.default.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}};ie.registerComponent("CloseButton",S0);var Th=class extends Li{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),t.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Ar(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}};Th.prototype.controlText_="Play";ie.registerComponent("PlayToggle",Th);var aa=class extends ie{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended"],i=>this.updateContent(i)),this.updateTextNode_()}createEl(){let e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=Fe("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}\xA0`},{role:"presentation"});return t.appendChild(i),this.contentEl_=Fe("span",{className:`${e}-display`},{"aria-live":"off",role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}updateTextNode_(e=0){e=Ya(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,Ne.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=he.default.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}};aa.prototype.labelText_="Time";aa.prototype.controlText_="Time";ie.registerComponent("TimeDisplay",aa);var Tl=class extends aa{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}};Tl.prototype.labelText_="Current Time";Tl.prototype.controlText_="Current Time";ie.registerComponent("CurrentTimeDisplay",Tl);var xl=class extends aa{constructor(e,t){super(e,t);let i=r=>this.updateContent(r);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){let t=this.player_.duration();this.updateTextNode_(t)}};xl.prototype.labelText_="Duration";xl.prototype.controlText_="Duration";ie.registerComponent("DurationDisplay",xl);var D0=class extends ie{createEl(){let e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}};ie.registerComponent("TimeDivider",D0);var bl=class extends aa{constructor(e,t){super(e,t),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){let e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Fe("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}};bl.prototype.labelText_="Remaining Time";bl.prototype.controlText_="Remaining Time";ie.registerComponent("RemainingTimeDisplay",bl);var E0=class extends ie{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){let e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Fe("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Fe("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}\xA0`})),this.contentEl_.appendChild(he.default.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}};ie.registerComponent("LiveDisplay",E0);var xh=class extends Li{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){let e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Fe("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}};xh.prototype.controlText_="Seek to live, currently playing live";ie.registerComponent("SeekToLive",xh);function Nl(n,e,t){return n=Number(n),Math.min(t,Math.max(e,isNaN(n)?e:n))}var n2=Object.freeze({__proto__:null,clamp:Nl}),Sl=class extends ie{constructor(e,t){super(e,t),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;let e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,t,i)}handleMouseDown(e){let t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Lr&&e.preventDefault(),CD(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(){let e=this.bar.el_.ownerDocument;wD(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;let e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{let t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(Nl(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){let t=af(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){Ce.default.isEventKey(e,"Left")||Ce.default.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Ce.default.isEventKey(e,"Right")||Ce.default.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}};ie.registerComponent("Slider",Sl);var i0=(n,e)=>Nl(n/e*100,0,100).toFixed(2)+"%",C0=class extends ie{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){let e=super.createEl("div",{className:"vjs-load-progress"}),t=Fe("span",{className:"vjs-control-text"}),i=Fe("span",{textContent:this.localize("Loaded")}),r=he.default.createTextNode(": ");return this.percentageEl_=Fe("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(r),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{let t=this.player_.liveTracker,i=this.player_.buffered(),r=t&&t.isLive()?t.seekableEnd():this.player_.duration(),a=this.player_.bufferedEnd(),s=this.partEls_,o=i0(a,r);this.percent_!==o&&(this.el_.style.width=o,ua(this.percentageEl_,o),this.percent_=o);for(let u=0;u<i.length;u++){let l=i.start(u),d=i.end(u),h=s[u];h||(h=this.el_.appendChild(Fe()),s[u]=h),!(h.dataset.start===l&&h.dataset.end===d)&&(h.dataset.start=l,h.dataset.end=d,h.style.left=i0(l,a),h.style.width=i0(d-l,a))}for(let u=s.length;u>i.length;u--)this.el_.removeChild(s[u-1]);s.length=i.length})}};ie.registerComponent("LoadProgressBar",C0);var w0=class extends ie{constructor(e,t){super(e,t),this.update=Mr(st(this,this.update),Ji)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,i){let r=gl(this.el_),a=bo(this.player_.el()),s=e.width*t;if(!a||!r)return;let o=e.left-a.left+s,u=e.width-s+(a.right-e.right),l=r.width/2;o<l?l+=l-o:u<l&&(l=u),l<0?l=0:l>r.width&&(l=r.width),l=Math.round(l),this.el_.style.right=`-${l}px`,this.write(i)}write(e){ua(this.el_,e)}updateTime(e,t,i,r){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let a,s=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){let o=this.player_.liveTracker.liveWindow(),u=o-t*o;a=(u<1?"":"-")+Ya(u,o)}else a=Ya(i,s);this.update(e,t,a),r&&r()})}};ie.registerComponent("TimeTooltip",w0);var Dl=class extends ie{constructor(e,t){super(e,t),this.update=Mr(st(this,this.update),Ji)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){let i=this.getChild("timeTooltip");if(!i)return;let r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,r)}};Dl.prototype.options_={children:[]};!ai&&!Or&&Dl.prototype.options_.children.push("timeTooltip");ie.registerComponent("PlayProgressBar",Dl);var bh=class extends ie{constructor(e,t){super(e,t),this.update=Mr(st(this,this.update),Ji)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){let i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,()=>{this.el_.style.left=`${e.width*t}px`})}};bh.prototype.options_={children:["timeTooltip"]};ie.registerComponent("MouseTimeDisplay",bh);var rh=5,FS=12,El=class extends Sl{constructor(e,t){super(e,t),this.setEventHandlers_()}setEventHandlers_(){this.update_=st(this,this.update),this.update=Mr(this.update_,Ji),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in he.default&&"visibilityState"in he.default&&this.on(he.default,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){he.default.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Ji))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(he.default.visibilityState==="hidden")return;let t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{let i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),r=this.player_.liveTracker,a=this.player_.duration();r&&r.isLive()&&(a=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==i||this.duration_!==a)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Ya(i,a),Ya(a,a)],"{1} of {2}")),this.currentTime_=i,this.duration_=a),this.bar&&this.bar.update(bo(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){let e=this.getCurrentTime_(),t,i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){!vl(e)||(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!vl(e))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i,r=this.calculateDistance(e),a=this.player_.liveTracker;if(!a||!a.isLive())i=r*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(r>=.99){a.seekToLiveEdge();return}let s=a.seekableStart(),o=a.liveCurrentTime();if(i=s+r*a.liveWindow(),i>=o&&(i=o),i<=s&&(i=s+.1),i===1/0)return}this.userSeek_(i)}enable(){super.enable();let e=this.getChild("mouseTimeDisplay");!e||e.show()}disable(){super.disable();let e=this.getChild("mouseTimeDisplay");!e||e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ar(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+rh)}stepBack(){this.userSeek_(this.player_.currentTime()-rh)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){let t=this.player_.liveTracker;if(Ce.default.isEventKey(e,"Space")||Ce.default.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Ce.default.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(Ce.default.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test((0,Ce.default)(e))){e.preventDefault(),e.stopPropagation();let i=(Ce.default.codes[(0,Ce.default)(e)]-Ce.default.codes[0])*10/100;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else Ce.default.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-rh*FS)):Ce.default.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+rh*FS)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in he.default&&"visibilityState"in he.default&&this.off(he.default,"visibilitychange",this.toggleVisibility_),super.dispose()}};El.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!ai&&!Or&&El.prototype.options_.children.splice(1,0,"mouseTimeDisplay");ie.registerComponent("SeekBar",El);var Sh=class extends ie{constructor(e,t){super(e,t),this.handleMouseMove=Mr(st(this,this.handleMouseMove),Ji),this.throttledHandleMouseSeek=Mr(st(this,this.handleMouseSeek),Ji),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){let t=this.getChild("seekBar");if(!t)return;let i=t.getChild("playProgressBar"),r=t.getChild("mouseTimeDisplay");if(!i&&!r)return;let a=t.el(),s=gl(a),o=af(a,e).x;o=Nl(o,0,1),r&&r.update(s,o),i&&i.update(s,t.getProgress())}handleMouseSeek(e){let t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){let e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Ar(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){let e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){let t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){let t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}};Sh.prototype.options_={children:["seekBar"]};ie.registerComponent("ProgressControl",Sh);var Dh=class extends Li{constructor(e,t){super(e,t),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>{e.currentType().substring(0,5)==="audio"||e.audioPosterMode()||e.audioOnlyMode()?(e.isInPictureInPicture()&&e.exitPictureInPicture(),this.hide()):this.show()}),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control ${super.buildCSSClass()}`}handlePictureInPictureEnabledChange(){he.default.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}};Dh.prototype.controlText_="Picture-in-Picture";ie.registerComponent("PictureInPictureToggle",Dh);var Eh=class extends Li{constructor(e,t){super(e,t),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),he.default[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?this.controlText("Exit Fullscreen"):this.controlText("Fullscreen")}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}};Eh.prototype.controlText_="Fullscreen";ie.registerComponent("FullscreenToggle",Eh);var a2=function(n,e){e.tech_&&!e.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})},A0=class extends ie{createEl(){let e=super.createEl("div",{className:"vjs-volume-level"});return e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}};ie.registerComponent("VolumeLevel",A0);var k0=class extends ie{constructor(e,t){super(e,t),this.update=Mr(st(this,this.update),Ji)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,i,r){if(!i){let a=bo(this.el_),s=bo(this.player_.el()),o=e.width*t;if(!s||!a)return;let u=e.left-s.left+o,l=e.width-o+(s.right-e.right),d=a.width/2;u<d?d+=d-u:l<d&&(d=l),d<0?d=0:d>a.width&&(d=a.width),this.el_.style.right=`-${d}px`}this.write(`${r}%`)}write(e){ua(this.el_,e)}updateVolume(e,t,i,r,a){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,i,r.toFixed(0)),a&&a()})}};ie.registerComponent("VolumeLevelTooltip",k0);var Ch=class extends ie{constructor(e,t){super(e,t),this.update=Mr(st(this,this.update),Ji)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,i){let r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,r,()=>{i?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}};Ch.prototype.options_={children:["volumeLevelTooltip"]};ie.registerComponent("MouseVolumeLevelDisplay",Ch);var wo=class extends Sl{constructor(e,t){super(e,t),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){!vl(e)||super.handleMouseDown(e)}handleMouseMove(e){let t=this.getChild("mouseVolumeLevelDisplay");if(t){let i=this.el(),r=bo(i),a=this.vertical(),s=af(i,e);s=a?s.y:s.x,s=Nl(s,0,1),t.update(r,s,a)}!vl(e)||(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){let t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){let e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}};wo.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!ai&&!Or&&wo.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");wo.prototype.playerEvent="volumechange";ie.registerComponent("VolumeBar",wo);var wh=class extends ie{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||To(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),a2(this,e),this.throttledHandleMouseMove=Mr(st(this,this.handleMouseMove),Ji),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){let t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){let t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}};wh.prototype.options_={children:["volumeBar"]};ie.registerComponent("VolumeControl",wh);var s2=function(n,e){e.tech_&&!e.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})},Ah=class extends Li{constructor(e,t){super(e,t),s2(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){let t=this.player_.volume(),i=this.player_.lastVolume_();if(t===0){let r=i<.1?.1:i;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){let e=this.player_.volume(),t=3;ai&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2),rf(this.el_,[0,1,2,3].reduce((i,r)=>i+`${r?" ":""}vjs-vol-${r}`,"")),Ka(this.el_,`vjs-vol-${t}`)}updateControlText_(){let t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}};Ah.prototype.controlText_="Mute";ie.registerComponent("MuteToggle",Ah);var kh=class extends ie{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||To(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){Ce.default.isEventKey(e,"Esc")&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),Ri(he.default,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Gt(he.default,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){Ce.default.isEventKey(e,"Esc")&&this.handleMouseOut()}};kh.prototype.options_={children:["muteToggle","volumeControl"]};ie.registerComponent("VolumePanel",kh);var Ih=class extends ie{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof ie&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof ie&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){let t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){let e=this.options_.contentElType||"ul";this.contentEl_=Fe(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");let t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Ri(t,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){let t=e.relatedTarget||he.default.activeElement;if(!this.children().some(i=>i.el()===t)){let i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();let t=this.children();if(!Array.isArray(t))return;let i=t.filter(r=>r.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){Ce.default.isEventKey(e,"Left")||Ce.default.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Ce.default.isEventKey(e,"Right")||Ce.default.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){let t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}};ie.registerComponent("Menu",Ih);var Cl=class extends ie{constructor(e,t={}){super(e,t),this.menuButton_=new Li(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");let i=Li.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;let r=a=>this.handleClick(a);this.handleMenuKeyUp_=a=>this.handleMenuKeyUp(a),this.on(this.menuButton_,"tap",r),this.on(this.menuButton_,"click",r),this.on(this.menuButton_,"keydown",a=>this.handleKeyDown(a)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),Ri(he.default,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",a=>this.handleMouseLeave(a)),this.on("keydown",a=>this.handleSubmenuKeyDown(a))}update(){let e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){let e=new Ih(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){let t=Fe("li",{className:"vjs-menu-title",textContent:_t(this.options_.title),tabIndex:-1}),i=new ie(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";let t=Li.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Gt(he.default,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){Ce.default.isEventKey(e,"Esc")||Ce.default.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Ce.default.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Ce.default.isEventKey(e,"Up")||Ce.default.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(Ce.default.isEventKey(e,"Esc")||Ce.default.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(Ce.default.isEventKey(e,"Esc")||Ce.default.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Ce.default.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ai&&xD())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}};ie.registerComponent("MenuButton",Cl);var wl=class extends Cl{constructor(e,t){let i=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!i)return;let r=st(this,this.update);i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),i.addEventListener("labelchange",r),this.player_.on("ready",r),this.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r),i.removeEventListener("labelchange",r)})}};ie.registerComponent("TrackButton",wl);var o2=["Tab","Esc","Up","Down","Right","Left"],Ja=class extends Co{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,i){this.nonIconControl=!0;let r=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i);return r.replaceChild(Fe("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r}handleKeyDown(e){o2.some(t=>Ce.default.isEventKey(e,t))||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}};ie.registerComponent("MenuItem",Ja);var Za=class extends Ja{constructor(e,t){let i=t.track,r=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected=i.mode==="showing",super(e,t),this.track=i,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);let a=(...o)=>{this.handleTracksChange.apply(this,o)},s=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],a),r.addEventListener("change",a),r.addEventListener("selectedlanguagechange",s),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],a),r.removeEventListener("change",a),r.removeEventListener("selectedlanguagechange",s)}),r.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof q.default.Event!="object")try{o=new q.default.Event("change")}catch{}o||(o=he.default.createEvent("Event"),o.initEvent("change",!0,!0)),r.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){let t=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let r=0;r<i.length;r++){let a=i[r];this.kinds.indexOf(a.kind)!==-1&&(a===t?a.mode!=="showing"&&(a.mode="showing"):a.mode!=="disabled"&&(a.mode="disabled"))}}handleTracksChange(e){let t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){let t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}};ie.registerComponent("TextTrackMenuItem",Za);var Ph=class extends Za{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){let t=this.player().textTracks(),i=!0;for(let r=0,a=t.length;r<a;r++){let s=t[r];if(this.options_.kinds.indexOf(s.kind)>-1&&s.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){let t=this.player().textTracks(),i=!0;for(let r=0,a=t.length;r<a;r++){let s=t[r];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&s.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}};ie.registerComponent("OffTextTrackMenuItem",Ph);var sa=class extends wl{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=Za){let i;this.label_&&(i=`${this.label_} off`),e.push(new Ph(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;let r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let a=0;a<r.length;a++){let s=r[a];if(this.kinds_.indexOf(s.kind)>-1){let o=new t(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${s.kind}-menu-item`),e.push(o)}}return e}};ie.registerComponent("TextTrackButton",sa);var Fh=class extends Ja{constructor(e,t){let i=t.track,r=t.cue,a=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=a&&a<r.endTime,super(e,t),this.track=i,this.cue=r}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}};ie.registerComponent("ChaptersTrackMenuItem",Fh);var Al=class extends sa{constructor(e,t,i){super(e,t,i),this.selectCurrentItem_=()=>{this.items.forEach(r=>{r.selected(this.track_.activeCues[0]===r.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;let t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){let t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";let t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){let e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){let i=e[t];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(_t(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){let e=[];if(!this.track_)return e;let t=this.track_.cues;if(!t)return e;for(let i=0,r=t.length;i<r;i++){let a=t[i],s=new Fh(this.player_,{track:this.track_,cue:a});e.push(s)}return e}};Al.prototype.kind_="chapters";Al.prototype.controlText_="Chapters";ie.registerComponent("ChaptersButton",Al);var kl=class extends sa{constructor(e,t,i){super(e,t,i);let r=e.textTracks(),a=st(this,this.handleTracksChange);r.addEventListener("change",a),this.on("dispose",function(){r.removeEventListener("change",a)})}handleTracksChange(e){let t=this.player().textTracks(),i=!1;for(let r=0,a=t.length;r<a;r++){let s=t[r];if(s.kind!==this.kind_&&s.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}};kl.prototype.kind_="descriptions";kl.prototype.controlText_="Descriptions";ie.registerComponent("DescriptionsButton",kl);var Il=class extends sa{constructor(e,t,i){super(e,t,i)}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}};Il.prototype.kind_="subtitles";Il.prototype.controlText_="Subtitles";ie.registerComponent("SubtitlesButton",Il);var Pl=class extends Za{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}};ie.registerComponent("CaptionSettingsMenuItem",Pl);var Fl=class extends sa{constructor(e,t,i){super(e,t,i)}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Pl(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}};Fl.prototype.kind_="captions";Fl.prototype.controlText_="Captions";ie.registerComponent("CaptionsButton",Fl);var Oh=class extends Za{createEl(e,t,i){let r=super.createEl(e,t,i),a=r.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(a.appendChild(Fe("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Fe("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),r}};ie.registerComponent("SubsCapsMenuItem",Oh);var Ol=class extends sa{constructor(e,t={}){super(e,t),this.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions"),this.menuButton_.controlText(_t(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Pl(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,Oh),e}};Ol.prototype.kinds_=["captions","subtitles"];Ol.prototype.controlText_="Subtitles";ie.registerComponent("SubsCapsButton",Ol);var Lh=class extends Ja{constructor(e,t){let i=t.track,r=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,super(e,t),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);let a=(...s)=>{this.handleTracksChange.apply(this,s)};r.addEventListener("change",a),this.on("dispose",()=>{r.removeEventListener("change",a)})}createEl(e,t,i){let r=super.createEl(e,t,i),a=r.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(a.appendChild(Fe("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Fe("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){let t=this.player_.audioTracks();for(let i=0;i<t.length;i++){let r=t[i];r!==this.track&&(r.enabled=r===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}};ie.registerComponent("AudioTrackMenuItem",Lh);var Rh=class extends wl{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t)}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;let t=this.player_.audioTracks();for(let i=0;i<t.length;i++){let r=t[i];e.push(new Lh(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e}};Rh.prototype.controlText_="Audio Track";ie.registerComponent("AudioTrackButton",Rh);var Ll=class extends Ja{constructor(e,t){let i=t.rate,r=parseFloat(i,10);t.label=i,t.selected=r===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=i,this.rate=r,this.on(e,"ratechange",a=>this.update(a))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}};Ll.prototype.contentElType="button";ie.registerComponent("PlaybackRateMenuItem",Ll);var Mh=class extends Cl{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){let e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Fe("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){let e=this.playbackRates(),t=[];for(let i=e.length-1;i>=0;i--)t.push(new Ll(this.player(),{rate:e[i]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){let e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}};Mh.prototype.controlText_="Playback Rate";ie.registerComponent("PlaybackRateMenuButton",Mh);var Nh=class extends ie{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},i={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,i)}};ie.registerComponent("Spacer",Nh);var I0=class extends Nh{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:"\xA0"})}};ie.registerComponent("CustomControlSpacer",I0);var Ao=class extends ie{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}};Ao.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in he.default&&Ao.prototype.options_.children.splice(Ao.prototype.options_.children.length-1,0,"pictureInPictureToggle");ie.registerComponent("ControlBar",Ao);var Bh=class extends ra{constructor(e,t){super(e,t),this.on(e,"error",i=>this.open(i))}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){let e=this.player().error();return e?this.localize(e.message):""}};Bh.prototype.options_=Object.assign({},ra.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});ie.registerComponent("ErrorDisplay",Bh);var r0="vjs-text-track-settings",OS=["#000","Black"],LS=["#00F","Blue"],RS=["#0FF","Cyan"],MS=["#0F0","Green"],NS=["#F0F","Magenta"],BS=["#F00","Red"],US=["#FFF","White"],jS=["#FF0","Yellow"],n0=["1","Opaque"],a0=["0.5","Semi-Transparent"],HS=["0","Transparent"],Ga={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[OS,US,BS,MS,LS,jS,NS,RS]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[n0,a0,HS]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[US,OS,BS,MS,LS,jS,NS,RS]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:n=>n==="1.00"?null:Number(n)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[n0,a0]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[HS,a0,n0]}};Ga.windowColor.options=Ga.backgroundColor.options;function zD(n,e){if(e&&(n=e(n)),n&&n!=="none")return n}function u2(n,e){let t=n.options[n.options.selectedIndex].value;return zD(t,e)}function l2(n,e,t){if(!!e){for(let i=0;i<n.options.length;i++)if(zD(n.options[i].value,t)===e){n.selectedIndex=i;break}}}var P0=class extends ra{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.endDialog=Fe("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.on(this.$(".vjs-done-button"),"click",()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),"click",()=>{this.setDefaults(),this.updateDisplay()}),po(Ga,i=>{this.on(this.$(i.selector),"change",this.updateDisplay)}),this.options_.persistTextTrackSettings&&this.restoreSettings()}dispose(){this.endDialog=null,super.dispose()}createElSelect_(e,t="",i="label"){let r=Ga[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return[`<${i} id="${a}" class="${i==="label"?"vjs-label":""}">`,this.localize(r.label),`</${i}>`,`<select aria-labelledby="${s}">`].concat(r.options.map(o=>{let u=a+"-"+o[1].replace(/\W+/g,"");return[`<option id="${u}" value="${o[0]}" `,`aria-labelledby="${s} ${u}">`,this.localize(o[1]),"</option>"].join("")})).concat("</select>").join("")}createElFgColor_(){let e=`captions-text-legend-${this.id_}`;return['<fieldset class="vjs-fg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}createElBgColor_(){let e=`captions-background-${this.id_}`;return['<fieldset class="vjs-bg-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}createElWinColor_(){let e=`captions-window-${this.id_}`;return['<fieldset class="vjs-window-color vjs-track-setting">',`<legend id="${e}">`,this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")}createElColors_(){return Fe("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})}createElFont_(){return Fe("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})}createElControls_(){let e=this.localize("restore all settings to the default values");return Fe("div",{className:"vjs-track-settings-controls",innerHTML:[`<button type="button" class="vjs-default-button" title="${e}">`,this.localize("Reset"),`<span class="vjs-control-text"> ${e}</span>`,"</button>",`<button type="button" class="vjs-done-button">${this.localize("Done")}</button>`].join("")})}content(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return gD(Ga,(e,t,i)=>{let r=u2(this.$(t.selector),t.parser);return r!==void 0&&(e[i]=r),e},{})}setValues(e){po(Ga,(t,i)=>{l2(this.$(t.selector),e[i],t.parser)})}setDefaults(){po(Ga,e=>{let t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(q.default.localStorage.getItem(r0))}catch(t){Ne.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;let e=this.getValues();try{Object.keys(e).length?q.default.localStorage.setItem(r0,JSON.stringify(e)):q.default.localStorage.removeItem(r0)}catch(t){Ne.warn(t)}}updateDisplay(){let e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}conditionalBlur_(){this.previouslyActiveEl_=null;let e=this.player_.controlBar,t=e&&e.subsCapsButton,i=e&&e.captionsButton;t?t.focus():i&&i.focus()}};ie.registerComponent("TextTrackSettings",P0);var F0=class extends ie{constructor(e,t){let i=t.ResizeObserver||q.default.ResizeObserver;t.ResizeObserver===null&&(i=!1);let r=at({createEl:!i,reportTouchActivity:!1},t);super(e,r),this.ResizeObserver=t.ResizeObserver||q.default.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=MD(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;let a=this.debouncedHandler_,s=this.unloadListener_=function(){Gt(this,"resize",a),Gt(this,"unload",s),s=null};Ri(this.el_.contentWindow,"unload",s),Ri(this.el_.contentWindow,"resize",a)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}};ie.registerComponent("ResizeManager",F0);var d2={trackingThreshold:20,liveTolerance:15},O0=class extends ie{constructor(e,t){let i=at(d2,t,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=r=>this.handlePlay(r),this.handleFirstTimeupdate_=r=>this.handleFirstTimeupdate(r),this.handleSeeked_=r=>this.handleSeeked(r),this.seekToLiveEdge_=r=>this.seekToLiveEdge(r),this.reset_(),this.on(this.player_,"durationchange",r=>this.handleDurationchange(r)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){let e=this.player_.seekable();if(!e||!e.length)return;let t=Number(q.default.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;let r=this.liveCurrentTime(),a=this.player_.currentTime(),s=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-a)>this.options_.liveTolerance;(!this.timeupdateSeen_||r===1/0)&&(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Ji),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){let e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){let e=this.player_.seekable(),t=[],i=e?e.length:0;for(;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){let e=this.player_.seekable(),t=[],i=e?e.length:0;for(;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0}liveWindow(){let e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){let e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}};ie.registerComponent("LiveTracker",O0);var L0=class extends ie{constructor(e,t){super(e,t),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Fe("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Rr()}`}),description:Fe("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Rr()}`})},Fe("div",{className:"vjs-title-bar"},{},Object.values(this.els))}updateDom_(){let e=this.player_.tech_,t=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(r=>{let a=this.state[r],s=this.els[r],o=i[r];sf(s),a&&ua(s,a),t&&(t.removeAttribute(o),a&&t.setAttribute(o,s.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){let e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}};ie.registerComponent("TitleBar",L0);var R0=n=>{let e=n.el();if(e.hasAttribute("src"))return n.triggerSourceset(e.src),!0;let t=n.$$("source"),i=[],r="";if(!t.length)return!1;for(let a=0;a<t.length;a++){let s=t[a].src;s&&i.indexOf(s)===-1&&i.push(s)}return i.length?(i.length===1&&(r=i[0]),n.triggerSourceset(r),!0):!1},c2=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(n){let e=he.default.createElement(this.nodeName.toLowerCase());e.innerHTML=n;let t=he.default.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",q.default.Element.prototype.appendChild.call(this,t),this.innerHTML}}),KD=(n,e)=>{let t={};for(let i=0;i<n.length&&(t=Object.getOwnPropertyDescriptor(n[i],e),!(t&&t.set&&t.get));i++);return t.enumerable=!0,t.configurable=!0,t},h2=n=>KD([n.el(),q.default.HTMLMediaElement.prototype,q.default.Element.prototype,c2],"innerHTML"),$S=function(n){let e=n.el();if(e.resetSourceWatch_)return;let t={},i=h2(n),r=a=>(...s)=>{let o=a.apply(e,s);return R0(n),o};["append","appendChild","insertAdjacentHTML"].forEach(a=>{!e[a]||(t[a]=e[a],e[a]=r(t[a]))}),Object.defineProperty(e,"innerHTML",at(i,{set:r(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(a=>{e[a]=t[a]}),Object.defineProperty(e,"innerHTML",i)},n.one("sourceset",e.resetSourceWatch_)},f2=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?qD(q.default.Element.prototype.getAttribute.call(this,"src")):""},set(n){return q.default.Element.prototype.setAttribute.call(this,"src",n),n}}),p2=n=>KD([n.el(),q.default.HTMLMediaElement.prototype,f2],"src"),m2=function(n){if(!n.featuresSourceset)return;let e=n.el();if(e.resetSourceset_)return;let t=p2(n),i=e.setAttribute,r=e.load;Object.defineProperty(e,"src",at(t,{set:a=>{let s=t.set.call(e,a);return n.triggerSourceset(e.src),s}})),e.setAttribute=(a,s)=>{let o=i.call(e,a,s);return/src/i.test(a)&&n.triggerSourceset(e.src),o},e.load=()=>{let a=r.call(e);return R0(n)||(n.triggerSourceset(""),$S(n)),a},e.currentSrc?n.triggerSourceset(e.currentSrc):R0(n)||$S(n),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=r,e.setAttribute=i,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}},me=class extends Ee{constructor(e,t){super(e,t);let i=e.source,r=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){let a=this.el_.childNodes,s=a.length,o=[];for(;s--;){let u=a[s];u.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(u),this.remoteTextTracks().addTrack(u.track),this.textTracks().addTrack(u.track),!r&&!this.el_.hasAttribute("crossorigin")&&df(u.src)&&(r=!0)):o.push(u))}for(let u=0;u<o.length;u++)this.el_.removeChild(o[u])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&r&&Ne.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(ml||ef)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),me.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){m2(this)}restoreMetadataTracksInIOSNativePlayer_(){let e=this.textTracks(),t,i=()=>{t=[];for(let a=0;a<e.length;a++){let s=e[a];s.kind==="metadata"&&t.push({track:s,storedMode:s.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));let r=()=>{for(let a=0;a<t.length;a++){let s=t[a];s.track.mode==="disabled"&&s.track.mode!==s.storedMode&&(s.track.mode=s.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",r)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;let i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(r=>{this.el()[`${i}Tracks`].removeEventListener(r,this[`${i}TracksListeners_`][r])}),this[`featuresNative${e}Tracks`]=!t,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){let t=Qi[e],i=this.el()[t.getterName],r=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!i||!i.addEventListener)return;let a={change:o=>{let u={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(u),e==="text"&&this[Eo.remoteText.getterName]().trigger(u)},addtrack(o){r.addTrack(o.track)},removetrack(o){r.removeTrack(o.track)}},s=function(){let o=[];for(let u=0;u<r.length;u++){let l=!1;for(let d=0;d<i.length;d++)if(i[d]===r[u]){l=!0;break}l||o.push(r[u])}for(;o.length;)r.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=a,Object.keys(a).forEach(o=>{let u=a[o];i.addEventListener(o,u),this.on("dispose",l=>i.removeEventListener(o,u))}),this.on("loadstart",s),this.on("dispose",o=>this.off("loadstart",s))}proxyNativeTracks_(){Qi.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){let i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),me.disposeMediaElement(e),e=i}else{e=he.default.createElement("video");let i=this.options_.tag&&Zn(this.options_.tag),r=at({},i);(!ml||this.options_.nativeControlsForTouch!==!0)&&delete r.controls,DD(e,Object.assign(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&xo(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);let t=["loop","muted","playsinline","autoplay"];for(let i=0;i<t.length;i++){let r=t[i],a=this.options_[r];typeof a<"u"&&(a?xo(e,r,r):nf(e,r),e[r]=a)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1,r=function(){i=!0};this.on("loadstart",r);let a=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",a),this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",a),i||this.trigger("loadstart")});return}let t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&tf?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){Ne(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Or&&Lr&&this.el_.currentTime===0){let e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;let e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){let e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Ar(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}reset(){me.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):super.addTextTrack(e,t,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);let t=he.default.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){let i=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){let t=this.$$("track"),i=t.length;for(;i--;)(e===t[i]||e===t[i].track)&&this.el().removeChild(t[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();let e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),q.default.performance&&(e.creationTime=q.default.performance.now()),e}};Qh(me,"TEST_VID",function(){if(!Io())return;let n=he.default.createElement("video"),e=he.default.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n});me.isSupported=function(){try{me.TEST_VID.volume=.5}catch{return!1}return!!(me.TEST_VID&&me.TEST_VID.canPlayType)};me.canPlayType=function(n){return me.TEST_VID.canPlayType(n)};me.canPlaySource=function(n,e){return me.canPlayType(n.type)};me.canControlVolume=function(){try{let n=me.TEST_VID.volume;me.TEST_VID.volume=n/2+.1;let e=n!==me.TEST_VID.volume;return e&&ai?(q.default.setTimeout(()=>{me&&me.prototype&&(me.prototype.featuresVolumeControl=n!==me.TEST_VID.volume)}),!1):e}catch{return!1}};me.canMuteVolume=function(){try{let n=me.TEST_VID.muted;return me.TEST_VID.muted=!n,me.TEST_VID.muted?xo(me.TEST_VID,"muted","muted"):nf(me.TEST_VID,"muted","muted"),n!==me.TEST_VID.muted}catch{return!1}};me.canControlPlaybackRate=function(){if(Or&&Lr&&Jh<58)return!1;try{let n=me.TEST_VID.playbackRate;return me.TEST_VID.playbackRate=n/2+.1,n!==me.TEST_VID.playbackRate}catch{return!1}};me.canOverrideAttributes=function(){try{let n=()=>{};Object.defineProperty(he.default.createElement("video"),"src",{get:n,set:n}),Object.defineProperty(he.default.createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(he.default.createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(he.default.createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0};me.supportsNativeTextTracks=function(){return tf||ai&&Lr};me.supportsNativeVideoTracks=function(){return!!(me.TEST_VID&&me.TEST_VID.videoTracks)};me.supportsNativeAudioTracks=function(){return!!(me.TEST_VID&&me.TEST_VID.audioTracks)};me.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([n,e]){Qh(me.prototype,n,()=>me[e](),!0)});me.prototype.featuresVolumeControl=me.canControlVolume();me.prototype.movingMediaElementInDOM=!ai;me.prototype.featuresFullscreenResize=!0;me.prototype.featuresProgressEvents=!0;me.prototype.featuresTimeupdateEvents=!0;me.prototype.featuresVideoFrameCallback=!!(me.TEST_VID&&me.TEST_VID.requestVideoFrameCallback);me.disposeMediaElement=function(n){if(!!n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};me.resetMediaElement=function(n){if(!n)return;let e=n.querySelectorAll("source"),t=e.length;for(;t--;)n.removeChild(e[t]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){me.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){me.prototype["set"+_t(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){me.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){me.prototype["set"+_t(n)]=function(e){this.el_[n]=e}});["pause","load","play"].forEach(function(n){me.prototype[n]=function(){return this.el_[n]()}});Ee.withSourceHandlers(me);me.nativeSourceHandler={};me.nativeSourceHandler.canPlayType=function(n){try{return me.TEST_VID.canPlayType(n)}catch{return""}};me.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return me.nativeSourceHandler.canPlayType(n.type);if(n.src){let t=uv(n.src);return me.nativeSourceHandler.canPlayType(`video/${t}`)}return""};me.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)};me.nativeSourceHandler.dispose=function(){};me.registerSourceHandler(me.nativeSourceHandler);Ee.registerTech("Html5",me);var XD=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],s0={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},M0=["tiny","xsmall","small","medium","large","xlarge","huge"],uh={};M0.forEach(n=>{let e=n.charAt(0)==="x"?`x-${n.substring(1)}`:n;uh[n]=`vjs-layout-${e}`});var g2={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Je=class extends ie{constructor(e,t,i){if(e.id=e.id||t.id||`vjs_video_${Rr()}`,t=Object.assign(Je.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){let s=e.closest("[lang]");s&&(t.language=s.getAttribute("lang"))}if(super(null,t,i),this.boundDocumentFullscreenChange_=s=>this.documentFullscreenChange_(s),this.boundFullWindowOnEscKey_=s=>this.fullWindowOnEscKey(s),this.boundUpdateStyleEl_=s=>this.updateStyleEl_(s),this.boundApplyInitTime_=s=>this.applyInitTime_(s),this.boundUpdateCurrentBreakpoint_=s=>this.updateCurrentBreakpoint_(s),this.boundHandleTechClick_=s=>this.handleTechClick_(s),this.boundHandleTechDoubleClick_=s=>this.handleTechDoubleClick_(s),this.boundHandleTechTouchStart_=s=>this.handleTechTouchStart_(s),this.boundHandleTechTouchMove_=s=>this.handleTechTouchMove_(s),this.boundHandleTechTouchEnd_=s=>this.handleTechTouchEnd_(s),this.boundHandleTechTap_=s=>this.handleTechTap_(s),this.isFullscreen_=!1,this.log=pD(this.id_),this.fsApi_=dh,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Zn(e),this.language(this.options_.language),t.languages){let s={};Object.getOwnPropertyNames(t.languages).forEach(function(o){s[o.toLowerCase()]=t.languages[o]}),this.languages_=s}else this.languages_=Je.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(s=>{if(typeof this[s]!="function")throw new Error(`plugin "${s}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),av(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(Ri(he.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);let r=at(this.options_);t.plugins&&Object.keys(t.plugins).forEach(s=>{this[s](t.plugins[s])}),t.debug&&this.debug(!0),this.options_.playerOptions=r,this.middleware_=[],this.playbackRates(t.playbackRates),this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),ml&&this.addClass("vjs-touch-enabled"),ai||this.addClass("vjs-workinghover"),Je.players[this.id_]=this;let a=cD.split(".")[0];this.addClass(`vjs-v${a}`),this.userActive(!0),this.reportUserActivity(),this.one("play",s=>this.listenForUserActivity_(s)),this.on("keydown",s=>this.handleKeyDown(s)),this.on("languagechange",s=>this.handleLanguagechange(s)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Gt(he.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Gt(he.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),Je.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),ZL(this),ti.names.forEach(e=>{let t=ti[e],i=this[t.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),r=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:r||(t=this.el_=super.createEl("div"));let a=Zn(e);if(r){for(t=this.el_=e,e=this.tag=he.default.createElement("video");t.children.length;)e.appendChild(t.firstChild);ll(t,"video-js")||Ka(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(o=>{try{e[o]=t[o]}catch{}})}if(e.setAttribute("tabindex","-1"),a.tabindex="-1",Lr&&Zh&&(e.setAttribute("role","application"),a.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach(function(o){r&&o==="class"||t.setAttribute(o,a[o]),r&&e.setAttribute(o,a[o])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),q.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=LD("vjs-styles-dimensions");let o=ia(".vjs-styles-defaults"),u=ia("head");u.insertBefore(this.styleEl_,o?o.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);let s=e.getElementsByTagName("a");for(let o=0;o<s.length;o++){let u=s.item(o);Ka(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),d0(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){Ne.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){let i=e+"_";if(t===void 0)return this[i]||0;if(t===""||t==="auto"){this[i]=void 0,this.updateStyleEl_();return}let r=parseFloat(t);if(isNaN(r)){Ne.error(`Improper value "${t}" supplied for for ${e}`);return}this[i]=r,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Tn(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),FL(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(q.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){let o=typeof this.width_=="number"?this.width_:this.options_.width,u=typeof this.height_=="number"?this.height_:this.options_.height,l=this.tech_&&this.tech_.el();l&&(o>=0&&(l.width=o),u>=0&&(l.height=u));return}let e,t,i,r;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";let a=i.split(":"),s=a[1]/a[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/s:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*s,/^[^a-zA-Z]/.test(this.id())?r="dimensions-"+this.id():r=this.id()+"-dimensions",this.addClass(r),RD(this.styleEl_,`
      .${r} {
        width: ${e}px;
        height: ${t}px;
      }

      .${r}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${s*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();let i=_t(e),r=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(Ee.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let a=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(a=!1);let s={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${r}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};ti.names.forEach(u=>{let l=ti[u];s[l.getterName]=this[l.privateName]}),Object.assign(s,this.options_[i]),Object.assign(s,this.options_[r]),Object.assign(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);let o=Ee.getTech(e);if(!o)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new o(s),this.tech_.ready(st(this,this.handleTechReady_),!0),DS.jsonToTextTracks(this.textTracksJson_||[],this.tech_),XD.forEach(u=>{this.on(this.tech_,u,l=>this[`handleTech${_t(u)}_`](l))}),Object.keys(s0).forEach(u=>{this.on(this.tech_,u,l=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${s0[u]}_`].bind(this),event:l});return}this[`handleTech${s0[u]}_`](l)})}),this.on(this.tech_,"loadstart",u=>this.handleTechLoadStart_(u)),this.on(this.tech_,"sourceset",u=>this.handleTechSourceset_(u)),this.on(this.tech_,"waiting",u=>this.handleTechWaiting_(u)),this.on(this.tech_,"ended",u=>this.handleTechEnded_(u)),this.on(this.tech_,"seeking",u=>this.handleTechSeeking_(u)),this.on(this.tech_,"play",u=>this.handleTechPlay_(u)),this.on(this.tech_,"pause",u=>this.handleTechPause_(u)),this.on(this.tech_,"durationchange",u=>this.handleTechDurationChange_(u)),this.on(this.tech_,"fullscreenchange",(u,l)=>this.handleTechFullscreenChange_(u,l)),this.on(this.tech_,"fullscreenerror",(u,l)=>this.handleTechFullscreenError_(u,l)),this.on(this.tech_,"enterpictureinpicture",u=>this.handleTechEnterPictureInPicture_(u)),this.on(this.tech_,"leavepictureinpicture",u=>this.handleTechLeavePictureInPicture_(u)),this.on(this.tech_,"error",u=>this.handleTechError_(u)),this.on(this.tech_,"posterchange",u=>this.handleTechPosterChange_(u)),this.on(this.tech_,"textdata",u=>this.handleTechTextData_(u)),this.on(this.tech_,"ratechange",u=>this.handleTechRateChange_(u)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&d0(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){ti.names.forEach(e=>{let t=ti[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=DS.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&Ne.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;let t=()=>{let r=this.muted();this.muted(!0);let a=()=>{this.muted(r)};this.playTerminatedQueue_.push(a);let s=this.play();if(!!cl(s))return s.catch(o=>{throw a(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})},i;if(e==="any"&&!this.muted()?(i=this.play(),cl(i)&&(i=i.catch(t))):e==="muted"&&!this.muted()?i=t():i=this.play(),!!cl(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,i="";typeof t!="string"&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=i2(this,t)),this.cache_.source=at({},e,{src:t,type:i});let r=this.cache_.sources.filter(u=>u.src&&u.src===t),a=[],s=this.$$("source"),o=[];for(let u=0;u<s.length;u++){let l=Zn(s[u]);a.push(l),l.src&&l.src===t&&o.push(l.src)}o.length&&!r.length?this.cache_.sources=a:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=a=>this.updateSourceCaches_(a),i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(t=()=>{}),t(r),e.src||this.tech_.any(["sourceset","loadstart"],a=>{if(a.type==="sourceset")return;let s=this.techGet("currentSrc");this.lastSource_.tech=s,this.updateSourceCaches_(s)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");let e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){!this.controls_||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Ar(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){let t=e.target.player;if(t&&t!==this)return;let i=this.el(),r=he.default[this.fsApi_.fullscreenElement]===i;!r&&i.matches?r=i.matches(":"+this.fsApi_.fullscreen):!r&&i.msMatchesSelector&&(r=i.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){let e=this.tech_.error();this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in QL)return XL(this.middleware_,this.tech_,e,t);if(e in kS)return AS(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw Ne(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in YL)return KL(this.middleware_,this.tech_,e);if(e in kS)return AS(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(Ne(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(Ne(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(Ne(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Ar){this.playCallbacks_.push(e);let t=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=r=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&(tf||ai)&&this.load();return}let i=this.techGet_("play");i===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)}runPlayTerminatedQueue_(){let e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){let t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Pr(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(typeof e<"u"){if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=Pr(0,0)),e}bufferedPercent(){return WD(this.buffered(),this.duration())}bufferedEnd(){let e=this.buffered(),t=this.duration(),i=e.end(e.length-1);return i>t&&(i=t),i}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){let t=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();let t=this;return new Promise((i,r)=>{function a(){t.off("fullscreenerror",o),t.off("fullscreenchange",s)}function s(){a(),i()}function o(l,d){a(),r(d)}t.one("fullscreenchange",s),t.one("fullscreenerror",o);let u=t.requestFullscreenHelper_(e);u&&(u.then(a,a),u.then(i,r))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){let i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){let e=this;return new Promise((t,i)=>{function r(){e.off("fullscreenerror",s),e.off("fullscreenchange",a)}function a(){r(),t()}function s(u,l){r(),i(l)}e.one("fullscreenchange",a),e.one("fullscreenerror",s);let o=e.exitFullscreenHelper_();o&&(o.then(r,r),o.then(t,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){let e=he.default[this.fsApi_.exitFullscreen]();return e&&Ar(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=he.default.documentElement.style.overflow,Ri(he.default,"keydown",this.boundFullWindowOnEscKey_),he.default.documentElement.style.overflow="hidden",Ka(he.default.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){Ce.default.isEventKey(e,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Gt(he.default,"keydown",this.boundFullWindowOnEscKey_),he.default.documentElement.style.overflow=this.docOrigOverflow,rf(he.default.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if("pictureInPictureEnabled"in he.default&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")}exitPictureInPicture(){if("pictureInPictureEnabled"in he.default)return he.default.exitPictureInPicture()}handleKeyDown(e){let{userActions:t}=this.options_;!t||!t.hotkeys||(r=>{let a=r.tagName.toLowerCase();if(r.isContentEditable)return!0;let s=["button","checkbox","hidden","radio","reset","submit"];return a==="input"?s.indexOf(r.type)===-1:["textarea"].indexOf(a)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){let t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=s=>Ce.default.isEventKey(s,"f"),muteKey:r=s=>Ce.default.isEventKey(s,"m"),playPauseKey:a=s=>Ce.default.isEventKey(s,"k")||Ce.default.isEventKey(s,"Space")}=t;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();let s=ie.getComponent("FullscreenToggle");he.default[this.fsApi_.fullscreenEnabled]!==!1&&s.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),ie.getComponent("MuteToggle").prototype.handleClick.call(this,e)):a.call(this,e)&&(e.preventDefault(),e.stopPropagation(),ie.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let i=0,r=this.options_.techOrder;i<r.length;i++){let a=r[i],s=Ee.getTech(a);if(s||(s=ie.getComponent(a)),!s){Ne.error(`The "${a}" tech is undefined. Skipped browser support check for that tech.`);continue}if(s.isSupported()&&(t=s.canPlayType(e),t))return t}return""}selectSource(e){let t=this.options_.techOrder.map(o=>[o,Ee.getTech(o)]).filter(([o,u])=>u?u.isSupported():(Ne.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(o,u,l){let d;return o.some(h=>u.some(p=>{if(d=l(h,p),d)return!0})),d},r,a=o=>(u,l)=>o(l,u),s=([o,u],l)=>{if(u.canPlaySource(l,this.options_[o.toLowerCase()]))return{source:l,tech:o}};return this.options_.sourceOrder?r=i(e,t,a(s)):r=i(t,e,s),r||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();let i=GD(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),GL(this,i[0],(r,a)=>{if(this.middleware_=a,t||(this.cache_.sources=i),this.updateSourceCaches_(r),this.src_(r)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}zL(a,this.tech_)}),i.length>1){let r=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},a=()=>{this.off("error",r)};this.one("error",r),this.one("playing",a),this.resetRetryOnError_=()=>{this.off("error",r),this.off("playing",a)}}}src(e){return this.handleSrc_(e,!1)}src_(e){let t=this.selectSource([e]);return t?jD(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}load(){this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{let e=this.play();Ar(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Tn(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);let{durationDisplay:e,remainingTimeDisplay:t}=this.controlBar||{};e&&e.updateContent(),t&&t.updateContent()}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){let e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){let e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(ta("beforeerror").forEach(t=>{let i=t(this,e);if(!(Fr(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){let t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new ri(e),this.addClass("vjs-error"),Ne.error(`(CODE:${this.error_.code} ${ri.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),ta("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,i,r=st(this,this.reportUserActivity),a=function(d){(d.screenX!==t||d.screenY!==i)&&(t=d.screenX,i=d.screenY,r())},s=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},o=function(d){r(),this.clearInterval(e)};this.on("mousedown",s),this.on("mousemove",a),this.on("mouseup",o),this.on("mouseleave",o);let u=this.getChild("controlBar");u&&!ai&&!Or&&(u.on("mouseenter",function(d){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),u.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r);let l;this.setInterval(function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(l);let d=this.options_.inactivityTimeout;d<=0||(l=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))},250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");let e=this.children(),t=this.getChild("ControlBar"),i=t&&t.currentHeight();e.forEach(r=>{r!==t&&r.el_&&!r.hasClass("vjs-hidden")&&(r.hide(),this.audioOnlyCache_.hiddenChildren.push(r))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){let t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Tn(this)&&this.trigger("languagechange"))}languages(){return at(Je.prototype.options_.languages,this.languages_)}toJSON(){let e=at(this.options_),t=e.tracks;e.tracks=[];for(let i=0;i<t.length;i++){let r=t[i];r=at(r),r.player=void 0,e.tracks[i]=r}return e}createModal(e,t){t=t||{},t.content=e||"";let i=new ra(this,t);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;let e=this.currentBreakpoint(),t=this.currentWidth();for(let i=0;i<M0.length;i++){let r=M0[i],a=this.breakpoints_[r];if(t<=a){if(e===r)return;e&&this.removeClass(uh[e]),this.addClass(uh[r]),this.breakpoint_=r;break}}}removeCurrentBreakpoint_(){let e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},g2,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=Boolean(e);let t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return uh[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;this.reset(),this.cache_.media=at(e);let{artist:i,artwork:r,description:a,poster:s,src:o,textTracks:u,title:l}=this.cache_.media;!r&&s&&(this.cache_.media.artwork=[{src:s,type:_h(s)}]),o&&this.src(o),s&&this.poster(s),Array.isArray(u)&&u.forEach(d=>this.addRemoteTextTrack(d,!1)),this.titleBar&&this.titleBar.update({title:l,description:a||i||""}),this.ready(t)}getMedia(){if(!this.cache_.media){let e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),a=>({kind:a.kind,label:a.label,language:a.language,src:a.src})),r={src:t,textTracks:i};return e&&(r.poster=e,r.artwork=[{src:r.poster,type:_h(r.poster)}]),r}return at(this.cache_.media)}static getTagSettings(e){let t={sources:[],tracks:[]},i=Zn(e),r=i["data-setup"];if(ll(e,"vjs-fill")&&(i.fill=!0),ll(e,"vjs-fluid")&&(i.fluid=!0),r!==null){let[a,s]=(0,lD.default)(r||"{}");a&&Ne.error(a),Object.assign(i,s)}if(Object.assign(t,i),e.hasChildNodes()){let a=e.childNodes;for(let s=0,o=a.length;s<o;s++){let u=a[s],l=u.nodeName.toLowerCase();l==="source"?t.sources.push(Zn(u)):l==="track"&&t.tracks.push(Zn(u))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;!Array.isArray(e)||!e.every(t=>typeof t=="number")||(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}};ti.names.forEach(function(n){let e=ti[n];Je.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Je.prototype.crossorigin=Je.prototype.crossOrigin;Je.players={};var al=q.default.navigator;Je.prototype.options_={techOrder:Ee.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:al&&(al.languages&&al.languages[0]||al.userLanguage||al.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(n){Je.prototype[n]=function(){return this.techGet_(n)}});XD.forEach(function(n){Je.prototype[`handleTech${_t(n)}_`]=function(){return this.trigger(n)}});ie.registerComponent("Player",Je);var Uh="plugin",vo="activePlugins_",ho={},jh=n=>ho.hasOwnProperty(n),lh=n=>jh(n)?ho[n]:void 0,YD=(n,e)=>{n[vo]=n[vo]||{},n[vo][e]=!0},Hh=(n,e,t)=>{let i=(t?"before":"")+"pluginsetup";n.trigger(i,e),n.trigger(i+":"+e.name,e)},v2=function(n,e){let t=function(){Hh(this,{name:n,plugin:e,instance:null},!0);let i=e.apply(this,arguments);return YD(this,n),Hh(this,{name:n,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){t[i]=e[i]}),t},VS=(n,e)=>(e.prototype.name=n,function(...t){Hh(this,{name:n,plugin:e,instance:null},!0);let i=new e(this,...t);return this[n]=()=>i,Hh(this,i.getEventHash()),i}),zt=class{constructor(e){if(this.constructor===zt)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),av(this),delete this.trigger,UD(this,this.constructor.defaultState),YD(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Fo(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){let{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[vo][e]=!1,this.player=this.state=null,t[e]=VS(e,ho[e])}static isBasic(e){let t=typeof e=="string"?lh(e):e;return typeof t=="function"&&!zt.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(jh(e))Ne.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(Je.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return ho[e]=t,e!==Uh&&(zt.isBasic(t)?Je.prototype[e]=v2(e,t):Je.prototype[e]=VS(e,t)),t}static deregisterPlugin(e){if(e===Uh)throw new Error("Cannot de-register base plugin.");jh(e)&&(delete ho[e],delete Je.prototype[e])}static getPlugins(e=Object.keys(ho)){let t;return e.forEach(i=>{let r=lh(i);r&&(t=t||{},t[i]=r)}),t}static getPluginVersion(e){let t=lh(e);return t&&t.VERSION||""}};zt.getPlugin=lh;zt.BASE_PLUGIN_NAME=Uh;zt.registerPlugin(Uh,zt);Je.prototype.usingPlugin=function(n){return!!this[vo]&&this[vo][n]===!0};Je.prototype.hasPlugin=function(n){return!!jh(n)};function _2(n,e){let t=!1;return function(...i){return t||Ne.warn(n),t=!0,e.apply(this,i)}}function ur(n,e,t,i){return _2(`${e} is deprecated and will be removed in ${n}.0; please use ${t} instead.`,i)}var QD=n=>n.indexOf("#")===0?n.slice(1):n;function Z(n,e,t){let i=Z.getPlayer(n);if(i)return e&&Ne.warn(`Player "${n}" is already initialised. Options will not be applied.`),t&&i.ready(t),i;let r=typeof n=="string"?ia("#"+QD(n)):n;if(!Po(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!r.ownerDocument.defaultView||!r.ownerDocument.body.contains(r))&&Ne.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),ta("beforesetup").forEach(s=>{let o=s(r,at(e));if(!Fr(o)||Array.isArray(o)){Ne.error("please return an object in beforesetup hooks");return}e=at(e,o)});let a=ie.getComponent("Player");return i=new a(r,e,t),ta("setup").forEach(s=>s(i)),i}Z.hooks_=_n;Z.hooks=ta;Z.hook=_L;Z.hookOnce=yL;Z.removeHook=hD;if(q.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Io()){let n=ia(".vjs-styles-defaults");if(!n){n=LD("vjs-styles-defaults");let e=ia("head");e&&e.insertBefore(n,e.firstChild),RD(n,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}h0(1,Z);Z.VERSION=cD;Z.options=Je.prototype.options_;Z.getPlayers=()=>Je.players;Z.getPlayer=n=>{let e=Je.players,t;if(typeof n=="string"){let i=QD(n),r=e[i];if(r)return r;t=ia("#"+i)}else t=n;if(Po(t)){let{player:i,playerId:r}=t;if(i||e[r])return i||e[r]}};Z.getAllPlayers=()=>Object.keys(Je.players).map(n=>Je.players[n]).filter(Boolean);Z.players=Je.players;Z.getComponent=ie.getComponent;Z.registerComponent=(n,e)=>{Ee.isTech(e)&&Ne.warn(`The ${n} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),ie.registerComponent.call(ie,n,e)};Z.getTech=Ee.getTech;Z.registerTech=Ee.registerTech;Z.use=qL;Object.defineProperty(Z,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(Z.middleware,"TERMINATOR",{value:vh,writeable:!1,enumerable:!0});Z.browser=SL;Z.obj=bL;Z.mergeOptions=ur(9,"videojs.mergeOptions","videojs.obj.merge",at);Z.defineLazyProperty=ur(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",Qh);Z.bind=ur(9,"videojs.bind","native Function.prototype.bind",st);Z.registerPlugin=zt.registerPlugin;Z.deregisterPlugin=zt.deregisterPlugin;Z.plugin=(n,e)=>(Ne.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),zt.registerPlugin(n,e));Z.getPlugins=zt.getPlugins;Z.getPlugin=zt.getPlugin;Z.getPluginVersion=zt.getPluginVersion;Z.addLanguage=function(n,e){return n=(""+n).toLowerCase(),Z.options.languages=at(Z.options.languages,{[n]:e}),Z.options.languages[n]};Z.log=Ne;Z.createLogger=pD;Z.time=NL;Z.createTimeRange=ur(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Pr);Z.createTimeRanges=ur(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Pr);Z.formatTime=ur(9,"videojs.formatTime","videojs.time.formatTime",Ya);Z.setFormatTime=ur(9,"videojs.setFormatTime","videojs.time.setFormatTime",$D);Z.resetFormatTime=ur(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",VD);Z.parseUrl=ur(9,"videojs.parseUrl","videojs.url.parseUrl",ov);Z.isCrossOrigin=ur(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",df);Z.EventTarget=Di;Z.any=nv;Z.on=Ri;Z.one=uf;Z.off=Gt;Z.trigger=Fo;Z.xhr=Z0.default;Z.TextTrack=Qa;Z.AudioTrack=mh;Z.VideoTrack=gh;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(n=>{Z[n]=function(){return Ne.warn(`videojs.${n}() is deprecated; use videojs.dom.${n}() instead`),FD[n].apply(null,arguments)}});Z.computedStyle=ur(9,"videojs.computedStyle","videojs.dom.computedStyle",So);Z.dom=FD;Z.fn=PL;Z.num=n2;Z.str=RL;Z.url=VL;var N0=class{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(i){t.enabled_(i)}}),t}},ko=class extends Z.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;let i=this.levels_.length;return t=new N0(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,i=this.length;t<i;t++){let r=this[t];if(r.id===e)return r}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}};ko.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(let n in ko.prototype.allowedEvents_)ko.prototype["on"+n]=null;var JD="3.0.0",y2=Z.registerPlugin||Z.plugin,T2=function(n,e){let t=n.qualityLevels,i=new ko,r=function(){i.dispose(),n.qualityLevels=t,n.off("dispose",r)};return n.on("dispose",r),n.qualityLevels=()=>i,n.qualityLevels.VERSION=JD,i},ZD=function(n){return T2(this,Z.mergeOptions({},n))};y2("qualityLevels",ZD);ZD.VERSION=JD;var sr=Nx,$h=(n,e)=>e&&e.responseURL&&n!==e.responseURL?e.responseURL:n,lr=n=>Z.log.debug?Z.log.debug.bind(Z,"VHS:",`${n} >`):function(){};function it(...n){let e=Z.obj||Z;return(e.merge||e.mergeOptions).apply(e,n)}function qt(...n){let e=Z.time||Z;return(e.createTimeRanges||e.createTimeRanges).apply(e,n)}var oa=1/30,kr=oa*3,eE=function(n,e){let t=[],i;if(n&&n.length)for(i=0;i<n.length;i++)e(n.start(i),n.end(i))&&t.push([n.start(i),n.end(i)]);return qt(t)},fo=function(n,e){return eE(n,function(t,i){return t-kr<=e&&i+kr>=e})},nh=function(n,e){return eE(n,function(t){return t-oa>=e})},x2=function(n){if(n.length<2)return qt();let e=[];for(let t=1;t<n.length;t++){let i=n.end(t-1),r=n.start(t);e.push([i,r])}return qt(e)},b2=function(n,e){let t=null,i=null,r=0,a=[],s=[];if(!n||!n.length||!e||!e.length)return qt();let o=n.length;for(;o--;)a.push({time:n.start(o),type:"start"}),a.push({time:n.end(o),type:"end"});for(o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(a.sort(function(u,l){return u.time-l.time}),o=0;o<a.length;o++)a[o].type==="start"?(r++,r===2&&(t=a[o].time)):a[o].type==="end"&&(r--,r===1&&(i=a[o].time)),t!==null&&i!==null&&(s.push([t,i]),t=null,i=null);return qt(s)},tE=n=>{let e=[];if(!n||!n.length)return"";for(let t=0;t<n.length;t++)e.push(n.start(t)+" => "+n.end(t));return e.join(", ")},S2=function(n,e,t=1){return((n.length?n.end(n.length-1):0)-e)/t},za=n=>{let e=[];for(let t=0;t<n.length;t++)e.push({start:n.start(t),end:n.end(t)});return e},D2=function(n,e){if(n===e)return!1;if(!n&&e||!e&&n||n.length!==e.length)return!0;for(let t=0;t<n.length;t++)if(n.start(t)!==e.start(t)||n.end(t)!==e.end(t))return!0;return!1},WS=function(n){if(!(!n||!n.length||!n.end))return n.end(n.length-1)},dv=function(n,e){let t=0;if(!n||!n.length)return t;for(let i=0;i<n.length;i++){let r=n.start(i),a=n.end(i);if(!(e>a)){if(e>r&&e<=a){t+=a-e;continue}t+=a-r}}return t},cv=(n,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(i){t+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(t+=n.partTargetDuration)}),t},B0=n=>(n.segments||[]).reduce((e,t,i)=>(t.parts?t.parts.forEach(function(r,a){e.push({duration:r.duration,segmentIndex:i,partIndex:a,part:r,segment:t})}):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e),[]),iE=n=>{let e=n.segments&&n.segments.length&&n.segments[n.segments.length-1];return e&&e.parts||[]},rE=({preloadSegment:n})=>{if(!n)return;let{parts:e,preloadHints:t}=n,i=(t||[]).reduce((r,a)=>r+(a.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},nE=(n,e)=>{if(e.endList)return 0;if(n&&n.suggestedPresentationDelay)return n.suggestedPresentationDelay;let t=iE(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},E2=function(n,e){let t=0,i=e-n.mediaSequence,r=n.segments[i];if(r){if(typeof r.start<"u")return{result:r.start,precise:!0};if(typeof r.end<"u")return{result:r.end-r.duration,precise:!0}}for(;i--;){if(r=n.segments[i],typeof r.end<"u")return{result:t+r.end,precise:!0};if(t+=cv(n,r),typeof r.start<"u")return{result:t+r.start,precise:!0}}return{result:t,precise:!1}},C2=function(n,e){let t=0,i,r=e-n.mediaSequence;for(;r<n.segments.length;r++){if(i=n.segments[r],typeof i.start<"u")return{result:i.start-t,precise:!0};if(t+=cv(n,i),typeof i.end<"u")return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}},aE=function(n,e,t){if(typeof e>"u"&&(e=n.mediaSequence+n.segments.length),e<n.mediaSequence)return 0;let i=E2(n,e);if(i.precise)return i.result;let r=C2(n,e);return r.precise?r.result:i.result+t},sE=function(n,e,t){if(!n)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(n.totalDuration)return n.totalDuration;if(!n.endList)return q.default.Infinity}return aE(n,e,t)},hl=function({defaultDuration:n,durationList:e,startIndex:t,endIndex:i}){let r=0;if(t>i&&([t,i]=[i,t]),t<0){for(let a=t;a<Math.min(0,i);a++)r+=n;t=0}for(let a=t;a<i;a++)r+=e[a].duration;return r},oE=function(n,e,t,i){if(!n||!n.segments)return null;if(n.endList)return sE(n);if(e===null)return null;e=e||0;let r=aE(n,n.mediaSequence+n.segments.length,e);return t&&(i=typeof i=="number"?i:nE(null,n),r-=i),Math.max(0,r)},w2=function(n,e,t){let r=e||0,a=oE(n,e,!0,t);return a===null?qt():qt(r,a)},A2=function({playlist:n,currentTime:e,startingSegmentIndex:t,startingPartIndex:i,startTime:r,exactManifestTimings:a}){let s=e-r,o=B0(n),u=0;for(let l=0;l<o.length;l++){let d=o[l];if(t===d.segmentIndex&&!(typeof i=="number"&&typeof d.partIndex=="number"&&i!==d.partIndex)){u=l;break}}if(s<0){if(u>0)for(let l=u-1;l>=0;l--){let d=o[l];if(s+=d.duration,a){if(s<0)continue}else if(s+oa<=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:r-hl({defaultDuration:n.targetDuration,durationList:o,startIndex:u,endIndex:l})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(u<0){for(let l=u;l<0;l++)if(s-=n.targetDuration,s<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};u=0}for(let l=u;l<o.length;l++){let d=o[l];if(s-=d.duration,a){if(s>0)continue}else if(s-oa>=0)continue;return{partIndex:d.partIndex,segmentIndex:d.segmentIndex,startTime:r+hl({defaultDuration:n.targetDuration,durationList:o,startIndex:u,endIndex:l})}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},uE=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},hv=function(n){return n.excludeUntil&&n.excludeUntil===1/0},cf=function(n){let e=uE(n);return!n.disabled&&!e},k2=function(n){return n.disabled},I2=function(n){for(let e=0;e<n.segments.length;e++)if(n.segments[e].key)return!0;return!1},lE=function(n,e){return e.attributes&&e.attributes[n]},P2=function(n,e,t,i=0){return lE("BANDWIDTH",t)?(n*t.attributes.BANDWIDTH-i*8)/e:NaN},U0=(n,e)=>{if(n.playlists.length===1)return!0;let t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return n.playlists.filter(i=>cf(i)?(i.attributes.BANDWIDTH||0)<t:!1).length===0},fv=(n,e)=>!n&&!e||!n&&e||n&&!e?!1:!!(n===e||n.id&&e.id&&n.id===e.id||n.resolvedUri&&e.resolvedUri&&n.resolvedUri===e.resolvedUri||n.uri&&e.uri&&n.uri===e.uri),qS=function(n,e){let t=n&&n.mediaGroups&&n.mediaGroups.AUDIO||{},i=!1;for(let r in t){for(let a in t[r])if(i=e(t[r][a]),i)break;if(i)break}return!!i},Bl=n=>{if(!n||!n.playlists||!n.playlists.length)return qS(n,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<n.playlists.length;e++){let t=n.playlists[e],i=t.attributes&&t.attributes.CODECS;if(!(i&&i.split(",").every(a=>hg(a))||qS(n,a=>fv(t,a))))return!1}return!0},Si={liveEdgeDelay:nE,duration:sE,seekable:w2,getMediaInfoForTime:A2,isEnabled:cf,isDisabled:k2,isExcluded:uE,isIncompatible:hv,playlistEnd:oE,isAes:I2,hasAttribute:lE,estimateSegmentRequestTime:P2,isLowestEnabledRendition:U0,isAudioOnly:Bl,playlistMatch:fv,segmentDurationWithParts:cv},{log:dE}=Z,pv=(n,e)=>`${n}-${e}`,F2=({onwarn:n,oninfo:e,manifestString:t,customTagParsers:i=[],customTagMappers:r=[],llhls:a})=>{let s=new Rc;n&&s.on("warn",n),e&&s.on("info",e),i.forEach(l=>s.addParser(l)),r.forEach(l=>s.addTagMapper(l)),s.push(t),s.end();let o=s.manifest;if(a||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(l){o.hasOwnProperty(l)&&delete o[l]}),o.segments&&o.segments.forEach(function(l){["parts","preloadHints"].forEach(function(d){l.hasOwnProperty(d)&&delete l[d]})})),!o.targetDuration){let l=10;o.segments&&o.segments.length&&(l=o.segments.reduce((d,h)=>Math.max(d,h.duration),0)),n&&n(`manifest has no targetDuration defaulting to ${l}`),o.targetDuration=l}let u=iE(o);if(u.length&&!o.partTargetDuration){let l=u.reduce((d,h)=>Math.max(d,h.duration),0);n&&(n(`manifest has no partTargetDuration defaulting to ${l}`),dE.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=l}return o},Ul=(n,e)=>{!n.mediaGroups||["AUDIO","SUBTITLES"].forEach(t=>{if(!!n.mediaGroups[t])for(let i in n.mediaGroups[t])for(let r in n.mediaGroups[t][i]){let a=n.mediaGroups[t][i][r];e(a,t,i,r)}})},cE=({playlist:n,uri:e,id:t})=>{n.id=t,n.playlistErrors_=0,e&&(n.uri=e),n.attributes=n.attributes||{}},O2=n=>{let e=n.playlists.length;for(;e--;){let t=n.playlists[e];cE({playlist:t,id:pv(e,t.uri)}),t.resolvedUri=sr(n.uri,t.uri),n.playlists[t.id]=t,n.playlists[t.uri]=t,t.attributes.BANDWIDTH||dE.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},L2=n=>{Ul(n,e=>{e.uri&&(e.resolvedUri=sr(n.uri,e.uri))})},R2=(n,e)=>{let t=pv(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:q.default.location.href,resolvedUri:q.default.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return i.playlists[t]=i.playlists[0],i.playlists[e]=i.playlists[0],i},hE=(n,e)=>{n.uri=e;for(let i=0;i<n.playlists.length;i++)if(!n.playlists[i].uri){let r=`placeholder-uri-${i}`;n.playlists[i].uri=r}let t=Bl(n);Ul(n,(i,r,a,s)=>{let o=`placeholder-uri-${r}-${a}-${s}`;if(!i.playlists||!i.playlists.length){if(t&&r==="AUDIO"&&!i.uri)for(let u=0;u<n.playlists.length;u++){let l=n.playlists[u];if(l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===a)return}i.playlists=[vt({},i)]}i.playlists.forEach(function(u,l){let d=pv(l,o);u.uri?u.resolvedUri=u.resolvedUri||sr(n.uri,u.uri):(u.uri=l===0?o:d,u.resolvedUri=u.uri),u.id=u.id||d,u.attributes=u.attributes||{},n.playlists[u.id]=u,n.playlists[u.uri]=u})}),O2(n),L2(n)},{EventTarget:M2}=Z,N2=(n,e)=>{if(e.endList||!e.serverControl)return n;let t={};if(e.serverControl.canBlockReload){let{preloadSegment:i}=e,r=e.mediaSequence+e.segments.length;if(i){let a=i.parts||[],s=rE(e)-1;s>-1&&s!==a.length-1&&(t._HLS_part=s),(s>-1||a.length)&&r--}t._HLS_msn=r}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){let i=new q.default.URL(n);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(r){!t.hasOwnProperty(r)||i.searchParams.set(r,t[r])}),n=i.toString()}return n},B2=(n,e)=>{if(!n)return e;let t=it(n,e);if(n.preloadHints&&!e.preloadHints&&delete t.preloadHints,n.parts&&!e.parts)delete t.parts;else if(n.parts&&e.parts)for(let i=0;i<e.parts.length;i++)n.parts&&n.parts[i]&&(t.parts[i]=it(n.parts[i],e.parts[i]));return!n.skipped&&e.skipped&&(t.skipped=!1),n.preload&&!e.preload&&(t.preload=!1),t},U2=(n,e,t)=>{let i=n.slice(),r=e.slice();t=t||0;let a=[],s;for(let o=0;o<r.length;o++){let u=i[o+t],l=r[o];u?(s=u.map||s,a.push(B2(u,l))):(s&&!l.map&&(l.map=s),a.push(l))}return a},fE=(n,e)=>{!n.resolvedUri&&n.uri&&(n.resolvedUri=sr(e,n.uri)),n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=sr(e,n.key.uri)),n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=sr(e,n.map.uri)),n.map&&n.map.key&&!n.map.key.resolvedUri&&(n.map.key.resolvedUri=sr(e,n.map.key.uri)),n.parts&&n.parts.length&&n.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=sr(e,t.uri))}),n.preloadHints&&n.preloadHints.length&&n.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=sr(e,t.uri))})},pE=function(n){let e=n.segments||[],t=n.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let i=0;i<t.preloadHints.length;i++)if(t.preloadHints[i].type==="MAP")return e}t.duration=n.targetDuration,t.preload=!0,e.push(t)}return e},mE=(n,e)=>n===e||n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence&&n.preloadSegment===e.preloadSegment,j0=(n,e,t=mE)=>{let i=it(n,{}),r=i.playlists[e.id];if(!r||t(r,e))return null;e.segments=pE(e);let a=it(r,e);if(a.preloadSegment&&!e.preloadSegment&&delete a.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(let s=0;s<e.skip.skippedSegments;s++)e.segments.unshift({skipped:!0})}a.segments=U2(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}a.segments.forEach(s=>{fE(s,a.resolvedUri)});for(let s=0;s<i.playlists.length;s++)i.playlists[s].id===e.id&&(i.playlists[s]=a);return i.playlists[e.id]=a,i.playlists[e.uri]=a,Ul(n,(s,o,u,l)=>{if(!!s.playlists)for(let d=0;d<s.playlists.length;d++)e.id===s.playlists[d].id&&(s.playlists[d]=a)}),i},H0=(n,e)=>{let t=n.segments||[],i=t[t.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],a=r&&r.duration||i&&i.duration;return e&&a?a*1e3:(n.partTargetDuration||n.targetDuration||10)*500},ea=class extends M2{constructor(e,t,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=lr("PlaylistLoader");let{withCredentials:r=!1}=i;this.src=e,this.vhs_=t,this.withCredentials=r;let a=t.options_;this.customTagParsers=a&&a.customTagParsers||[],this.customTagMappers=a&&a.customTagMappers||[],this.llhls=a&&a.llhls,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;let e=this.media(),t=sr(this.main.uri,e.uri);this.llhls&&(t=N2(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials},(i,r)=>{if(!!this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,i){let{uri:r,id:a}=t;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[a],status:e.status,message:`HLS playlist request error at URL: ${r}.`,responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}parseManifest_({url:e,manifestString:t}){return F2({onwarn:({message:i})=>this.logger_(`m3u8-parser warn for ${e}: ${i}`),oninfo:({message:i})=>this.logger_(`m3u8-parser info for ${e}: ${i}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}haveMetadata({playlistString:e,playlistObject:t,url:i,id:r}){this.request=null,this.state="HAVE_METADATA";let a=t||this.parseManifest_({url:i,manifestString:e});a.lastRequest=Date.now(),cE({playlist:a,uri:i,id:r});let s=j0(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,s?(this.main=s,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(H0(this.media(),!!s)),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),q.default.clearTimeout(this.mediaUpdateTimeout),q.default.clearTimeout(this.finalRenditionTimeout),this.off()}stopRequest(){if(this.request){let e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(q.default.clearTimeout(this.finalRenditionTimeout),t){let s=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=q.default.setTimeout(this.media.bind(this,e,!1),s);return}let i=this.state,r=!this.media_||e.id!==this.media_.id,a=this.main.playlists[e.id];if(a&&a.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(H0(e,!0)),!!r){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(s,o)=>{if(!!this.request){if(e.lastRequest=Date.now(),e.resolvedUri=$h(e.resolvedUri,o),s)return this.playlistRequestError(this.request,e,i);this.haveMetadata({playlistString:o.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}}pause(){this.mediaUpdateTimeout&&(q.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(q.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);let t=this.media();if(e){let i=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=q.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(q.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=q.default.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=q.default.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(e,t)=>{if(!this.request)return;if(this.request=null,e)return this.error={status:t.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:t.responseText,code:2},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.src=$h(this.src,t);let i=this.parseManifest_({manifestString:t.responseText,url:this.src});this.setupInitialPlaylist(i)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,hE(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=pE(i),i.segments.forEach(r=>{fE(r,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}let t=this.srcUri()||q.default.location.href;this.main=R2(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}},{xhr:j2}=Z,$0=function(n,e,t,i){let r=n.responseType==="arraybuffer"?n.response:n.responseText;!e&&r&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=r.byteLength||r.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3))),t.headers&&(n.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(n.timedout=!0),!e&&!n.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(n&&(r||n.responseText)))),i(e,n)},gE=function(){let n=function e(t,i){t=it({timeout:45e3},t);let r=e.beforeRequest||Z.Vhs.xhr.beforeRequest;if(r&&typeof r=="function"){let u=r(t);u&&(t=u)}let s=(Z.Vhs.xhr.original===!0?j2:Z.Vhs.xhr)(t,function(u,l){return $0(s,u,l,i)}),o=s.abort;return s.abort=function(){return s.aborted=!0,o.apply(s,arguments)},s.uri=t.uri,s.requestTime=Date.now(),s};return n.original=!0,n},H2=function(n){let e,t=n.offset;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=q.default.BigInt(n.offset)+q.default.BigInt(n.length)-q.default.BigInt(1):e=n.offset+n.length-1,"bytes="+t+"-"+e},V0=function(n){let e={};return n.byterange&&(e.Range=H2(n.byterange)),e},$2=function(n,e){return n.start(e)+"-"+n.end(e)},V2=function(n,e){let t=n.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},W2=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},vE=function(n){let e={};return Object.keys(n).forEach(t=>{let i=n[t];gg(i)?e[t]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[t]=i}),e},Vh=function(n){let e=n.byterange||{length:1/0,offset:0};return[e.length,e.offset,n.resolvedUri].join(",")},_E=function(n){return n.resolvedUri},yE=n=>{let e=Array.prototype.slice.call(n),t=16,i="",r,a;for(let s=0;s<e.length/t;s++)r=e.slice(s*t,s*t+t).map(V2).join(""),a=e.slice(s*t,s*t+t).map(W2).join(""),i+=r+" "+a+`
`;return i},q2=({bytes:n})=>yE(n),G2=n=>{let e="",t;for(t=0;t<n.length;t++)e+=$2(n,t)+" ";return e},z2=Object.freeze({__proto__:null,createTransferableMessage:vE,initSegmentId:Vh,segmentKeyId:_E,hexDump:yE,tagDump:q2,textRanges:G2}),TE=.25,K2=(n,e)=>{if(!e.dateTimeObject)return null;let t=e.videoTimingInfo.transmuxerPrependedSeconds,r=e.videoTimingInfo.transmuxedPresentationStart+t,a=n-r;return new Date(e.dateTimeObject.getTime()+a*1e3)},X2=n=>n.transmuxedPresentationEnd-n.transmuxedPresentationStart-n.transmuxerPrependedSeconds,Y2=(n,e)=>{let t;try{t=new Date(n)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(t<i.dateTimeObject)return null;for(let u=0;u<e.segments.length-1;u++){i=e.segments[u];let l=e.segments[u+1].dateTimeObject;if(t<l)break}let r=e.segments[e.segments.length-1],a=r.dateTimeObject,s=r.videoTimingInfo?X2(r.videoTimingInfo):r.duration+r.duration*TE,o=new Date(a.getTime()+s*1e3);return t>o?null:(t>a&&(i=r),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Si.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},Q2=(n,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,i;for(let a=0;a<e.segments.length&&(i=e.segments[a],t=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:t+i.duration,!(n<=t));a++);let r=e.segments[e.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<n)return null;if(n>t){if(n>t+r.duration*TE)return null;i=r}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:t-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},J2=(n,e)=>{let t,i;try{t=new Date(n),i=new Date(e)}catch{}let r=t.getTime();return(i.getTime()-r)/1e3},Z2=n=>{if(!n.segments||n.segments.length===0)return!1;for(let e=0;e<n.segments.length;e++)if(!n.segments[e].dateTimeObject)return!1;return!0},eR=({playlist:n,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});let i=Q2(e,n);if(!i)return t({message:"valid programTime was not found"});if(i.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});let r={mediaSeconds:e},a=K2(e,i.segment);return a&&(r.programDateTime=a.toISOString()),t(null,r)},xE=({programTime:n,playlist:e,retryCount:t=2,seekTo:i,pauseAfterSeek:r=!0,tech:a,callback:s})=>{if(!s)throw new Error("seekToProgramTime: callback must be provided");if(typeof n>"u"||!e||!i)return s({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!a.hasStarted_)return s({message:"player must be playing a live stream to start buffering"});if(!Z2(e))return s({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});let o=Y2(n,e);if(!o)return s({message:`${n} was not found in the stream`});let u=o.segment,l=J2(u.dateTimeObject,n);if(o.type==="estimate"){if(t===0)return s({message:`${n} is not buffered yet. Try again`});i(o.estimatedStart+l),a.one("seeked",()=>{xE({programTime:n,playlist:e,retryCount:t-1,seekTo:i,pauseAfterSeek:r,tech:a,callback:s})});return}let d=u.start+l,h=()=>s(null,a.currentTime());a.one("seeked",h),r&&a.pause(),i(d)},o0=(n,e)=>{if(n.readyState===4)return e()},tR=(n,e,t)=>{let i=[],r,a=!1,s=function(d,h,p,_){return h.abort(),a=!0,t(d,h,p,_)},o=function(d,h){if(a)return;if(d)return s(d,h,"",i);let p=h.responseText.substring(i&&i.byteLength||0,h.responseText.length);if(i=Vx(i,Bc(p,!0)),r=r||Va(i),i.length<10||r&&i.length<r+2)return o0(h,()=>s(d,h,"",i));let _=eh(i);return _==="ts"&&i.length<188?o0(h,()=>s(d,h,"",i)):!_&&i.length<376?o0(h,()=>s(d,h,"",i)):s(null,h,_,i)},l=e({uri:n,beforeSend(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function({total:h,loaded:p}){return $0(d,null,{statusCode:d.status},o)})}},function(d,h){return $0(l,d,h,o)});return l},{EventTarget:iR}=Z,GS=function(n,e){if(!mE(n,e)||n.sidx&&e.sidx&&(n.sidx.offset!==e.sidx.offset||n.sidx.length!==e.sidx.length))return!1;if(!n.sidx&&e.sidx||n.sidx&&!e.sidx||n.segments&&!e.segments||!n.segments&&e.segments)return!1;if(!n.segments&&!e.segments)return!0;for(let t=0;t<n.segments.length;t++){let i=n.segments[t],r=e.segments[t];if(i.uri!==r.uri)return!1;if(!i.byterange&&!r.byterange)continue;let a=i.byterange,s=r.byterange;if(a&&!s||!a&&s||a.offset!==s.offset||a.length!==s.length)return!1}return!0},rR=({mainXml:n,srcUrl:e,clientOffset:t,sidxMapping:i,previousManifest:r})=>{let a=Jb(n,{manifestUri:e,clientOffset:t,sidxMapping:i,previousManifest:r});return hE(a,e),a},nR=(n,e,t)=>{let i=!0,r=it(n,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let a=0;a<e.playlists.length;a++){let s=e.playlists[a];if(s.sidx){let u=il(s.sidx);t&&t[u]&&t[u].sidx&&Qc(s,t[u].sidx,s.sidx.resolvedUri)}let o=j0(r,s,GS);o&&(r=o,i=!1)}return Ul(e,(a,s,o,u)=>{if(a.playlists&&a.playlists.length){let l=a.playlists[0].id,d=j0(r,a.playlists[0],GS);d&&(r=d,r.mediaGroups[s][o][u].playlists[0]=r.playlists[l],i=!1)}}),e.minimumUpdatePeriod!==n.minimumUpdatePeriod&&(i=!1),i?null:r},aR=(n,e)=>(Boolean(!n.map&&!e.map)||Boolean(n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length))&&n.uri===e.uri&&n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length,zS=(n,e)=>{let t={};for(let i in n){let a=n[i].sidx;if(a){let s=il(a);if(!e[s])break;let o=e[s].sidxInfo;aR(o,a)&&(t[s]=e[s])}}return t},sR=(n,e)=>{let i=zS(n.playlists,e);return Ul(n,(r,a,s,o)=>{if(r.playlists&&r.playlists.length){let u=r.playlists;i=it(i,zS(u,e))}}),i},Rl=class extends iR{constructor(e,t,i={},r){super(),this.mainPlaylistLoader_=r||this,r||(this.isMain_=!0);let{withCredentials:a=!1}=i;if(this.vhs_=t,this.withCredentials=a,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=lr("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}requestErrored_(e,t,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,t,i){let r=e.sidx&&il(e.sidx);if(!e.sidx||!r||this.mainPlaylistLoader_.sidxMapping_[r]){this.mediaRequest_=q.default.setTimeout(()=>i(!1),0);return}let a=$h(e.sidx.resolvedUri),s=(o,u)=>{if(this.requestErrored_(o,u,t))return;let l=this.mainPlaylistLoader_.sidxMapping_,d;try{d=(0,dD.default)(ve(u.response).subarray(8))}catch(h){this.requestErrored_(h,u,t);return}return l[r]={sidxInfo:e.sidx,sidx:d},Qc(e,d,e.sidx.resolvedUri),i(!0)};this.request=tR(a,this.vhs_.xhr,(o,u,l,d)=>{if(o)return s(o,u);if(!l||l!=="mp4")return s({status:u.status,message:`Unsupported ${l||"unknown"} container type for sidx segment at URL: ${a}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u);let{offset:h,length:p}=e.sidx.byterange;if(d.length>=p+h)return s(o,{response:d.subarray(h,h+p),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:V0({byterange:e.sidx.byterange})},s)})}dispose(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},q.default.clearTimeout(this.minimumUpdatePeriodTimeout_),q.default.clearTimeout(this.mediaRequest_),q.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){let e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);let t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}let i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}!i||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,r=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),q.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(q.default.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){q.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;let t=this.media();if(e){let i=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=q.default.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){this.mediaRequest_=q.default.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(t,i)=>{if(this.requestErrored_(t,i)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}let r=i.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?this.mainLoaded_=Date.parse(i.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=$h(this.mainPlaylistLoader_.srcUrl,i),r){this.handleMain_(),this.syncClientServerClock_(()=>e(i,r));return}return e(i,r)})}syncClientServerClock_(e){let t=Zb(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:sr(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials},(i,r)=>{if(!this.request)return;if(i)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();let a;t.method==="HEAD"?!r.responseHeaders||!r.responseHeaders.date?a=this.mainLoaded_:a=Date.parse(r.responseHeaders.date):a=Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=a-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){this.mediaRequest_=null;let e=this.mainPlaylistLoader_.main,t=rR({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(t=nR(e,t,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=t||e;let i=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];return i&&i!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=i),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)}updateMinimumUpdatePeriodTimeout_(){let e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(q.default.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){let t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=q.default.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{!t||(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=sR(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();let t=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==t[e];if(i?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){let r=()=>{this.media().endList||(this.mediaUpdateTimeout=q.default.setTimeout(()=>{this.trigger("mediaupdatetimeout"),r()},H0(this.media(),Boolean(i))))};r()}this.trigger("loadedplaylist")}},Ft={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},oR=n=>{let e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer},bE=function(n){return n.on=n.addEventListener,n.off=n.removeEventListener,n},uR=function(n){try{return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch{let t=new BlobBuilder;return t.append(n),URL.createObjectURL(t.getBlob())}},SE=function(n){return function(){let e=uR(n),t=bE(new Worker(e));t.objURL=e;let i=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}},DE=function(n){return`var browserWorkerPolyFill = ${bE.toString()};
browserWorkerPolyFill(self);
`+n},EE=function(n){return n.toString().replace(/^function.+?{/,"").slice(0,-1)},lR=DE(EE(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var c={};this.on=function(m,y){c[m]||(c[m]=[]),c[m]=c[m].concat(y)},this.off=function(m,y){var T;return c[m]?(T=c[m].indexOf(y),c[m]=c[m].slice(),c[m].splice(T,1),T>-1):!1},this.trigger=function(m){var y,T,b,w;if(y=c[m],!!y)if(arguments.length===2)for(b=y.length,T=0;T<b;++T)y[T].call(this,arguments[1]);else{for(w=[],T=arguments.length,T=1;T<arguments.length;++T)w.push(arguments[T]);for(b=y.length,T=0;T<b;++T)y[T].apply(this,w)}},this.dispose=function(){c={}}}};e.prototype.pipe=function(c){return this.on("data",function(m){c.push(m)}),this.on("done",function(m){c.flush(m)}),this.on("partialdone",function(m){c.partialFlush(m)}),this.on("endedtimeline",function(m){c.endTimeline(m)}),this.on("reset",function(m){c.reset(m)}),c},e.prototype.push=function(c){this.trigger("data",c)},e.prototype.flush=function(c){this.trigger("done",c)},e.prototype.partialFlush=function(c){this.trigger("partialdone",c)},e.prototype.endTimeline=function(c){this.trigger("endedtimeline",c)},e.prototype.reset=function(c){this.trigger("reset",c)};var t=e,i=Math.pow(2,32),r=function(c){var m=new DataView(c.buffer,c.byteOffset,c.byteLength),y;return m.getBigUint64?(y=m.getBigUint64(0),y<Number.MAX_SAFE_INTEGER?Number(y):y):m.getUint32(0)*i+m.getUint32(4)},a={getUint64:r,MAX_UINT32:i},s=a.MAX_UINT32,o,u,l,d,h,p,_,D,C,S,I,L,G,M,O,K,z,V,J,Q,oe,ne,ae,ye,Pe,xe,Ae,Be,ht,Oe,$i,Et,fi,tr,_r,wi;(function(){var c;if(ae={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(c in ae)ae.hasOwnProperty(c)&&(ae[c]=[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]);ye=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),xe=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Pe=new Uint8Array([0,0,0,1]),Ae=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Be=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),ht={video:Ae,audio:Be},Et=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),$i=new Uint8Array([0,0,0,0,0,0,0,0]),fi=new Uint8Array([0,0,0,0,0,0,0,0]),tr=fi,_r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),wi=fi,Oe=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(c){var m=[],y=0,T,b,w;for(T=1;T<arguments.length;T++)m.push(arguments[T]);for(T=m.length;T--;)y+=m[T].byteLength;for(b=new Uint8Array(y+8),w=new DataView(b.buffer,b.byteOffset,b.byteLength),w.setUint32(0,b.byteLength),b.set(c,4),T=0,y=8;T<m.length;T++)b.set(m[T],y),y+=m[T].byteLength;return b},u=function(){return o(ae.dinf,o(ae.dref,Et))},l=function(c){return o(ae.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,c.audioobjecttype<<3|c.samplingfrequencyindex>>>1,c.samplingfrequencyindex<<7|c.channelcount<<3,6,1,2]))},d=function(){return o(ae.ftyp,ye,Pe,ye,xe)},K=function(c){return o(ae.hdlr,ht[c])},h=function(c){return o(ae.mdat,c)},O=function(c){var m=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,c.duration>>>24&255,c.duration>>>16&255,c.duration>>>8&255,c.duration&255,85,196,0,0]);return c.samplerate&&(m[12]=c.samplerate>>>24&255,m[13]=c.samplerate>>>16&255,m[14]=c.samplerate>>>8&255,m[15]=c.samplerate&255),o(ae.mdhd,m)},M=function(c){return o(ae.mdia,O(c),K(c.type),_(c))},p=function(c){return o(ae.mfhd,new Uint8Array([0,0,0,0,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255]))},_=function(c){return o(ae.minf,c.type==="video"?o(ae.vmhd,Oe):o(ae.smhd,$i),u(),V(c))},D=function(c,m){for(var y=[],T=m.length;T--;)y[T]=Q(m[T]);return o.apply(null,[ae.moof,p(c)].concat(y))},C=function(c){for(var m=c.length,y=[];m--;)y[m]=L(c[m]);return o.apply(null,[ae.moov,I(4294967295)].concat(y).concat(S(c)))},S=function(c){for(var m=c.length,y=[];m--;)y[m]=oe(c[m]);return o.apply(null,[ae.mvex].concat(y))},I=function(c){var m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(ae.mvhd,m)},z=function(c){var m=c.samples||[],y=new Uint8Array(4+m.length),T,b;for(b=0;b<m.length;b++)T=m[b].flags,y[b+4]=T.dependsOn<<4|T.isDependedOn<<2|T.hasRedundancy;return o(ae.sdtp,y)},V=function(c){return o(ae.stbl,J(c),o(ae.stts,wi),o(ae.stsc,tr),o(ae.stsz,_r),o(ae.stco,fi))},function(){var c,m;J=function(y){return o(ae.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),y.type==="video"?c(y):m(y))},c=function(y){var T=y.sps||[],b=y.pps||[],w=[],F=[],R,B;for(R=0;R<T.length;R++)w.push((T[R].byteLength&65280)>>>8),w.push(T[R].byteLength&255),w=w.concat(Array.prototype.slice.call(T[R]));for(R=0;R<b.length;R++)F.push((b[R].byteLength&65280)>>>8),F.push(b[R].byteLength&255),F=F.concat(Array.prototype.slice.call(b[R]));if(B=[ae.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(y.width&65280)>>8,y.width&255,(y.height&65280)>>8,y.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(ae.avcC,new Uint8Array([1,y.profileIdc,y.profileCompatibility,y.levelIdc,255].concat([T.length],w,[b.length],F))),o(ae.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],y.sarRatio){var j=y.sarRatio[0],Y=y.sarRatio[1];B.push(o(ae.pasp,new Uint8Array([(j&4278190080)>>24,(j&16711680)>>16,(j&65280)>>8,j&255,(Y&4278190080)>>24,(Y&16711680)>>16,(Y&65280)>>8,Y&255])))}return o.apply(null,B)},m=function(y){return o(ae.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(y.channelcount&65280)>>8,y.channelcount&255,(y.samplesize&65280)>>8,y.samplesize&255,0,0,0,0,(y.samplerate&65280)>>8,y.samplerate&255,0,0]),l(y))}}(),G=function(c){var m=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,0,(c.duration&4278190080)>>24,(c.duration&16711680)>>16,(c.duration&65280)>>8,c.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(c.width&65280)>>8,c.width&255,0,0,(c.height&65280)>>8,c.height&255,0,0]);return o(ae.tkhd,m)},Q=function(c){var m,y,T,b,w,F,R;return m=o(ae.tfhd,new Uint8Array([0,0,0,58,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),F=Math.floor(c.baseMediaDecodeTime/s),R=Math.floor(c.baseMediaDecodeTime%s),y=o(ae.tfdt,new Uint8Array([1,0,0,0,F>>>24&255,F>>>16&255,F>>>8&255,F&255,R>>>24&255,R>>>16&255,R>>>8&255,R&255])),w=32+20+8+16+8+8,c.type==="audio"?(T=ne(c,w),o(ae.traf,m,y,T)):(b=z(c),T=ne(c,b.length+w),o(ae.traf,m,y,T,b))},L=function(c){return c.duration=c.duration||4294967295,o(ae.trak,G(c),M(c))},oe=function(c){var m=new Uint8Array([0,0,0,0,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return c.type!=="video"&&(m[m.length-1]=0),o(ae.trex,m)},function(){var c,m,y;y=function(T,b){var w=0,F=0,R=0,B=0;return T.length&&(T[0].duration!==void 0&&(w=1),T[0].size!==void 0&&(F=2),T[0].flags!==void 0&&(R=4),T[0].compositionTimeOffset!==void 0&&(B=8)),[0,0,w|F|R|B,1,(T.length&4278190080)>>>24,(T.length&16711680)>>>16,(T.length&65280)>>>8,T.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]},m=function(T,b){var w,F,R,B,j,Y;for(B=T.samples||[],b+=8+12+16*B.length,R=y(B,b),F=new Uint8Array(R.length+B.length*16),F.set(R),w=R.length,Y=0;Y<B.length;Y++)j=B[Y],F[w++]=(j.duration&4278190080)>>>24,F[w++]=(j.duration&16711680)>>>16,F[w++]=(j.duration&65280)>>>8,F[w++]=j.duration&255,F[w++]=(j.size&4278190080)>>>24,F[w++]=(j.size&16711680)>>>16,F[w++]=(j.size&65280)>>>8,F[w++]=j.size&255,F[w++]=j.flags.isLeading<<2|j.flags.dependsOn,F[w++]=j.flags.isDependedOn<<6|j.flags.hasRedundancy<<4|j.flags.paddingValue<<1|j.flags.isNonSyncSample,F[w++]=j.flags.degradationPriority&240<<8,F[w++]=j.flags.degradationPriority&15,F[w++]=(j.compositionTimeOffset&4278190080)>>>24,F[w++]=(j.compositionTimeOffset&16711680)>>>16,F[w++]=(j.compositionTimeOffset&65280)>>>8,F[w++]=j.compositionTimeOffset&255;return o(ae.trun,F)},c=function(T,b){var w,F,R,B,j,Y;for(B=T.samples||[],b+=8+12+8*B.length,R=y(B,b),w=new Uint8Array(R.length+B.length*8),w.set(R),F=R.length,Y=0;Y<B.length;Y++)j=B[Y],w[F++]=(j.duration&4278190080)>>>24,w[F++]=(j.duration&16711680)>>>16,w[F++]=(j.duration&65280)>>>8,w[F++]=j.duration&255,w[F++]=(j.size&4278190080)>>>24,w[F++]=(j.size&16711680)>>>16,w[F++]=(j.size&65280)>>>8,w[F++]=j.size&255;return o(ae.trun,w)},ne=function(T,b){return T.type==="audio"?c(T,b):m(T,b)}}();var On={ftyp:d,mdat:h,moof:D,moov:C,initSegment:function(c){var m=d(),y=C(c),T;return T=new Uint8Array(m.byteLength+y.byteLength),T.set(m),T.set(y,m.byteLength),T}},Ln=function(c){var m,y,T=[],b=[];for(b.byteLength=0,b.nalCount=0,b.duration=0,T.byteLength=0,m=0;m<c.length;m++)y=c[m],y.nalUnitType==="access_unit_delimiter_rbsp"?(T.length&&(T.duration=y.dts-T.dts,b.byteLength+=T.byteLength,b.nalCount+=T.length,b.duration+=T.duration,b.push(T)),T=[y],T.byteLength=y.data.byteLength,T.pts=y.pts,T.dts=y.dts):(y.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(T.keyFrame=!0),T.duration=y.dts-T.dts,T.byteLength+=y.data.byteLength,T.push(y));return b.length&&(!T.duration||T.duration<=0)&&(T.duration=b[b.length-1].duration),b.byteLength+=T.byteLength,b.nalCount+=T.length,b.duration+=T.duration,b.push(T),b},Rn=function(c){var m,y,T=[],b=[];for(T.byteLength=0,T.nalCount=0,T.duration=0,T.pts=c[0].pts,T.dts=c[0].dts,b.byteLength=0,b.nalCount=0,b.duration=0,b.pts=c[0].pts,b.dts=c[0].dts,m=0;m<c.length;m++)y=c[m],y.keyFrame?(T.length&&(b.push(T),b.byteLength+=T.byteLength,b.nalCount+=T.nalCount,b.duration+=T.duration),T=[y],T.nalCount=y.length,T.byteLength=y.byteLength,T.pts=y.pts,T.dts=y.dts,T.duration=y.duration):(T.duration+=y.duration,T.nalCount+=y.length,T.byteLength+=y.byteLength,T.push(y));return b.length&&T.duration<=0&&(T.duration=b[b.length-1].duration),b.byteLength+=T.byteLength,b.nalCount+=T.nalCount,b.duration+=T.duration,b.push(T),b},pp=function(c){var m;return!c[0][0].keyFrame&&c.length>1&&(m=c.shift(),c.byteLength-=m.byteLength,c.nalCount-=m.nalCount,c[0][0].dts=m.dts,c[0][0].pts=m.pts,c[0][0].duration+=m.duration),c},Sd=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Dd=function(c,m){var y=Sd();return y.dataOffset=m,y.compositionTimeOffset=c.pts-c.dts,y.duration=c.duration,y.size=4*c.length,y.size+=c.byteLength,c.keyFrame&&(y.flags.dependsOn=2,y.flags.isNonSyncSample=0),y},mp=function(c,m){var y,T,b,w,F,R=m||0,B=[];for(y=0;y<c.length;y++)for(w=c[y],T=0;T<w.length;T++)F=w[T],b=Dd(F,R),R+=b.size,B.push(b);return B},gp=function(c){var m,y,T,b,w,F,R=0,B=c.byteLength,j=c.nalCount,Y=B+4*j,ee=new Uint8Array(Y),ge=new DataView(ee.buffer);for(m=0;m<c.length;m++)for(b=c[m],y=0;y<b.length;y++)for(w=b[y],T=0;T<w.length;T++)F=w[T],ge.setUint32(R,F.data.byteLength),R+=4,ee.set(F.data,R),R+=F.data.byteLength;return ee},vp=function(c,m){var y,T=m||0,b=[];return y=Dd(c,T),b.push(y),b},ga=function(c){var m,y,T=0,b=c.byteLength,w=c.length,F=b+4*w,R=new Uint8Array(F),B=new DataView(R.buffer);for(m=0;m<c.length;m++)y=c[m],B.setUint32(T,y.data.byteLength),T+=4,R.set(y.data,T),T+=y.data.byteLength;return R},yr={groupNalsIntoFrames:Ln,groupFramesIntoGops:Rn,extendFirstKeyFrame:pp,generateSampleTable:mp,concatenateNalData:gp,generateSampleTableForFrame:vp,concatenateNalDataForFrame:ga},Vi=[33,16,5,32,164,27],$e=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],qe=function(c){for(var m=[];c--;)m.push(0);return m},uu=function(c){return Object.keys(c).reduce(function(m,y){return m[y]=new Uint8Array(c[y].reduce(function(T,b){return T.concat(b)},[])),m},{})},lu,du=function(){if(!lu){var c={96e3:[Vi,[227,64],qe(154),[56]],88200:[Vi,[231],qe(170),[56]],64e3:[Vi,[248,192],qe(240),[56]],48e3:[Vi,[255,192],qe(268),[55,148,128],qe(54),[112]],44100:[Vi,[255,192],qe(268),[55,163,128],qe(84),[112]],32e3:[Vi,[255,192],qe(268),[55,234],qe(226),[112]],24e3:[Vi,[255,192],qe(268),[55,255,128],qe(268),[111,112],qe(126),[224]],16e3:[Vi,[255,192],qe(268),[55,255,128],qe(268),[111,255],qe(269),[223,108],qe(195),[1,192]],12e3:[$e,qe(268),[3,127,248],qe(268),[6,255,240],qe(268),[13,255,224],qe(268),[27,253,128],qe(259),[56]],11025:[$e,qe(268),[3,127,248],qe(268),[6,255,240],qe(268),[13,255,224],qe(268),[27,255,192],qe(268),[55,175,128],qe(108),[112]],8e3:[$e,qe(268),[3,121,16],qe(47),[7]]};lu=uu(c)}return lu},va=9e4,_a,Mn,Nn,fs,cu,hu,Ue;_a=function(c){return c*va},Mn=function(c,m){return c*m},Nn=function(c){return c/va},fs=function(c,m){return c/m},cu=function(c,m){return _a(fs(c,m))},hu=function(c,m){return Mn(Nn(c),m)},Ue=function(c,m,y){return Nn(y?c:c-m)};var Ze={ONE_SECOND_IN_TS:va,secondsToVideoTs:_a,secondsToAudioTs:Mn,videoTsToSeconds:Nn,audioTsToSeconds:fs,audioTsToVideoTs:cu,videoTsToAudioTs:hu,metadataTsToSeconds:Ue},_p=du,ps=Ze,yp=function(c){var m,y,T=0;for(m=0;m<c.length;m++)y=c[m],T+=y.data.byteLength;return T},Tp=function(c,m,y,T){var b,w=0,F=0,R=0,B=0,j,Y,ee;if(!!m.length&&(b=ps.audioTsToVideoTs(c.baseMediaDecodeTime,c.samplerate),w=Math.ceil(ps.ONE_SECOND_IN_TS/(c.samplerate/1024)),y&&T&&(F=b-Math.max(y,T),R=Math.floor(F/w),B=R*w),!(R<1||B>ps.ONE_SECOND_IN_TS/2))){for(j=_p()[c.samplerate],j||(j=m[0].data),Y=0;Y<R;Y++)ee=m[0],m.splice(0,0,{data:j,dts:ee.dts-w,pts:ee.pts-w});return c.baseMediaDecodeTime-=Math.floor(ps.videoTsToAudioTs(B,c.samplerate)),B}},ms=function(c,m,y){return m.minSegmentDts>=y?c:(m.minSegmentDts=1/0,c.filter(function(T){return T.dts>=y?(m.minSegmentDts=Math.min(m.minSegmentDts,T.dts),m.minSegmentPts=m.minSegmentDts,!0):!1}))},xp=function(c){var m,y,T=[];for(m=0;m<c.length;m++)y=c[m],T.push({size:y.data.byteLength,duration:1024});return T},bp=function(c){var m,y,T=0,b=new Uint8Array(yp(c));for(m=0;m<c.length;m++)y=c[m],b.set(y.data,T),T+=y.data.byteLength;return b},Sp={prefixWithSilence:Tp,trimAdtsFramesByEarliestDts:ms,generateSampleTable:xp,concatenateFrameData:bp},Dp=Ze.ONE_SECOND_IN_TS,Ai=function(c,m){typeof m.pts=="number"&&(c.timelineStartInfo.pts===void 0&&(c.timelineStartInfo.pts=m.pts),c.minSegmentPts===void 0?c.minSegmentPts=m.pts:c.minSegmentPts=Math.min(c.minSegmentPts,m.pts),c.maxSegmentPts===void 0?c.maxSegmentPts=m.pts:c.maxSegmentPts=Math.max(c.maxSegmentPts,m.pts)),typeof m.dts=="number"&&(c.timelineStartInfo.dts===void 0&&(c.timelineStartInfo.dts=m.dts),c.minSegmentDts===void 0?c.minSegmentDts=m.dts:c.minSegmentDts=Math.min(c.minSegmentDts,m.dts),c.maxSegmentDts===void 0?c.maxSegmentDts=m.dts:c.maxSegmentDts=Math.max(c.maxSegmentDts,m.dts))},Ed=function(c){delete c.minSegmentDts,delete c.maxSegmentDts,delete c.minSegmentPts,delete c.maxSegmentPts},Ep=function(c,m){var y,T,b=c.minSegmentDts;return m||(b-=c.timelineStartInfo.dts),y=c.timelineStartInfo.baseMediaDecodeTime,y+=b,y=Math.max(0,y),c.type==="audio"&&(T=c.samplerate/Dp,y*=T,y=Math.floor(y)),y},Cp={clearDtsInfo:Ed,calculateTrackBaseMediaDecodeTime:Ep,collectDtsInfo:Ai},Cd=4,wp=128,Ap=function(c){for(var m=0,y={payloadType:-1,payloadSize:0},T=0,b=0;m<c.byteLength&&c[m]!==wp;){for(;c[m]===255;)T+=255,m++;for(T+=c[m++];c[m]===255;)b+=255,m++;if(b+=c[m++],!y.payload&&T===Cd){var w=String.fromCharCode(c[m+3],c[m+4],c[m+5],c[m+6]);if(w==="GA94"){y.payloadType=T,y.payloadSize=b,y.payload=c.subarray(m,m+b);break}else y.payload=void 0}m+=b,T=0,b=0}return y},ya=function(c){return c.payload[0]!==181||(c.payload[1]<<8|c.payload[2])!==49||String.fromCharCode(c.payload[3],c.payload[4],c.payload[5],c.payload[6])!=="GA94"||c.payload[7]!==3?null:c.payload.subarray(8,c.payload.length-1)},Yt=function(c,m){var y=[],T,b,w,F;if(!(m[0]&64))return y;for(b=m[0]&31,T=0;T<b;T++)w=T*3,F={type:m[w+2]&3,pts:c},m[w+2]&4&&(F.ccData=m[w+3]<<8|m[w+4],y.push(F));return y},kp=function(c){for(var m=c.byteLength,y=[],T=1,b,w;T<m-2;)c[T]===0&&c[T+1]===0&&c[T+2]===3?(y.push(T+2),T+=2):T++;if(y.length===0)return c;b=m-y.length,w=new Uint8Array(b);var F=0;for(T=0;T<b;F++,T++)F===y[0]&&(F++,y.shift()),w[T]=c[F];return w},wd={parseSei:Ap,parseUserData:ya,parseCaptionPackets:Yt,discardEmulationPreventionBytes:kp,USER_DATA_REGISTERED_ITU_T_T35:Cd},Bn=t,pi=wd,At=function(c){c=c||{},At.prototype.init.call(this),this.parse708captions_=typeof c.parse708captions=="boolean"?c.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new et(0,0),new et(0,1),new et(1,0),new et(1,1)],this.parse708captions_&&(this.cc708Stream_=new Re({captionServices:c.captionServices})),this.reset(),this.ccStreams_.forEach(function(m){m.on("data",this.trigger.bind(this,"data")),m.on("partialdone",this.trigger.bind(this,"partialdone")),m.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};At.prototype=new Bn,At.prototype.push=function(c){var m,y,T;if(c.nalUnitType==="sei_rbsp"&&(m=pi.parseSei(c.escapedRBSP),!!m.payload&&m.payloadType===pi.USER_DATA_REGISTERED_ITU_T_T35&&(y=pi.parseUserData(m),!!y))){if(c.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(c.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}T=pi.parseCaptionPackets(c.pts,y),this.captionPackets_=this.captionPackets_.concat(T),this.latestDts_!==c.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=c.dts}},At.prototype.flushCCStreams=function(c){this.ccStreams_.forEach(function(m){return c==="flush"?m.flush():m.partialFlush()},this)},At.prototype.flushStream=function(c){if(!this.captionPackets_.length){this.flushCCStreams(c);return}this.captionPackets_.forEach(function(m,y){m.presortIndex=y}),this.captionPackets_.sort(function(m,y){return m.pts===y.pts?m.presortIndex-y.presortIndex:m.pts-y.pts}),this.captionPackets_.forEach(function(m){m.type<2?this.dispatchCea608Packet(m):this.dispatchCea708Packet(m)},this),this.captionPackets_.length=0,this.flushCCStreams(c)},At.prototype.flush=function(){return this.flushStream("flush")},At.prototype.partialFlush=function(){return this.flushStream("partialFlush")},At.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(c){c.reset()})},At.prototype.dispatchCea608Packet=function(c){this.setsTextOrXDSActive(c)?this.activeCea608Channel_[c.type]=null:this.setsChannel1Active(c)?this.activeCea608Channel_[c.type]=0:this.setsChannel2Active(c)&&(this.activeCea608Channel_[c.type]=1),this.activeCea608Channel_[c.type]!==null&&this.ccStreams_[(c.type<<1)+this.activeCea608Channel_[c.type]].push(c)},At.prototype.setsChannel1Active=function(c){return(c.ccData&30720)===4096},At.prototype.setsChannel2Active=function(c){return(c.ccData&30720)===6144},At.prototype.setsTextOrXDSActive=function(c){return(c.ccData&28928)===256||(c.ccData&30974)===4138||(c.ccData&30974)===6186},At.prototype.dispatchCea708Packet=function(c){this.parse708captions_&&this.cc708Stream_.push(c)};var Qe={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Ip=function(c){var m=Qe[c]||c;return c&4096&&c===m?"":String.fromCharCode(m)},Wr=function(c){return 32<=c&&c<=127||160<=c&&c<=255},mi=function(c){this.windowNum=c,this.reset()};mi.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},mi.prototype.getText=function(){return this.rows.join(`
`)},mi.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},mi.prototype.newLine=function(c){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(c),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},mi.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},mi.prototype.addText=function(c){this.rows[this.rowIdx]+=c},mi.prototype.backspace=function(){if(!this.isEmpty()){var c=this.rows[this.rowIdx];this.rows[this.rowIdx]=c.substr(0,c.length-1)}};var gs=function(c,m,y){this.serviceNum=c,this.text="",this.currentWindow=new mi(-1),this.windows=[],this.stream=y,typeof m=="string"&&this.createTextDecoder(m)};gs.prototype.init=function(c,m){this.startPts=c;for(var y=0;y<8;y++)this.windows[y]=new mi(y),typeof m=="function"&&(this.windows[y].beforeRowOverflow=m)},gs.prototype.setCurrentWindow=function(c){this.currentWindow=this.windows[c]},gs.prototype.createTextDecoder=function(c){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(c)}catch(m){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+c+" encoding. "+m})}};var Re=function(c){c=c||{},Re.prototype.init.call(this);var m=this,y=c.captionServices||{},T={},b;Object.keys(y).forEach(w=>{b=y[w],/^SERVICE/.test(w)&&(T[w]=b.encoding)}),this.serviceEncodings=T,this.current708Packet=null,this.services={},this.push=function(w){w.type===3?(m.new708Packet(),m.add708Bytes(w)):(m.current708Packet===null&&m.new708Packet(),m.add708Bytes(w))}};Re.prototype=new Bn,Re.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Re.prototype.add708Bytes=function(c){var m=c.ccData,y=m>>>8,T=m&255;this.current708Packet.ptsVals.push(c.pts),this.current708Packet.data.push(y),this.current708Packet.data.push(T)},Re.prototype.push708Packet=function(){var c=this.current708Packet,m=c.data,y=null,T=null,b=0,w=m[b++];for(c.seq=w>>6,c.sizeCode=w&63;b<m.length;b++)w=m[b++],y=w>>5,T=w&31,y===7&&T>0&&(w=m[b++],y=w),this.pushServiceBlock(y,b,T),T>0&&(b+=T-1)},Re.prototype.pushServiceBlock=function(c,m,y){var T,b=m,w=this.current708Packet.data,F=this.services[c];for(F||(F=this.initService(c,b));b<m+y&&b<w.length;b++)T=w[b],Wr(T)?b=this.handleText(b,F):T===24?b=this.multiByteCharacter(b,F):T===16?b=this.extendedCommands(b,F):128<=T&&T<=135?b=this.setCurrentWindow(b,F):152<=T&&T<=159?b=this.defineWindow(b,F):T===136?b=this.clearWindows(b,F):T===140?b=this.deleteWindows(b,F):T===137?b=this.displayWindows(b,F):T===138?b=this.hideWindows(b,F):T===139?b=this.toggleWindows(b,F):T===151?b=this.setWindowAttributes(b,F):T===144?b=this.setPenAttributes(b,F):T===145?b=this.setPenColor(b,F):T===146?b=this.setPenLocation(b,F):T===143?F=this.reset(b,F):T===8?F.currentWindow.backspace():T===12?F.currentWindow.clearText():T===13?F.currentWindow.pendingNewLine=!0:T===14?F.currentWindow.clearText():T===141&&b++},Re.prototype.extendedCommands=function(c,m){var y=this.current708Packet.data,T=y[++c];return Wr(T)&&(c=this.handleText(c,m,{isExtended:!0})),c},Re.prototype.getPts=function(c){return this.current708Packet.ptsVals[Math.floor(c/2)]},Re.prototype.initService=function(c,m){var T="SERVICE"+c,y=this,T,b;return T in this.serviceEncodings&&(b=this.serviceEncodings[T]),this.services[c]=new gs(c,b,y),this.services[c].init(this.getPts(m),function(w){y.flushDisplayed(w,y.services[c])}),this.services[c]},Re.prototype.handleText=function(c,m,y){var T=y&&y.isExtended,b=y&&y.isMultiByte,w=this.current708Packet.data,F=T?4096:0,R=w[c],B=w[c+1],j=m.currentWindow,Y,ee;return m.textDecoder_&&!T?(b?(ee=[R,B],c++):ee=[R],Y=m.textDecoder_.decode(new Uint8Array(ee))):Y=Ip(F|R),j.pendingNewLine&&!j.isEmpty()&&j.newLine(this.getPts(c)),j.pendingNewLine=!1,j.addText(Y),c},Re.prototype.multiByteCharacter=function(c,m){var y=this.current708Packet.data,T=y[c+1],b=y[c+2];return Wr(T)&&Wr(b)&&(c=this.handleText(++c,m,{isMultiByte:!0})),c},Re.prototype.setCurrentWindow=function(c,m){var y=this.current708Packet.data,T=y[c],b=T&7;return m.setCurrentWindow(b),c},Re.prototype.defineWindow=function(c,m){var y=this.current708Packet.data,T=y[c],b=T&7;m.setCurrentWindow(b);var w=m.currentWindow;return T=y[++c],w.visible=(T&32)>>5,w.rowLock=(T&16)>>4,w.columnLock=(T&8)>>3,w.priority=T&7,T=y[++c],w.relativePositioning=(T&128)>>7,w.anchorVertical=T&127,T=y[++c],w.anchorHorizontal=T,T=y[++c],w.anchorPoint=(T&240)>>4,w.rowCount=T&15,T=y[++c],w.columnCount=T&63,T=y[++c],w.windowStyle=(T&56)>>3,w.penStyle=T&7,w.virtualRowCount=w.rowCount+1,c},Re.prototype.setWindowAttributes=function(c,m){var y=this.current708Packet.data,T=y[c],b=m.currentWindow.winAttr;return T=y[++c],b.fillOpacity=(T&192)>>6,b.fillRed=(T&48)>>4,b.fillGreen=(T&12)>>2,b.fillBlue=T&3,T=y[++c],b.borderType=(T&192)>>6,b.borderRed=(T&48)>>4,b.borderGreen=(T&12)>>2,b.borderBlue=T&3,T=y[++c],b.borderType+=(T&128)>>5,b.wordWrap=(T&64)>>6,b.printDirection=(T&48)>>4,b.scrollDirection=(T&12)>>2,b.justify=T&3,T=y[++c],b.effectSpeed=(T&240)>>4,b.effectDirection=(T&12)>>2,b.displayEffect=T&3,c},Re.prototype.flushDisplayed=function(c,m){for(var y=[],T=0;T<8;T++)m.windows[T].visible&&!m.windows[T].isEmpty()&&y.push(m.windows[T].getText());m.endPts=c,m.text=y.join(`

`),this.pushCaption(m),m.startPts=c},Re.prototype.pushCaption=function(c){c.text!==""&&(this.trigger("data",{startPts:c.startPts,endPts:c.endPts,text:c.text,stream:"cc708_"+c.serviceNum}),c.text="",c.startPts=c.endPts)},Re.prototype.displayWindows=function(c,m){var y=this.current708Packet.data,T=y[++c],b=this.getPts(c);this.flushDisplayed(b,m);for(var w=0;w<8;w++)T&1<<w&&(m.windows[w].visible=1);return c},Re.prototype.hideWindows=function(c,m){var y=this.current708Packet.data,T=y[++c],b=this.getPts(c);this.flushDisplayed(b,m);for(var w=0;w<8;w++)T&1<<w&&(m.windows[w].visible=0);return c},Re.prototype.toggleWindows=function(c,m){var y=this.current708Packet.data,T=y[++c],b=this.getPts(c);this.flushDisplayed(b,m);for(var w=0;w<8;w++)T&1<<w&&(m.windows[w].visible^=1);return c},Re.prototype.clearWindows=function(c,m){var y=this.current708Packet.data,T=y[++c],b=this.getPts(c);this.flushDisplayed(b,m);for(var w=0;w<8;w++)T&1<<w&&m.windows[w].clearText();return c},Re.prototype.deleteWindows=function(c,m){var y=this.current708Packet.data,T=y[++c],b=this.getPts(c);this.flushDisplayed(b,m);for(var w=0;w<8;w++)T&1<<w&&m.windows[w].reset();return c},Re.prototype.setPenAttributes=function(c,m){var y=this.current708Packet.data,T=y[c],b=m.currentWindow.penAttr;return T=y[++c],b.textTag=(T&240)>>4,b.offset=(T&12)>>2,b.penSize=T&3,T=y[++c],b.italics=(T&128)>>7,b.underline=(T&64)>>6,b.edgeType=(T&56)>>3,b.fontStyle=T&7,c},Re.prototype.setPenColor=function(c,m){var y=this.current708Packet.data,T=y[c],b=m.currentWindow.penColor;return T=y[++c],b.fgOpacity=(T&192)>>6,b.fgRed=(T&48)>>4,b.fgGreen=(T&12)>>2,b.fgBlue=T&3,T=y[++c],b.bgOpacity=(T&192)>>6,b.bgRed=(T&48)>>4,b.bgGreen=(T&12)>>2,b.bgBlue=T&3,T=y[++c],b.edgeRed=(T&48)>>4,b.edgeGreen=(T&12)>>2,b.edgeBlue=T&3,c},Re.prototype.setPenLocation=function(c,m){var y=this.current708Packet.data,T=y[c],b=m.currentWindow.penLoc;return m.currentWindow.pendingNewLine=!0,T=y[++c],b.row=T&15,T=y[++c],b.column=T&63,c},Re.prototype.reset=function(c,m){var y=this.getPts(c);return this.flushDisplayed(y,m),this.initService(m.serviceNum,c)};var ot={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},qr=function(c){return c===null?"":(c=ot[c]||c,String.fromCharCode(c))},gt=14,Pp=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Gr=function(){for(var c=[],m=gt+1;m--;)c.push("");return c},et=function(c,m){et.prototype.init.call(this),this.field_=c||0,this.dataChannel_=m||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(y){var T,b,w,F,R;if(T=y.ccData&32639,T===this.lastControlCode_){this.lastControlCode_=null;return}if((T&61440)===4096?this.lastControlCode_=T:T!==this.PADDING_&&(this.lastControlCode_=null),w=T>>>8,F=T&255,T!==this.PADDING_)if(T===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(T===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(y.pts),this.flushDisplayed(y.pts),b=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=b,this.startPts_=y.pts;else if(T===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(y.pts);else if(T===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(y.pts);else if(T===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(y.pts);else if(T===this.CARRIAGE_RETURN_)this.clearFormatting(y.pts),this.flushDisplayed(y.pts),this.shiftRowsUp_(),this.startPts_=y.pts;else if(T===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(T===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(y.pts),this.displayed_=Gr();else if(T===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Gr();else if(T===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(y.pts),this.displayed_=Gr()),this.mode_="paintOn",this.startPts_=y.pts;else if(this.isSpecialCharacter(w,F))w=(w&3)<<8,R=qr(w|F),this[this.mode_](y.pts,R),this.column_++;else if(this.isExtCharacter(w,F))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),w=(w&3)<<8,R=qr(w|F),this[this.mode_](y.pts,R),this.column_++;else if(this.isMidRowCode(w,F))this.clearFormatting(y.pts),this[this.mode_](y.pts," "),this.column_++,(F&14)===14&&this.addFormatting(y.pts,["i"]),(F&1)===1&&this.addFormatting(y.pts,["u"]);else if(this.isOffsetControlCode(w,F))this.column_+=F&3;else if(this.isPAC(w,F)){var B=Pp.indexOf(T&7968);this.mode_==="rollUp"&&(B-this.rollUpRows_+1<0&&(B=this.rollUpRows_-1),this.setRollUp(y.pts,B)),B!==this.row_&&(this.clearFormatting(y.pts),this.row_=B),F&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(y.pts,["u"]),(T&16)===16&&(this.column_=((T&14)>>1)*4),this.isColorPAC(F)&&(F&14)===14&&this.addFormatting(y.pts,["i"])}else this.isNormalChar(w)&&(F===0&&(F=null),R=qr(w),R+=qr(F),this[this.mode_](y.pts,R),this.column_+=R.length)}};et.prototype=new Bn,et.prototype.flushDisplayed=function(c){var m=this.displayed_.map(function(y,T){try{return y.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+T+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");m.length&&this.trigger("data",{startPts:this.startPts_,endPts:c,text:m,stream:this.name_})},et.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Gr(),this.nonDisplayed_=Gr(),this.lastControlCode_=null,this.column_=0,this.row_=gt,this.rollUpRows_=2,this.formatting_=[]},et.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},et.prototype.isSpecialCharacter=function(c,m){return c===this.EXT_&&m>=48&&m<=63},et.prototype.isExtCharacter=function(c,m){return(c===this.EXT_+1||c===this.EXT_+2)&&m>=32&&m<=63},et.prototype.isMidRowCode=function(c,m){return c===this.EXT_&&m>=32&&m<=47},et.prototype.isOffsetControlCode=function(c,m){return c===this.OFFSET_&&m>=33&&m<=35},et.prototype.isPAC=function(c,m){return c>=this.BASE_&&c<this.BASE_+8&&m>=64&&m<=127},et.prototype.isColorPAC=function(c){return c>=64&&c<=79||c>=96&&c<=127},et.prototype.isNormalChar=function(c){return c>=32&&c<=127},et.prototype.setRollUp=function(c,m){if(this.mode_!=="rollUp"&&(this.row_=gt,this.mode_="rollUp",this.flushDisplayed(c),this.nonDisplayed_=Gr(),this.displayed_=Gr()),m!==void 0&&m!==this.row_)for(var y=0;y<this.rollUpRows_;y++)this.displayed_[m-y]=this.displayed_[this.row_-y],this.displayed_[this.row_-y]="";m===void 0&&(m=this.row_),this.topRow_=m-this.rollUpRows_+1},et.prototype.addFormatting=function(c,m){this.formatting_=this.formatting_.concat(m);var y=m.reduce(function(T,b){return T+"<"+b+">"},"");this[this.mode_](c,y)},et.prototype.clearFormatting=function(c){if(!!this.formatting_.length){var m=this.formatting_.reverse().reduce(function(y,T){return y+"</"+T+">"},"");this.formatting_=[],this[this.mode_](c,m)}},et.prototype.popOn=function(c,m){var y=this.nonDisplayed_[this.row_];y+=m,this.nonDisplayed_[this.row_]=y},et.prototype.rollUp=function(c,m){var y=this.displayed_[this.row_];y+=m,this.displayed_[this.row_]=y},et.prototype.shiftRowsUp_=function(){var c;for(c=0;c<this.topRow_;c++)this.displayed_[c]="";for(c=this.row_+1;c<gt+1;c++)this.displayed_[c]="";for(c=this.topRow_;c<this.row_;c++)this.displayed_[c]=this.displayed_[c+1];this.displayed_[this.row_]=""},et.prototype.paintOn=function(c,m){var y=this.displayed_[this.row_];y+=m,this.displayed_[this.row_]=y};var vs={CaptionStream:At,Cea608Stream:et,Cea708Stream:Re},Ta={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ad=t,kd=8589934592,_s=4294967296,Id="shared",Un=function(c,m){var y=1;for(c>m&&(y=-1);Math.abs(m-c)>_s;)c+=y*kd;return c},ys=function(c){var m,y;ys.prototype.init.call(this),this.type_=c||Id,this.push=function(T){this.type_!==Id&&T.type!==this.type_||(y===void 0&&(y=T.dts),T.dts=Un(T.dts,y),T.pts=Un(T.pts,y),m=T.dts,this.trigger("data",T))},this.flush=function(){y=m,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){y=void 0,m=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};ys.prototype=new Ad;var xa={TimestampRolloverStream:ys,handleRollover:Un},Fp=(c,m,y)=>{if(!c)return-1;for(var T=y;T<c.length;T++)if(c[T]===m)return T;return-1},Op={typedArrayIndexOf:Fp},Ts=t,ba=Ta,zr=Op.typedArrayIndexOf,ir={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},xs=function(c,m,y){var T,b="";for(T=m;T<y;T++)b+="%"+("00"+c[T].toString(16)).slice(-2);return b},jn=function(c,m,y){return decodeURIComponent(xs(c,m,y))},Kr=function(c,m,y){return unescape(xs(c,m,y))},gi=function(c){return c[0]<<21|c[1]<<14|c[2]<<7|c[3]},bs={APIC:function(c){var m=1,y,T,b="-->";c.data[0]===ir.Utf8&&(y=zr(c.data,0,m),!(y<0)&&(c.mimeType=Kr(c.data,m,y),m=y+1,c.pictureType=c.data[m],m++,T=zr(c.data,0,m),!(T<0)&&(c.description=jn(c.data,m,T),m=T+1,c.mimeType===b?c.url=Kr(c.data,m,c.data.length):c.pictureData=c.data.subarray(m,c.data.length))))},"T*":function(c){c.data[0]===ir.Utf8&&(c.value=jn(c.data,1,c.data.length).replace(/\0*$/,""),c.values=c.value.split("\0"))},TXXX:function(c){var m;c.data[0]===ir.Utf8&&(m=zr(c.data,0,1),m!==-1&&(c.description=jn(c.data,1,m),c.value=jn(c.data,m+1,c.data.length).replace(/\0*$/,""),c.data=c.value))},"W*":function(c){c.url=Kr(c.data,0,c.data.length).replace(/\0.*$/,"")},WXXX:function(c){var m;c.data[0]===ir.Utf8&&(m=zr(c.data,0,1),m!==-1&&(c.description=jn(c.data,1,m),c.url=Kr(c.data,m+1,c.data.length).replace(/\0.*$/,"")))},PRIV:function(c){var m;for(m=0;m<c.data.length;m++)if(c.data[m]===0){c.owner=Kr(c.data,0,m);break}c.privateData=c.data.subarray(m+1),c.data=c.privateData}},Xr;Xr=function(c){var m={descriptor:c&&c.descriptor},y=0,T=[],b=0,w;if(Xr.prototype.init.call(this),this.dispatchType=ba.METADATA_STREAM_TYPE.toString(16),m.descriptor)for(w=0;w<m.descriptor.length;w++)this.dispatchType+=("00"+m.descriptor[w].toString(16)).slice(-2);this.push=function(F){var R,B,j,Y,ee,ge;if(F.type==="timed-metadata"){if(F.dataAlignmentIndicator&&(b=0,T.length=0),T.length===0&&(F.data.length<10||F.data[0]!=="I".charCodeAt(0)||F.data[1]!=="D".charCodeAt(0)||F.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(T.push(F),b+=F.data.byteLength,T.length===1&&(y=gi(F.data.subarray(6,10)),y+=10),!(b<y)){for(R={data:new Uint8Array(y),frames:[],pts:T[0].pts,dts:T[0].dts},ee=0;ee<y;)R.data.set(T[0].data.subarray(0,y-ee),ee),ee+=T[0].data.byteLength,b-=T[0].data.byteLength,T.shift();B=10,R.data[5]&64&&(B+=4,B+=gi(R.data.subarray(10,14)),y-=gi(R.data.subarray(16,20)));do{if(j=gi(R.data.subarray(B+4,B+8)),j<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(ge=String.fromCharCode(R.data[B],R.data[B+1],R.data[B+2],R.data[B+3]),Y={id:ge,data:R.data.subarray(B+10,B+j+10)},Y.key=Y.id,bs[Y.id]?bs[Y.id](Y):Y.id[0]==="T"?bs["T*"](Y):Y.id[0]==="W"&&bs["W*"](Y),Y.owner==="com.apple.streaming.transportStreamTimestamp"){var re=Y.data,be=(re[3]&1)<<30|re[4]<<22|re[5]<<14|re[6]<<6|re[7]>>>2;be*=4,be+=re[7]&3,Y.timeStamp=be,R.pts===void 0&&R.dts===void 0&&(R.pts=Y.timeStamp,R.dts=Y.timeStamp),this.trigger("timestamp",Y)}R.frames.push(Y),B+=10,B+=j}while(B<y);this.trigger("data",R)}}}},Xr.prototype=new Ts;var Pd=Xr,Ss=t,Ds=vs,ki=Ta,Es=xa.TimestampRolloverStream,Tr,Hn,Cs,$n=188,ws=71;Tr=function(){var c=new Uint8Array($n),m=0;Tr.prototype.init.call(this),this.push=function(y){var T=0,b=$n,w;for(m?(w=new Uint8Array(y.byteLength+m),w.set(c.subarray(0,m)),w.set(y,m),m=0):w=y;b<w.byteLength;){if(w[T]===ws&&w[b]===ws){this.trigger("data",w.subarray(T,b)),T+=$n,b+=$n;continue}T++,b++}T<w.byteLength&&(c.set(w.subarray(T),0),m=w.byteLength-T)},this.flush=function(){m===$n&&c[0]===ws&&(this.trigger("data",c),m=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){m=0,this.trigger("reset")}},Tr.prototype=new Ss,Hn=function(){var c,m,y,T;Hn.prototype.init.call(this),T=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,c=function(b,w){var F=0;w.payloadUnitStartIndicator&&(F+=b[F]+1),w.type==="pat"?m(b.subarray(F),w):y(b.subarray(F),w)},m=function(b,w){w.section_number=b[7],w.last_section_number=b[8],T.pmtPid=(b[10]&31)<<8|b[11],w.pmtPid=T.pmtPid},y=function(b,w){var F,R,B,j;if(!!(b[5]&1)){for(T.programMapTable={video:null,audio:null,"timed-metadata":{}},F=(b[1]&15)<<8|b[2],R=3+F-4,B=(b[10]&15)<<8|b[11],j=12+B;j<R;){var Y=b[j],ee=(b[j+1]&31)<<8|b[j+2];Y===ki.H264_STREAM_TYPE&&T.programMapTable.video===null?T.programMapTable.video=ee:Y===ki.ADTS_STREAM_TYPE&&T.programMapTable.audio===null?T.programMapTable.audio=ee:Y===ki.METADATA_STREAM_TYPE&&(T.programMapTable["timed-metadata"][ee]=Y),j+=((b[j+3]&15)<<8|b[j+4])+5}w.programMapTable=T.programMapTable}},this.push=function(b){var w={},F=4;if(w.payloadUnitStartIndicator=!!(b[1]&64),w.pid=b[1]&31,w.pid<<=8,w.pid|=b[2],(b[3]&48)>>>4>1&&(F+=b[F]+1),w.pid===0)w.type="pat",c(b.subarray(F),w),this.trigger("data",w);else if(w.pid===this.pmtPid)for(w.type="pmt",c(b.subarray(F),w),this.trigger("data",w);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([b,F,w]):this.processPes_(b,F,w)},this.processPes_=function(b,w,F){F.pid===this.programMapTable.video?F.streamType=ki.H264_STREAM_TYPE:F.pid===this.programMapTable.audio?F.streamType=ki.ADTS_STREAM_TYPE:F.streamType=this.programMapTable["timed-metadata"][F.pid],F.type="pes",F.data=b.subarray(w),this.trigger("data",F)}},Hn.prototype=new Ss,Hn.STREAM_TYPES={h264:27,adts:15},Cs=function(){var c=this,m=!1,y={data:[],size:0},T={data:[],size:0},b={data:[],size:0},w,F=function(B,j){var Y;let ee=B[0]<<16|B[1]<<8|B[2];j.data=new Uint8Array,ee===1&&(j.packetLength=6+(B[4]<<8|B[5]),j.dataAlignmentIndicator=(B[6]&4)!==0,Y=B[7],Y&192&&(j.pts=(B[9]&14)<<27|(B[10]&255)<<20|(B[11]&254)<<12|(B[12]&255)<<5|(B[13]&254)>>>3,j.pts*=4,j.pts+=(B[13]&6)>>>1,j.dts=j.pts,Y&64&&(j.dts=(B[14]&14)<<27|(B[15]&255)<<20|(B[16]&254)<<12|(B[17]&255)<<5|(B[18]&254)>>>3,j.dts*=4,j.dts+=(B[18]&6)>>>1)),j.data=B.subarray(9+B[8]))},R=function(B,j,Y){var ee=new Uint8Array(B.size),ge={type:j},re=0,be=0,De=!1,kt;if(!(!B.data.length||B.size<9)){for(ge.trackId=B.data[0].pid,re=0;re<B.data.length;re++)kt=B.data[re],ee.set(kt.data,be),be+=kt.data.byteLength;F(ee,ge),De=j==="video"||ge.packetLength<=B.size,(Y||De)&&(B.size=0,B.data.length=0),De&&c.trigger("data",ge)}};Cs.prototype.init.call(this),this.push=function(B){({pat:function(){},pes:function(){var j,Y;switch(B.streamType){case ki.H264_STREAM_TYPE:j=y,Y="video";break;case ki.ADTS_STREAM_TYPE:j=T,Y="audio";break;case ki.METADATA_STREAM_TYPE:j=b,Y="timed-metadata";break;default:return}B.payloadUnitStartIndicator&&R(j,Y,!0),j.data.push(B),j.size+=B.data.byteLength},pmt:function(){var j={type:"metadata",tracks:[]};w=B.programMapTable,w.video!==null&&j.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.video,codec:"avc",type:"video"}),w.audio!==null&&j.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.audio,codec:"adts",type:"audio"}),m=!0,c.trigger("data",j)}})[B.type]()},this.reset=function(){y.size=0,y.data.length=0,T.size=0,T.data.length=0,this.trigger("reset")},this.flushStreams_=function(){R(y,"video"),R(T,"audio"),R(b,"timed-metadata")},this.flush=function(){if(!m&&w){var B={type:"metadata",tracks:[]};w.video!==null&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.video,codec:"avc",type:"video"}),w.audio!==null&&B.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+w.audio,codec:"adts",type:"audio"}),c.trigger("data",B)}m=!1,this.flushStreams_(),this.trigger("done")}},Cs.prototype=new Ss;var Fd={PAT_PID:0,MP2T_PACKET_LENGTH:$n,TransportPacketStream:Tr,TransportParseStream:Hn,ElementaryStream:Cs,TimestampRolloverStream:Es,CaptionStream:Ds.CaptionStream,Cea608Stream:Ds.Cea608Stream,Cea708Stream:Ds.Cea708Stream,MetadataStream:Pd};for(var fu in ki)ki.hasOwnProperty(fu)&&(Fd[fu]=ki[fu]);var Od=Fd,Lp=t,Rp=Ze.ONE_SECOND_IN_TS,As,Ld=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];As=function(c){var m,y=0;As.prototype.init.call(this),this.skipWarn_=function(T,b){this.trigger("log",{level:"warn",message:`adts skiping bytes ${T} to ${b} in frame ${y} outside syncword`})},this.push=function(T){var b=0,w,F,R,B,j;if(c||(y=0),T.type==="audio"){m&&m.length?(R=m,m=new Uint8Array(R.byteLength+T.data.byteLength),m.set(R),m.set(T.data,R.byteLength)):m=T.data;for(var Y;b+7<m.length;){if(m[b]!==255||(m[b+1]&246)!==240){typeof Y!="number"&&(Y=b),b++;continue}if(typeof Y=="number"&&(this.skipWarn_(Y,b),Y=null),F=(~m[b+1]&1)*2,w=(m[b+3]&3)<<11|m[b+4]<<3|(m[b+5]&224)>>5,B=((m[b+6]&3)+1)*1024,j=B*Rp/Ld[(m[b+2]&60)>>>2],m.byteLength-b<w)break;this.trigger("data",{pts:T.pts+y*j,dts:T.dts+y*j,sampleCount:B,audioobjecttype:(m[b+2]>>>6&3)+1,channelcount:(m[b+2]&1)<<2|(m[b+3]&192)>>>6,samplerate:Ld[(m[b+2]&60)>>>2],samplingfrequencyindex:(m[b+2]&60)>>>2,samplesize:16,data:m.subarray(b+7+F,b+w)}),y++,b+=w}typeof Y=="number"&&(this.skipWarn_(Y,b),Y=null),m=m.subarray(b)}},this.flush=function(){y=0,this.trigger("done")},this.reset=function(){m=void 0,this.trigger("reset")},this.endTimeline=function(){m=void 0,this.trigger("endedtimeline")}},As.prototype=new Lp;var Mp=As,Rd;Rd=function(c){var m=c.byteLength,y=0,T=0;this.length=function(){return 8*m},this.bitsAvailable=function(){return 8*m+T},this.loadWord=function(){var b=c.byteLength-m,w=new Uint8Array(4),F=Math.min(4,m);if(F===0)throw new Error("no bytes available");w.set(c.subarray(b,b+F)),y=new DataView(w.buffer).getUint32(0),T=F*8,m-=F},this.skipBits=function(b){var w;T>b?(y<<=b,T-=b):(b-=T,w=Math.floor(b/8),b-=w*8,m-=w,this.loadWord(),y<<=b,T-=b)},this.readBits=function(b){var w=Math.min(T,b),F=y>>>32-w;return T-=w,T>0?y<<=w:m>0&&this.loadWord(),w=b-w,w>0?F<<w|this.readBits(w):F},this.skipLeadingZeros=function(){var b;for(b=0;b<T;++b)if((y&2147483648>>>b)!==0)return y<<=b,T-=b,b;return this.loadWord(),b+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var b=this.skipLeadingZeros();return this.readBits(b+1)-1},this.readExpGolomb=function(){var b=this.readUnsignedExpGolomb();return 1&b?1+b>>>1:-1*(b>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ks=Rd,Sa=t,Np=ks,Is,Yr,Md;Yr=function(){var c=0,m,y;Yr.prototype.init.call(this),this.push=function(T){var b;y?(b=new Uint8Array(y.byteLength+T.data.byteLength),b.set(y),b.set(T.data,y.byteLength),y=b):y=T.data;for(var w=y.byteLength;c<w-3;c++)if(y[c+2]===1){m=c+5;break}for(;m<w;)switch(y[m]){case 0:if(y[m-1]!==0){m+=2;break}else if(y[m-2]!==0){m++;break}c+3!==m-2&&this.trigger("data",y.subarray(c+3,m-2));do m++;while(y[m]!==1&&m<w);c=m-2,m+=3;break;case 1:if(y[m-1]!==0||y[m-2]!==0){m+=3;break}this.trigger("data",y.subarray(c+3,m-2)),c=m-2,m+=3;break;default:m+=3;break}y=y.subarray(c),m-=c,c=0},this.reset=function(){y=null,c=0,this.trigger("reset")},this.flush=function(){y&&y.byteLength>3&&this.trigger("data",y.subarray(c+3)),y=null,c=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Yr.prototype=new Sa,Md={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Is=function(){var c=new Yr,m,y,T,b,w,F,R;Is.prototype.init.call(this),m=this,this.push=function(B){B.type==="video"&&(y=B.trackId,T=B.pts,b=B.dts,c.push(B))},c.on("data",function(B){var j={trackId:y,pts:T,dts:b,data:B,nalUnitTypeCode:B[0]&31};switch(j.nalUnitTypeCode){case 5:j.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:j.nalUnitType="sei_rbsp",j.escapedRBSP=w(B.subarray(1));break;case 7:j.nalUnitType="seq_parameter_set_rbsp",j.escapedRBSP=w(B.subarray(1)),j.config=F(j.escapedRBSP);break;case 8:j.nalUnitType="pic_parameter_set_rbsp";break;case 9:j.nalUnitType="access_unit_delimiter_rbsp";break}m.trigger("data",j)}),c.on("done",function(){m.trigger("done")}),c.on("partialdone",function(){m.trigger("partialdone")}),c.on("reset",function(){m.trigger("reset")}),c.on("endedtimeline",function(){m.trigger("endedtimeline")}),this.flush=function(){c.flush()},this.partialFlush=function(){c.partialFlush()},this.reset=function(){c.reset()},this.endTimeline=function(){c.endTimeline()},R=function(B,j){var Y=8,ee=8,ge,re;for(ge=0;ge<B;ge++)ee!==0&&(re=j.readExpGolomb(),ee=(Y+re+256)%256),Y=ee===0?Y:ee},w=function(B){for(var j=B.byteLength,Y=[],ee=1,ge,re;ee<j-2;)B[ee]===0&&B[ee+1]===0&&B[ee+2]===3?(Y.push(ee+2),ee+=2):ee++;if(Y.length===0)return B;ge=j-Y.length,re=new Uint8Array(ge);var be=0;for(ee=0;ee<ge;be++,ee++)be===Y[0]&&(be++,Y.shift()),re[ee]=B[be];return re},F=function(B){var j=0,Y=0,ee=0,ge=0,re,be,De,kt,zi,Oa,Ly,Ry,My,nm,Ny,Tt=[1,1],By,La;if(re=new Np(B),be=re.readUnsignedByte(),kt=re.readUnsignedByte(),De=re.readUnsignedByte(),re.skipUnsignedExpGolomb(),Md[be]&&(zi=re.readUnsignedExpGolomb(),zi===3&&re.skipBits(1),re.skipUnsignedExpGolomb(),re.skipUnsignedExpGolomb(),re.skipBits(1),re.readBoolean()))for(Ny=zi!==3?8:12,La=0;La<Ny;La++)re.readBoolean()&&(La<6?R(16,re):R(64,re));if(re.skipUnsignedExpGolomb(),Oa=re.readUnsignedExpGolomb(),Oa===0)re.readUnsignedExpGolomb();else if(Oa===1)for(re.skipBits(1),re.skipExpGolomb(),re.skipExpGolomb(),Ly=re.readUnsignedExpGolomb(),La=0;La<Ly;La++)re.skipExpGolomb();if(re.skipUnsignedExpGolomb(),re.skipBits(1),Ry=re.readUnsignedExpGolomb(),My=re.readUnsignedExpGolomb(),nm=re.readBits(1),nm===0&&re.skipBits(1),re.skipBits(1),re.readBoolean()&&(j=re.readUnsignedExpGolomb(),Y=re.readUnsignedExpGolomb(),ee=re.readUnsignedExpGolomb(),ge=re.readUnsignedExpGolomb()),re.readBoolean()&&re.readBoolean()){switch(By=re.readUnsignedByte(),By){case 1:Tt=[1,1];break;case 2:Tt=[12,11];break;case 3:Tt=[10,11];break;case 4:Tt=[16,11];break;case 5:Tt=[40,33];break;case 6:Tt=[24,11];break;case 7:Tt=[20,11];break;case 8:Tt=[32,11];break;case 9:Tt=[80,33];break;case 10:Tt=[18,11];break;case 11:Tt=[15,11];break;case 12:Tt=[64,33];break;case 13:Tt=[160,99];break;case 14:Tt=[4,3];break;case 15:Tt=[3,2];break;case 16:Tt=[2,1];break;case 255:{Tt=[re.readUnsignedByte()<<8|re.readUnsignedByte(),re.readUnsignedByte()<<8|re.readUnsignedByte()];break}}Tt&&Tt[0]/Tt[1]}return{profileIdc:be,levelIdc:De,profileCompatibility:kt,width:(Ry+1)*16-j*2-Y*2,height:(2-nm)*(My+1)*16-ee*2-ge*2,sarRatio:Tt}}},Is.prototype=new Sa;var pu={H264Stream:Is,NalByteStream:Yr},Bp=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Nd=function(c,m){var y=c[m+6]<<21|c[m+7]<<14|c[m+8]<<7|c[m+9],T=c[m+5],b=(T&16)>>4;return y=y>=0?y:0,b?y+20:y+10},Bd=function(c,m){return c.length-m<10||c[m]!=="I".charCodeAt(0)||c[m+1]!=="D".charCodeAt(0)||c[m+2]!=="3".charCodeAt(0)?m:(m+=Nd(c,m),Bd(c,m))},Da=function(c){var m=Bd(c,0);return c.length>=m+2&&(c[m]&255)===255&&(c[m+1]&240)===240&&(c[m+1]&22)===16},Qr=function(c){return c[0]<<21|c[1]<<14|c[2]<<7|c[3]},Ps=function(c,m,y){var T,b="";for(T=m;T<y;T++)b+="%"+("00"+c[T].toString(16)).slice(-2);return b},Jr=function(c,m,y){return unescape(Ps(c,m,y))},Up=function(c,m){var y=(c[m+5]&224)>>5,T=c[m+4]<<3,b=c[m+3]&3<<11;return b|T|y},Ud=function(c,m){return c[m]==="I".charCodeAt(0)&&c[m+1]==="D".charCodeAt(0)&&c[m+2]==="3".charCodeAt(0)?"timed-metadata":c[m]&!0&&(c[m+1]&240)===240?"audio":null},jd=function(c){for(var m=0;m+5<c.length;){if(c[m]!==255||(c[m+1]&246)!==240){m++;continue}return Bp[(c[m+2]&60)>>>2]}return null},mu=function(c){var m,y,T,b;m=10,c[5]&64&&(m+=4,m+=Qr(c.subarray(10,14)));do{if(y=Qr(c.subarray(m+4,m+8)),y<1)return null;if(b=String.fromCharCode(c[m],c[m+1],c[m+2],c[m+3]),b==="PRIV"){T=c.subarray(m+10,m+y+10);for(var w=0;w<T.byteLength;w++)if(T[w]===0){var F=Jr(T,0,w);if(F==="com.apple.streaming.transportStreamTimestamp"){var R=T.subarray(w+1),B=(R[3]&1)<<30|R[4]<<22|R[5]<<14|R[6]<<6|R[7]>>>2;return B*=4,B+=R[7]&3,B}break}}m+=10,m+=y}while(m<c.byteLength);return null},gu={isLikelyAacData:Da,parseId3TagSize:Nd,parseAdtsSize:Up,parseType:Ud,parseSampleRate:jd,parseAacTimestamp:mu},jp=t,Hd=gu,Zr;Zr=function(){var c=new Uint8Array,m=0;Zr.prototype.init.call(this),this.setTimestamp=function(y){m=y},this.push=function(y){var T=0,b=0,w,F,R,B;for(c.length?(B=c.length,c=new Uint8Array(y.byteLength+B),c.set(c.subarray(0,B)),c.set(y,B)):c=y;c.length-b>=3;){if(c[b]==="I".charCodeAt(0)&&c[b+1]==="D".charCodeAt(0)&&c[b+2]==="3".charCodeAt(0)){if(c.length-b<10||(T=Hd.parseId3TagSize(c,b),b+T>c.length))break;F={type:"timed-metadata",data:c.subarray(b,b+T)},this.trigger("data",F),b+=T;continue}else if((c[b]&255)===255&&(c[b+1]&240)===240){if(c.length-b<7||(T=Hd.parseAdtsSize(c,b),b+T>c.length))break;R={type:"audio",data:c.subarray(b,b+T),pts:m,dts:m},this.trigger("data",R),b+=T;continue}b++}w=c.length-b,w>0?c=c.subarray(b):c=new Uint8Array},this.reset=function(){c=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){c=new Uint8Array,this.trigger("endedtimeline")}},Zr.prototype=new jp;var Hp=Zr,en=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],$p=en,Vp=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],tt=Vp,Fs=t,Ea=On,Ca=yr,wa=Sp,Ii=Cp,Wi=Od,Os=Ze,vu=Mp,Wp=pu.H264Stream,$d=Hp,Vd=gu.isLikelyAacData,Aa=Ze.ONE_SECOND_IN_TS,tn=$p,_u=tt,ka,Vn,Ls,rn,qp=function(c,m){m.stream=c,this.trigger("log",m)},Wd=function(c,m){for(var y=Object.keys(m),T=0;T<y.length;T++){var b=y[T];b==="headOfPipeline"||!m[b].on||m[b].on("log",qp.bind(c,b))}},qd=function(c,m){var y;if(c.length!==m.length)return!1;for(y=0;y<c.length;y++)if(c[y]!==m[y])return!1;return!0},yu=function(c,m,y,T,b,w){var F=y-m,R=T-m,B=b-y;return{start:{dts:c,pts:c+F},end:{dts:c+R,pts:c+B},prependedContentDuration:w,baseMediaDecodeTime:c}};Vn=function(c,m){var y=[],T,b=0,w=0,F=1/0;m=m||{},T=m.firstSequenceNumber||0,Vn.prototype.init.call(this),this.push=function(R){Ii.collectDtsInfo(c,R),c&&tn.forEach(function(B){c[B]=R[B]}),y.push(R)},this.setEarliestDts=function(R){b=R},this.setVideoBaseMediaDecodeTime=function(R){F=R},this.setAudioAppendStart=function(R){w=R},this.flush=function(){var R,B,j,Y,ee,ge,re;if(y.length===0){this.trigger("done","AudioSegmentStream");return}R=wa.trimAdtsFramesByEarliestDts(y,c,b),c.baseMediaDecodeTime=Ii.calculateTrackBaseMediaDecodeTime(c,m.keepOriginalTimestamps),re=wa.prefixWithSilence(c,R,w,F),c.samples=wa.generateSampleTable(R),j=Ea.mdat(wa.concatenateFrameData(R)),y=[],B=Ea.moof(T,[c]),Y=new Uint8Array(B.byteLength+j.byteLength),T++,Y.set(B),Y.set(j,B.byteLength),Ii.clearDtsInfo(c),ee=Math.ceil(Aa*1024/c.samplerate),R.length&&(ge=R.length*ee,this.trigger("segmentTimingInfo",yu(Os.audioTsToVideoTs(c.baseMediaDecodeTime,c.samplerate),R[0].dts,R[0].pts,R[0].dts+ge,R[0].pts+ge,re||0)),this.trigger("timingInfo",{start:R[0].pts,end:R[0].pts+ge})),this.trigger("data",{track:c,boxes:Y}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Ii.clearDtsInfo(c),y=[],this.trigger("reset")}},Vn.prototype=new Fs,ka=function(c,m){var y,T=[],b=[],w,F;m=m||{},y=m.firstSequenceNumber||0,ka.prototype.init.call(this),delete c.minPTS,this.gopCache_=[],this.push=function(R){Ii.collectDtsInfo(c,R),R.nalUnitType==="seq_parameter_set_rbsp"&&!w&&(w=R.config,c.sps=[R.data],_u.forEach(function(B){c[B]=w[B]},this)),R.nalUnitType==="pic_parameter_set_rbsp"&&!F&&(F=R.data,c.pps=[R.data]),T.push(R)},this.flush=function(){for(var R,B,j,Y,ee,ge,re=0,be,De;T.length&&T[0].nalUnitType!=="access_unit_delimiter_rbsp";)T.shift();if(T.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(R=Ca.groupNalsIntoFrames(T),j=Ca.groupFramesIntoGops(R),j[0][0].keyFrame||(B=this.getGopForFusion_(T[0],c),B?(re=B.duration,j.unshift(B),j.byteLength+=B.byteLength,j.nalCount+=B.nalCount,j.pts=B.pts,j.dts=B.dts,j.duration+=B.duration):j=Ca.extendFirstKeyFrame(j)),b.length){var kt;if(m.alignGopsAtEnd?kt=this.alignGopsAtEnd_(j):kt=this.alignGopsAtStart_(j),!kt){this.gopCache_.unshift({gop:j.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),T=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Ii.clearDtsInfo(c),j=kt}Ii.collectDtsInfo(c,j),c.samples=Ca.generateSampleTable(j),ee=Ea.mdat(Ca.concatenateNalData(j)),c.baseMediaDecodeTime=Ii.calculateTrackBaseMediaDecodeTime(c,m.keepOriginalTimestamps),this.trigger("processedGopsInfo",j.map(function(zi){return{pts:zi.pts,dts:zi.dts,byteLength:zi.byteLength}})),be=j[0],De=j[j.length-1],this.trigger("segmentTimingInfo",yu(c.baseMediaDecodeTime,be.dts,be.pts,De.dts+De.duration,De.pts+De.duration,re)),this.trigger("timingInfo",{start:j[0].pts,end:j[j.length-1].pts+j[j.length-1].duration}),this.gopCache_.unshift({gop:j.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),T=[],this.trigger("baseMediaDecodeTime",c.baseMediaDecodeTime),this.trigger("timelineStartInfo",c.timelineStartInfo),Y=Ea.moof(y,[c]),ge=new Uint8Array(Y.byteLength+ee.byteLength),y++,ge.set(Y),ge.set(ee,Y.byteLength),this.trigger("data",{track:c,boxes:ge}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),T=[],this.gopCache_.length=0,b.length=0,this.trigger("reset")},this.resetStream_=function(){Ii.clearDtsInfo(c),w=void 0,F=void 0},this.getGopForFusion_=function(R){var B=45e3,j=1e4,Y=1/0,ee,ge,re,be,De;for(De=0;De<this.gopCache_.length;De++)be=this.gopCache_[De],re=be.gop,!(!(c.pps&&qd(c.pps[0],be.pps[0]))||!(c.sps&&qd(c.sps[0],be.sps[0])))&&(re.dts<c.timelineStartInfo.dts||(ee=R.dts-re.dts-re.duration,ee>=-j&&ee<=B&&(!ge||Y>ee)&&(ge=be,Y=ee)));return ge?ge.gop:null},this.alignGopsAtStart_=function(R){var B,j,Y,ee,ge,re,be,De;for(ge=R.byteLength,re=R.nalCount,be=R.duration,B=j=0;B<b.length&&j<R.length&&(Y=b[B],ee=R[j],Y.pts!==ee.pts);){if(ee.pts>Y.pts){B++;continue}j++,ge-=ee.byteLength,re-=ee.nalCount,be-=ee.duration}return j===0?R:j===R.length?null:(De=R.slice(j),De.byteLength=ge,De.duration=be,De.nalCount=re,De.pts=De[0].pts,De.dts=De[0].dts,De)},this.alignGopsAtEnd_=function(R){var B,j,Y,ee,ge,re;for(B=b.length-1,j=R.length-1,ge=null,re=!1;B>=0&&j>=0;){if(Y=b[B],ee=R[j],Y.pts===ee.pts){re=!0;break}if(Y.pts>ee.pts){B--;continue}B===b.length-1&&(ge=j),j--}if(!re&&ge===null)return null;var be;if(re?be=j:be=ge,be===0)return R;var De=R.slice(be),kt=De.reduce(function(zi,Oa){return zi.byteLength+=Oa.byteLength,zi.duration+=Oa.duration,zi.nalCount+=Oa.nalCount,zi},{byteLength:0,duration:0,nalCount:0});return De.byteLength=kt.byteLength,De.duration=kt.duration,De.nalCount=kt.nalCount,De.pts=De[0].pts,De.dts=De[0].dts,De},this.alignGopsWith=function(R){b=R}},ka.prototype=new Fs,rn=function(c,m){this.numberOfTracks=0,this.metadataStream=m,c=c||{},typeof c.remux<"u"?this.remuxTracks=!!c.remux:this.remuxTracks=!0,typeof c.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=c.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,rn.prototype.init.call(this),this.push=function(y){if(y.text)return this.pendingCaptions.push(y);if(y.frames)return this.pendingMetadata.push(y);this.pendingTracks.push(y.track),this.pendingBytes+=y.boxes.byteLength,y.track.type==="video"&&(this.videoTrack=y.track,this.pendingBoxes.push(y.boxes)),y.track.type==="audio"&&(this.audioTrack=y.track,this.pendingBoxes.unshift(y.boxes))}},rn.prototype=new Fs,rn.prototype.flush=function(c){var m=0,y={captions:[],captionStreams:{},metadata:[],info:{}},T,b,w,F=0,R;if(this.pendingTracks.length<this.numberOfTracks){if(c!=="VideoSegmentStream"&&c!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(F=this.videoTrack.timelineStartInfo.pts,_u.forEach(function(B){y.info[B]=this.videoTrack[B]},this)):this.audioTrack&&(F=this.audioTrack.timelineStartInfo.pts,tn.forEach(function(B){y.info[B]=this.audioTrack[B]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?y.type=this.pendingTracks[0].type:y.type="combined",this.emittedTracks+=this.pendingTracks.length,w=Ea.initSegment(this.pendingTracks),y.initSegment=new Uint8Array(w.byteLength),y.initSegment.set(w),y.data=new Uint8Array(this.pendingBytes),R=0;R<this.pendingBoxes.length;R++)y.data.set(this.pendingBoxes[R],m),m+=this.pendingBoxes[R].byteLength;for(R=0;R<this.pendingCaptions.length;R++)T=this.pendingCaptions[R],T.startTime=Os.metadataTsToSeconds(T.startPts,F,this.keepOriginalTimestamps),T.endTime=Os.metadataTsToSeconds(T.endPts,F,this.keepOriginalTimestamps),y.captionStreams[T.stream]=!0,y.captions.push(T);for(R=0;R<this.pendingMetadata.length;R++)b=this.pendingMetadata[R],b.cueTime=Os.metadataTsToSeconds(b.pts,F,this.keepOriginalTimestamps),y.metadata.push(b);for(y.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",y),R=0;R<y.captions.length;R++)T=y.captions[R],this.trigger("caption",T);for(R=0;R<y.metadata.length;R++)b=y.metadata[R],this.trigger("id3Frame",b)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},rn.prototype.setRemux=function(c){this.remuxTracks=c},Ls=function(c){var m=this,y=!0,T,b;Ls.prototype.init.call(this),c=c||{},this.baseMediaDecodeTime=c.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var w={};this.transmuxPipeline_=w,w.type="aac",w.metadataStream=new Wi.MetadataStream,w.aacStream=new $d,w.audioTimestampRolloverStream=new Wi.TimestampRolloverStream("audio"),w.timedMetadataTimestampRolloverStream=new Wi.TimestampRolloverStream("timed-metadata"),w.adtsStream=new vu,w.coalesceStream=new rn(c,w.metadataStream),w.headOfPipeline=w.aacStream,w.aacStream.pipe(w.audioTimestampRolloverStream).pipe(w.adtsStream),w.aacStream.pipe(w.timedMetadataTimestampRolloverStream).pipe(w.metadataStream).pipe(w.coalesceStream),w.metadataStream.on("timestamp",function(F){w.aacStream.setTimestamp(F.timeStamp)}),w.aacStream.on("data",function(F){F.type!=="timed-metadata"&&F.type!=="audio"||w.audioSegmentStream||(b=b||{timelineStartInfo:{baseMediaDecodeTime:m.baseMediaDecodeTime},codec:"adts",type:"audio"},w.coalesceStream.numberOfTracks++,w.audioSegmentStream=new Vn(b,c),w.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),w.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream),m.trigger("trackinfo",{hasAudio:!!b,hasVideo:!!T}))}),w.coalesceStream.on("data",this.trigger.bind(this,"data")),w.coalesceStream.on("done",this.trigger.bind(this,"done")),Wd(this,w)},this.setupTsPipeline=function(){var w={};this.transmuxPipeline_=w,w.type="ts",w.metadataStream=new Wi.MetadataStream,w.packetStream=new Wi.TransportPacketStream,w.parseStream=new Wi.TransportParseStream,w.elementaryStream=new Wi.ElementaryStream,w.timestampRolloverStream=new Wi.TimestampRolloverStream,w.adtsStream=new vu,w.h264Stream=new Wp,w.captionStream=new Wi.CaptionStream(c),w.coalesceStream=new rn(c,w.metadataStream),w.headOfPipeline=w.packetStream,w.packetStream.pipe(w.parseStream).pipe(w.elementaryStream).pipe(w.timestampRolloverStream),w.timestampRolloverStream.pipe(w.h264Stream),w.timestampRolloverStream.pipe(w.adtsStream),w.timestampRolloverStream.pipe(w.metadataStream).pipe(w.coalesceStream),w.h264Stream.pipe(w.captionStream).pipe(w.coalesceStream),w.elementaryStream.on("data",function(F){var R;if(F.type==="metadata"){for(R=F.tracks.length;R--;)!T&&F.tracks[R].type==="video"?(T=F.tracks[R],T.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime):!b&&F.tracks[R].type==="audio"&&(b=F.tracks[R],b.timelineStartInfo.baseMediaDecodeTime=m.baseMediaDecodeTime);T&&!w.videoSegmentStream&&(w.coalesceStream.numberOfTracks++,w.videoSegmentStream=new ka(T,c),w.videoSegmentStream.on("log",m.getLogTrigger_("videoSegmentStream")),w.videoSegmentStream.on("timelineStartInfo",function(B){b&&!c.keepOriginalTimestamps&&(b.timelineStartInfo=B,w.audioSegmentStream.setEarliestDts(B.dts-m.baseMediaDecodeTime))}),w.videoSegmentStream.on("processedGopsInfo",m.trigger.bind(m,"gopInfo")),w.videoSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"videoSegmentTimingInfo")),w.videoSegmentStream.on("baseMediaDecodeTime",function(B){b&&w.audioSegmentStream.setVideoBaseMediaDecodeTime(B)}),w.videoSegmentStream.on("timingInfo",m.trigger.bind(m,"videoTimingInfo")),w.h264Stream.pipe(w.videoSegmentStream).pipe(w.coalesceStream)),b&&!w.audioSegmentStream&&(w.coalesceStream.numberOfTracks++,w.audioSegmentStream=new Vn(b,c),w.audioSegmentStream.on("log",m.getLogTrigger_("audioSegmentStream")),w.audioSegmentStream.on("timingInfo",m.trigger.bind(m,"audioTimingInfo")),w.audioSegmentStream.on("segmentTimingInfo",m.trigger.bind(m,"audioSegmentTimingInfo")),w.adtsStream.pipe(w.audioSegmentStream).pipe(w.coalesceStream)),m.trigger("trackinfo",{hasAudio:!!b,hasVideo:!!T})}}),w.coalesceStream.on("data",this.trigger.bind(this,"data")),w.coalesceStream.on("id3Frame",function(F){F.dispatchType=w.metadataStream.dispatchType,m.trigger("id3Frame",F)}),w.coalesceStream.on("caption",this.trigger.bind(this,"caption")),w.coalesceStream.on("done",this.trigger.bind(this,"done")),Wd(this,w)},this.setBaseMediaDecodeTime=function(w){var F=this.transmuxPipeline_;c.keepOriginalTimestamps||(this.baseMediaDecodeTime=w),b&&(b.timelineStartInfo.dts=void 0,b.timelineStartInfo.pts=void 0,Ii.clearDtsInfo(b),F.audioTimestampRolloverStream&&F.audioTimestampRolloverStream.discontinuity()),T&&(F.videoSegmentStream&&(F.videoSegmentStream.gopCache_=[]),T.timelineStartInfo.dts=void 0,T.timelineStartInfo.pts=void 0,Ii.clearDtsInfo(T),F.captionStream.reset()),F.timestampRolloverStream&&F.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(w){b&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(w)},this.setRemux=function(w){var F=this.transmuxPipeline_;c.remux=w,F&&F.coalesceStream&&F.coalesceStream.setRemux(w)},this.alignGopsWith=function(w){T&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(w)},this.getLogTrigger_=function(w){var F=this;return function(R){R.stream=w,F.trigger("log",R)}},this.push=function(w){if(y){var F=Vd(w);F&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!F&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),y=!1}this.transmuxPipeline_.headOfPipeline.push(w)},this.flush=function(){y=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ls.prototype=new Fs;var Rs={Transmuxer:Ls,VideoSegmentStream:ka,AudioSegmentStream:Vn,AUDIO_PROPERTIES:tn,VIDEO_PROPERTIES:_u,generateSegmentTimingInfo:yu},Ia=function(c){return c>>>0},Gp=function(c){return("00"+c.toString(16)).slice(-2)},Pa={toUnsigned:Ia,toHexString:Gp},Gd=function(c){var m="";return m+=String.fromCharCode(c[0]),m+=String.fromCharCode(c[1]),m+=String.fromCharCode(c[2]),m+=String.fromCharCode(c[3]),m},Tu=Gd,zd=Pa.toUnsigned,Kd=Tu,Ms=function(c,m){var y=[],T,b,w,F,R;if(!m.length)return null;for(T=0;T<c.byteLength;)b=zd(c[T]<<24|c[T+1]<<16|c[T+2]<<8|c[T+3]),w=Kd(c.subarray(T+4,T+8)),F=b>1?T+b:c.byteLength,w===m[0]&&(m.length===1?y.push(c.subarray(T+8,F)):(R=Ms(c.subarray(T+8,F),m.slice(1)),R.length&&(y=y.concat(R)))),T=F;return y},xu=Ms,Xd=Pa.toUnsigned,Ns=a.getUint64,Bs=function(c){var m={version:c[0],flags:new Uint8Array(c.subarray(1,4))};return m.version===1?m.baseMediaDecodeTime=Ns(c.subarray(4)):m.baseMediaDecodeTime=Xd(c[4]<<24|c[5]<<16|c[6]<<8|c[7]),m},Yd=Bs,zp=function(c){return{isLeading:(c[0]&12)>>>2,dependsOn:c[0]&3,isDependedOn:(c[1]&192)>>>6,hasRedundancy:(c[1]&48)>>>4,paddingValue:(c[1]&14)>>>1,isNonSyncSample:c[1]&1,degradationPriority:c[2]<<8|c[3]}},Kp=zp,Qd=Kp,Xp=function(c){var m={version:c[0],flags:new Uint8Array(c.subarray(1,4)),samples:[]},y=new DataView(c.buffer,c.byteOffset,c.byteLength),T=m.flags[2]&1,b=m.flags[2]&4,w=m.flags[1]&1,F=m.flags[1]&2,R=m.flags[1]&4,B=m.flags[1]&8,j=y.getUint32(4),Y=8,ee;for(T&&(m.dataOffset=y.getInt32(Y),Y+=4),b&&j&&(ee={flags:Qd(c.subarray(Y,Y+4))},Y+=4,w&&(ee.duration=y.getUint32(Y),Y+=4),F&&(ee.size=y.getUint32(Y),Y+=4),B&&(m.version===1?ee.compositionTimeOffset=y.getInt32(Y):ee.compositionTimeOffset=y.getUint32(Y),Y+=4),m.samples.push(ee),j--);j--;)ee={},w&&(ee.duration=y.getUint32(Y),Y+=4),F&&(ee.size=y.getUint32(Y),Y+=4),R&&(ee.flags=Qd(c.subarray(Y,Y+4)),Y+=4),B&&(m.version===1?ee.compositionTimeOffset=y.getInt32(Y):ee.compositionTimeOffset=y.getUint32(Y),Y+=4),m.samples.push(ee);return m},Us=Xp,Yp=function(c){var m=new DataView(c.buffer,c.byteOffset,c.byteLength),y={version:c[0],flags:new Uint8Array(c.subarray(1,4)),trackId:m.getUint32(4)},T=y.flags[2]&1,b=y.flags[2]&2,w=y.flags[2]&8,F=y.flags[2]&16,R=y.flags[2]&32,B=y.flags[0]&65536,j=y.flags[0]&131072,Y;return Y=8,T&&(Y+=4,y.baseDataOffset=m.getUint32(12),Y+=4),b&&(y.sampleDescriptionIndex=m.getUint32(Y),Y+=4),w&&(y.defaultSampleDuration=m.getUint32(Y),Y+=4),F&&(y.defaultSampleSize=m.getUint32(Y),Y+=4),R&&(y.defaultSampleFlags=m.getUint32(Y)),B&&(y.durationIsEmpty=!0),!T&&j&&(y.baseDataOffsetIsMoof=!0),y},Jd=Yp,qi;typeof window<"u"?qi=window:typeof n<"u"?qi=n:typeof self<"u"?qi=self:qi={};var Ve=qi,nn=wd.discardEmulationPreventionBytes,Mt=vs.CaptionStream,jt=xu,Qp=Yd,Zd=Us,Jp=Jd,ec=Ve,Zp=function(c,m){for(var y=c,T=0;T<m.length;T++){var b=m[T];if(y<b.size)return b;y-=b.size}return null},em=function(c,m,y){var T=new DataView(c.buffer,c.byteOffset,c.byteLength),b={logs:[],seiNals:[]},w,F,R,B;for(F=0;F+4<c.length;F+=R)if(R=T.getUint32(F),F+=4,!(R<=0))switch(c[F]&31){case 6:var j=c.subarray(F+1,F+1+R),Y=Zp(F,m);if(w={nalUnitType:"sei_rbsp",size:R,data:j,escapedRBSP:nn(j),trackId:y},Y)w.pts=Y.pts,w.dts=Y.dts,B=Y;else if(B)w.pts=B.pts,w.dts=B.dts;else{b.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+F+" for trackId "+y+". See mux.js#223."});break}b.seiNals.push(w);break}return b},tm=function(c,m,y){var T=m,b=y.defaultSampleDuration||0,w=y.defaultSampleSize||0,F=y.trackId,R=[];return c.forEach(function(B){var j=Zd(B),Y=j.samples;Y.forEach(function(ee){ee.duration===void 0&&(ee.duration=b),ee.size===void 0&&(ee.size=w),ee.trackId=F,ee.dts=T,ee.compositionTimeOffset===void 0&&(ee.compositionTimeOffset=0),typeof T=="bigint"?(ee.pts=T+ec.BigInt(ee.compositionTimeOffset),T+=ec.BigInt(ee.duration)):(ee.pts=T+ee.compositionTimeOffset,T+=ee.duration)}),R=R.concat(Y)}),R},im=function(c,m){var y=jt(c,["moof","traf"]),T=jt(c,["mdat"]),b={},w=[];return T.forEach(function(F,R){var B=y[R];w.push({mdat:F,traf:B})}),w.forEach(function(F){var R=F.mdat,B=F.traf,j=jt(B,["tfhd"]),Y=Jp(j[0]),ee=Y.trackId,ge=jt(B,["tfdt"]),re=ge.length>0?Qp(ge[0]).baseMediaDecodeTime:0,be=jt(B,["trun"]),De,kt;m===ee&&be.length>0&&(De=tm(be,re,Y),kt=em(R,De,ee),b[ee]||(b[ee]={seiNals:[],logs:[]}),b[ee].seiNals=b[ee].seiNals.concat(kt.seiNals),b[ee].logs=b[ee].logs.concat(kt.logs))}),b},rm=function(c,m,y){var T;if(m===null)return null;T=im(c,m);var b=T[m]||{};return{seiNals:b.seiNals,logs:b.logs,timescale:y}},tc=function(){var c=!1,m,y,T,b,w,F;this.isInitialized=function(){return c},this.init=function(R){m=new Mt,c=!0,F=R?R.isPartial:!1,m.on("data",function(B){B.startTime=B.startPts/b,B.endTime=B.endPts/b,w.captions.push(B),w.captionStreams[B.stream]=!0}),m.on("log",function(B){w.logs.push(B)})},this.isNewInit=function(R,B){return R&&R.length===0||B&&typeof B=="object"&&Object.keys(B).length===0?!1:T!==R[0]||b!==B[T]},this.parse=function(R,B,j){var Y;if(this.isInitialized()){if(!B||!j)return null;if(this.isNewInit(B,j))T=B[0],b=j[T];else if(T===null||!b)return y.push(R),null}else return null;for(;y.length>0;){var ee=y.shift();this.parse(ee,B,j)}return Y=rm(R,T,b),Y&&Y.logs&&(w.logs=w.logs.concat(Y.logs)),Y===null||!Y.seiNals?w.logs.length?{logs:w.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Y.seiNals),this.flushStream(),w)},this.pushNals=function(R){if(!this.isInitialized()||!R||R.length===0)return null;R.forEach(function(B){m.push(B)})},this.flushStream=function(){if(!this.isInitialized())return null;F?m.partialFlush():m.flush()},this.clearParsedCaptions=function(){w.captions=[],w.captionStreams={},w.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;m.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){y=[],T=null,b=null,w?this.clearParsedCaptions():w={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},k=tc,f=Pa.toUnsigned,v=Pa.toHexString,g=xu,x=Tu,E=Jd,A=Us,P=Yd,N=a.getUint64,H,U,W,te,ce,pe,ue=Ve;H=function(c){var m={},y=g(c,["moov","trak"]);return y.reduce(function(T,b){var w,F,R,B,j;return w=g(b,["tkhd"])[0],!w||(F=w[0],R=F===0?12:20,B=f(w[R]<<24|w[R+1]<<16|w[R+2]<<8|w[R+3]),j=g(b,["mdia","mdhd"])[0],!j)?null:(F=j[0],R=F===0?12:20,T[B]=f(j[R]<<24|j[R+1]<<16|j[R+2]<<8|j[R+3]),T)},m)},U=function(c,m){var y;y=g(m,["moof","traf"]);var T=y.reduce(function(b,w){var F=g(w,["tfhd"])[0],R=f(F[4]<<24|F[5]<<16|F[6]<<8|F[7]),B=c[R]||9e4,j=g(w,["tfdt"])[0],Y=new DataView(j.buffer,j.byteOffset,j.byteLength),ee;j[0]===1?ee=N(j.subarray(4,12)):ee=Y.getUint32(4);let ge;return typeof ee=="bigint"?ge=ee/ue.BigInt(B):typeof ee=="number"&&!isNaN(ee)&&(ge=ee/B),ge<Number.MAX_SAFE_INTEGER&&(ge=Number(ge)),ge<b&&(b=ge),b},1/0);return typeof T=="bigint"||isFinite(T)?T:0},W=function(c,m){var y=g(m,["moof","traf"]),T=0,b=0,w;if(y&&y.length){var F=g(y[0],["tfhd"])[0],R=g(y[0],["trun"])[0],B=g(y[0],["tfdt"])[0];if(F){var j=E(F);w=j.trackId}if(B){var Y=P(B);T=Y.baseMediaDecodeTime}if(R){var ee=A(R);ee.samples&&ee.samples.length&&(b=ee.samples[0].compositionTimeOffset||0)}}var ge=c[w]||9e4;typeof T=="bigint"&&(b=ue.BigInt(b),ge=ue.BigInt(ge));var re=(T+b)/ge;return typeof re=="bigint"&&re<Number.MAX_SAFE_INTEGER&&(re=Number(re)),re},te=function(c){var m=g(c,["moov","trak"]),y=[];return m.forEach(function(T){var b=g(T,["mdia","hdlr"]),w=g(T,["tkhd"]);b.forEach(function(F,R){var B=x(F.subarray(8,12)),j=w[R],Y,ee,ge;B==="vide"&&(Y=new DataView(j.buffer,j.byteOffset,j.byteLength),ee=Y.getUint8(0),ge=ee===0?Y.getUint32(12):Y.getUint32(20),y.push(ge))})}),y},pe=function(c){var m=c[0],y=m===0?12:20;return f(c[y]<<24|c[y+1]<<16|c[y+2]<<8|c[y+3])},ce=function(c){var m=g(c,["moov","trak"]),y=[];return m.forEach(function(T){var b={},w=g(T,["tkhd"])[0],F,R;w&&(F=new DataView(w.buffer,w.byteOffset,w.byteLength),R=F.getUint8(0),b.id=R===0?F.getUint32(12):F.getUint32(20));var B=g(T,["mdia","hdlr"])[0];if(B){var j=x(B.subarray(8,12));j==="vide"?b.type="video":j==="soun"?b.type="audio":b.type=j}var Y=g(T,["mdia","minf","stbl","stsd"])[0];if(Y){var ee=Y.subarray(8);b.codec=x(ee.subarray(4,8));var ge=g(ee,[b.codec])[0],re,be;ge&&(/^[asm]vc[1-9]$/i.test(b.codec)?(re=ge.subarray(78),be=x(re.subarray(4,8)),be==="avcC"&&re.length>11?(b.codec+=".",b.codec+=v(re[9]),b.codec+=v(re[10]),b.codec+=v(re[11])):b.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(b.codec)?(re=ge.subarray(28),be=x(re.subarray(4,8)),be==="esds"&&re.length>20&&re[19]!==0?(b.codec+="."+v(re[19]),b.codec+="."+v(re[20]>>>2&63).replace(/^0/,"")):b.codec="mp4a.40.2"):b.codec=b.codec.toLowerCase())}var De=g(T,["mdia","mdhd"])[0];De&&(b.timescale=pe(De)),y.push(b)}),y};var Te={findBox:g,parseType:x,timescale:H,startTime:U,compositionStartTime:W,videoTrackIds:te,tracks:ce,getTimescaleFromMediaHeader:pe},ft=Ta,It=function(c){var m=c[1]&31;return m<<=8,m|=c[2],m},Gi=function(c){return!!(c[1]&64)},Wn=function(c){var m=0;return(c[3]&48)>>>4>1&&(m+=c[4]+1),m},ic=function(c,m){var y=It(c);return y===0?"pat":y===m?"pmt":m?"pes":null},rc=function(c){var m=Gi(c),y=4+Wn(c);return m&&(y+=c[y]+1),(c[y+10]&31)<<8|c[y+11]},nc=function(c){var m={},y=Gi(c),T=4+Wn(c);if(y&&(T+=c[T]+1),!!(c[T+5]&1)){var b,w,F;b=(c[T+1]&15)<<8|c[T+2],w=3+b-4,F=(c[T+10]&15)<<8|c[T+11];for(var R=12+F;R<w;){var B=T+R;m[(c[B+1]&31)<<8|c[B+2]]=c[B],R+=((c[B+3]&15)<<8|c[B+4])+5}return m}},bu=function(c,m){var y=It(c),T=m[y];switch(T){case ft.H264_STREAM_TYPE:return"video";case ft.ADTS_STREAM_TYPE:return"audio";case ft.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},ac=function(c){var m=Gi(c);if(!m)return null;var y=4+Wn(c);if(y>=c.byteLength)return null;var T=null,b;return b=c[y+7],b&192&&(T={},T.pts=(c[y+9]&14)<<27|(c[y+10]&255)<<20|(c[y+11]&254)<<12|(c[y+12]&255)<<5|(c[y+13]&254)>>>3,T.pts*=4,T.pts+=(c[y+13]&6)>>>1,T.dts=T.pts,b&64&&(T.dts=(c[y+14]&14)<<27|(c[y+15]&255)<<20|(c[y+16]&254)<<12|(c[y+17]&255)<<5|(c[y+18]&254)>>>3,T.dts*=4,T.dts+=(c[y+18]&6)>>>1)),T},ut=function(c){switch(c){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},sc=function(c){for(var m=4+Wn(c),y=c.subarray(m),T=0,b=0,w=!1,F;b<y.byteLength-3;b++)if(y[b+2]===1){T=b+5;break}for(;T<y.byteLength;)switch(y[T]){case 0:if(y[T-1]!==0){T+=2;break}else if(y[T-2]!==0){T++;break}b+3!==T-2&&(F=ut(y[b+3]&31),F==="slice_layer_without_partitioning_rbsp_idr"&&(w=!0));do T++;while(y[T]!==1&&T<y.length);b=T-2,T+=3;break;case 1:if(y[T-1]!==0||y[T-2]!==0){T+=3;break}F=ut(y[b+3]&31),F==="slice_layer_without_partitioning_rbsp_idr"&&(w=!0),b=T-2,T+=3;break;default:T+=3;break}return y=y.subarray(b),T-=b,b=0,y&&y.byteLength>3&&(F=ut(y[b+3]&31),F==="slice_layer_without_partitioning_rbsp_idr"&&(w=!0)),w},an={parseType:ic,parsePat:rc,parsePmt:nc,parsePayloadUnitStartIndicator:Gi,parsePesType:bu,parsePesTime:ac,videoPacketContainsKeyFrame:sc},Py=Ta,js=xa.handleRollover,Ge={};Ge.ts=an,Ge.aac=gu;var Fa=Ze.ONE_SECOND_IN_TS,Qt=188,xr=71,x1=function(c,m){for(var y=0,T=Qt,b,w;T<c.byteLength;){if(c[y]===xr&&c[T]===xr){switch(b=c.subarray(y,T),w=Ge.ts.parseType(b,m.pid),w){case"pat":m.pid=Ge.ts.parsePat(b);break;case"pmt":var F=Ge.ts.parsePmt(b);m.table=m.table||{},Object.keys(F).forEach(function(R){m.table[R]=F[R]});break}y+=Qt,T+=Qt;continue}y++,T++}},Fy=function(c,m,y){for(var T=0,b=Qt,w,F,R,B,j,Y=!1;b<=c.byteLength;){if(c[T]===xr&&(c[b]===xr||b===c.byteLength)){switch(w=c.subarray(T,b),F=Ge.ts.parseType(w,m.pid),F){case"pes":R=Ge.ts.parsePesType(w,m.table),B=Ge.ts.parsePayloadUnitStartIndicator(w),R==="audio"&&B&&(j=Ge.ts.parsePesTime(w),j&&(j.type="audio",y.audio.push(j),Y=!0));break}if(Y)break;T+=Qt,b+=Qt;continue}T++,b++}for(b=c.byteLength,T=b-Qt,Y=!1;T>=0;){if(c[T]===xr&&(c[b]===xr||b===c.byteLength)){switch(w=c.subarray(T,b),F=Ge.ts.parseType(w,m.pid),F){case"pes":R=Ge.ts.parsePesType(w,m.table),B=Ge.ts.parsePayloadUnitStartIndicator(w),R==="audio"&&B&&(j=Ge.ts.parsePesTime(w),j&&(j.type="audio",y.audio.push(j),Y=!0));break}if(Y)break;T-=Qt,b-=Qt;continue}T--,b--}},b1=function(c,m,y){for(var T=0,b=Qt,w,F,R,B,j,Y,ee,ge,re=!1,be={data:[],size:0};b<c.byteLength;){if(c[T]===xr&&c[b]===xr){switch(w=c.subarray(T,b),F=Ge.ts.parseType(w,m.pid),F){case"pes":if(R=Ge.ts.parsePesType(w,m.table),B=Ge.ts.parsePayloadUnitStartIndicator(w),R==="video"&&(B&&!re&&(j=Ge.ts.parsePesTime(w),j&&(j.type="video",y.video.push(j),re=!0)),!y.firstKeyFrame)){if(B&&be.size!==0){for(Y=new Uint8Array(be.size),ee=0;be.data.length;)ge=be.data.shift(),Y.set(ge,ee),ee+=ge.byteLength;if(Ge.ts.videoPacketContainsKeyFrame(Y)){var De=Ge.ts.parsePesTime(Y);De?(y.firstKeyFrame=De,y.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}be.size=0}be.data.push(w),be.size+=w.byteLength}break}if(re&&y.firstKeyFrame)break;T+=Qt,b+=Qt;continue}T++,b++}for(b=c.byteLength,T=b-Qt,re=!1;T>=0;){if(c[T]===xr&&c[b]===xr){switch(w=c.subarray(T,b),F=Ge.ts.parseType(w,m.pid),F){case"pes":R=Ge.ts.parsePesType(w,m.table),B=Ge.ts.parsePayloadUnitStartIndicator(w),R==="video"&&B&&(j=Ge.ts.parsePesTime(w),j&&(j.type="video",y.video.push(j),re=!0));break}if(re)break;T-=Qt,b-=Qt;continue}T--,b--}},S1=function(c,m){if(c.audio&&c.audio.length){var y=m;(typeof y>"u"||isNaN(y))&&(y=c.audio[0].dts),c.audio.forEach(function(w){w.dts=js(w.dts,y),w.pts=js(w.pts,y),w.dtsTime=w.dts/Fa,w.ptsTime=w.pts/Fa})}if(c.video&&c.video.length){var T=m;if((typeof T>"u"||isNaN(T))&&(T=c.video[0].dts),c.video.forEach(function(w){w.dts=js(w.dts,T),w.pts=js(w.pts,T),w.dtsTime=w.dts/Fa,w.ptsTime=w.pts/Fa}),c.firstKeyFrame){var b=c.firstKeyFrame;b.dts=js(b.dts,T),b.pts=js(b.pts,T),b.dtsTime=b.dts/Fa,b.ptsTime=b.pts/Fa}}},D1=function(c){for(var m=!1,y=0,T=null,b=null,w=0,F=0,R;c.length-F>=3;){var B=Ge.aac.parseType(c,F);switch(B){case"timed-metadata":if(c.length-F<10){m=!0;break}if(w=Ge.aac.parseId3TagSize(c,F),w>c.length){m=!0;break}b===null&&(R=c.subarray(F,F+w),b=Ge.aac.parseAacTimestamp(R)),F+=w;break;case"audio":if(c.length-F<7){m=!0;break}if(w=Ge.aac.parseAdtsSize(c,F),w>c.length){m=!0;break}T===null&&(R=c.subarray(F,F+w),T=Ge.aac.parseSampleRate(R)),y++,F+=w;break;default:F++;break}if(m)return null}if(T===null||b===null)return null;var j=Fa/T,Y={audio:[{type:"audio",dts:b,pts:b},{type:"audio",dts:b+y*1024*j,pts:b+y*1024*j}]};return Y},E1=function(c){var m={pid:null,table:null},y={};x1(c,m);for(var T in m.table)if(m.table.hasOwnProperty(T)){var b=m.table[T];switch(b){case Py.H264_STREAM_TYPE:y.video=[],b1(c,m,y),y.video.length===0&&delete y.video;break;case Py.ADTS_STREAM_TYPE:y.audio=[],Fy(c,m,y),y.audio.length===0&&delete y.audio;break}}return y},C1=function(c,m){var y=Ge.aac.isLikelyAacData(c),T;return y?T=D1(c):T=E1(c),!T||!T.audio&&!T.video?null:(S1(T,m),T)},w1={inspect:C1,parseAudioPes_:Fy};let A1=function(c,m){m.on("data",function(y){let T=y.initSegment;y.initSegment={data:T.buffer,byteOffset:T.byteOffset,byteLength:T.byteLength};let b=y.data;y.data=b.buffer,c.postMessage({action:"data",segment:y,byteOffset:b.byteOffset,byteLength:b.byteLength},[y.data])}),m.on("done",function(y){c.postMessage({action:"done"})}),m.on("gopInfo",function(y){c.postMessage({action:"gopInfo",gopInfo:y})}),m.on("videoSegmentTimingInfo",function(y){let T={start:{decode:Ze.videoTsToSeconds(y.start.dts),presentation:Ze.videoTsToSeconds(y.start.pts)},end:{decode:Ze.videoTsToSeconds(y.end.dts),presentation:Ze.videoTsToSeconds(y.end.pts)},baseMediaDecodeTime:Ze.videoTsToSeconds(y.baseMediaDecodeTime)};y.prependedContentDuration&&(T.prependedContentDuration=Ze.videoTsToSeconds(y.prependedContentDuration)),c.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:T})}),m.on("audioSegmentTimingInfo",function(y){let T={start:{decode:Ze.videoTsToSeconds(y.start.dts),presentation:Ze.videoTsToSeconds(y.start.pts)},end:{decode:Ze.videoTsToSeconds(y.end.dts),presentation:Ze.videoTsToSeconds(y.end.pts)},baseMediaDecodeTime:Ze.videoTsToSeconds(y.baseMediaDecodeTime)};y.prependedContentDuration&&(T.prependedContentDuration=Ze.videoTsToSeconds(y.prependedContentDuration)),c.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:T})}),m.on("id3Frame",function(y){c.postMessage({action:"id3Frame",id3Frame:y})}),m.on("caption",function(y){c.postMessage({action:"caption",caption:y})}),m.on("trackinfo",function(y){c.postMessage({action:"trackinfo",trackInfo:y})}),m.on("audioTimingInfo",function(y){c.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ze.videoTsToSeconds(y.start),end:Ze.videoTsToSeconds(y.end)}})}),m.on("videoTimingInfo",function(y){c.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ze.videoTsToSeconds(y.start),end:Ze.videoTsToSeconds(y.end)}})}),m.on("log",function(y){c.postMessage({action:"log",log:y})})};class Oy{constructor(m,y){this.options=y||{},this.self=m,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Rs.Transmuxer(this.options),A1(this.self,this.transmuxer)}pushMp4Captions(m){this.captionParser||(this.captionParser=new k,this.captionParser.init());let y=new Uint8Array(m.data,m.byteOffset,m.byteLength),T=this.captionParser.parse(y,m.trackIds,m.timescales);this.self.postMessage({action:"mp4Captions",captions:T&&T.captions||[],logs:T&&T.logs||[],data:y.buffer},[y.buffer])}probeMp4StartTime({timescales:m,data:y}){let T=Te.startTime(m,y);this.self.postMessage({action:"probeMp4StartTime",startTime:T,data:y},[y.buffer])}probeMp4Tracks({data:m}){let y=Te.tracks(m);this.self.postMessage({action:"probeMp4Tracks",tracks:y,data:m},[m.buffer])}probeTs({data:m,baseStartTime:y}){let T=typeof y=="number"&&!isNaN(y)?y*Ze.ONE_SECOND_IN_TS:void 0,b=w1.inspect(m,T),w=null;b&&(w={hasVideo:b.video&&b.video.length===2||!1,hasAudio:b.audio&&b.audio.length===2||!1},w.hasVideo&&(w.videoStart=b.video[0].ptsTime),w.hasAudio&&(w.audioStart=b.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:w,data:m},[m.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(m){let y=new Uint8Array(m.data,m.byteOffset,m.byteLength);this.transmuxer.push(y)}reset(){this.transmuxer.reset()}setTimestampOffset(m){let y=m.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ze.secondsToVideoTs(y)))}setAudioAppendStart(m){this.transmuxer.setAudioAppendStart(Math.ceil(Ze.secondsToVideoTs(m.appendStart)))}setRemux(m){this.transmuxer.setRemux(m.remux)}flush(m){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(m){this.transmuxer.alignGopsWith(m.gopsToAlignWith.slice())}}self.onmessage=function(c){if(c.data.action==="init"&&c.data.options){this.messageHandlers=new Oy(self,c.data.options);return}this.messageHandlers||(this.messageHandlers=new Oy(self)),c.data&&c.data.action&&c.data.action!=="init"&&this.messageHandlers[c.data.action]&&this.messageHandlers[c.data.action](c.data)}})),dR=SE(lR),cR=(n,e,t)=>{let{type:i,initSegment:r,captions:a,captionStreams:s,metadata:o,videoFrameDtsTime:u,videoFramePtsTime:l}=n.data.segment;e.buffer.push({captions:a,captionStreams:s,metadata:o});let d=n.data.segment.boxes||{data:n.data.segment.data},h={type:i,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};typeof u<"u"&&(h.videoFrameDtsTime=u),typeof l<"u"&&(h.videoFramePtsTime=l),t(h)},hR=({transmuxedData:n,callback:e})=>{n.buffer=[],e(n)},fR=(n,e)=>{e.gopInfo=n.data.gopInfo},CE=n=>{let{transmuxer:e,bytes:t,audioAppendStart:i,gopsToAlignWith:r,remux:a,onData:s,onTrackInfo:o,onAudioTimingInfo:u,onVideoTimingInfo:l,onVideoSegmentTimingInfo:d,onAudioSegmentTimingInfo:h,onId3:p,onCaptions:_,onDone:D,onEndedTimeline:C,onTransmuxerLog:S,isEndOfTimeline:I}=n,L={buffer:[]},G=I,M=O=>{e.currentTransmux===n&&(O.data.action==="data"&&cR(O,L,s),O.data.action==="trackinfo"&&o(O.data.trackInfo),O.data.action==="gopInfo"&&fR(O,L),O.data.action==="audioTimingInfo"&&u(O.data.audioTimingInfo),O.data.action==="videoTimingInfo"&&l(O.data.videoTimingInfo),O.data.action==="videoSegmentTimingInfo"&&d(O.data.videoSegmentTimingInfo),O.data.action==="audioSegmentTimingInfo"&&h(O.data.audioSegmentTimingInfo),O.data.action==="id3Frame"&&p([O.data.id3Frame],O.data.id3Frame.dispatchType),O.data.action==="caption"&&_(O.data.caption),O.data.action==="endedtimeline"&&(G=!1,C()),O.data.action==="log"&&S(O.data.log),O.data.type==="transmuxed"&&(G||(e.onmessage=null,hR({transmuxedData:L,callback:D}),wE(e))))};if(e.onmessage=M,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),typeof a<"u"&&e.postMessage({action:"setRemux",remux:a}),t.byteLength){let O=t instanceof ArrayBuffer?t:t.buffer,K=t instanceof ArrayBuffer?0:t.byteOffset;e.postMessage({action:"push",data:O,byteOffset:K,byteLength:t.byteLength},[O])}I&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},wE=n=>{n.currentTransmux=null,n.transmuxQueue.length&&(n.currentTransmux=n.transmuxQueue.shift(),typeof n.currentTransmux=="function"?n.currentTransmux():CE(n.currentTransmux))},KS=(n,e)=>{n.postMessage({action:e}),wE(n)},AE=(n,e)=>{if(!e.currentTransmux){e.currentTransmux=n,KS(e,n);return}e.transmuxQueue.push(KS.bind(null,e,n))},pR=n=>{AE("reset",n)},mR=n=>{AE("endTimeline",n)},kE=n=>{if(!n.transmuxer.currentTransmux){n.transmuxer.currentTransmux=n,CE(n);return}n.transmuxer.transmuxQueue.push(n)},gR=n=>{let e=new dR;e.currentTransmux=null,e.transmuxQueue=[];let t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:n}),e},u0={reset:pR,endTimeline:mR,transmux:kE,createTransmuxer:gR},Wh=function(n){let e=n.transmuxer,t=n.endAction||n.action,i=n.callback,r=vt({},n,{endAction:null,transmuxer:null,callback:null}),a=s=>{s.data.action===t&&(e.removeEventListener("message",a),s.data.data&&(s.data.data=new Uint8Array(s.data.data,n.byteOffset||0,n.byteLength||s.data.data.byteLength),n.data&&(n.data=s.data.data)),i(s.data))};if(e.addEventListener("message",a),n.data){let s=n.data instanceof ArrayBuffer;r.byteOffset=s?0:n.data.byteOffset,r.byteLength=n.data.byteLength;let o=[s?n.data:n.data.buffer];e.postMessage(r,o)}else e.postMessage(r)},Ir={FAILURE:2,TIMEOUT:-101,ABORTED:-102},W0=n=>{n.forEach(e=>{e.abort()})},vR=n=>({bandwidth:n.bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0}),_R=n=>{let e=n.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=n.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},mv=(n,e)=>e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Ir.TIMEOUT,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Ir.ABORTED,xhr:e}:n?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Ir.FAILURE,xhr:e}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Ir.FAILURE,xhr:e}:null,XS=(n,e,t)=>(i,r)=>{let a=r.response,s=mv(i,r);if(s)return t(s,n);if(a.byteLength!==16)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Ir.FAILURE,xhr:r},n);let o=new DataView(a),u=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]);for(let l=0;l<e.length;l++)e[l].bytes=u;return t(null,n)},IE=(n,e)=>{let t=eh(n.map.bytes);if(t!=="mp4"){let i=n.map.resolvedUri||n.map.uri;return e({internal:!0,message:`Found unsupported ${t||"unknown"} container for initialization segment at URL: ${i}`,code:Ir.FAILURE})}Wh({action:"probeMp4Tracks",data:n.map.bytes,transmuxer:n.transmuxer,callback:({tracks:i,data:r})=>(n.map.bytes=r,i.forEach(function(a){n.map.tracks=n.map.tracks||{},!n.map.tracks[a.type]&&(n.map.tracks[a.type]=a,typeof a.id=="number"&&a.timescale&&(n.map.timescales=n.map.timescales||{},n.map.timescales[a.id]=a.timescale))}),e(null))})},yR=({segment:n,finishProcessingFn:e})=>(t,i)=>{let r=mv(t,i);if(r)return e(r,n);let a=new Uint8Array(i.response);if(n.map.key)return n.map.encryptedBytes=a,e(null,n);n.map.bytes=a,IE(n,function(s){if(s)return s.xhr=i,s.status=i.status,e(s,n);e(null,n)})},TR=({segment:n,finishProcessingFn:e,responseType:t})=>(i,r)=>{let a=mv(i,r);if(a)return e(a,n);let s=t==="arraybuffer"||!r.responseText?r.response:oR(r.responseText.substring(n.lastReachedChar||0));return n.stats=vR(r),n.key?n.encryptedBytes=new Uint8Array(s):n.bytes=new Uint8Array(s),e(null,n)},xR=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:h,onTransmuxerLog:p})=>{let _=n.map&&n.map.tracks||{},D=Boolean(_.audio&&_.video),C=i.bind(null,n,"audio","start"),S=i.bind(null,n,"audio","end"),I=i.bind(null,n,"video","start"),L=i.bind(null,n,"video","end"),G=()=>kE({bytes:e,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:D,onData:M=>{M.type=M.type==="combined"?"video":M.type,d(n,M)},onTrackInfo:M=>{t&&(D&&(M.isMuxed=!0),t(n,M))},onAudioTimingInfo:M=>{C&&typeof M.start<"u"&&(C(M.start),C=null),S&&typeof M.end<"u"&&S(M.end)},onVideoTimingInfo:M=>{I&&typeof M.start<"u"&&(I(M.start),I=null),L&&typeof M.end<"u"&&L(M.end)},onVideoSegmentTimingInfo:M=>{r(M)},onAudioSegmentTimingInfo:M=>{a(M)},onId3:(M,O)=>{s(n,M,O)},onCaptions:M=>{o(n,[M])},isEndOfTimeline:u,onEndedTimeline:()=>{l()},onTransmuxerLog:p,onDone:M=>{!h||(M.type=M.type==="combined"?"video":M.type,h(null,n,M))}});Wh({action:"probeTs",transmuxer:n.transmuxer,data:e,baseStartTime:n.baseStartTime,callback:M=>{n.bytes=e=M.data;let O=M.result;O&&(t(n,{hasAudio:O.hasAudio,hasVideo:O.hasVideo,isMuxed:D}),t=null,O.hasAudio&&!D&&C(O.audioStart),O.hasVideo&&I(O.videoStart),C=null,I=null),G()}})},PE=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:h,onTransmuxerLog:p})=>{let _=new Uint8Array(e);if(pS(_)){n.isFmp4=!0;let{tracks:D}=n.map,C={isFmp4:!0,hasVideo:!!D.video,hasAudio:!!D.audio};D.audio&&D.audio.codec&&D.audio.codec!=="enca"&&(C.audioCodec=D.audio.codec),D.video&&D.video.codec&&D.video.codec!=="encv"&&(C.videoCodec=D.video.codec),D.video&&D.audio&&(C.isMuxed=!0),t(n,C);let S=I=>{d(n,{data:_,type:C.hasAudio&&!C.isMuxed?"audio":"video"}),I&&I.length&&o(n,I),h(null,n,{})};Wh({action:"probeMp4StartTime",timescales:n.map.timescales,data:_,transmuxer:n.transmuxer,callback:({data:I,startTime:L})=>{if(e=I.buffer,n.bytes=_=I,C.hasAudio&&!C.isMuxed&&i(n,"audio","start",L),C.hasVideo&&i(n,"video","start",L),!D.video||!I.byteLength||!n.transmuxer){S();return}Wh({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:_,timescales:n.map.timescales,trackIds:[D.video.id],callback:G=>{e=G.data.buffer,n.bytes=_=G.data,G.logs.forEach(function(M){p(it(M,{stream:"mp4CaptionParser"}))}),S(G.captions)}})}});return}if(!n.transmuxer){h(null,n,{});return}if(typeof n.container>"u"&&(n.container=eh(_)),n.container!=="ts"&&n.container!=="aac"){t(n,{hasAudio:!1,hasVideo:!1}),h(null,n,{});return}xR({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:h,onTransmuxerLog:p})},FE=function({id:n,key:e,encryptedBytes:t,decryptionWorker:i},r){let a=o=>{if(o.data.source===n){i.removeEventListener("message",a);let u=o.data.decrypted;r(new Uint8Array(u.bytes,u.byteOffset,u.byteLength))}};i.addEventListener("message",a);let s;e.bytes.slice?s=e.bytes.slice():s=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(vE({source:n,encrypted:t,key:s,iv:e.iv}),[t.buffer,s.buffer])},bR=({decryptionWorker:n,segment:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:h,onTransmuxerLog:p})=>{FE({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:n},_=>{e.bytes=_,PE({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:h,onTransmuxerLog:p})})},SR=({activeXhrs:n,decryptionWorker:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:h,onTransmuxerLog:p})=>{let _=0,D=!1;return(C,S)=>{if(!D){if(C)return D=!0,W0(n),h(C,S);if(_+=1,_===n.length){let I=function(){if(S.encryptedBytes)return bR({decryptionWorker:e,segment:S,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:h,onTransmuxerLog:p});PE({segment:S,bytes:S.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d,doneFn:h,onTransmuxerLog:p})};if(S.endOfAllRequests=Date.now(),S.map&&S.map.encryptedBytes&&!S.map.bytes)return FE({decryptionWorker:e,id:S.requestId+"-init",encryptedBytes:S.map.encryptedBytes,key:S.map.key},L=>{S.map.bytes=L,IE(S,G=>{if(G)return W0(n),h(G,S);I()})});I()}}}},DR=({loadendState:n,abortFn:e})=>t=>{t.target.aborted&&e&&!n.calledAbortFn&&(e(),n.calledAbortFn=!0)},ER=({segment:n,progressFn:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:o,isEndOfTimeline:u,endedTimelineFn:l,dataFn:d})=>h=>{if(!h.target.aborted)return n.stats=it(n.stats,_R(h)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),e(h,n)},CR=({xhr:n,xhrOptions:e,decryptionWorker:t,segment:i,abortFn:r,progressFn:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:l,id3Fn:d,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:_,dataFn:D,doneFn:C,onTransmuxerLog:S})=>{let I=[],L=SR({activeXhrs:I,decryptionWorker:t,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:l,id3Fn:d,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:_,dataFn:D,doneFn:C,onTransmuxerLog:S});if(i.key&&!i.key.bytes){let z=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&z.push(i.map.key);let V=it(e,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),J=XS(i,z,L),Q=n(V,J);I.push(Q)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){let oe=it(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),ne=XS(i,[i.map.key],L),ae=n(oe,ne);I.push(ae)}let V=it(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:V0(i.map)}),J=yR({segment:i,finishProcessingFn:L}),Q=n(V,J);I.push(Q)}let G=it(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:V0(i)}),M=TR({segment:i,finishProcessingFn:L,responseType:G.responseType}),O=n(G,M);O.addEventListener("progress",ER({segment:i,progressFn:a,trackInfoFn:s,timingInfoFn:o,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:l,id3Fn:d,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:_,dataFn:D})),I.push(O);let K={};return I.forEach(z=>{z.addEventListener("loadend",DR({loadendState:K,abortFn:r}))}),()=>W0(I)},wR=lr("CodecUtils"),AR=function(n){let e=n.attributes||{};if(e.CODECS)return nr(e.CODECS)},OE=(n,e)=>{let t=e.attributes||{};return n&&n.mediaGroups&&n.mediaGroups.AUDIO&&t.AUDIO&&n.mediaGroups.AUDIO[t.AUDIO]},kR=(n,e)=>{if(!OE(n,e))return!0;let t=e.attributes||{},i=n.mediaGroups.AUDIO[t.AUDIO];for(let r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1},qh=function(n){let e={};return n.forEach(({mediaType:t,type:i,details:r})=>{e[t]=e[t]||[],e[t].push(cg(`${i}${r}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){wR(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},YS=function(n){let e=0;return n.audio&&e++,n.video&&e++,e},fl=function(n,e){let t=e.attributes||{},i=qh(AR(e)||[]);if(OE(n,e)&&!i.audio&&!kR(n,e)){let r=qh(Ux(n,t.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},ah=lr("PlaylistSelector"),QS=function(n){if(!n||!n.playlist)return;let e=n.playlist;return JSON.stringify({id:e.id,bandwidth:n.bandwidth,width:n.width,height:n.height,codecs:e.attributes&&e.attributes.CODECS||""})},Gh=function(n,e){if(!n)return"";let t=q.default.getComputedStyle(n);return t?t[e]:""},_o=function(n,e){let t=n.slice();n.sort(function(i,r){let a=e(i,r);return a===0?t.indexOf(i)-t.indexOf(r):a})},gv=function(n,e){let t,i;return n.attributes.BANDWIDTH&&(t=n.attributes.BANDWIDTH),t=t||q.default.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||q.default.Number.MAX_VALUE,t-i},IR=function(n,e){let t,i;return n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(t=n.attributes.RESOLUTION.width),t=t||q.default.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||q.default.Number.MAX_VALUE,t===i&&n.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?n.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-i},LE=function(n,e,t,i,r,a){if(!n)return;let s={bandwidth:e,width:t,height:i,limitRenditionByPlayerDimensions:r},o=n.playlists;Si.isAudioOnly(n)&&(o=a.getAudioTrackPlaylists_(),s.audioOnly=!0);let u=o.map(O=>{let K,z=O.attributes&&O.attributes.RESOLUTION&&O.attributes.RESOLUTION.width,V=O.attributes&&O.attributes.RESOLUTION&&O.attributes.RESOLUTION.height;return K=O.attributes&&O.attributes.BANDWIDTH,K=K||q.default.Number.MAX_VALUE,{bandwidth:K,width:z,height:V,playlist:O}});_o(u,(O,K)=>O.bandwidth-K.bandwidth),u=u.filter(O=>!Si.isIncompatible(O.playlist));let l=u.filter(O=>Si.isEnabled(O.playlist));l.length||(l=u.filter(O=>!Si.isDisabled(O.playlist)));let d=l.filter(O=>O.bandwidth*Ft.BANDWIDTH_VARIANCE<e),h=d[d.length-1],p=d.filter(O=>O.bandwidth===h.bandwidth)[0];if(r===!1){let O=p||l[0]||u[0];if(O&&O.playlist){let K="sortedPlaylistReps";return p&&(K="bandwidthBestRep"),l[0]&&(K="enabledPlaylistReps"),ah(`choosing ${QS(O)} using ${K} with options`,s),O.playlist}return ah("could not choose a playlist with options",s),null}let _=d.filter(O=>O.width&&O.height);_o(_,(O,K)=>O.width-K.width);let D=_.filter(O=>O.width===t&&O.height===i);h=D[D.length-1];let C=D.filter(O=>O.bandwidth===h.bandwidth)[0],S,I,L;C||(S=_.filter(O=>O.width>t||O.height>i),I=S.filter(O=>O.width===S[0].width&&O.height===S[0].height),h=I[I.length-1],L=I.filter(O=>O.bandwidth===h.bandwidth)[0]);let G;if(a.leastPixelDiffSelector){let O=_.map(K=>(K.pixelDiff=Math.abs(K.width-t)+Math.abs(K.height-i),K));_o(O,(K,z)=>K.pixelDiff===z.pixelDiff?z.bandwidth-K.bandwidth:K.pixelDiff-z.pixelDiff),G=O[0]}let M=G||L||C||p||l[0]||u[0];if(M&&M.playlist){let O="sortedPlaylistReps";return G?O="leastPixelDiffRep":L?O="resolutionPlusOneRep":C?O="resolutionBestRep":p?O="bandwidthBestRep":l[0]&&(O="enabledPlaylistReps"),ah(`choosing ${QS(M)} using ${O} with options`,s),M.playlist}return ah("could not choose a playlist with options",s),null},JS=function(){let n=this.useDevicePixelRatio&&q.default.devicePixelRatio||1;return LE(this.playlists.main,this.systemBandwidth,parseInt(Gh(this.tech_.el(),"width"),10)*n,parseInt(Gh(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)},PR=function(n){let e=-1,t=-1;if(n<0||n>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&q.default.devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=n*this.systemBandwidth+(1-n)*e,t=this.systemBandwidth),LE(this.playlists.main,e,parseInt(Gh(this.tech_.el(),"width"),10)*i,parseInt(Gh(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},FR=function(n){let{main:e,currentTime:t,bandwidth:i,duration:r,segmentDuration:a,timeUntilRebuffer:s,currentTimeline:o,syncController:u}=n,l=e.playlists.filter(D=>!Si.isIncompatible(D)),d=l.filter(Si.isEnabled);d.length||(d=l.filter(D=>!Si.isDisabled(D)));let p=d.filter(Si.hasAttribute.bind(null,"BANDWIDTH")).map(D=>{let S=u.getSyncPoint(D,r,o,t)?1:2,L=Si.estimateSegmentRequestTime(a,i,D)*S-s;return{playlist:D,rebufferingImpact:L}}),_=p.filter(D=>D.rebufferingImpact<=0);return _o(_,(D,C)=>gv(C.playlist,D.playlist)),_.length?_[0]:(_o(p,(D,C)=>D.rebufferingImpact-C.rebufferingImpact),p[0]||null)},OR=function(){let n=this.playlists.main.playlists.filter(Si.isEnabled);return _o(n,(t,i)=>gv(t,i)),n.filter(t=>!!fl(this.playlists.main,t).video)[0]||null},LR=n=>{let e=0,t;return n.bytes&&(t=new Uint8Array(n.bytes),n.segments.forEach(i=>{t.set(i,e),e+=i.byteLength})),t},RR=function(n,e,t){if(!n[t]){e.trigger({type:"usage",name:"vhs-608"});let i=t;/^cc708_/.test(t)&&(i="SERVICE"+t.split("_")[1]);let r=e.textTracks().getTrackById(i);if(r)n[t]=r;else{let a=e.options_.vhs&&e.options_.vhs.captionServices||{},s=t,o=t,u=!1,l=a[i];l&&(s=l.label,o=l.language,u=l.default),n[t]=e.addRemoteTextTrack({kind:"captions",id:i,default:u,label:s,language:o},!1).track}}},MR=function({inbandTextTracks:n,captionArray:e,timestampOffset:t}){if(!e)return;let i=q.default.WebKitDataCue||q.default.VTTCue;e.forEach(r=>{let a=r.stream;n[a].addCue(new i(r.startTime+t,r.endTime+t,r.text))})},NR=function(n){Object.defineProperties(n.frame,{id:{get(){return Z.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key}},value:{get(){return Z.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data}},privateData:{get(){return Z.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data}}})},BR=({inbandTextTracks:n,metadataArray:e,timestampOffset:t,videoDuration:i})=>{if(!e)return;let r=q.default.WebKitDataCue||q.default.VTTCue,a=n.metadataTrack_;if(!a||(e.forEach(d=>{let h=d.cueTime+t;typeof h!="number"||q.default.isNaN(h)||h<0||!(h<1/0)||d.frames.forEach(p=>{let _=new r(h,h,p.value||p.url||p.data||"");_.frame=p,_.value=p,NR(_),a.addCue(_)})}),!a.cues||!a.cues.length))return;let s=a.cues,o=[];for(let d=0;d<s.length;d++)s[d]&&o.push(s[d]);let u=o.reduce((d,h)=>{let p=d[h.startTime]||[];return p.push(h),d[h.startTime]=p,d},{}),l=Object.keys(u).sort((d,h)=>Number(d)-Number(h));l.forEach((d,h)=>{let p=u[d],_=Number(l[h+1])||i;p.forEach(D=>{D.endTime=_})})},UR=(n,e,t)=>{n.metadataTrack_||(n.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,n.metadataTrack_.inBandMetadataTrackDispatchType=e)},ul=function(n,e,t){let i,r;if(!!t&&!!t.cues)for(i=t.cues.length;i--;)r=t.cues[i],r.startTime>=n&&r.endTime<=e&&t.removeCue(r)},jR=function(n){let e=n.cues;if(!!e)for(let t=0;t<e.length;t++){let i=[],r=0;for(let a=0;a<e.length;a++)e[t].startTime===e[a].startTime&&e[t].endTime===e[a].endTime&&e[t].text===e[a].text&&(r++,r>1&&i.push(e[a]));i.length&&i.forEach(a=>n.removeCue(a))}},HR=(n,e,t)=>{if(typeof e>"u"||e===null||!n.length)return[];let i=Math.ceil((e-t+3)*pl.ONE_SECOND_IN_TS),r;for(r=0;r<n.length&&!(n[r].pts>i);r++);return n.slice(r)},$R=(n,e,t)=>{if(!e.length)return n;if(t)return e.slice();let i=e[0].pts,r=0;for(r;r<n.length&&!(n[r].pts>=i);r++);return n.slice(0,r).concat(e)},VR=(n,e,t,i)=>{let r=Math.ceil((e-i)*pl.ONE_SECOND_IN_TS),a=Math.ceil((t-i)*pl.ONE_SECOND_IN_TS),s=n.slice(),o=n.length;for(;o--&&!(n[o].pts<=a););if(o===-1)return s;let u=o+1;for(;u--&&!(n[u].pts<=r););return u=Math.max(u,0),s.splice(u,o-u+1),s},WR=function(n,e){if(!n&&!e||!n&&e||n&&!e)return!1;if(n===e)return!0;let t=Object.keys(n).sort(),i=Object.keys(e).sort();if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++){let a=t[r];if(a!==i[r]||n[a]!==e[a])return!1}return!0},RE=22,qR=function(n,e,t){e=e||[];let i=[],r=0;for(let a=0;a<e.length;a++){let s=e[a];if(n===s.timeline&&(i.push(a),r+=s.duration,r>t))return a}return i.length===0?0:i[i.length-1]},sl=1,GR=500,ZS=n=>typeof n=="number"&&isFinite(n),sh=1/60,zR=(n,e,t)=>n!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,KR=(n,e,t)=>{let i=e-Ft.BACK_BUFFER_LENGTH;n.length&&(i=Math.max(i,n.start(0)));let r=e-t;return Math.min(r,i)},co=n=>{let{startOfSegment:e,duration:t,segment:i,part:r,playlist:{mediaSequence:a,id:s,segments:o=[]},mediaIndex:u,partIndex:l,timeline:d}=n,h=o.length-1,p="mediaIndex/partIndex increment";n.getMediaInfoForTime?p=`getMediaInfoForTime (${n.getMediaInfoForTime})`:n.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),n.independent&&(p+=` with independent ${n.independent}`);let _=typeof l=="number",D=n.segment.uri?"segment":"pre-segment",C=_?rE({preloadSegment:i})-1:0;return`${D} [${a+u}/${a+h}]`+(_?` part [${l}/${C}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(_?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${d}] selected by [${p}] playlist [${s}]`},eD=n=>`${n}TimingInfo`,XR=({segmentTimeline:n,currentTimeline:e,startOfSegment:t,buffered:i,overrideCheck:r})=>!r&&n===e?null:n<e?t:i.length?i.end(i.length-1):t,tD=({timelineChangeController:n,currentTimeline:e,segmentTimeline:t,loaderType:i,audioDisabled:r})=>{if(e===t)return!1;if(i==="audio"){let a=n.lastTimelineChange({type:"main"});return!a||a.to!==t}if(i==="main"&&r){let a=n.pendingTimelineChange({type:"audio"});return!(a&&a.to===t)}return!1},YR=n=>{let e=0;return["video","audio"].forEach(function(t){let i=n[`${t}TimingInfo`];if(!i)return;let{start:r,end:a}=i,s;typeof r=="bigint"||typeof a=="bigint"?s=q.default.BigInt(a)-q.default.BigInt(r):typeof r=="number"&&typeof a=="number"&&(s=a-r),typeof s<"u"&&s>e&&(e=s)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},iD=({segmentDuration:n,maxDuration:e})=>n?Math.round(n)>e+oa:!1,QR=(n,e)=>{if(e!=="hls")return null;let t=YR({audioTimingInfo:n.audioTimingInfo,videoTimingInfo:n.videoTimingInfo});if(!t)return null;let i=n.playlist.targetDuration,r=iD({segmentDuration:t,maxDuration:i*2}),a=iD({segmentDuration:t,maxDuration:i}),s=`Segment with index ${n.mediaIndex} from playlist ${n.playlist.id} has a duration of ${t} when the reported duration is ${n.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||a?{severity:r?"warn":"info",message:s}:null},Ml=class extends Z.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=Z.browser.IE_VERSION>=11,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=lr(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",()=>{this.hasEnoughInfoToLoad_()&&this.processLoadQueue_(),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()})}createTransmuxer_(){return u0.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&q.default.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,q.default.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&u0.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){let e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return qt();if(this.loaderType_==="main"){let{hasAudio:t,hasVideo:i,isMuxed:r}=e;if(i&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;let i=Vh(e),r=this.initSegments_[i];return t&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e}segmentKey(e,t=!1){if(!e)return null;let i=_E(e),r=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[i]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});let a={resolvedUri:(r||e).resolvedUri};return r&&(a.bytes=r.bytes),a}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e)return;let i=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let a=null;if(i&&(i.id?a=i.id:i.uri&&(a=i.uri)),this.logger_(`playlist update [${a} => ${e.id||e.uri}]`),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}let s=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${s}]`),this.mediaIndex!==null)if(this.mediaIndex-=s,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{let o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){let u=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=u}}r&&(r.mediaIndex-=s,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(q.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.resyncLoader()}resyncLoader(){this.transmuxer_&&u0.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,i=()=>{},r=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let a=1,s=()=>{a--,a===0&&i()};(r||!this.audioDisabled_)&&(a++,this.sourceUpdater_.removeAudio(e,t,s)),(r||this.loaderType_==="main")&&(this.gopBuffer_=VR(this.gopBuffer_,e,t,this.timeMapping_),a++,this.sourceUpdater_.removeVideo(e,t,s));for(let o in this.inbandTextTracks_)ul(e,t,this.inbandTextTracks_[o]);ul(e,t,this.segmentMetadataTrack_),s()}monitorBuffer_(){this.checkBufferTimeout_&&q.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.default.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&q.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=q.default.setTimeout(this.monitorBufferTick_.bind(this),GR)}fillBuffer_(){if(this.sourceUpdater_.updating())return;let e=this.chooseNextRequest_();!e||(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,i=this.partIndex){if(!t||!this.mediaSource_)return!1;let r=typeof e=="number"&&t.segments[e],a=e+1===t.segments.length,s=!r||!r.parts||i+1===r.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&a&&s}chooseNextRequest_(){let e=this.buffered_(),t=WS(e)||0,i=dv(e,this.currentTime_()),r=!this.hasPlayed_()&&i>=1,a=i>=this.goalBufferLength_(),s=this.playlist_.segments;if(!s.length||r||a)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());let o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=qR(this.currentTimeline_,s,t);else if(this.mediaIndex!==null){let h=s[this.mediaIndex],p=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=h.end?h.end:t,h.parts&&h.parts[p+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=p+1):o.mediaIndex=this.mediaIndex+1}else{let{segmentIndex:h,startTime:p,partIndex:_}=Si.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${t}`:`currentTime ${this.currentTime_()}`,o.mediaIndex=h,o.startOfSegment=p,o.partIndex=_}let u=s[o.mediaIndex],l=u&&typeof o.partIndex=="number"&&u.parts&&u.parts[o.partIndex];if(!u||typeof o.partIndex=="number"&&!l)return null;if(typeof o.partIndex!="number"&&u.parts&&(o.partIndex=0,l=u.parts[0]),!i&&l&&!l.independent)if(o.partIndex===0){let h=s[o.mediaIndex-1],p=h.parts&&h.parts.length&&h.parts[h.parts.length-1];p&&p.independent&&(o.mediaIndex-=1,o.partIndex=h.parts.length-1,o.independent="previous segment")}else u.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");let d=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=s.length-1&&d&&!this.seeking_()?null:this.generateSegmentInfo_(o)}generateSegmentInfo_(e){let{independent:t,playlist:i,mediaIndex:r,startOfSegment:a,isSyncRequest:s,partIndex:o,forceTimestampOffset:u,getMediaInfoForTime:l}=e,d=i.segments[r],h=typeof o=="number"&&d.parts[o],p={requestId:"segment-loader-"+Math.random(),uri:h&&h.resolvedUri||d.resolvedUri,mediaIndex:r,partIndex:h?o:null,isSyncRequest:s,startOfSegment:a,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:d.timeline,duration:h&&h.duration||d.duration,segment:d,part:h,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},_=typeof u<"u"?u:this.isPendingTimestampOffset_;p.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:d.timeline,currentTimeline:this.currentTimeline_,startOfSegment:a,buffered:this.buffered_(),overrideCheck:_});let D=WS(this.sourceUpdater_.audioBuffered());return typeof D=="number"&&(p.audioAppendStart=D-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(p.gopsToAlignWith=HR(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),p}timestampOffsetForSegment_(e){return XR(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;let t=this.currentTime_(),i=e.bandwidth,r=this.pendingSegment_.duration,a=Si.estimateSegmentRequestTime(r,i,this.playlist_,e.bytesReceived),s=S2(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(a<=s)return;let o=FR({main:this.vhs_.playlists.main,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;let l=a-s-o.rebufferingImpact,d=.5;s<=oa&&(d=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||l<d)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*Ft.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${co(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},WR(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))}handleTimingInfo_(e,t,i,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;let a=this.pendingSegment_,s=eD(t);a[s]=a[s]||{},a[s][i]=r,this.logger_(`timinginfo: ${t} - ${i} - ${r}`),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}let r=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),a={};t.forEach(s=>{a[s.stream]=a[s.stream]||{startTime:1/0,captions:[],endTime:0};let o=a[s.stream];o.startTime=Math.min(o.startTime,s.startTime+r),o.endTime=Math.max(o.endTime,s.endTime+r),o.captions.push(s)}),Object.keys(a).forEach(s=>{let{startTime:o,endTime:u,captions:l}=a[s],d=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${u} for ${s}`),RR(d,this.vhs_.tech_,s),ul(o,u,d[s]),MR({captionArray:l,inbandTextTracks:d,timestampOffset:r})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i));return}let a=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();UR(this.inbandTextTracks_,i,this.vhs_.tech_),BR({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:a,videoDuration:this.duration_()})}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){let e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){let e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;let e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!tD({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;let e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;let{hasAudio:i,hasVideo:r,isMuxed:a}=t;return!(r&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!a&&!e.audioTimingInfo||tD({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,t));return}let i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[eD(t.type)].start;else{let r=this.getCurrentMediaInfo_(),a=this.loaderType_==="main"&&r&&r.hasVideo,s;a&&(s=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:s,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});let r=this.chooseNextRequest_();if(r.mediaIndex!==i.mediaIndex||r.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:i,playlist:r}){if(i){let a=Vh(i);if(this.activeInitSegmentId_===a)return null;t=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=a}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i},r){let a=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+za(a).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+za(s).join(", "));let o=a.length?a.start(0):0,u=a.length?a.end(a.length-1):0,l=s.length?s.start(0):0,d=s.length?s.end(s.length-1):0;if(u-o<=sl&&d-l<=sl){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${za(a).join(", ")}, video buffer: ${za(s).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:i}));let p=this.currentTime_()-sl;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${p}`),this.remove(0,p,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${sl}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=q.default.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},sl*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:i},r){if(!!r){if(r.code===RE){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",r),this.error(`${t} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:i,data:r,bytes:a}){if(!a){let s=[r],o=r.byteLength;i&&(s.unshift(i),o+=i.byteLength),a=LR({bytes:o,segments:s})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:a},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:a}))}handleSegmentTimingInfo_(e,t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;let r=this.pendingSegment_.segment,a=`${e}TimingInfo`;r[a]||(r[a]={}),r[a].transmuxerPrependedSeconds=i.prependedContentDuration||0,r[a].transmuxedPresentationStart=i.start.presentation,r[a].transmuxedDecodeStart=i.start.decode,r[a].transmuxedPresentationEnd=i.end.presentation,r[a].transmuxedDecodeEnd=i.end.decode,r[a].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,t){let{type:i,data:r}=t;if(!r||!r.byteLength||i==="audio"&&this.audioDisabled_)return;let a=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:a,data:r})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(()=>{let t=vt({},e,{forceTimestampOffset:!0});vt(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));let t=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=this.mediaIndex!==null,a=e.timeline!==this.currentTimeline_&&e.timeline>0,s=i||r&&a;this.logger_(`Requesting ${co(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=CR({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:u,stream:l})=>{this.logger_(`${co(e)} logged from transmuxer stream ${l} as a ${u}: ${o}`)}})}trimBackBuffer_(e){let t=KR(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){let t=e.segment,i=e.part,r={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},a=e.playlist.segments[e.mediaIndex-1];if(a&&a.timeline===t.timeline&&(a.videoTimingInfo?r.baseStartTime=a.videoTimingInfo.transmuxedDecodeEnd:a.audioTimingInfo&&(r.baseStartTime=a.audioTimingInfo.transmuxedDecodeEnd)),t.key){let s=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key=this.segmentKey(t.key),r.key.iv=s}return t.map&&(r.map=this.initSegmentForMap(t.map)),r}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<sh){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${sh}`);return}this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Ir.ABORTED)return;if(this.pause(),e.code===Ir.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}let r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=$R(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}setTimeMapping_(e){let t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:i,firstVideoFrameTimeForData:r,currentVideoTimestampOffset:a,useVideoTimingInfo:s,videoTimingInfo:o,audioTimingInfo:u}){if(typeof e<"u")return e;if(!s)return u.start;let l=t.segments[i-1];return i===0||!l||typeof l.start>"u"||l.end!==r+a?r:o.start}waitForAppendsToComplete_(e){let t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}let{hasAudio:i,hasVideo:r,isMuxed:a}=t,s=this.loaderType_==="main"&&r,o=!this.audioDisabled_&&i&&!a;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}s&&e.waitingOnAppends++,o&&e.waitingOnAppends++,s&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){let t=zR(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};let t=this.getMediaInfo_(),r=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;!r||(e.timingInfo.end=typeof r.end=="number"?r.end:r.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}let e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});let t=QR(e,this.sourceType_);if(t&&(t.severity==="warn"?Z.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${co(e)}`);return}this.logger_(`Appended ${co(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");let i=e.segment,r=e.part,a=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,s=r&&r.end&&this.currentTime_()-r.end>e.playlist.partTargetDuration*3;if(a||s){this.logger_(`bad ${a?"segment":"part"} ${co(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<sh){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${sh}`);return}let t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;let t=e.segment,i=t.start,r=t.end;if(!ZS(i)||!ZS(r))return;ul(i,r,this.segmentMetadataTrack_);let a=q.default.WebKitDataCue||q.default.VTTCue,s={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:r},o=JSON.stringify(s),u=new a(i,r,o);u.value=s,this.segmentMetadataTrack_.addCue(u)}};function yn(){}var ME=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},JR=["video","audio"],q0=(n,e)=>{let t=e[`${n}Buffer`];return t&&t.updating||e.queuePending[n]},ZR=(n,e)=>{for(let t=0;t<e.length;t++){let i=e[t];if(i.type==="mediaSource")return null;if(i.type===n)return t}return null},yo=(n,e)=>{if(e.queue.length===0)return;let t=0,i=e.queue[t];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),yo("audio",e),yo("video",e));return}if(n!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||q0(n,e))){if(i.type!==n){if(t=ZR(n,e.queue),t===null)return;i=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[n]=i,i.action(n,e),!i.doneFn){e.queuePending[n]=null,yo(n,e);return}}},NE=(n,e)=>{let t=e[`${n}Buffer`],i=ME(n);!t||(t.removeEventListener("updateend",e[`on${i}UpdateEnd_`]),t.removeEventListener("error",e[`on${i}Error_`]),e.codecs[n]=null,e[`${n}Buffer`]=null)},wr=(n,e)=>n&&e&&Array.prototype.indexOf.call(n.sourceBuffers,e)!==-1,Fi={appendBuffer:(n,e,t)=>(i,r)=>{let a=r[`${i}Buffer`];if(!!wr(r.mediaSource,a)){r.logger_(`Appending segment ${e.mediaIndex}'s ${n.length} bytes to ${i}Buffer`);try{a.appendBuffer(n)}catch(s){r.logger_(`Error with code ${s.code} `+(s.code===RE?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${i}Buffer`),r.queuePending[i]=null,t(s)}}},remove:(n,e)=>(t,i)=>{let r=i[`${t}Buffer`];if(!!wr(i.mediaSource,r)){i.logger_(`Removing ${n} to ${e} from ${t}Buffer`);try{r.remove(n,e)}catch{i.logger_(`Remove ${n} to ${e} from ${t}Buffer failed`)}}},timestampOffset:n=>(e,t)=>{let i=t[`${e}Buffer`];!wr(t.mediaSource,i)||(t.logger_(`Setting ${e}timestampOffset to ${n}`),i.timestampOffset=n)},callback:n=>(e,t)=>{n()},endOfStream:n=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${n||""})`);try{e.mediaSource.endOfStream(n)}catch(t){Z.log.warn("Failed to call media source endOfStream",t)}}},duration:n=>e=>{e.logger_(`Setting mediaSource duration to ${n}`);try{e.mediaSource.duration=n}catch(t){Z.log.warn("Failed to set media source duration",t)}},abort:()=>(n,e)=>{if(e.mediaSource.readyState!=="open")return;let t=e[`${n}Buffer`];if(!!wr(e.mediaSource,t)){e.logger_(`calling abort on ${n}Buffer`);try{t.abort()}catch(i){Z.log.warn(`Failed to abort on ${n}Buffer`,i)}}},addSourceBuffer:(n,e)=>t=>{let i=ME(n),r=Ys(e);t.logger_(`Adding ${n}Buffer with codec ${e} to mediaSource`);let a=t.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",t[`on${i}UpdateEnd_`]),a.addEventListener("error",t[`on${i}Error_`]),t.codecs[n]=e,t[`${n}Buffer`]=a},removeSourceBuffer:n=>e=>{let t=e[`${n}Buffer`];if(NE(n,e),!!wr(e.mediaSource,t)){e.logger_(`Removing ${n}Buffer with codec ${e.codecs[n]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(i){Z.log.warn(`Failed to removeSourceBuffer ${n}Buffer`,i)}}},changeType:n=>(e,t)=>{let i=t[`${e}Buffer`],r=Ys(n);!wr(t.mediaSource,i)||t.codecs[e]!==n&&(t.logger_(`changing ${e}Buffer codec from ${t.codecs[e]} to ${n}`),i.changeType(r),t.codecs[e]=n)}},Oi=({type:n,sourceUpdater:e,action:t,doneFn:i,name:r})=>{e.queue.push({type:n,action:t,doneFn:i,name:r}),yo(n,e)},rD=(n,e)=>t=>{if(e.queuePending[n]){let i=e.queuePending[n].doneFn;e.queuePending[n]=null,i&&i(e[`${n}Error_`])}yo(n,e)},zh=class extends Z.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>yo("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=lr("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=rD("video",this),this.onAudioUpdateEnd_=rD("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){Oi({type:"mediaSource",sourceUpdater:this,action:Fi.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){Oi({type:e,sourceUpdater:this,action:Fi.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){Z.log.error("removeSourceBuffer is not supported!");return}Oi({type:"mediaSource",sourceUpdater:this,action:Fi.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!Z.browser.IE_VERSION&&!Z.browser.IS_FIREFOX&&q.default.MediaSource&&q.default.MediaSource.prototype&&typeof q.default.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return q.default.SourceBuffer&&q.default.SourceBuffer.prototype&&typeof q.default.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){Z.log.error("changeType is not supported!");return}Oi({type:e,sourceUpdater:this,action:Fi.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{let i=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,i);this.canChangeType()&&this.changeType(t,i)})}appendBuffer(e,t){let{segmentInfo:i,type:r,bytes:a}=e;if(this.processedAppend_=!0,r==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${a.length} until video append`);return}let s=t;if(Oi({type:r,sourceUpdater:this,action:Fi.appendBuffer(a,i||{mediaIndex:-1},s),doneFn:t,name:"appendBuffer"}),r==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;let o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(u=>{this.appendBuffer.apply(this,u)})}}audioBuffered(){return wr(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:qt()}videoBuffered(){return wr(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:qt()}buffered(){let e=wr(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=wr(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():b2(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=yn){Oi({type:"mediaSource",sourceUpdater:this,action:Fi.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=yn){typeof e!="string"&&(e=void 0),Oi({type:"mediaSource",sourceUpdater:this,action:Fi.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,i=yn){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}Oi({type:"audio",sourceUpdater:this,action:Fi.remove(e,t),doneFn:i,name:"remove"})}removeVideo(e,t,i=yn){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}Oi({type:"video",sourceUpdater:this,action:Fi.remove(e,t),doneFn:i,name:"remove"})}updating(){return!!(q0("audio",this)||q0("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Oi({type:"audio",sourceUpdater:this,action:Fi.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Oi({type:"video",sourceUpdater:this,action:Fi.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){!this.audioBuffer||Oi({type:"audio",sourceUpdater:this,action:Fi.callback(e),name:"callback"})}videoQueueCallback(e){!this.videoBuffer||Oi({type:"video",sourceUpdater:this,action:Fi.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),JR.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>NE(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}},nD=n=>decodeURIComponent(escape(String.fromCharCode.apply(null,n))),aD=new Uint8Array(`

`.split("").map(n=>n.charCodeAt(0))),G0=class extends Ml{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.loaderType_="subtitle",this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.shouldSaveSegmentTimingInfo_=!1}createTransmuxer_(){return null}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return qt();let e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return qt([[t,i]])}initSegmentForMap(e,t=!1){if(!e)return null;let i=Vh(e),r=this.initSegments_[i];if(t&&!r&&e.bytes){let a=aD.byteLength+e.bytes.byteLength,s=new Uint8Array(a);s.set(e.bytes),s.set(aD,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return r||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){ul(e,t,this.subtitlesTrack_)}fillBuffer_(){let e=this.chooseNextRequest_();if(!!e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){let t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Ir.TIMEOUT&&this.handleTimeout_(),e.code===Ir.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}let r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");let a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,typeof q.default.WebVTT!="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){let s,o=()=>{this.subtitlesTrack_.tech_.off("vttjsloaded",s),this.stopForError({message:"Error loading vtt.js"})};s=()=>{this.subtitlesTrack_.tech_.off("vttjserror",o),this.segmentRequestFinished_(e,t,i)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",s),this.subtitlesTrack_.tech_.one("vttjserror",o);return}a.requested=!0;try{this.parseVTTCues_(r)}catch(s){this.stopForError({message:s.message});return}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach(s=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new q.default.VTTCue(s.startTime,s.endTime,s.text):s)}),jR(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(){}updateTimingInfoEnd_(){}parseVTTCues_(e){let t,i=!1;typeof q.default.TextDecoder=="function"?t=new q.default.TextDecoder("utf8"):(t=q.default.WebVTT.StringDecoder(),i=!0);let r=new q.default.WebVTT.Parser(q.default,q.default.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=s=>{e.timestampmap=s},r.onparsingerror=s=>{Z.log.warn("Error encountered when parsing cues: "+s.message)},e.segment.map){let s=e.segment.map.bytes;i&&(s=nD(s)),r.parse(s)}let a=e.bytes;i&&(a=nD(a)),r.parse(a),r.flush()}updateTimeMapping_(e,t,i){let r=e.segment;if(!t)return;if(!e.cues.length){r.empty=!0;return}let a=e.timestampmap,s=a.MPEGTS/pl.ONE_SECOND_IN_TS-a.LOCAL+t.mapping;if(e.cues.forEach(o=>{o.startTime+=s,o.endTime+=s}),!i.syncInfo){let o=e.cues[0].startTime,u=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(o,u-r.duration)}}}},eM=function(n,e){let t=n.cues;for(let i=0;i<t.length;i++){let r=t[i];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null},tM=function(n,e,t=0){if(!n.segments)return;let i=t,r;for(let a=0;a<n.segments.length;a++){let s=n.segments[a];if(r||(r=eM(e,i+s.duration/2)),r){if("cueIn"in s){r.endTime=i,r.adEndTime=i,i+=s.duration,r=null;continue}if(i<r.endTime){i+=s.duration;continue}r.endTime+=s.duration}else if("cueOut"in s&&(r=new q.default.VTTCue(i,i+s.duration,s.cueOut),r.adStartTime=i,r.adEndTime=i+parseFloat(s.cueOut),e.addCue(r)),"cueOutCont"in s){let[o,u]=s.cueOutCont.split("/").map(parseFloat);r=new q.default.VTTCue(i,i+s.duration,""),r.adStartTime=i-o,r.adEndTime=r.adStartTime+u,e.addCue(r)}i+=s.duration}},iM=86400,sD=[{name:"VOD",run:(n,e,t,i,r)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"ProgramDateTime",run:(n,e,t,i,r)=>{if(!Object.keys(n.timelineToDatetimeMappings).length)return null;let a=null,s=null,o=B0(e);r=r||0;for(let u=0;u<o.length;u++){let l=e.endList||r===0?u:o.length-(u+1),d=o[l],h=d.segment,p=n.timelineToDatetimeMappings[h.timeline];if(!p||!h.dateTimeObject)continue;let D=h.dateTimeObject.getTime()/1e3+p;if(h.parts&&typeof d.partIndex=="number")for(let S=0;S<d.partIndex;S++)D+=h.parts[S].duration;let C=Math.abs(r-D);if(s!==null&&(C===0||s<C))break;s=C,a={time:D,segmentIndex:d.segmentIndex,partIndex:d.partIndex}}return a}},{name:"Segment",run:(n,e,t,i,r)=>{let a=null,s=null;r=r||0;let o=B0(e);for(let u=0;u<o.length;u++){let l=e.endList||r===0?u:o.length-(u+1),d=o[l],h=d.segment,p=d.part&&d.part.start||h&&h.start;if(h.timeline===i&&typeof p<"u"){let _=Math.abs(r-p);if(s!==null&&s<_)break;(!a||s===null||s>=_)&&(s=_,a={time:p,segmentIndex:d.segmentIndex,partIndex:d.partIndex})}}return a}},{name:"Discontinuity",run:(n,e,t,i,r)=>{let a=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length){let s=null;for(let o=0;o<e.discontinuityStarts.length;o++){let u=e.discontinuityStarts[o],l=e.discontinuitySequence+o+1,d=n.discontinuities[l];if(d){let h=Math.abs(r-d.time);if(s!==null&&s<h)break;(!a||s===null||s>=h)&&(s=h,a={time:d.time,segmentIndex:u,partIndex:null})}}}return a}},{name:"Playlist",run:(n,e,t,i,r)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}],z0=class extends Z.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={},this.logger_=lr("SyncController")}getSyncPoint(e,t,i,r){let a=this.runStrategies_(e,t,i,r);return a.length?this.selectSyncPoint_(a,{key:"time",value:r}):null}getExpiredTime(e,t){if(!e||!e.segments)return null;let i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;let r=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+hl({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))}runStrategies_(e,t,i,r){let a=[];for(let s=0;s<sD.length;s++){let o=sD[s],u=o.run(this,e,t,i,r);u&&(u.strategy=o.name,a.push({strategy:o.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let i=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),a=e[0].strategy;for(let s=1;s<e.length;s++){let o=Math.abs(e[s].syncPoint[t.key]-t.value);o<r&&(r=o,i=e[s].syncPoint,a=e[s].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${a}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,t){let i=t.mediaSequence-e.mediaSequence;if(i>iM){Z.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);return}for(let r=i-1;r>=0;r--){let a=e.segments[r];if(a&&typeof a.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+r,time:a.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){let t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){let i=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),r=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));let a=r.dateTimeObject;r.discontinuity&&t&&a&&(this.timelineToDatetimeMappings[r.timeline]=-(a.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,i){let r=e.segment,a=e.part,s=this.timelines[e.timeline],o,u;if(typeof e.timestampOffset=="number")s={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${s.time}] [mapping: ${s.mapping}]`)),o=e.startOfSegment,u=t.end+s.mapping;else if(s)o=t.start+s.mapping,u=t.end+s.mapping;else return!1;return a&&(a.start=o,a.end=u),(!r.start||o<r.start)&&(r.start=o),r.end=u,!0}saveDiscontinuitySyncInfo_(e){let t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let r=0;r<t.discontinuityStarts.length;r++){let a=t.discontinuityStarts[r],s=t.discontinuitySequence+r+1,o=a-e.mediaIndex,u=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>u){let l;o<0?l=i.start-hl({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:a}):l=i.end+hl({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:a}),this.discontinuities[s]={time:l,accuracy:u}}}}dispose(){this.trigger("dispose"),this.off()}},K0=class extends Z.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.lastTimelineChanges_[e]={type:e,from:t,to:i},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}},rM=DE(EE(function(){var n=function(){function C(){this.listeners={}}var S=C.prototype;return S.on=function(L,G){this.listeners[L]||(this.listeners[L]=[]),this.listeners[L].push(G)},S.off=function(L,G){if(!this.listeners[L])return!1;var M=this.listeners[L].indexOf(G);return this.listeners[L]=this.listeners[L].slice(0),this.listeners[L].splice(M,1),M>-1},S.trigger=function(L){var G=this.listeners[L];if(!!G)if(arguments.length===2)for(var M=G.length,O=0;O<M;++O)G[O].call(this,arguments[1]);else for(var K=Array.prototype.slice.call(arguments,1),z=G.length,V=0;V<z;++V)G[V].apply(this,K)},S.dispose=function(){this.listeners={}},S.pipe=function(L){this.on("data",function(G){L.push(G)})},C}();function e(C){return C.subarray(0,C.byteLength-C[C.byteLength-1])}let t=function(){let C=[[[],[],[],[],[]],[[],[],[],[],[]]],S=C[0],I=C[1],L=S[4],G=I[4],M,O,K,z=[],V=[],J,Q,oe,ne,ae,ye;for(M=0;M<256;M++)V[(z[M]=M<<1^(M>>7)*283)^M]=M;for(O=K=0;!L[O];O^=J||1,K=V[K]||1)for(ne=K^K<<1^K<<2^K<<3^K<<4,ne=ne>>8^ne&255^99,L[O]=ne,G[ne]=O,oe=z[Q=z[J=z[O]]],ye=oe*16843009^Q*65537^J*257^O*16843008,ae=z[ne]*257^ne*16843008,M=0;M<4;M++)S[M][O]=ae=ae<<24^ae>>>8,I[M][ne]=ye=ye<<24^ye>>>8;for(M=0;M<5;M++)S[M]=S[M].slice(0),I[M]=I[M].slice(0);return C},i=null;class r{constructor(S){i||(i=t()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let I,L,G,M=this._tables[0][4],O=this._tables[1],K=S.length,z=1;if(K!==4&&K!==6&&K!==8)throw new Error("Invalid aes key size");let V=S.slice(0),J=[];for(this._key=[V,J],I=K;I<4*K+28;I++)G=V[I-1],(I%K===0||K===8&&I%K===4)&&(G=M[G>>>24]<<24^M[G>>16&255]<<16^M[G>>8&255]<<8^M[G&255],I%K===0&&(G=G<<8^G>>>24^z<<24,z=z<<1^(z>>7)*283)),V[I]=V[I-K]^G;for(L=0;I;L++,I--)G=V[L&3?I:I-4],I<=4||L<4?J[L]=G:J[L]=O[0][M[G>>>24]]^O[1][M[G>>16&255]]^O[2][M[G>>8&255]]^O[3][M[G&255]]}decrypt(S,I,L,G,M,O){let K=this._key[1],z=S^K[0],V=G^K[1],J=L^K[2],Q=I^K[3],oe,ne,ae,ye=K.length/4-2,Pe,xe=4,Ae=this._tables[1],Be=Ae[0],ht=Ae[1],Oe=Ae[2],$i=Ae[3],Et=Ae[4];for(Pe=0;Pe<ye;Pe++)oe=Be[z>>>24]^ht[V>>16&255]^Oe[J>>8&255]^$i[Q&255]^K[xe],ne=Be[V>>>24]^ht[J>>16&255]^Oe[Q>>8&255]^$i[z&255]^K[xe+1],ae=Be[J>>>24]^ht[Q>>16&255]^Oe[z>>8&255]^$i[V&255]^K[xe+2],Q=Be[Q>>>24]^ht[z>>16&255]^Oe[V>>8&255]^$i[J&255]^K[xe+3],xe+=4,z=oe,V=ne,J=ae;for(Pe=0;Pe<4;Pe++)M[(3&-Pe)+O]=Et[z>>>24]<<24^Et[V>>16&255]<<16^Et[J>>8&255]<<8^Et[Q&255]^K[xe++],oe=z,z=V,V=J,J=Q,Q=oe}}class a extends n{constructor(){super(n),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(S){this.jobs.push(S),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}let s=function(C){return C<<24|(C&65280)<<8|(C&16711680)>>8|C>>>24},o=function(C,S,I){let L=new Int32Array(C.buffer,C.byteOffset,C.byteLength>>2),G=new r(Array.prototype.slice.call(S)),M=new Uint8Array(C.byteLength),O=new Int32Array(M.buffer),K,z,V,J,Q,oe,ne,ae,ye;for(K=I[0],z=I[1],V=I[2],J=I[3],ye=0;ye<L.length;ye+=4)Q=s(L[ye]),oe=s(L[ye+1]),ne=s(L[ye+2]),ae=s(L[ye+3]),G.decrypt(Q,oe,ne,ae,O,ye),O[ye]=s(O[ye]^K),O[ye+1]=s(O[ye+1]^z),O[ye+2]=s(O[ye+2]^V),O[ye+3]=s(O[ye+3]^J),K=Q,z=oe,V=ne,J=ae;return M};class u{constructor(S,I,L,G){let M=u.STEP,O=new Int32Array(S.buffer),K=new Uint8Array(S.byteLength),z=0;for(this.asyncStream_=new a,this.asyncStream_.push(this.decryptChunk_(O.subarray(z,z+M),I,L,K)),z=M;z<O.length;z+=M)L=new Uint32Array([s(O[z-4]),s(O[z-3]),s(O[z-2]),s(O[z-1])]),this.asyncStream_.push(this.decryptChunk_(O.subarray(z,z+M),I,L,K));this.asyncStream_.push(function(){G(null,e(K))})}static get STEP(){return 32e3}decryptChunk_(S,I,L,G){return function(){let M=o(S,I,L);G.set(M,S.byteOffset)}}}var l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d;typeof window<"u"?d=window:typeof l<"u"?d=l:typeof self<"u"?d=self:d={};var h=d,p=function(S){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(S):S&&S.buffer instanceof ArrayBuffer},_=h.BigInt||Number;_("0x1"),_("0x100"),_("0x10000"),_("0x1000000"),_("0x100000000"),_("0x10000000000"),_("0x1000000000000"),_("0x100000000000000"),_("0x10000000000000000"),function(){var C=new Uint16Array([65484]),S=new Uint8Array(C.buffer,C.byteOffset,C.byteLength);return S[0]===255?"big":S[0]===204?"little":"unknown"}();let D=function(C){let S={};return Object.keys(C).forEach(I=>{let L=C[I];p(L)?S[I]={bytes:L.buffer,byteOffset:L.byteOffset,byteLength:L.byteLength}:S[I]=L}),S};self.onmessage=function(C){let S=C.data,I=new Uint8Array(S.encrypted.bytes,S.encrypted.byteOffset,S.encrypted.byteLength),L=new Uint32Array(S.key.bytes,S.key.byteOffset,S.key.byteLength/4),G=new Uint32Array(S.iv.bytes,S.iv.byteOffset,S.iv.byteLength/4);new u(I,L,G,function(M,O){self.postMessage(D({source:S.source,decrypted:O}),[O.buffer])})}})),nM=SE(rM),aM=n=>{let e=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},Kh=(n,e)=>{n.abort(),n.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},X0=(n,e)=>{e.activePlaylistLoader=n,n.load()},sM=(n,e)=>()=>{let{segmentLoaders:{[n]:t,main:i},mediaTypes:{[n]:r}}=e,a=r.activeTrack(),s=r.getActiveGroup(),o=r.activePlaylistLoader,u=r.lastGroup_;if(!(s&&u&&s.id===u.id)&&(r.lastGroup_=s,r.lastTrack_=a,Kh(t,r),!(!s||s.isMainPlaylist))){if(!s.playlistLoader){o&&i.resetEverything();return}t.resyncLoader(),X0(s.playlistLoader,r)}},oM=(n,e)=>()=>{let{segmentLoaders:{[n]:t},mediaTypes:{[n]:i}}=e;i.lastGroup_=null,t.abort(),t.pause()},uM=(n,e)=>()=>{let{mainPlaylistLoader:t,segmentLoaders:{[n]:i,main:r},mediaTypes:{[n]:a}}=e,s=a.activeTrack(),o=a.getActiveGroup(),u=a.activePlaylistLoader,l=a.lastTrack_;if(!(l&&s&&l.id===s.id)&&(a.lastGroup_=o,a.lastTrack_=s,Kh(i,a),!!o)){if(o.isMainPlaylist){if(!s||!l||s.id===l.id)return;let d=e.vhs.playlistController_,h=d.selectPlaylist();if(d.media()===h)return;a.logger_(`track change. Switching main audio from ${l.id} to ${s.id}`),t.pause(),r.resetEverything(),d.fastQualityChange_(h);return}if(n==="AUDIO"){if(!o.playlistLoader){r.setAudio(!0),r.resetEverything();return}i.setAudio(!0),r.setAudio(!1)}if(u===o.playlistLoader){X0(o.playlistLoader,a);return}i.track&&i.track(s),i.resetEverything(),X0(o.playlistLoader,a)}},Xh={AUDIO:(n,e)=>()=>{let{segmentLoaders:{[n]:t},mediaTypes:{[n]:i},excludePlaylist:r}=e;Kh(t,i);let a=i.activeTrack(),s=i.activeGroup(),o=(s.filter(l=>l.default)[0]||s[0]).id,u=i.tracks[o];if(a===u){r({error:{message:"Problem encountered loading the default audio track."}});return}Z.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(let l in i.tracks)i.tracks[l].enabled=i.tracks[l]===u;i.onTrackChanged()},SUBTITLES:(n,e)=>()=>{let{segmentLoaders:{[n]:t},mediaTypes:{[n]:i}}=e;Z.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Kh(t,i);let r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}},oD={AUDIO:(n,e,t)=>{if(!e)return;let{tech:i,requestOptions:r,segmentLoaders:{[n]:a}}=t;e.on("loadedmetadata",()=>{let s=e.media();a.playlist(s,r),(!i.paused()||s.endList&&i.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),r),i.paused()||a.load()}),e.on("error",Xh[n](n,t))},SUBTITLES:(n,e,t)=>{let{tech:i,requestOptions:r,segmentLoaders:{[n]:a},mediaTypes:{[n]:s}}=t;e.on("loadedmetadata",()=>{let o=e.media();a.playlist(o,r),a.track(s.activeTrack()),(!i.paused()||o.endList&&i.preload()!=="none")&&a.load()}),e.on("loadedplaylist",()=>{a.playlist(e.media(),r),i.paused()||a.load()}),e.on("error",Xh[n](n,t))}},lM={AUDIO:(n,e)=>{let{vhs:t,sourceType:i,segmentLoaders:{[n]:r},requestOptions:a,main:{mediaGroups:s},mediaTypes:{[n]:{groups:o,tracks:u,logger_:l}},mainPlaylistLoader:d}=e,h=Bl(d.main);(!s[n]||Object.keys(s[n]).length===0)&&(s[n]={main:{default:{default:!0}}},h&&(s[n].main.default.playlists=d.main.playlists));for(let p in s[n]){o[p]||(o[p]=[]);for(let _ in s[n][p]){let D=s[n][p][_],C;if(h?(l(`AUDIO group '${p}' label '${_}' is a main playlist`),D.isMainPlaylist=!0,C=null):i==="vhs-json"&&D.playlists?C=new ea(D.playlists[0],t,a):D.resolvedUri?C=new ea(D.resolvedUri,t,a):D.playlists&&i==="dash"?C=new Rl(D.playlists[0],t,a,d):C=null,D=it({id:_,playlistLoader:C},D),oD[n](n,D.playlistLoader,e),o[p].push(D),typeof u[_]>"u"){let S=new Z.AudioTrack({id:_,kind:aM(D),enabled:!1,language:D.language,default:D.default,label:_});u[_]=S}}}r.on("error",Xh[n](n,e))},SUBTITLES:(n,e)=>{let{tech:t,vhs:i,sourceType:r,segmentLoaders:{[n]:a},requestOptions:s,main:{mediaGroups:o},mediaTypes:{[n]:{groups:u,tracks:l}},mainPlaylistLoader:d}=e;for(let h in o[n]){u[h]||(u[h]=[]);for(let p in o[n][h]){if(o[n][h][p].forced)continue;let _=o[n][h][p],D;if(r==="hls")D=new ea(_.resolvedUri,i,s);else if(r==="dash"){if(!_.playlists.filter(S=>S.excludeUntil!==1/0).length)return;D=new Rl(_.playlists[0],i,s,d)}else r==="vhs-json"&&(D=new ea(_.playlists?_.playlists[0]:_.resolvedUri,i,s));if(_=it({id:p,playlistLoader:D},_),oD[n](n,_.playlistLoader,e),u[h].push(_),typeof l[p]>"u"){let C=t.addRemoteTextTrack({id:p,kind:"subtitles",default:_.default&&_.autoselect,language:_.language,label:p},!1).track;l[p]=C}}}a.on("error",Xh[n](n,e))},"CLOSED-CAPTIONS":(n,e)=>{let{tech:t,main:{mediaGroups:i},mediaTypes:{[n]:{groups:r,tracks:a}}}=e;for(let s in i[n]){r[s]||(r[s]=[]);for(let o in i[n][s]){let u=i[n][s][o];if(!/^(?:CC|SERVICE)/.test(u.instreamId))continue;let l=t.options_.vhs&&t.options_.vhs.captionServices||{},d={label:o,language:u.language,instreamId:u.instreamId,default:u.default&&u.autoselect};if(l[d.instreamId]&&(d=it(d,l[d.instreamId])),d.default===void 0&&delete d.default,r[s].push(it({id:o},u)),typeof a[o]>"u"){let h=t.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;a[o]=h}}}}},BE=(n,e)=>{for(let t=0;t<n.length;t++)if(fv(e,n[t])||n[t].playlists&&BE(n[t].playlists,e))return!0;return!1},dM=(n,e)=>t=>{let{mainPlaylistLoader:i,mediaTypes:{[n]:{groups:r}}}=e,a=i.media();if(!a)return null;let s=null;a.attributes[n]&&(s=r[a.attributes[n]]);let o=Object.keys(r);if(!s)if(n==="AUDIO"&&o.length>1&&Bl(e.main))for(let u=0;u<o.length;u++){let l=r[o[u]];if(BE(l,a)){s=l;break}}else r.main?s=r.main:o.length===1&&(s=r[o[0]]);return typeof t>"u"?s:t===null||!s?null:s.filter(u=>u.id===t.id)[0]||null},cM={AUDIO:(n,e)=>()=>{let{mediaTypes:{[n]:{tracks:t}}}=e;for(let i in t)if(t[i].enabled)return t[i];return null},SUBTITLES:(n,e)=>()=>{let{mediaTypes:{[n]:{tracks:t}}}=e;for(let i in t)if(t[i].mode==="showing"||t[i].mode==="hidden")return t[i];return null}},hM=(n,{mediaTypes:e})=>()=>{let t=e[n].activeTrack();return t?e[n].activeGroup(t):null},fM=n=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(l=>{lM[l](l,n)});let{mediaTypes:e,mainPlaylistLoader:t,tech:i,vhs:r,segmentLoaders:{["AUDIO"]:a,main:s}}=n;["AUDIO","SUBTITLES"].forEach(l=>{e[l].activeGroup=dM(l,n),e[l].activeTrack=cM[l](l,n),e[l].onGroupChanged=sM(l,n),e[l].onGroupChanging=oM(l,n),e[l].onTrackChanged=uM(l,n),e[l].getActiveGroup=hM(l,n)});let o=e.AUDIO.activeGroup();if(o){let l=(o.filter(h=>h.default)[0]||o[0]).id;e.AUDIO.tracks[l].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(s.setAudio(!1),a.setAudio(!0)):s.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(l=>e[l].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(l=>e[l].onGroupChanging())});let u=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",u),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",()=>{i.audioTracks().removeEventListener("change",u),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(let l in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[l])},pM=()=>{let n={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:yn,activeTrack:yn,getActiveGroup:yn,onGroupChanged:yn,onTrackChanged:yn,lastTrack_:null,logger_:lr(`MediaGroups[${e}]`)}}),n},mM=60*2,vn,gM=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],vM=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]},_M=function({currentPlaylist:n,buffered:e,currentTime:t,nextPlaylist:i,bufferLowWaterLine:r,bufferHighWaterLine:a,duration:s,bufferBasedABR:o,log:u}){if(!i)return Z.log.warn("We received no playlist to switch to. Please check your stream."),!1;let l=`allowing switch ${n&&n.id||"null"} -> ${i.id}`;if(!n)return u(`${l} as current playlist is not set`),!0;if(i.id===n.id)return!1;let d=Boolean(fo(e,t).length);if(!n.endList)return!d&&typeof n.partTargetDuration=="number"?(u(`not ${l} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(u(`${l} as current playlist is live`),!0);let h=dv(e,t),p=o?Ft.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ft.MAX_BUFFER_LOW_WATER_LINE;if(s<p)return u(`${l} as duration < max low water line (${s} < ${p})`),!0;let _=i.attributes.BANDWIDTH,D=n.attributes.BANDWIDTH;if(_<D&&(!o||h<a)){let C=`${l} as next bandwidth < current bandwidth (${_} < ${D})`;return o&&(C+=` and forwardBuffer < bufferHighWaterLine (${h} < ${a})`),u(C),!0}if((!o||_>D)&&h>=r){let C=`${l} as forwardBuffer >= bufferLowWaterLine (${h} >= ${r})`;return o&&(C+=` and next bandwidth > current bandwidth (${_} > ${D})`),u(C),!0}return u(`not ${l} as no switching criteria met`),!1},Y0=class extends Z.EventTarget{constructor(e){super();let{src:t,withCredentials:i,tech:r,bandwidth:a,externVhs:s,useCueTags:o,playlistExclusionDuration:u,enableLowInitialPlaylist:l,sourceType:d,cacheEncryptionKeys:h,bufferBasedABR:p,leastPixelDiffSelector:_,captionServices:D}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:C}=e;(C===null||typeof C>"u")&&(C=1/0),vn=s,this.bufferBasedABR=Boolean(p),this.leastPixelDiffSelector=Boolean(_),this.withCredentials=i,this.tech_=r,this.vhs_=r.vhs,this.sourceType_=d,this.useCueTags_=o,this.playlistExclusionDuration=u,this.maxPlaylistRetries=C,this.enableLowInitialPlaylist=l,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:C,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=pM(),this.mediaSource=new q.default.MediaSource,this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.seekable_=qt(),this.hasPlayed_=!1,this.syncController_=new z0(e),this.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new nM,this.sourceUpdater_=new zh(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new K0;let S={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:D,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:a,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings};this.mainPlaylistLoader_=this.sourceType_==="dash"?new Rl(t,this.vhs_,this.requestOptions_):new ea(t,this.vhs_,this.requestOptions_),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new Ml(it(S,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new Ml(it(S,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new G0(it(S,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks}),e),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),gM.forEach(L=>{this[L+"_"]=vM.bind(this,L)}),this.logger_=lr("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;let I=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(I,()=>{let L=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-L,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){let e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){let t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,i){let r=this.media(),a=r&&(r.id||r.uri),s=e.id||e.uri;a&&a!==s&&(this.logger_(`switch media ${a} -> ${s} from ${t}`),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})),this.mainPlaylistLoader_.media(e,i)}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=q.default.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(q.default.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){let e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;let i=e.mediaGroups.AUDIO,r=Object.keys(i),a;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)a=this.mediaTypes_.AUDIO.activeTrack();else{let o=i.main||r.length&&i[r[0]];for(let u in o)if(o[u].default){a={label:u};break}}if(!a)return t;let s=[];for(let o in i)if(i[o][a.label]){let u=i[o][a.label];if(u.playlists&&u.playlists.length)s.push.apply(s,u.playlists);else if(u.uri)s.push(u);else if(e.playlists.length)for(let l=0;l<e.playlists.length;l++){let d=e.playlists[l];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===o&&s.push(d)}}return s.length?s:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{let e=this.mainPlaylistLoader_.media(),t=e.targetDuration*1.5*1e3;U0(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,e.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load()),fM({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),e),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let e=this.mainPlaylistLoader_.media();if(!e){this.excludeUnsupportedVariants_();let t;if(this.enableLowInitialPlaylist&&(t=this.selectInitialPlaylist()),t||(t=this.selectPlaylist()),!t||!this.shouldSwitchToMedia_(t)||(this.initialMedia_=t,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;e=this.initialMedia_}this.handleUpdatedMediaPlaylist(e)}),this.mainPlaylistLoader_.on("error",()=>{let e=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:e.playlist,error:e})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{let e=this.mainPlaylistLoader_.media(),t=e.targetDuration*1.5*1e3;U0(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=t,this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{let e=this.mainPlaylistLoader_.media();if(e.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(e)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){let i=e.mediaGroups||{},r=!0,a=Object.keys(i.AUDIO);for(let s in i.AUDIO)for(let o in i.AUDIO[s])i.AUDIO[s][o].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),vn.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),a.length&&Object.keys(i.AUDIO[a[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){let t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),r=this.bufferLowWaterLine(),a=this.bufferHighWaterLine(),s=this.tech_.buffered();return _M({buffered:s,currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:a,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{let t=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",t=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:mM}))});let e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();let t=this.getCodecsOrExclude_();!t||this.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}fastQualityChange_(e=this.selectPlaylist()){if(e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(()=>{Z.browser.IE_VERSION||Z.browser.IS_EDGE?this.tech_.setCurrentTime(this.tech_.currentTime()+.04):this.tech_.setCurrentTime(this.tech_.currentTime())})}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();let e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){let e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){let t=this.seekable();if(!t.length)return!1;if(Z.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",()=>{this.trigger("firstplay"),this.tech_.setCurrentTime(t.end(0)),this.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(t.end(0))}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){let e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;let e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;let t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){let t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}!e||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;let i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;let r=vn.Playlist.playlistEnd(e,i),a=this.tech_.currentTime(),s=this.tech_.buffered();if(!s.length)return r-a<=kr;let o=s.end(s.length-1);return o-a<=kr&&r-o<=kr}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;let r=this.mainPlaylistLoader_.main.playlists,a=r.filter(cf),s=a.length===1&&a[0]===e;if(r.length===1&&i!==1/0)return Z.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(s);if(s){let _=!1;r.forEach(D=>{if(D===e)return;let C=D.excludeUntil;typeof C<"u"&&C!==1/0&&(_=!0,delete D.excludeUntil)}),_&&(Z.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+i*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});let u=this.selectPlaylist();if(!u){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}let l=t.internal?this.logger_:Z.log.warn,d=t.message?" "+t.message:"";l(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${d} Switching to playlist ${u.id}.`),u.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);let h=u.targetDuration/2*1e3||5*1e3,p=typeof u.lastRequest=="number"&&Date.now()-u.lastRequest<=h;return this.switchMedia_(u,"exclude",s||p)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){let i=[],r=e==="all";(r||e==="main")&&i.push(this.mainPlaylistLoader_);let a=[];(r||e==="audio")&&a.push("AUDIO"),(r||e==="subtitle")&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach(s=>{let o=this.mediaTypes_[s]&&this.mediaTypes_[s].activePlaylistLoader;o&&i.push(o)}),["main","audio","subtitle"].forEach(s=>{let o=this[`${s}SegmentLoader_`];o&&(e===s||e==="all")&&i.push(o)}),i.forEach(s=>t.forEach(o=>{typeof s[o]=="function"&&s[o]()}))}setCurrentTime(e){let t=fo(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;let e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:vn.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}onSyncInfoUpdate_(){let e;if(!this.mainPlaylistLoader_)return;let t=this.mainPlaylistLoader_.media();if(!t)return;let i=this.syncController_.getExpiredTime(t,this.duration());if(i===null)return;let r=this.mainPlaylistLoader_.main,a=vn.Playlist.seekable(t,i,vn.Playlist.liveEdgeDelay(r,t));if(a.length===0||this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),i=this.syncController_.getExpiredTime(t,this.duration()),i===null||(e=vn.Playlist.seekable(t,i,vn.Playlist.liveEdgeDelay(r,t)),e.length===0)))return;let s,o;this.seekable_&&this.seekable_.length&&(s=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>a.end(0)||a.start(0)>e.end(0)?this.seekable_=a:this.seekable_=qt([[e.start(0)>a.start(0)?e.start(0):a.start(0),e.end(0)<a.end(0)?e.end(0):a.end(0)]]):this.seekable_=a,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===s&&this.seekable_.start(0)===o)&&(this.logger_(`seekable updated [${tE(this.seekable_)}]`),this.tech_.trigger("seekablechanged"))}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){let r=this.seekable();if(!r.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<r.end(r.length-1))&&this.sourceUpdater_.setDuration(r.end(r.length-1));return}let t=this.tech_.buffered(),i=vn.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{let t=this.mediaTypes_[e].groups;for(let i in t)t[i].forEach(r=>{r.playlistLoader&&r.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){let e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!i)}getCodecsOrExclude_(){let e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};e.video=e.main;let t=fl(this.main(),this.media()),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=t.video||e.main.videoCodec||jx),e.main.isMuxed&&(i.video+=`,${t.audio||e.main.audioCodec||fg}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(i.audio=t.audio||e.main.audioCodec||e.audio.audioCodec||fg,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!i.audio&&!i.video){this.excludePlaylist({playlistToExclude:this.media(),error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}let a=(u,l)=>u?$u(l):Nc(l),s={},o;if(["video","audio"].forEach(function(u){if(i.hasOwnProperty(u)&&!a(e[u].isFmp4,i[u])){let l=e[u].isFmp4?"browser":"muxer";s[l]=s[l]||[],s[l].push(i[u]),u==="audio"&&(o=l)}}),r&&o&&this.media().attributes.AUDIO){let u=this.media().attributes.AUDIO;this.main().playlists.forEach(l=>{(l.attributes&&l.attributes.AUDIO)===u&&l!==this.media()&&(l.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${o} does not support codec(s): "${i.audio}"`)}if(Object.keys(s).length){let u=Object.keys(s).reduce((l,d)=>(l&&(l+=", "),l+=`${d} does not support codec(s): "${s[d].join(",")}"`,l),"")+".";this.excludePlaylist({playlistToExclude:this.media(),error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){let u=[];if(["video","audio"].forEach(l=>{let d=(nr(this.sourceUpdater_.codecs[l]||"")[0]||{}).type,h=(nr(i[l]||"")[0]||{}).type;d&&h&&d.toLowerCase()!==h.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[l]}" -> "${i[l]}"`)}),u.length){this.excludePlaylist({playlistToExclude:this.media(),error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return i}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;let e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);let t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){let e=this.main().playlists,t=[];Object.keys(e).forEach(i=>{let r=e[i];if(t.indexOf(r.id)!==-1)return;t.push(r.id);let a=fl(this.main,r),s=[];a.audio&&!Nc(a.audio)&&!$u(a.audio)&&s.push(`audio codec ${a.audio}`),a.video&&!Nc(a.video)&&!$u(a.video)&&s.push(`video codec ${a.video}`),a.text&&a.text==="stpp.ttml.im1t"&&s.push(`text codec ${a.text}`),s.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id} for unsupported: ${s.join(", ")}`))})}excludeIncompatibleVariants_(e){let t=[],i=this.main().playlists,r=qh(nr(e)),a=YS(r),s=r.video&&nr(r.video)[0]||null,o=r.audio&&nr(r.audio)[0]||null;Object.keys(i).forEach(u=>{let l=i[u];if(t.indexOf(l.id)!==-1||l.excludeUntil===1/0)return;t.push(l.id);let d=[],h=fl(this.mainPlaylistLoader_.main,l),p=YS(h);if(!(!h.audio&&!h.video)){if(p!==a&&d.push(`codec count "${p}" !== "${a}"`),!this.sourceUpdater_.canChangeType()){let _=h.video&&nr(h.video)[0]||null,D=h.audio&&nr(h.audio)[0]||null;_&&s&&_.type.toLowerCase()!==s.type.toLowerCase()&&d.push(`video codec "${_.type}" !== "${s.type}"`),D&&o&&D.type.toLowerCase()!==o.type.toLowerCase()&&d.push(`audio codec "${D.type}" !== "${o.type}"`)}d.length&&(l.excludeUntil=1/0,this.logger_(`excluding ${l.id}: ${d.join(" && ")}`))}})}updateAdCues_(e){let t=0,i=this.seekable();i.length&&(t=i.start(0)),tM(e,this.cueTagsTrack_,t)}goalBufferLength(){let e=this.tech_.currentTime(),t=Ft.GOAL_BUFFER_LENGTH,i=Ft.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,Ft.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,r)}bufferLowWaterLine(){let e=this.tech_.currentTime(),t=Ft.BUFFER_LOW_WATER_LINE,i=Ft.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,Ft.MAX_BUFFER_LOW_WATER_LINE),a=Math.max(t,Ft.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.bufferBasedABR?a:r)}bufferHighWaterLine(){return Ft.BUFFER_HIGH_WATER_LINE}},yM=(n,e,t)=>i=>{let r=n.main.playlists[e],a=hv(r),s=cf(r);return typeof i>"u"?s:(i?delete r.disabled:r.disabled=!0,i!==s&&!a&&(t(),i?n.trigger("renditionenabled"):n.trigger("renditiondisabled")),i)},Q0=class{constructor(e,t,i){let{playlistController_:r}=e,a=r.fastQualityChange_.bind(r);if(t.attributes){let s=t.attributes.RESOLUTION;this.width=s&&s.width,this.height=s&&s.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=fl(r.main(),t),this.playlist=t,this.id=i,this.enabled=yM(e.playlists,t.id,a)}},TM=function(n){n.representations=()=>{let e=n.playlistController_.main(),t=Bl(e)?n.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(i=>!hv(i)).map((i,r)=>new Q0(n,i,i.id)):[]}},uD=["seeking","seeked","pause","playing","error"],J0=class{constructor(e){this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=lr("PlaybackWatcher"),this.logger_("initialize");let t=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),r=()=>this.techWaiting_(),a=()=>this.resetTimeUpdate_(),s=this.playlistController_,o=["main","subtitle","audio"],u={};o.forEach(d=>{u[d]={reset:()=>this.resetSegmentDownloads_(d),updateend:()=>this.checkSegmentDownloads_(d)},s[`${d}SegmentLoader_`].on("appendsdone",u[d].updateend),s[`${d}SegmentLoader_`].on("playlistupdate",u[d].reset),this.tech_.on(["seeked","seeking"],u[d].reset)});let l=d=>{["main","audio"].forEach(h=>{s[`${h}SegmentLoader_`][d]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),l("off"))},this.clearSeekingAppendCheck_=()=>l("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),l("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(uD,a),this.tech_.on("canplay",i),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",r),this.tech_.off(uD,a),this.tech_.off("canplay",i),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(d=>{s[`${d}SegmentLoader_`].off("appendsdone",u[d].updateend),s[`${d}SegmentLoader_`].off("playlistupdate",u[d].reset),this.tech_.off(["seeked","seeking"],u[d].reset)}),this.checkCurrentTimeTimeout_&&q.default.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&q.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=q.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){let t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){let t=this.playlistController_,i=t[`${e}SegmentLoader_`],r=i.buffered_(),a=D2(this[`${e}Buffered_`],r);if(this[`${e}Buffered_`]=r,a){this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:za(r)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;let e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+kr>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;let t=this.seekable(),i=this.tech_.currentTime(),r=this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow),a;if(r&&(a=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){let D=t.start(0);a=D+(D===t.end(0)?0:kr)}if(typeof a<"u")return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${tE(t)}. Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0;let s=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),u=s.audioBuffer?s.audioBuffered():null,l=s.videoBuffer?s.videoBuffered():null,d=this.media(),h=d.partTargetDuration?d.partTargetDuration:(d.targetDuration-oa)*2,p=[u,l];for(let D=0;D<p.length;D++){if(!p[D])continue;if(dv(p[D],i)<h)return!1}let _=nh(o,i);return _.length===0?!1:(a=_.start(0)+kr,this.logger_(`Buffered region starts (${_.start(0)})  just beyond seek point (${i}). Seeking to ${a}.`),this.tech_.setCurrentTime(a),!0)}waiting_(){if(this.techWaiting_())return;let e=this.tech_.currentTime(),t=this.tech_.buffered(),i=fo(t,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){let e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){let o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}let i=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;let s=nh(r,t);return s.length>0?(this.logger_(`Stopped at ${t} and seeking to ${s.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,i,r=!1){if(!e.length)return!1;let a=e.end(e.length-1)+kr;return!i.endList&&r&&(a=e.end(e.length-1)+i.targetDuration*3),t>a}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:i}){if(!e)return;let r;if(e.length&&t.length){let a=fo(e,i-3),s=fo(e,i),o=fo(t,i);o.length&&!s.length&&a.length&&(r={start:a.end(0),end:o.end(0)})}else nh(e,i).length||(r=this.gapFromVideoUnderflow_(e,i));return r?(this.logger_(`Encountered a gap in video from ${r.start} to ${r.end}. Seeking to current time ${i}`),!0):!1}skipTheGap_(e){let t=this.tech_.buffered(),i=this.tech_.currentTime(),r=nh(t,i);this.resetTimeUpdate_(),!(r.length===0||i!==e)&&(this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+oa),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}gapFromVideoUnderflow_(e,t){let i=x2(e);for(let r=0;r<i.length;r++){let a=i.start(r),s=i.end(r);if(t-a<4&&t-a>2)return{start:a,end:s}}return null}},xM={errorInterval:30,getSource(n){let t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return n(t)}},UE=function(n,e){let t=0,i=0,r=it(xM,e);n.ready(()=>{n.trigger({type:"usage",name:"vhs-error-reload-initialized"})});let a=function(){i&&n.currentTime(i)},s=function(d){d!=null&&(i=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",a),n.src(d),n.trigger({type:"usage",name:"vhs-error-reload"}),n.play())},o=function(){if(Date.now()-t<r.errorInterval*1e3){n.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!r.getSource||typeof r.getSource!="function"){Z.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),r.getSource.call(n,s)},u=function(){n.off("loadedmetadata",a),n.off("error",o),n.off("dispose",u)},l=function(d){u(),UE(n,d)};n.on("error",o),n.on("dispose",u),n.reloadSourceOnError=l},bM=function(n){UE(this,n)},jE="3.0.0",SM="6.2.0",DM="1.0.1",EM="6.0.0",CM="4.0.1",ni={PlaylistLoader:ea,Playlist:Si,utils:z2,STANDARD_PLAYLIST_SELECTOR:JS,INITIAL_PLAYLIST_SELECTOR:OR,lastBandwidthSelector:JS,movingAverageBandwidthSelector:PR,comparePlaylistBandwidth:gv,comparePlaylistResolution:IR,xhr:gE()};Object.keys(Ft).forEach(n=>{Object.defineProperty(ni,n,{get(){return Z.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),Ft[n]},set(e){if(Z.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){Z.log.warn(`value of Vhs.${n} must be greater than or equal to 0`);return}Ft[n]=e}})});var HE="videojs-vhs",$E=function(n,e){let t=e.media(),i=-1;for(let r=0;r<n.length;r++)if(n[r].id===t.id){i=r;break}n.selectedIndex_=i,n.trigger({selectedIndex:i,type:"change"})},wM=function(n,e){e.representations().forEach(t=>{n.addQualityLevel(t)}),$E(n,e.playlists)};ni.canPlaySource=function(){return Z.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};var AM=(n,e,t)=>{if(!n)return n;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=qh(nr(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(i.audio=t.attributes.CODECS);let r=Ys(i.video),a=Ys(i.audio),s={};for(let o in n)s[o]={},a&&(s[o].audioContentType=a),r&&(s[o].videoContentType=r),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(s[o].pssh=e.contentProtection[o].pssh),typeof n[o]=="string"&&(s[o].url=n[o]);return it(n,s)},kM=(n,e)=>n.reduce((t,i)=>{if(!i.contentProtection)return t;let r=e.reduce((a,s)=>{let o=i.contentProtection[s];return o&&o.pssh&&(a[s]={pssh:o.pssh}),a},{});return Object.keys(r).length&&t.push(r),t},[]),IM=({player:n,sourceKeySystems:e,audioMedia:t,mainPlaylists:i})=>{if(!n.eme.initializeMediaKeys)return Promise.resolve();let r=t?i.concat([t]):i,a=kM(r,Object.keys(e)),s=[],o=[];return a.forEach(u=>{o.push(new Promise((l,d)=>{n.tech_.one("keysessioncreated",l)})),s.push(new Promise((l,d)=>{n.eme.initializeMediaKeys({keySystems:u},h=>{if(h){d(h);return}l()})}))}),Promise.race([Promise.all(s),Promise.race(o)])},PM=({player:n,sourceKeySystems:e,media:t,audioMedia:i})=>{let r=AM(e,t,i);return r?(n.currentSource().keySystems=r,r&&!n.eme?(Z.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},VE=()=>{if(!q.default.localStorage)return null;let n=q.default.localStorage.getItem(HE);if(!n)return null;try{return JSON.parse(n)}catch{return null}},FM=n=>{if(!q.default.localStorage)return!1;let e=VE();e=e?it(e,n):n;try{q.default.localStorage.setItem(HE,JSON.stringify(e))}catch{return!1}return e},OM=n=>n.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(n.substring(n.indexOf(",")+1)):n;ni.supportsNativeHls=function(){if(!he.default||!he.default.createElement)return!1;let n=he.default.createElement("video");return Z.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(n.canPlayType(t))}):!1}();ni.supportsNativeDash=function(){return!he.default||!he.default.createElement||!Z.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(he.default.createElement("video").canPlayType("application/dash+xml"))}();ni.supportsTypeNatively=n=>n==="hls"?ni.supportsNativeHls:n==="dash"?ni.supportsNativeDash:!1;ni.isSupported=function(){return Z.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};var LM=Z.getComponent("Component"),Yh=class extends LM{constructor(e,t,i){if(super(t,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=lr("VhsHandler"),t.options_&&t.options_.playerId){let r=Z.getPlayer(t.options_.playerId);this.player_=r}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(he.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],r=>{let a=he.default.fullscreenElement||he.default.webkitFullscreenElement||he.default.mozFullScreenElement||he.default.msFullscreenElement;a&&a.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(){if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){let e=VE();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Ft.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ft.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(e=>{typeof this.source_[e]<"u"&&(this.options_[e]=this.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=OM(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ni,this.options_.sourceType=pg(t),this.options_.seekTo=a=>{this.tech_.setCurrentTime(a)},this.playlistController_=new Y0(this.options_);let i=it({liveRangeSafeTimeDelta:kr},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new J0(i),this.playlistController_.on("error",()=>{let a=Z.players[this.tech_.options_.playerId],s=this.playlistController_.error;typeof s=="object"&&!s.code?s.code=3:typeof s=="string"&&(s={message:s,code:3}),a.error(s)});let r=this.options_.bufferBasedABR?ni.movingAverageBandwidthSelector(.55):ni.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=ni.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(a){this.playlistController_.selectPlaylist=a.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(a){this.playlistController_.mainSegmentLoader_.throughput.rate=a,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let a=this.playlistController_.mainSegmentLoader_.bandwidth,s=q.default.navigator.connection||q.default.navigator.mozConnection||q.default.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&s){let u=s.downlink*1e3*1e3;u>=o&&a>=o?a=Math.max(a,u):a=u}return a},set(a){this.playlistController_.mainSegmentLoader_.bandwidth=a,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){let a=1/(this.bandwidth||1),s;return this.throughput>0?s=1/this.throughput:s=0,Math.floor(1/(a+s))},set(){Z.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>za(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>za(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&FM({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{TM(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=q.default.URL.createObjectURL(this.playlistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){let e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),IM({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){let e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=PM({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{if(i.status!=="output-restricted")return;let r=this.playlistController_.main();if(!r||!r.playlists)return;let a=[];r.playlists.forEach(s=>{s&&s.attributes&&s.attributes.RESOLUTION&&s.attributes.RESOLUTION.height>=720&&(!s.excludeUntil||s.excludeUntil<1/0)&&(s.excludeUntil=1/0,a.push(s))}),a.length&&(Z.log.warn('DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.',...a),this.playlistController_.fastQualityChange_())}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),Z.browser.IE_VERSION===11||!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){let e=Z.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{wM(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{$E(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":jE,"mux.js":SM,"mpd-parser":DM,"m3u8-parser":EM,"aes-decrypter":CM}}version(){return this.constructor.version()}canChangeType(){return zh.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&q.default.URL.revokeObjectURL&&(q.default.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return eR({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,i=!0,r=2){return xE({programTime:e,playlist:this.playlistController_.media(),retryCount:r,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}},vv={name:"videojs-http-streaming",VERSION:jE,canHandleSource(n,e={}){let t=it(Z.options,e);return vv.canPlayType(n.type,t)},handleSource(n,e,t={}){let i=it(Z.options,t);return e.vhs=new Yh(n,e,i),e.vhs.xhr=gE(),e.vhs.src(n.src,n.type),e.vhs},canPlayType(n,e={}){let{vhs:{overrideNative:t=!Z.browser.IS_ANY_SAFARI}={}}=it(Z.options,e),i=pg(n);return i&&(!ni.supportsTypeNatively(i)||t)?"maybe":""}},RM=()=>$u("avc1.4d400d,mp4a.40.2");RM()&&Z.getTech("Html5").registerSourceHandler(vv,0);Z.VhsHandler=Yh;Z.VhsSourceHandler=vv;Z.Vhs=ni;Z.use||Z.registerComponent("Vhs",ni);Z.options.vhs=Z.options.vhs||{};(!Z.getPlugin||!Z.getPlugin("reloadSourceOnError"))&&Z.registerPlugin("reloadSourceOnError",bM);var Nr=Le(Nu()),dr=Le(Ht());function hf(){return hf=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hf.apply(this,arguments)}var MM="1.8.0";var NM="1.2.0",BM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},UM=["catalogSearch","catalogSequence"],jM=["adConfigId","applicationId","catalogSearch","catalogSequence","playlistId","playlistVideoId","videoId"],HM=function(e,t){if(!(!e||e[t]===void 0)){if(typeof e[t]!="string"&&UM.indexOf(t)!==-1)try{return encodeURIComponent(JSON.stringify(e[t]))}catch{return}return encodeURIComponent(String(e[t]).trim())||void 0}},$M=function(e){return Object.keys(e).filter(function(t){return jM.indexOf(t)!==-1}).reduce(function(t,i){var r=HM(e,i);return r!==void 0&&(t+=t?"&":"?",t+=encodeURIComponent(i)+"="+r),t},"")},zE=function(e){var t=e.accountId,i=e.base,r=i===void 0?"https://players.brightcove.net":i,a=e.playerId,s=a===void 0?"default":a,o=e.embedId,u=o===void 0?"default":o,l=e.iframe,d=l===void 0?!1:l,h=e.minified,p=h===void 0?!0:h,_=e.queryParams,D=_===void 0?null:_,C="";d?C+="html":(p&&(C+="min."),C+="js"),r.charAt(r.length-1)==="/"&&(r=r.substring(0,r.length-1));var S="";return d&&D&&(typeof D>"u"?"undefined":BM(D))==="object"&&(S=$M(D)),t=encodeURIComponent(t),s=encodeURIComponent(s),u=encodeURIComponent(u),r+"/"+t+"/"+s+"_"+u+"/index."+C+S};zE.VERSION=NM;var VM={embedId:"default",embedType:"in-page",playerId:"default",Promise:dr.default.Promise,refNodeInsert:"append"},WM="16:9",qM=!1,GM="100%",KE="video",ff="video-js",_v="in-page",la="iframe",XE="append",yv="prepend",Tv="before",xv="after",pf="replace",zM=["catalogSearch","catalogSequence"],bv="https://players.brightcove.net/",KM=function(e){if(e.playerUrl)return e.playerUrl;var t=e.accountId,i=e.playerId,r=e.embedId,a=e.embedOptions,s=e.embedType===la;return zE({accountId:t,playerId:i,embedId:r,iframe:s,base:bv,minified:a?!a.unminified:!0,queryParams:e})},XM=function(){return bv},YM=function(e){bv=e},Lo={getUrl:KM,getBaseUrl:XM,setBaseUrl:YM},YE=function(e){return Boolean(e&&e.nodeType===1)},QE=function(e){return Boolean(YE(e)&&e.parentNode)},QM=function(e){var t=Nr.default.createElement("iframe");return t.setAttribute("allow","autoplay;encrypted-media;fullscreen"),t.setAttribute("allowfullscreen","allowfullscreen"),t.src=Lo.getUrl(e),t},JM=function(e){var t=e.embedOptions,i={adConfigId:"data-ad-config-id",applicationId:"data-application-id",catalogSearch:"data-catalog-search",catalogSequence:"data-catalog-sequence",deliveryConfigId:"data-delivery-config-id",playlistId:"data-playlist-id",playlistVideoId:"data-playlist-video-id",poster:"poster",videoId:"data-video-id"},r=t&&t.tagName||ff,a=Nr.default.createElement(r);return Object.keys(i).filter(function(s){return e[s]}).forEach(function(s){var o;if(typeof e[s]!="string"&&zM.indexOf(s)!==-1)try{o=JSON.stringify(e[s])}catch{return}else o=String(e[s]).trim();a.setAttribute(i[s],o)}),a.setAttribute("controls","controls"),a.classList.add("video-js"),a},ZM=function(e,t,i){if(!t.responsive)return i;i.style.position="absolute",i.style.top="0px",i.style.right="0px",i.style.bottom="0px",i.style.left="0px",i.style.width="100%",i.style.height="100%";var r=hf({aspectRatio:WM,iframeHorizontalPlaylist:qM,maxWidth:GM},t.responsive),a=r.aspectRatio.split(":").map(Number),s=Nr.default.createElement("div"),o=a[1]/a[0]*100;e===la&&r.iframeHorizontalPlaylist&&(o*=1.25),s.style.paddingTop=o+"%",s.appendChild(i);var u=Nr.default.createElement("div");return u.style.position="relative",u.style.display="block",u.style.maxWidth=r.maxWidth,u.appendChild(s),u},eN=function(e,t){if(!e.pip)return t;var i=Nr.default.createElement("div");return i.classList.add("vjs-pip-container"),i.appendChild(t),i},tN=function(e,t,i){return t?eN(t,ZM(e,t,i)):i},iN=function(e,t){var i=e.refNode,r=e.refNodeInsert,a=i.parentNode,s=tN(e.embedType,e.embedOptions,t);if(r===Tv?a.insertBefore(s,i):r===xv?a.insertBefore(s,i.nextElementSibling||null):r===pf?a.replaceChild(s,i):r===yv?i.insertBefore(s,i.firstChild||null):i.appendChild(s),e.embedOptions&&e.embedOptions.playlist){var o=e.embedOptions.playlist.legacy?"ul":"div",u=Nr.default.createElement(o);u.classList.add("vjs-playlist"),t.parentNode.insertBefore(u,t.nextElementSibling||null)}return e.refNode=null,t},rN=function(e,t){if(typeof e.onEmbedCreated!="function")return t;var i=e.onEmbedCreated(t);return YE(i)?i:t},nN=function(e){var t=e.embedType===la?QM(e):JM(e);return iN(e,rN(e,t))},Hl=new dr.default.Map,mf=function(e){var t=e.accountId,i=e.playerId,r=e.embedId;return(t||"*")+"_"+i+"_"+r},aN=function(e){Hl.set(mf(e),e.accountId?Lo.getUrl(e):"")},sN=function(e){return Hl.has(mf(e))},oN=function(e){return Hl.get(mf(e))},uN=function(){Hl.clear()},lN=function(e){Hl.forEach(e)},Oo={clear:uN,forEach:lN,get:oN,has:sN,key:mf,store:aN},JE=/^([A-Za-z0-9]+)_([A-Za-z0-9]+)$/,ZE=function(){return dr.default.bc?Object.keys(dr.default.bc).filter(function(e){return JE.test(e)}):[]},dN=function(){return Object.keys(dr.default).filter(function(e){return/^videojs/i.test(e)||/^(bc)$/.test(e)})},WE=function(e){!e||Object.keys(e.players).forEach(function(t){var i=e.players[t];i&&i.dispose()})},cN=function(){Oo.forEach(function(e,t){!e||Array.prototype.slice.call(Nr.default.querySelectorAll('script[src="'+e+'"]')).forEach(function(i){return i.parentNode.removeChild(i)})}),Oo.clear(),WE(dr.default.videojs),ZE().forEach(function(e){return WE(dr.default.bc[e].videojs)}),dN().forEach(function(e){delete dr.default[e]})},hN=function(){ZE().forEach(function(e){var t=e.match(JE),i={playerId:t[1],embedId:t[2]};Oo.has(i)||Oo.store(i)})},eC={detectPlayers:hN,reset:cN};eC.detectPlayers();var jl=function(e){return typeof e=="function"},fN=function(e){return e===_v||e===la},pN=function(e){return e===ff||e===KE},mN=function(e){return e===XE||e===yv||e===Tv||e===xv||e===pf},gN=function(e){var t=e.accountId,i=e.embedOptions,r=e.embedType,a=e.options,s=e.refNode,o=e.refNodeInsert;if(t)if(QE(s))if(fN(r)){if(r===la&&a)throw new Error("cannot use options with an iframe embed");if(i&&i.tagName!==void 0&&!pN(i.tagName))throw new Error('embedOptions.tagName is invalid (value: "'+i.tagName+'")');if(i&&i.responsive&&i.responsive.aspectRatio&&!/^\d+\:\d+$/.test(i.responsive.aspectRatio))throw new Error('embedOptions.responsive.aspectRatio must be in the "n:n" format (value: "'+i.responsive.aspectRatio+'")');if(!mN(o))throw new Error("refNodeInsert is missing or invalid")}else throw new Error("embedType is missing or invalid");else throw new Error("refNode must resolve to a node attached to the DOM");else throw new Error("accountId is required")},vN=function(e){return QE(e)?e:typeof e=="string"?Nr.default.querySelector(e):null},qE=function(e,t,i,r){var a=e.embedId,s=e.playerId,o=dr.default.bc[s+"_"+a]||dr.default.bc;if(!o)return r(new Error("missing bc function for "+s));Oo.store(e);var u;try{u=o(t,e.options),u.bcinfo&&(u.bcinfo.PLAYER_LOADER=!0)}catch{var l="Could not initialize the Brightcove Player.";return e.embedOptions.tagName===ff&&(l+=' You are attempting to embed using a "video-js" element. Please ensure that your Player is v6.11.0 or newer in order to support this embed type. Alternatively, pass `"video"` for `embedOptions.tagName`.'),r(new Error(l))}i({type:_v,ref:u})},GE=function(e,t,i){e.refNode=vN(e.refNode),gN(e);var r=e.refNode,a=e.refNodeInsert,s=r.parentNode,o=nN(e);if(e.embedType===la){t({type:la,ref:o});return}if(Oo.has(e))return qE(e,o,t,i);var u=Nr.default.createElement("script");u.onload=function(){return qE(e,o,t,i)},u.onerror=function(){i(new Error("player script could not be downloaded"))},u.async=!0,u.charset="utf-8",u.src=Lo.getUrl(e),a===pf?s.appendChild(u):r.appendChild(u)},_N=function(e){var t=hf({},VM,e),i=t.Promise,r=t.onSuccess,a=t.onFailure;return!jl(i)||jl(r)||jl(a)?GE(t,jl(r)?r:function(){},jl(a)?a:function(s){throw s}):new i(function(s,o){return GE(t,s,o)})},$l=function(e,t){Object.defineProperty(_N,e,{configurable:!1,enumerable:!0,value:t,writable:!1})};$l("getBaseUrl",function(){return Lo.getBaseUrl()});$l("setBaseUrl",function(n){Lo.setBaseUrl(n)});$l("getUrl",function(n){return Lo.getUrl(n)});$l("reset",function(){return eC.reset()});[["EMBED_TAG_NAME_VIDEO",KE],["EMBED_TAG_NAME_VIDEOJS",ff],["EMBED_TYPE_IN_PAGE",_v],["EMBED_TYPE_IFRAME",la],["REF_NODE_INSERT_APPEND",XE],["REF_NODE_INSERT_PREPEND",yv],["REF_NODE_INSERT_BEFORE",Tv],["REF_NODE_INSERT_AFTER",xv],["REF_NODE_INSERT_REPLACE",pf],["VERSION",MM]].forEach(function(n){$l(n[0],n[1])});var $=Le(Ht()),le=Le(Nu());var we=Le(nC());function Se(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function cr(n,e){return cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},cr(n,e)}function de(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,cr(n,e)}var Vw=Le(Km()),O_=Le(Qm()),h_=Le(ig());function Dv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function da(n,e,t){return Dv()?da=Reflect.construct.bind():da=function(r,a,s){var o=[null];o.push.apply(o,a);var u=Function.bind.apply(r,o),l=new u;return s&&cr(l,s.prototype),l},da.apply(null,arguments)}function Ev(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&cr(n,e)}var yN=function(n){de(e,n);function e(){var i;return i=n.call(this)||this,i.buffer="",i}var t=e.prototype;return t.push=function(r){var a;for(this.buffer+=r,a=this.buffer.indexOf(`
`);a>-1;a=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,a)),this.buffer=this.buffer.substring(a+1)},e}(Yn),TN=String.fromCharCode(9),Cv=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),i={};return t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),i},xN=function(){var e="[^=]*",t='"[^"]*"|[^,]*',i="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+i+")")},hr=function(e){for(var t=e.split(xN()),i={},r=t.length,a;r--;)t[r]!==""&&(a=/([^=]*)=(.*)/.exec(t[r]).slice(1),a[0]=a[0].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^\s+|\s+$/g,""),a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1"),i[a[0]]=a[1]);return i},bN=function(n){de(e,n);function e(){var i;return i=n.call(this)||this,i.customParsers=[],i.tagMappers=[],i}var t=e.prototype;return t.push=function(r){var a=this,s,o;if(r=r.trim(),r.length!==0){if(r[0]!=="#"){this.trigger("data",{type:"uri",uri:r});return}var u=this.tagMappers.reduce(function(l,d){var h=d(r);return h===r?l:l.concat([h])},[r]);u.forEach(function(l){for(var d=0;d<a.customParsers.length;d++)if(a.customParsers[d].call(a,l))return;if(l.indexOf("#EXT")!==0){a.trigger("data",{type:"comment",text:l.slice(1)});return}if(l=l.replace("\r",""),s=/^#EXTM3U/.exec(l),s){a.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(l),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),a.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),a.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),a.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(l),s){o=vt(Cv(s[1]),{type:"tag",tagType:"byterange"}),a.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(l),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(l),s){if(o={type:"tag",tagType:"map"},s[1]){var h=hr(s[1]);h.URI&&(o.uri=h.URI),h.BYTERANGE&&(o.byterange=Cv(h.BYTERANGE))}a.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(l),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=hr(s[1]),o.attributes.RESOLUTION){var p=o.attributes.RESOLUTION.split("x"),_={};p[0]&&(_.width=parseInt(p[0],10)),p[1]&&(_.height=parseInt(p[1],10)),o.attributes.RESOLUTION=_}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}a.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(l),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=hr(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(l),s){a.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(l),s){a.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(l),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),a.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(l),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=hr(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),a.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(l),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=hr(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",a.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=hr(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(TN)),a.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=hr(s[1]),["DURATION"].forEach(function(D){o.attributes.hasOwnProperty(D)&&(o.attributes[D]=parseFloat(o.attributes[D]))}),["INDEPENDENT","GAP"].forEach(function(D){o.attributes.hasOwnProperty(D)&&(o.attributes[D]=/YES/.test(o.attributes[D]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=Cv(o.attributes.BYTERANGE)),a.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=hr(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(D){o.attributes.hasOwnProperty(D)&&(o.attributes[D]=parseFloat(o.attributes[D]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(D){o.attributes.hasOwnProperty(D)&&(o.attributes[D]=/YES/.test(o.attributes[D]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=hr(s[1]),["PART-TARGET"].forEach(function(D){o.attributes.hasOwnProperty(D)&&(o.attributes[D]=parseFloat(o.attributes[D]))}),a.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=hr(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(D){if(o.attributes.hasOwnProperty(D)){o.attributes[D]=parseInt(o.attributes[D],10);var C=D==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[C]=o.attributes[D],delete o.attributes[D]}}),a.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=hr(s[1]),["LAST-MSN","LAST-PART"].forEach(function(D){o.attributes.hasOwnProperty(D)&&(o.attributes[D]=parseInt(o.attributes[D],10))}),a.trigger("data",o);return}a.trigger("data",{type:"tag",data:l.slice(4)})})}},t.addParser=function(r){var a=this,s=r.expression,o=r.customType,u=r.dataParser,l=r.segment;typeof u!="function"&&(u=function(h){return h}),this.customParsers.push(function(d){var h=s.exec(d);if(h)return a.trigger("data",{type:"custom",data:u(d),customType:o,segment:l}),!0})},t.addTagMapper=function(r){var a=r.expression,s=r.map,o=function(l){return a.test(l)?s(l):l};this.tagMappers.push(o)},e}(Yn),SN=function(e){return e.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})},Ro=function(e){var t={};return Object.keys(e).forEach(function(i){t[SN(i)]=e[i]}),t},wv=function(e){var t=e.serverControl,i=e.targetDuration,r=e.partTargetDuration;if(!!t){var a="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",u=i&&i*3,l=r&&r*2;i&&!t.hasOwnProperty(s)&&(t[s]=u,this.trigger("info",{message:a+" defaulting HOLD-BACK to targetDuration * 3 ("+u+")."})),u&&t[s]<u&&(this.trigger("warn",{message:a+" clamping HOLD-BACK ("+t[s]+") to targetDuration * 3 ("+u+")"}),t[s]=u),r&&!t.hasOwnProperty(o)&&(t[o]=r*3,this.trigger("info",{message:a+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[o]+")."})),r&&t[o]<l&&(this.trigger("warn",{message:a+" clamping PART-HOLD-BACK ("+t[o]+") to partTargetDuration * 2 ("+l+")."}),t[o]=l)}},aC=function(n){de(e,n);function e(){var i;i=n.call(this)||this,i.lineStream=new yN,i.parseStream=new bN,i.lineStream.pipe(i.parseStream);var r=Se(i),a=[],s={},o,u,l=!1,d=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},p="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",_=0;i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var D=0,C=0;return i.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&u&&(s.key=u),!s.timeline&&typeof _=="number"&&(s.timeline=_),i.manifest.preloadSegment=s)}),i.parseStream.on("data",function(S){var I,L;({tag:function(){({version:function(){S.version&&(this.manifest.version=S.version)},"allow-cache":function(){this.manifest.allowCache=S.allowed,"allowed"in S||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var O={};"length"in S&&(s.byterange=O,O.length=S.length,"offset"in S||(S.offset=D)),"offset"in S&&(s.byterange=O,O.offset=S.offset),D=O.offset+O.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),S.duration>0&&(s.duration=S.duration),S.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(!S.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(S.attributes.METHOD==="NONE"){u=null;return}if(!S.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(S.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:S.attributes};return}if(S.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:S.attributes.URI};return}if(S.attributes.KEYFORMAT===p){var O=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(O.indexOf(S.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(S.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),S.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(S.attributes.KEYID&&S.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:S.attributes.KEYFORMAT,keyId:S.attributes.KEYID.substring(2)},pssh:hn(S.attributes.URI.split(",")[1])};return}S.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:S.attributes.METHOD||"AES-128",uri:S.attributes.URI},typeof S.attributes.IV<"u"&&(u.iv=S.attributes.IV)},"media-sequence":function(){if(!isFinite(S.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+S.number});return}this.manifest.mediaSequence=S.number},"discontinuity-sequence":function(){if(!isFinite(S.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+S.number});return}this.manifest.discontinuitySequence=S.number,_=S.number},"playlist-type":function(){if(!/VOD|EVENT/.test(S.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+S.playlist});return}this.manifest.playlistType=S.playlistType},map:function(){o={},S.uri&&(o.uri=S.uri),S.byterange&&(o.byterange=S.byterange),u&&(o.key=u)},"stream-inf":function(){if(this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!S.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),vt(s.attributes,S.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(S.attributes&&S.attributes.TYPE&&S.attributes["GROUP-ID"]&&S.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var O=this.manifest.mediaGroups[S.attributes.TYPE];O[S.attributes["GROUP-ID"]]=O[S.attributes["GROUP-ID"]]||{},I=O[S.attributes["GROUP-ID"]],L={default:/yes/i.test(S.attributes.DEFAULT)},L.default?L.autoselect=!0:L.autoselect=/yes/i.test(S.attributes.AUTOSELECT),S.attributes.LANGUAGE&&(L.language=S.attributes.LANGUAGE),S.attributes.URI&&(L.uri=S.attributes.URI),S.attributes["INSTREAM-ID"]&&(L.instreamId=S.attributes["INSTREAM-ID"]),S.attributes.CHARACTERISTICS&&(L.characteristics=S.attributes.CHARACTERISTICS),S.attributes.FORCED&&(L.forced=/yes/i.test(S.attributes.FORCED)),I[S.attributes.NAME]=L},discontinuity:function(){_+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=S.dateTimeString,this.manifest.dateTimeObject=S.dateTimeObject),s.dateTimeString=S.dateTimeString,s.dateTimeObject=S.dateTimeObject},targetduration:function(){if(!isFinite(S.duration)||S.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+S.duration});return}this.manifest.targetDuration=S.duration,wv.call(this,this.manifest)},start:function(){if(!S.attributes||isNaN(S.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:S.attributes["TIME-OFFSET"],precise:S.attributes.PRECISE}},"cue-out":function(){s.cueOut=S.data},"cue-out-cont":function(){s.cueOutCont=S.data},"cue-in":function(){s.cueIn=S.data},skip:function(){this.manifest.skip=Ro(S.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",S.attributes,["SKIPPED-SEGMENTS"])},part:function(){var O=this;l=!0;var K=this.manifest.segments.length,z=Ro(S.attributes);s.parts=s.parts||[],s.parts.push(z),z.byterange&&(z.byterange.hasOwnProperty("offset")||(z.byterange.offset=C),C=z.byterange.offset+z.byterange.length);var V=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+V+" for segment #"+K,S.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(J,Q){J.hasOwnProperty("lastPart")||O.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+Q+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var O=this.manifest.serverControl=Ro(S.attributes);O.hasOwnProperty("canBlockReload")||(O.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),wv.call(this,this.manifest),O.canSkipDateranges&&!O.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var O=this.manifest.segments.length,K=Ro(S.attributes),z=K.type&&K.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(K),K.byterange&&(K.byterange.hasOwnProperty("offset")||(K.byterange.offset=z?C:0,z&&(C=K.byterange.offset+K.byterange.length)));var V=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+V+" for segment #"+O,S.attributes,["TYPE","URI"]),!!K.type)for(var J=0;J<s.preloadHints.length-1;J++){var Q=s.preloadHints[J];!Q.type||Q.type===K.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+V+" for segment #"+O+" has the same TYPE "+K.type+" as preload hint #"+J})}},"rendition-report":function(){var O=Ro(S.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(O);var K=this.manifest.renditionReports.length-1,z=["LAST-MSN","URI"];l&&z.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+K,S.attributes,z)},"part-inf":function(){this.manifest.partInf=Ro(S.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",S.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),wv.call(this,this.manifest)}}[S.tagType]||d).call(r)},uri:function(){s.uri=S.uri,a.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),u&&(s.key=u),s.timeline=_,o&&(s.map=o),C=0,s={}},comment:function(){},custom:function(){S.segment?(s.custom=s.custom||{},s.custom[S.customType]=S.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[S.customType]=S.data)}})[S.type].call(r)}),i}var t=e.prototype;return t.warnOnMissingAttributes_=function(r,a,s){var o=[];s.forEach(function(u){a.hasOwnProperty(u)||o.push(u)}),o.length&&this.trigger("warn",{message:r+" lacks required attribute(s): "+o.join(", ")})},t.push=function(r){this.lineStream.push(r)},t.end=function(){this.lineStream.push(`
`),this.trigger("end")},t.addParser=function(r){this.parseStream.addParser(r)},t.addTagMapper=function(r){this.parseStream.addTagMapper(r)},e}(Yn);var vf=Le(Ht()),ts={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},DN=["video","audio","text"],sC=["Video","Audio","Text"],Av=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,r){var a=("00"+Number(i).toString(16)).slice(-2),s=("00"+Number(r).toString(16)).slice(-2);return"avc1."+a+"00"+s})};var fr=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(r){r=r.trim();var a;DN.forEach(function(s){var o=ts[s].exec(r.toLowerCase());if(!(!o||o.length<=1)){a=s;var u=r.substring(0,o[1].length),l=r.replace(u,"");i.push({type:u,details:l,mediaType:s})}}),a||i.push({type:r,details:"",mediaType:"unknown"})}),i},oC=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var r in i){var a=i[r];if(a.default&&a.playlists)return fr(a.playlists[0].attributes.CODECS)}return null};var kv=function(e){return e===void 0&&(e=""),ts.audio.test(e.trim().toLowerCase())},EN=function(e){return e===void 0&&(e=""),ts.text.test(e.trim().toLowerCase())},Mo=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(a){return Av(a.trim())}),i="video";t.length===1&&kv(t[0])?i="audio":t.length===1&&EN(t[0])&&(i="application");var r="mp4";return t.every(function(a){return ts.mp4.test(a)})?r="mp4":t.every(function(a){return ts.webm.test(a)})?r="webm":t.every(function(a){return ts.ogg.test(a)})&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},Vl=function(e){return e===void 0&&(e=""),vf.default.MediaSource&&vf.default.MediaSource.isTypeSupported&&vf.default.MediaSource.isTypeSupported(Mo(e))||!1},_f=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<sC.length;i++){var r=sC[i];if(ts["muxer"+r].test(t))return!0}return!1})},Iv="mp4a.40.2",uC="avc1.4d400d";var CN=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,wN=/^application\/dash\+xml/i,Pv=function(e){return CN.test(e)?"hls":wN.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null};var lC=Le(Ht());var AN=function(e){return e.toString(2).length},kN=function(e){return Math.ceil(AN(e)/8)};var Ov=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},IN=function(e){return Ov(e)},_e=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!IN(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))};var Bt=lC.default.BigInt||Number,Fv=[Bt("0x1"),Bt("0x100"),Bt("0x10000"),Bt("0x1000000"),Bt("0x100000000"),Bt("0x10000000000"),Bt("0x1000000000000"),Bt("0x100000000000000"),Bt("0x10000000000000000")],M$=function(){var n=new Uint16Array([65484]),e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"}();var Lv=function(e,t){var i=t===void 0?{}:t,r=i.signed,a=r===void 0?!1:r,s=i.le,o=s===void 0?!1:s;e=_e(e);var u=o?"reduce":"reduceRight",l=e[u]?e[u]:Array.prototype[u],d=l.call(e,function(p,_,D){var C=o?D:Math.abs(D+1-e.length);return p+Bt(_)*Fv[C]},Bt(0));if(a){var h=Fv[e.length]/Bt(2)-Bt(1);d=Bt(d),d>h&&(d-=h,d-=h,d-=Bt(2))}return Number(d)},dC=function(e,t){var i=t===void 0?{}:t,r=i.le,a=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Bt(e);for(var s=kN(e),o=new Uint8Array(new ArrayBuffer(s)),u=0;u<s;u++){var l=a?u:Math.abs(u+1-o.length);o[l]=Number(e/Fv[u]&Bt(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=u===0?1:2)}return o},Rv=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,_e(e));try{return decodeURIComponent(escape(t))}catch{}return t},yf=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i},cC=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return _e(t[0]);var r=t.reduce(function(o,u,l){return o+(u.byteLength||u.length)},0),a=new Uint8Array(r),s=0;return t.forEach(function(o){o=_e(o),a.set(o,s),s+=o.byteLength}),a},Xe=function(e,t,i){var r=i===void 0?{}:i,a=r.offset,s=a===void 0?0:a,o=r.mask,u=o===void 0?[]:o;e=_e(e),t=_e(t);var l=t.every?t.every:Array.prototype.every;return t.length&&e.length-s>=t.length&&l.call(t,function(d,h){var p=u[h]?u[h]&e[s+h]:e[s+h];return d===p})};var si=Le(Ht());var yC=Le(Rg());var hC=function(e){return!!e&&typeof e=="object"},oi=function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(function(r,a){return typeof a!="object"||Object.keys(a).forEach(function(s){Array.isArray(r[s])&&Array.isArray(a[s])?r[s]=r[s].concat(a[s]):hC(r[s])&&hC(a[s])?r[s]=n(r[s],a[s]):r[s]=a[s]}),r},{})},TC=function(e){return Object.keys(e).map(function(t){return e[t]})},PN=function(e,t){for(var i=[],r=e;r<t;r++)i.push(r);return i},Tf=function(e){return e.reduce(function(t,i){return t.concat(i)},[])},xC=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},FN=function(e,t){return e.reduce(function(i,r,a){return r[t]&&i.push(a),i},[])},Nv=function(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return i;return-1},ON=function(e,t){return TC(e.reduce(function(i,r){return r.forEach(function(a){i[t(a)]=a}),i},{}))},Bo={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Wl=function(e){var t=e.baseUrl,i=t===void 0?"":t,r=e.source,a=r===void 0?"":r,s=e.range,o=s===void 0?"":s,u=e.indexRange,l=u===void 0?"":u,d={uri:a,resolvedUri:Dr(i||"",a)};if(o||l){var h=o||l,p=h.split("-"),_=si.default.BigInt?si.default.BigInt(p[0]):parseInt(p[0],10),D=si.default.BigInt?si.default.BigInt(p[1]):parseInt(p[1],10);_<Number.MAX_SAFE_INTEGER&&typeof _=="bigint"&&(_=Number(_)),D<Number.MAX_SAFE_INTEGER&&typeof D=="bigint"&&(D=Number(D));var C;typeof D=="bigint"||typeof _=="bigint"?C=si.default.BigInt(D)-si.default.BigInt(_)+si.default.BigInt(1):C=D-_+1,typeof C=="bigint"&&C<Number.MAX_SAFE_INTEGER&&(C=Number(C)),d.byterange={length:C,offset:_}}return d},LN=function(e){var t;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=si.default.BigInt(e.offset)+si.default.BigInt(e.length)-si.default.BigInt(1):t=e.offset+e.length-1,e.offset+"-"+t},fC=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},RN={static:function(e){var t=e.duration,i=e.timescale,r=i===void 0?1:i,a=e.sourceDuration,s=e.periodDuration,o=fC(e.endNumber),u=t/r;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/u}:{start:0,end:a/u}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,r=e.availabilityStartTime,a=e.timescale,s=a===void 0?1:a,o=e.duration,u=e.periodStart,l=u===void 0?0:u,d=e.minimumUpdatePeriod,h=d===void 0?0:d,p=e.timeShiftBufferDepth,_=p===void 0?1/0:p,D=fC(e.endNumber),C=(t+i)/1e3,S=r+l,I=C+h,L=I-S,G=Math.ceil(L*s/o),M=Math.floor((C-S-_)*s/o),O=Math.floor((C-S)*s/o);return{start:Math.max(0,M),end:typeof D=="number"?D:Math.min(G,O)}}},MN=function(e){return function(t){var i=e.duration,r=e.timescale,a=r===void 0?1:r,s=e.periodStart,o=e.startNumber,u=o===void 0?1:o;return{number:u+t,duration:i/a,timeline:s,time:t*i}}},Bv=function(e){var t=e.type,i=e.duration,r=e.timescale,a=r===void 0?1:r,s=e.periodDuration,o=e.sourceDuration,u=RN[t](e),l=u.start,d=u.end,h=PN(l,d).map(MN(e));if(t==="static"){var p=h.length-1,_=typeof s=="number"?s:o;h[p].duration=_-i/a*p}return h},bC=function(e){var t=e.baseUrl,i=e.initialization,r=i===void 0?{}:i,a=e.sourceDuration,s=e.indexRange,o=s===void 0?"":s,u=e.periodStart,l=e.presentationTime,d=e.number,h=d===void 0?0:d,p=e.duration;if(!t)throw new Error(Bo.NO_BASE_URL);var _=Wl({baseUrl:t,source:r.sourceURL,range:r.range}),D=Wl({baseUrl:t,source:t,indexRange:o});if(D.map=_,p){var C=Bv(e);C.length&&(D.duration=C[0].duration,D.timeline=C[0].timeline)}else a&&(D.duration=a,D.timeline=u);return D.presentationTime=l||u,D.number=h,[D]},xf=function(e,t,i){var r=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,u=o.offset+o.length,l=t.timescale,d=t.references.filter(function(J){return J.referenceType!==1}),h=[],p=e.endList?"static":"dynamic",_=e.sidx.timeline,D=_,C=e.mediaSequence||0,S;typeof t.firstOffset=="bigint"?S=si.default.BigInt(u)+t.firstOffset:S=u+t.firstOffset;for(var I=0;I<d.length;I++){var L=t.references[I],G=L.referencedSize,M=L.subsegmentDuration,O=void 0;typeof S=="bigint"?O=S+si.default.BigInt(G)-si.default.BigInt(1):O=S+G-1;var K=S+"-"+O,z={baseUrl:i,timescale:l,timeline:s,periodStart:_,presentationTime:D,number:C,duration:M,sourceDuration:a,indexRange:K,type:p},V=bC(z)[0];r&&(V.map=r),h.push(V),typeof S=="bigint"?S+=si.default.BigInt(G):S+=G,D+=M/l,C++}return e.segments=h,e},NN=["AUDIO","SUBTITLES"],BN=1/60,SC=function(e){return ON(e,function(t){var i=t.timeline;return i}).sort(function(t,i){return t.timeline>i.timeline?1:-1})},UN=function(e,t){for(var i=0;i<e.length;i++)if(e[i].attributes.NAME===t)return e[i];return null},pC=function(e){var t=[];return Uc(e,NN,function(i,r,a,s){t=t.concat(i.playlists||[])}),t},mC=function(e){var t=e.playlist,i=e.mediaSequence;t.mediaSequence=i,t.segments.forEach(function(r,a){r.number=t.mediaSequence+a})},jN=function(e){var t=e.oldPlaylists,i=e.newPlaylists,r=e.timelineStarts;i.forEach(function(a){a.discontinuitySequence=Nv(r,function(d){var h=d.timeline;return h===a.timeline});var s=UN(t,a.attributes.NAME);if(!!s&&!a.sidx){var o=a.segments[0],u=Nv(s.segments,function(d){return Math.abs(d.presentationTime-o.presentationTime)<BN});if(u===-1){mC({playlist:a,mediaSequence:s.mediaSequence+s.segments.length}),a.segments[0].discontinuity=!0,a.discontinuityStarts.unshift(0),(!s.segments.length&&a.timeline>s.timeline||s.segments.length&&a.timeline>s.segments[s.segments.length-1].timeline)&&a.discontinuitySequence--;return}var l=s.segments[u];l.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,a.discontinuityStarts.unshift(0),a.discontinuitySequence--),mC({playlist:a,mediaSequence:s.segments[u].number})}})},HN=function(e){var t=e.oldManifest,i=e.newManifest,r=t.playlists.concat(pC(t)),a=i.playlists.concat(pC(i));return i.timelineStarts=SC([t.timelineStarts,i.timelineStarts]),jN({oldPlaylists:r,newPlaylists:a,timelineStarts:i.timelineStarts}),i},ql=function(e){return e&&e.uri+"-"+LN(e.byterange)},Mv=function(e){var t=TC(e.reduce(function(i,r){var a=r.attributes.id+(r.attributes.lang||"");if(!i[a])i[a]=r,i[a].attributes.timelineStarts=[];else{if(r.segments){var s;r.segments[0]&&(r.segments[0].discontinuity=!0),(s=i[a].segments).push.apply(s,r.segments)}r.attributes.contentProtection&&(i[a].attributes.contentProtection=r.attributes.contentProtection)}return i[a].attributes.timelineStarts.push({start:r.attributes.periodStart,timeline:r.attributes.periodStart}),i},{}));return t.map(function(i){return i.discontinuityStarts=FN(i.segments||[],"discontinuity"),i})},Uv=function(e,t){var i=ql(e.sidx),r=i&&t[i]&&t[i].sidx;return r&&xf(e,r,e.sidx.resolvedUri),e},$N=function(e,t){if(t===void 0&&(t={}),!Object.keys(t).length)return e;for(var i in e)e[i]=Uv(e[i],t);return e},VN=function(e,t){var i,r=e.attributes,a=e.segments,s=e.sidx,o=e.mediaSequence,u=e.discontinuitySequence,l=e.discontinuityStarts,d={attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuitySequence:u,discontinuityStarts:l,timelineStarts:r.timelineStarts,mediaSequence:o,segments:a};return r.contentProtection&&(d.contentProtection=r.contentProtection),s&&(d.sidx=s),t&&(d.attributes.AUDIO="audio",d.attributes.SUBTITLES="subs"),d},WN=function(e){var t,i=e.attributes,r=e.segments,a=e.mediaSequence,s=e.discontinuityStarts,o=e.discontinuitySequence;typeof r>"u"&&(r=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var u=(t={NAME:i.id,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t);return i.codecs&&(u.CODECS=i.codecs),{attributes:u,uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:a,segments:r}},qN=function(e,t,i){t===void 0&&(t={}),i===void 0&&(i=!1);var r,a=e.reduce(function(o,u){var l=u.attributes.role&&u.attributes.role.value||"",d=u.attributes.lang||"",h=u.attributes.label||"main";if(d&&!u.attributes.label){var p=l?" ("+l+")":"";h=""+u.attributes.lang+p}o[h]||(o[h]={language:d,autoselect:!0,default:l==="main",playlists:[],uri:""});var _=Uv(VN(u,i),t);return o[h].playlists.push(_),typeof r>"u"&&l==="main"&&(r=u,r.default=!0),o},{});if(!r){var s=Object.keys(a)[0];a[s].default=!0}return a},GN=function(e,t){return t===void 0&&(t={}),e.reduce(function(i,r){var a=r.attributes.lang||"text";return i[a]||(i[a]={language:a,default:!1,autoselect:!1,playlists:[],uri:""}),i[a].playlists.push(Uv(WN(r),t)),i},{})},zN=function(e){return e.reduce(function(t,i){return i&&i.forEach(function(r){var a=r.channel,s=r.language;t[s]={autoselect:!1,default:!1,instreamId:a,language:s},r.hasOwnProperty("aspectRatio")&&(t[s].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(t[s].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(t[s]["3D"]=r["3D"])}),t},{})},KN=function(e){var t,i=e.attributes,r=e.segments,a=e.sidx,s=e.discontinuityStarts,o={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuityStarts:s,timelineStarts:i.timelineStarts,segments:r};return i.frameRate&&(o.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(o.contentProtection=i.contentProtection),a&&(o.sidx=a),o},XN=function(e){var t=e.attributes;return t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video"},YN=function(e){var t=e.attributes;return t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio"},QN=function(e){var t=e.attributes;return t.mimeType==="text/vtt"||t.contentType==="text"},JN=function(e,t){e.forEach(function(i){i.mediaSequence=0,i.discontinuitySequence=Nv(t,function(r){var a=r.timeline;return a===i.timeline}),i.segments&&i.segments.forEach(function(r,a){r.number=a})})},gC=function(e){return e?Object.keys(e).reduce(function(t,i){var r=e[i];return t.concat(r.playlists)},[]):[]},ZN=function(e){var t,i=e.dashPlaylists,r=e.locations,a=e.sidxMapping,s=a===void 0?{}:a,o=e.previousManifest;if(!i.length)return{};var u=i[0].attributes,l=u.sourceDuration,d=u.type,h=u.suggestedPresentationDelay,p=u.minimumUpdatePeriod,_=Mv(i.filter(XN)).map(KN),D=Mv(i.filter(YN)),C=Mv(i.filter(QN)),S=i.map(function(z){return z.attributes.captionServices}).filter(Boolean),I={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:l,playlists:$N(_,s)};p>=0&&(I.minimumUpdatePeriod=p*1e3),r&&(I.locations=r),d==="dynamic"&&(I.suggestedPresentationDelay=h);var L=I.playlists.length===0,G=D.length?qN(D,s,L):null,M=C.length?GN(C,s):null,O=_.concat(gC(G),gC(M)),K=O.map(function(z){var V=z.timelineStarts;return V});return I.timelineStarts=SC(K),JN(O,I.timelineStarts),G&&(I.mediaGroups.AUDIO.audio=G),M&&(I.mediaGroups.SUBTITLES.subs=M),S.length&&(I.mediaGroups["CLOSED-CAPTIONS"].cc=zN(S)),o?HN({oldManifest:o,newManifest:I}):I},eB=function(e,t,i){var r=e.NOW,a=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,u=o===void 0?1:o,l=e.periodStart,d=l===void 0?0:l,h=e.minimumUpdatePeriod,p=h===void 0?0:h,_=(r+a)/1e3,D=s+d,C=_+p,S=C-D;return Math.ceil((S*u-t)/i)},DC=function(e,t){for(var i=e.type,r=e.minimumUpdatePeriod,a=r===void 0?0:r,s=e.media,o=s===void 0?"":s,u=e.sourceDuration,l=e.timescale,d=l===void 0?1:l,h=e.startNumber,p=h===void 0?1:h,_=e.periodStart,D=[],C=-1,S=0;S<t.length;S++){var I=t[S],L=I.d,G=I.r||0,M=I.t||0;C<0&&(C=M),M&&M>C&&(C=M);var O=void 0;if(G<0){var K=S+1;K===t.length?i==="dynamic"&&a>0&&o.indexOf("$Number$")>0?O=eB(e,C,L):O=(u*d-C)/L:O=(t[K].t-C)/L}else O=G+1;for(var z=p+D.length+O,V=p+D.length;V<z;)D.push({number:V,duration:L/d,time:C,timeline:_}),C+=L,V++}return D},tB=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,iB=function(e){return function(t,i,r,a){if(t==="$$")return"$";if(typeof e[i]>"u")return t;var s=""+e[i];return i==="RepresentationID"||(r?a=parseInt(a,10):a=1,s.length>=a)?s:""+new Array(a-s.length+1).join("0")+s}},vC=function(e,t){return e.replace(tB,iB(t))},rB=function(e,t){return!e.duration&&!t?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?Bv(e):DC(e,t)},nB=function(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,a=r===void 0?{sourceURL:"",range:""}:r,s=Wl({baseUrl:e.baseUrl,source:vC(a.sourceURL,i),range:a.range}),o=rB(e,t);return o.map(function(u){i.Number=u.number,i.Time=u.time;var l=vC(e.media||"",i),d=e.timescale||1,h=e.presentationTimeOffset||0,p=e.periodStart+(u.time-h)/d,_={uri:l,timeline:u.timeline,duration:u.duration,resolvedUri:Dr(e.baseUrl||"",l),map:s,number:u.number,presentationTime:p};return _})},aB=function(e,t){var i=e.baseUrl,r=e.initialization,a=r===void 0?{}:r,s=Wl({baseUrl:i,source:a.sourceURL,range:a.range}),o=Wl({baseUrl:i,source:t.media,range:t.mediaRange});return o.map=s,o},sB=function(e,t){var i=e.duration,r=e.segmentUrls,a=r===void 0?[]:r,s=e.periodStart;if(!i&&!t||i&&t)throw new Error(Bo.SEGMENT_TIME_UNSPECIFIED);var o=a.map(function(d){return aB(e,d)}),u;i&&(u=Bv(e)),t&&(u=DC(e,t));var l=u.map(function(d,h){if(o[h]){var p=o[h],_=e.timescale||1,D=e.presentationTimeOffset||0;return p.timeline=d.timeline,p.duration=d.duration,p.number=d.number,p.presentationTime=s+(d.time-D)/_,p}}).filter(function(d){return d});return l},oB=function(e){var t=e.attributes,i=e.segmentInfo,r,a;i.template?(a=nB,r=oi(t,i.template)):i.base?(a=bC,r=oi(t,i.base)):i.list&&(a=sB,r=oi(t,i.list));var s={attributes:t};if(!a)return s;var o=a(r,i.segmentTimeline);if(r.duration){var u=r,l=u.duration,d=u.timescale,h=d===void 0?1:d;r.duration=l/h}else o.length?r.duration=o.reduce(function(p,_){return Math.max(p,Math.ceil(_.duration))},0):r.duration=0;return s.attributes=r,s.segments=o,i.base&&r.indexRange&&(s.sidx=o[0],s.segments=[]),s},uB=function(e){return e.map(oB)},St=function(e,t){return xC(e.childNodes).filter(function(i){var r=i.tagName;return r===t})},jv=function(e){return e.textContent.trim()},lB=function(e){return parseFloat(e.split("/").reduce(function(t,i){return t/i}))},No=function(e){var t=31536e3,i=30*24*60*60,r=24*60*60,a=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,u=o.exec(e);if(!u)return 0;var l=u.slice(1),d=l[0],h=l[1],p=l[2],_=l[3],D=l[4],C=l[5];return parseFloat(d||0)*t+parseFloat(h||0)*i+parseFloat(p||0)*r+parseFloat(_||0)*a+parseFloat(D||0)*s+parseFloat(C||0)},dB=function(e){var t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},_C={mediaPresentationDuration:function(e){return No(e)},availabilityStartTime:function(e){return dB(e)/1e3},minimumUpdatePeriod:function(e){return No(e)},suggestedPresentationDelay:function(e){return No(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return No(e)},start:function(e){return No(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return lB(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?No(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Kt=function(e){return e&&e.attributes?xC(e.attributes).reduce(function(t,i){var r=_C[i.name]||_C.DEFAULT;return t[i.name]=r(i.value),t},{}):{}},cB={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},bf=function(e,t){return t.length?Tf(e.map(function(i){return t.map(function(r){return Dr(i,jv(r))})})):e},Hv=function(e){var t=St(e,"SegmentTemplate")[0],i=St(e,"SegmentList")[0],r=i&&St(i,"SegmentURL").map(function(p){return oi({tag:"SegmentURL"},Kt(p))}),a=St(e,"SegmentBase")[0],s=i||t,o=s&&St(s,"SegmentTimeline")[0],u=i||a||t,l=u&&St(u,"Initialization")[0],d=t&&Kt(t);d&&l?d.initialization=l&&Kt(l):d&&d.initialization&&(d.initialization={sourceURL:d.initialization});var h={template:d,segmentTimeline:o&&St(o,"S").map(function(p){return Kt(p)}),list:i&&oi(Kt(i),{segmentUrls:r,initialization:Kt(l)}),base:a&&oi(Kt(a),{initialization:Kt(l)})};return Object.keys(h).forEach(function(p){h[p]||delete h[p]}),h},hB=function(e,t,i){return function(r){var a=St(r,"BaseURL"),s=bf(t,a),o=oi(e,Kt(r)),u=Hv(r);return s.map(function(l){return{segmentInfo:oi(i,u),attributes:oi(o,{baseUrl:l})}})}},fB=function(e){return e.reduce(function(t,i){var r=Kt(i);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());var a=cB[r.schemeIdUri];if(a){t[a]={attributes:r};var s=St(i,"cenc:pssh")[0];if(s){var o=jv(s);t[a].pssh=o&&hn(o)}}return t},{})},pB=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var t=typeof e.value!="string"?[]:e.value.split(";");return t.map(function(r){var a,s;if(s=r,/^CC\d=/.test(r)){var o=r.split("=");a=o[0],s=o[1]}else/^CC\d$/.test(r)&&(a=r);return{channel:a,language:s}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var i=typeof e.value!="string"?[]:e.value.split(";");return i.map(function(r){var a={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(r)){var s=r.split("="),o=s[0],u=s[1],l=u===void 0?"":u;a.channel=o,a.language=r,l.split(",").forEach(function(d){var h=d.split(":"),p=h[0],_=h[1];p==="lang"?a.language=_:p==="er"?a.easyReader=Number(_):p==="war"?a.aspectRatio=Number(_):p==="3D"&&(a["3D"]=Number(_))})}else a.language=r;return a.channel&&(a.channel="SERVICE"+a.channel),a})}},mB=function(e,t,i){return function(r){var a=Kt(r),s=bf(t,St(r,"BaseURL")),o=St(r,"Role")[0],u={role:Kt(o)},l=oi(e,a,u),d=St(r,"Accessibility")[0],h=pB(Kt(d));h&&(l=oi(l,{captionServices:h}));var p=St(r,"Label")[0];if(p&&p.childNodes.length){var _=p.childNodes[0].nodeValue.trim();l=oi(l,{label:_})}var D=fB(St(r,"ContentProtection"));Object.keys(D).length&&(l=oi(l,{contentProtection:D}));var C=Hv(r),S=St(r,"Representation"),I=oi(i,C);return Tf(S.map(hB(l,s,I)))}},gB=function(e,t){return function(i,r){var a=bf(t,St(i.node,"BaseURL")),s=oi(e,{periodStart:i.attributes.start});typeof i.attributes.duration=="number"&&(s.periodDuration=i.attributes.duration);var o=St(i.node,"AdaptationSet"),u=Hv(i.node);return Tf(o.map(mB(s,a,u)))}},vB=function(e){var t=e.attributes,i=e.priorPeriodAttributes,r=e.mpdType;return typeof t.start=="number"?t.start:i&&typeof i.start=="number"&&typeof i.duration=="number"?i.start+i.duration:!i&&r==="static"?0:null},_B=function(e,t){t===void 0&&(t={});var i=t,r=i.manifestUri,a=r===void 0?"":r,s=i.NOW,o=s===void 0?Date.now():s,u=i.clientOffset,l=u===void 0?0:u,d=St(e,"Period");if(!d.length)throw new Error(Bo.INVALID_NUMBER_OF_PERIOD);var h=St(e,"Location"),p=Kt(e),_=bf([a],St(e,"BaseURL"));p.type=p.type||"static",p.sourceDuration=p.mediaPresentationDuration||0,p.NOW=o,p.clientOffset=l,h.length&&(p.locations=h.map(jv));var D=[];return d.forEach(function(C,S){var I=Kt(C),L=D[S-1];I.start=vB({attributes:I,priorPeriodAttributes:L?L.attributes:null,mpdType:p.type}),D.push({node:C,attributes:I})}),{locations:p.locations,representationInfo:Tf(D.map(gB(p,_)))}},EC=function(e){if(e==="")throw new Error(Bo.DASH_EMPTY_MANIFEST);var t=new yC.DOMParser,i,r;try{i=t.parseFromString(e,"application/xml"),r=i&&i.documentElement.tagName==="MPD"?i.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(Bo.DASH_INVALID_XML);return r},yB=function(e){var t=St(e,"UTCTiming")[0];if(!t)return null;var i=Kt(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Bo.UNSUPPORTED_UTC_TIMING_SCHEME)}return i};var CC=function(e,t){t===void 0&&(t={});var i=_B(EC(e),t),r=uB(i.representationInfo);return ZN({dashPlaylists:r,locations:i.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},wC=function(e){return yB(EC(e))};var Ww=Le(OC());var bB=_e([73,68,51]),SB=function(e,t){t===void 0&&(t=0),e=_e(e);var i=e[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],a=(i&16)>>4;return a?r+20:r+10},is=function n(e,t){return t===void 0&&(t=0),e=_e(e),e.length-t<10||!Xe(e,bB,{offset:t})?t:(t+=SB(e,t),n(e,t))};var X$=new Uint8Array([79,112,117,115,72,101,97,100]);var RC=function(e){return typeof e=="string"?yf(e):e},AB=function(e){return Array.isArray(e)?e.map(function(t){return RC(t)}):[RC(e)]},$v,MC=function(e){e=_e(e);for(var t=[],i=0;e.length>i;){var r=e[i],a=0,s=0;s++;var o=e[s];for(s++;o&128;)a=(o&127)<<7,o=e[s],s++;a+=o&127;for(var u=0;u<$v.length;u++){var l=$v[u],d=l.id,h=l.parser;if(r===d){t.push(h(e.subarray(s,s+a)));break}}i+=a+s}return t};$v=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(t.flags&128&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.flags&64){var i=e[t.size];t.url=Rv(e.subarray(t.size+1,t.size+1+i)),t.size+=i}return t.flags&32&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=MC(e.subarray(t.size))||[],t}},{id:4,parser:function(e){var t={tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:MC(e.subarray(13))};return t}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var NC=function n(e,t,i){i===void 0&&(i=!1),t=AB(t),e=_e(e);var r=[];if(!t.length)return r;for(var a=0;a<e.length;){var s=(e[a]<<24|e[a+1]<<16|e[a+2]<<8|e[a+3])>>>0,o=e.subarray(a+4,a+8);if(s===0)break;var u=a+s;if(u>e.length){if(i)break;u=e.length}var l=e.subarray(a+8,u);Xe(o,t[0])&&(t.length===1?r.push(l):r.push.apply(r,n(l,t.slice(1),i))),a=u}return r};var Gl={EBML:_e([26,69,223,163]),DocType:_e([66,130]),Segment:_e([24,83,128,103]),SegmentInfo:_e([21,73,169,102]),Tracks:_e([22,84,174,107]),Track:_e([174]),TrackNumber:_e([215]),DefaultDuration:_e([35,227,131]),TrackEntry:_e([174]),TrackType:_e([131]),FlagDefault:_e([136]),CodecID:_e([134]),CodecPrivate:_e([99,162]),VideoTrack:_e([224]),AudioTrack:_e([225]),Cluster:_e([31,67,182,117]),Timestamp:_e([231]),TimestampScale:_e([42,215,177]),BlockGroup:_e([160]),BlockDuration:_e([155]),Block:_e([161]),SimpleBlock:_e([163])},Vv=[128,64,32,16,8,4,2,1],kB=function(e){for(var t=1,i=0;i<Vv.length&&!(e&Vv[i]);i++)t++;return t},Sf=function(e,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var a=kB(e[t]),s=e.subarray(t,t+a);return i&&(s=Array.prototype.slice.call(e,t,t+a),s[0]^=Vv[a-1]),{length:a,value:Lv(s,{signed:r}),bytes:s}},BC=function n(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return n(t)}):typeof e=="number"?dC(e):e},IB=function(e){return Array.isArray(e)?e.map(function(t){return BC(t)}):[BC(e)]},PB=function n(e,t,i){if(i>=t.length)return t.length;var r=Sf(t,i,!1);if(Xe(e.bytes,r.bytes))return i;var a=Sf(t,i+r.length);return n(e,t,i+a.length+a.value+r.length)},Wv=function n(e,t){t=IB(t),e=_e(e);var i=[];if(!t.length)return i;for(var r=0;r<e.length;){var a=Sf(e,r,!1),s=Sf(e,r+a.length),o=r+a.length+s.length;s.value===127&&(s.value=PB(a,e,o),s.value!==e.length&&(s.value-=o));var u=o+s.value>e.length?e.length:o+s.value,l=e.subarray(o,u);Xe(t[0],a.bytes)&&(t.length===1?i.push(l):i=i.concat(n(l,t.slice(1))));var d=a.length+s.length+l.length;r+=d}return i};var FB=_e([0,0,0,1]),OB=_e([0,0,1]),LB=_e([0,0,3]),RB=function(e){for(var t=[],i=1;i<e.length-2;)Xe(e.subarray(i,i+3),LB)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var r=e.length-t.length,a=new Uint8Array(r),s=0;for(i=0;i<r;s++,i++)s===t[0]&&(s++,t.shift()),a[i]=e[s];return a},UC=function(e,t,i,r){r===void 0&&(r=1/0),e=_e(e),i=[].concat(i);for(var a=0,s,o=0;a<e.length&&(o<r||s);){var u=void 0;if(Xe(e.subarray(a),FB)?u=4:Xe(e.subarray(a),OB)&&(u=3),!u){a++;continue}if(o++,s)return RB(e.subarray(s,a));var l=void 0;t==="h264"?l=e[a+u]&31:t==="h265"&&(l=e[a+u]>>1&63),i.indexOf(l)!==-1&&(s=a+u),a+=u+(t==="h264"?1:2)}return e.subarray(0,0)},jC=function(e,t,i){return UC(e,"h264",t,i)},HC=function(e,t,i){return UC(e,"h265",t,i)};var ui={webm:_e([119,101,98,109]),matroska:_e([109,97,116,114,111,115,107,97]),flac:_e([102,76,97,67]),ogg:_e([79,103,103,83]),ac3:_e([11,119]),riff:_e([82,73,70,70]),avi:_e([65,86,73]),wav:_e([87,65,86,69]),"3gp":_e([102,116,121,112,51,103]),mp4:_e([102,116,121,112]),fmp4:_e([115,116,121,112]),mov:_e([102,116,121,112,113,116]),moov:_e([109,111,111,118]),moof:_e([109,111,111,102])},Uo={aac:function(e){var t=is(e);return Xe(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=is(e);return Xe(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Wv(e,[Gl.EBML,Gl.DocType])[0];return Xe(t,ui.webm)},mkv:function(e){var t=Wv(e,[Gl.EBML,Gl.DocType])[0];return Xe(t,ui.matroska)},mp4:function(e){if(Uo["3gp"](e)||Uo.mov(e))return!1;if(Xe(e,ui.mp4,{offset:4})||Xe(e,ui.fmp4,{offset:4})||Xe(e,ui.moof,{offset:4})||Xe(e,ui.moov,{offset:4}))return!0},mov:function(e){return Xe(e,ui.mov,{offset:4})},"3gp":function(e){return Xe(e,ui["3gp"],{offset:4})},ac3:function(e){var t=is(e);return Xe(e,ui.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=is(e);return Xe(e,ui.flac,{offset:t})},ogg:function(e){return Xe(e,ui.ogg)},avi:function(e){return Xe(e,ui.riff)&&Xe(e,ui.avi,{offset:8})},wav:function(e){return Xe(e,ui.riff)&&Xe(e,ui.wav,{offset:8})},h264:function(e){return jC(e,7,3).length},h265:function(e){return HC(e,[32,33],3).length}},qv=Object.keys(Uo).filter(function(n){return n!=="ts"&&n!=="h264"&&n!=="h265"}).concat(["ts","h264","h265"]);qv.forEach(function(n){var e=Uo[n];Uo[n]=function(t){return e(_e(t))}});var MB=Uo,Df=function(e){e=_e(e);for(var t=0;t<qv.length;t++){var i=qv[t];if(MB[i](e))return i}return""},$C=function(e){return NC(e,["moof"]).length>0};var sd=Le(zC());function zl(n){return zl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zl(n)}function Yv(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Kl(n){var e=typeof Map=="function"?new Map:void 0;return Kl=function(i){if(i===null||!Yv(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return da(i,arguments,zl(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),cr(r,i)},Kl(n)}var qw="7.21.3",Dn={},ca=function(e,t){return Dn[e]=Dn[e]||[],t&&(Dn[e]=Dn[e].concat(t)),Dn[e]},NB=function(e,t){ca(e,t)},Gw=function(e,t){var i=ca(e).indexOf(t);return i<=-1?!1:(Dn[e]=Dn[e].slice(),Dn[e].splice(i,1),!0)},BB=function(e,t){ca(e,[].concat(t).map(function(i){var r=function a(){return Gw(e,a),i.apply(void 0,arguments)};return r}))},Mf={prefixed:!0},Ff=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],KC=Ff[0],td;for(Xl=0;Xl<Ff.length;Xl++)if(Ff[Xl][1]in le.default){td=Ff[Xl];break}var Xl;if(td){for(Yl=0;Yl<td.length;Yl++)Mf[KC[Yl]]=td[Yl];Mf.prefixed=td[0]!==KC[0]}var Yl,Ei=[],UB=function(e,t){return function(i,r,a){var s=t.levels[r],o=new RegExp("^("+s+")$");if(i!=="log"&&a.unshift(i.toUpperCase()+":"),a.unshift(e+":"),Ei){Ei.push([].concat(a));var u=Ei.length-1e3;Ei.splice(0,u>0?u:0)}if(!!$.default.console){var l=$.default.console[i];!l&&i==="debug"&&(l=$.default.console.info||$.default.console.log),!(!l||!s||!o.test(i))&&l[Array.isArray(a)?"apply":"call"]($.default.console,a)}}};function zw(n){var e="info",t,i=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];t("log",e,s)};return t=UB(n,i),i.createLogger=function(r){return zw(n+": "+r)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},i.level=function(r){if(typeof r=="string"){if(!i.levels.hasOwnProperty(r))throw new Error('"'+r+'" in not a valid log level');e=r}return e},i.history=function(){return Ei?[].concat(Ei):[]},i.history.filter=function(r){return(Ei||[]).filter(function(a){return new RegExp(".*"+r+".*").test(a[0])})},i.history.clear=function(){Ei&&(Ei.length=0)},i.history.disable=function(){Ei!==null&&(Ei.length=0,Ei=null)},i.history.enable=function(){Ei===null&&(Ei=[])},i.error=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t("error",e,a)},i.warn=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t("warn",e,a)},i.debug=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t("debug",e,a)},i}var Ie=zw("VIDEOJS"),Kw=Ie.createLogger,jB=Object.prototype.toString,Xw=function(e){return An(e)?Object.keys(e):[]};function Wo(n,e){Xw(n).forEach(function(t){return e(n[t],t)})}function HB(n,e,t){return t===void 0&&(t=0),Xw(n).reduce(function(i,r){return e(i,n[r],r)},t)}function yt(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Object.assign?vt.apply(void 0,[n].concat(t)):(t.forEach(function(r){!r||Wo(r,function(a,s){n[s]=a})}),n)}function An(n){return!!n&&typeof n=="object"}function od(n){return An(n)&&jB.call(n)==="[object Object]"&&n.constructor===Object}function ud(n,e){if(!n||!e)return"";if(typeof $.default.getComputedStyle=="function"){var t;try{t=$.default.getComputedStyle(n)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var Lt=$.default.navigator&&$.default.navigator.userAgent||"",XC=/AppleWebKit\/([\d.]+)/i.exec(Lt),$B=XC?parseFloat(XC.pop()):null,Yw=/iPod/i.test(Lt),VB=function(){var n=Lt.match(/OS (\d+)_/i);return n&&n[1]?n[1]:null}(),In=/Android/i.test(Lt),L_=function(){var n=Lt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!n)return null;var e=n[1]&&parseFloat(n[1]),t=n[2]&&parseFloat(n[2]);return e&&t?parseFloat(n[1]+"."+n[2]):e||null}(),Qw=In&&L_<5&&$B<537,Jw=/Firefox/i.test(Lt),hd=/Edg/i.test(Lt),Pn=!hd&&(/Chrome/i.test(Lt)||/CriOS/i.test(Lt)),Zw=function(){var n=Lt.match(/(Chrome|CriOS)\/(\d+)/);return n&&n[2]?parseFloat(n[2]):null}(),fd=function(){var n=/MSIE\s(\d+)\.\d/.exec(Lt),e=n&&parseFloat(n[1]);return!e&&/Trident\/7.0/i.test(Lt)&&/rv:11.0/.test(Lt)&&(e=11),e}(),R_=/Safari/i.test(Lt)&&!Pn&&!In&&!hd,eA=/Windows/i.test(Lt),zo=Boolean(Zo()&&("ontouchstart"in $.default||$.default.navigator.maxTouchPoints||$.default.DocumentTouch&&$.default.document instanceof $.default.DocumentTouch)),M_=/iPad/i.test(Lt)||R_&&zo&&!/iPhone/i.test(Lt),N_=/iPhone/i.test(Lt)&&!M_,hi=N_||M_||Yw,Zf=(R_||hi)&&!Pn,WB=Object.freeze({__proto__:null,IS_IPOD:Yw,IOS_VERSION:VB,IS_ANDROID:In,ANDROID_VERSION:L_,IS_NATIVE_ANDROID:Qw,IS_FIREFOX:Jw,IS_EDGE:hd,IS_CHROME:Pn,CHROME_VERSION:Zw,IE_VERSION:fd,IS_SAFARI:R_,IS_WINDOWS:eA,TOUCH_ENABLED:zo,IS_IPAD:M_,IS_IPHONE:N_,IS_IOS:hi,IS_ANY_SAFARI:Zf});function YC(n){return typeof n=="string"&&Boolean(n.trim())}function tA(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function qB(n){return new RegExp("(^|\\s)"+n+"($|\\s)")}function Zo(){return le.default===$.default.document}function eu(n){return An(n)&&n.nodeType===1}function iA(){try{return $.default.parent!==$.default.self}catch{return!0}}function rA(n){return function(e,t){if(!YC(e))return le.default[n](null);YC(t)&&(t=le.default.querySelector(t));var i=eu(t)?t:le.default;return i[n]&&i[n](e)}}function He(n,e,t,i){n===void 0&&(n="div"),e===void 0&&(e={}),t===void 0&&(t={});var r=le.default.createElement(n);return Object.getOwnPropertyNames(e).forEach(function(a){var s=e[a];a.indexOf("aria-")!==-1||a==="role"||a==="type"?(Ie.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+a+" to "+s+".")),r.setAttribute(a,s)):a==="textContent"?cs(r,s):(r[a]!==s||a==="tabIndex")&&(r[a]=s)}),Object.getOwnPropertyNames(t).forEach(function(a){r.setAttribute(a,t[a])}),i&&U_(r,i),r}function cs(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function f_(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function us(n,e){return tA(e),n.classList?n.classList.contains(e):qB(e).test(n.className)}function Cn(n,e){return n.classList?n.classList.add(e):us(n,e)||(n.className=(n.className+" "+e).trim()),n}function pd(n,e){return n?(n.classList?n.classList.remove(e):(tA(e),n.className=n.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),n):(Ie.warn("removeClass was called with an element that doesn't exist"),null)}function nA(n,e,t){var i=us(n,e);if(typeof t=="function"&&(t=t(n,e)),typeof t!="boolean"&&(t=!i),t!==i)return t?Cn(n,e):pd(n,e),n}function aA(n,e){Object.getOwnPropertyNames(e).forEach(function(t){var i=e[t];i===null||typeof i>"u"||i===!1?n.removeAttribute(t):n.setAttribute(t,i===!0?"":i)})}function Sn(n){var e={},t=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(n&&n.attributes&&n.attributes.length>0)for(var i=n.attributes,r=i.length-1;r>=0;r--){var a=i[r].name,s=i[r].value;(typeof n[a]=="boolean"||t.indexOf(","+a+",")!==-1)&&(s=s!==null),e[a]=s}return e}function sA(n,e){return n.getAttribute(e)}function Ko(n,e,t){n.setAttribute(e,t)}function ep(n,e){n.removeAttribute(e)}function oA(){le.default.body.focus(),le.default.onselectstart=function(){return!1}}function uA(){le.default.onselectstart=function(){return!0}}function Xo(n){if(n&&n.getBoundingClientRect&&n.parentNode){var e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(i){e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(ud(n,"height"))),t.width||(t.width=parseFloat(ud(n,"width"))),t}}function ld(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=n.offsetWidth,t=n.offsetHeight,i=0,r=0;n.offsetParent&&n!==le.default[Mf.fullscreenElement];)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return{left:i,top:r,width:e,height:t}}function tp(n,e){var t={x:0,y:0};if(hi)for(var i=n;i&&i.nodeName.toLowerCase()!=="html";){var r=ud(i,"transform");if(/^matrix/.test(r)){var a=r.slice(7,-1).split(/,\s/).map(Number);t.x+=a[4],t.y+=a[5]}else if(/^matrix3d/.test(r)){var s=r.slice(9,-1).split(/,\s/).map(Number);t.x+=s[12],t.y+=s[13]}i=i.parentNode}var o={},u=ld(e.target),l=ld(n),d=l.width,h=l.height,p=e.offsetY-(l.top-u.top),_=e.offsetX-(l.left-u.left);return e.changedTouches&&(_=e.changedTouches[0].pageX-l.left,p=e.changedTouches[0].pageY+l.top,hi&&(_-=t.x,p-=t.y)),o.y=1-Math.max(0,Math.min(1,p/h)),o.x=Math.max(0,Math.min(1,_/d)),o}function lA(n){return An(n)&&n.nodeType===3}function B_(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function dA(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(function(e){if(typeof e=="function"&&(e=e()),eu(e)||lA(e))return e;if(typeof e=="string"&&/\S/.test(e))return le.default.createTextNode(e)}).filter(function(e){return e})}function U_(n,e){return dA(e).forEach(function(t){return n.appendChild(t)}),n}function cA(n,e){return U_(B_(n),e)}function dd(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0||n.type==="mouseup"&&n.button===0&&n.buttons===0?!0:!(n.button!==0||n.buttons!==1)}var ha=rA("querySelector"),hA=rA("querySelectorAll"),fA=Object.freeze({__proto__:null,isReal:Zo,isEl:eu,isInFrame:iA,createEl:He,textContent:cs,prependTo:f_,hasClass:us,addClass:Cn,removeClass:pd,toggleClass:nA,setAttributes:aA,getAttributes:Sn,getAttribute:sA,setAttribute:Ko,removeAttribute:ep,blockTextSelection:oA,unblockTextSelection:uA,getBoundingClientRect:Xo,findPosition:ld,getPointerPosition:tp,isTextNode:lA,emptyEl:B_,normalizeContent:dA,appendContent:U_,insertContent:cA,isSingleLeftClick:dd,$:ha,$$:hA}),pA=!1,p_,GB=function(){if(p_.options.autoSetup!==!1){var e=Array.prototype.slice.call(le.default.getElementsByTagName("video")),t=Array.prototype.slice.call(le.default.getElementsByTagName("audio")),i=Array.prototype.slice.call(le.default.getElementsByTagName("video-js")),r=e.concat(t,i);if(r&&r.length>0)for(var a=0,s=r.length;a<s;a++){var o=r[a];if(o&&o.getAttribute){if(o.player===void 0){var u=o.getAttribute("data-setup");u!==null&&p_(o)}}else{m_(1);break}}else pA||m_(1)}};function m_(n,e){!Zo()||(e&&(p_=e),$.default.setTimeout(GB,n))}function g_(){pA=!0,$.default.removeEventListener("load",g_)}Zo()&&(le.default.readyState==="complete"?g_():$.default.addEventListener("load",g_));var mA=function(e){var t=le.default.createElement("style");return t.className=e,t},gA=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},zB=3,KB=zB;function Fn(){return KB++}var vA;$.default.WeakMap||(vA=function(){function n(){this.vdata="vdata"+Math.floor($.default.performance&&$.default.performance.now()||Date.now()),this.data={}}var e=n.prototype;return e.set=function(i,r){var a=i[this.vdata]||Fn();return i[this.vdata]||(i[this.vdata]=a),this.data[a]=r,this},e.get=function(i){var r=i[this.vdata];if(r)return this.data[r];Ie("We have no data for this element",i)},e.has=function(i){var r=i[this.vdata];return r in this.data},e.delete=function(i){var r=i[this.vdata];r&&(delete this.data[r],delete i[this.vdata])},n}());var di=$.default.WeakMap?new WeakMap:new vA;function QC(n,e){if(!!di.has(n)){var t=di.get(n);t.handlers[e].length===0&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&di.delete(n)}}function j_(n,e,t,i){t.forEach(function(r){n(e,r,i)})}function ip(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){var i=n||$.default.event;n={};for(var r in i)r!=="layerX"&&r!=="layerY"&&r!=="keyLocation"&&r!=="webkitMovementX"&&r!=="webkitMovementY"&&r!=="path"&&(r==="returnValue"&&i.preventDefault||(n[r]=i[r]));if(n.target||(n.target=n.srcElement||le.default),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){i.preventDefault&&i.preventDefault(),n.returnValue=!1,i.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),n.cancelBubble=!0,i.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,n.clientX!==null&&n.clientX!==void 0){var a=le.default.documentElement,s=le.default.body;n.pageX=n.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),n.pageY=n.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n.fixed_=!0,n}var Cf,XB=function(){if(typeof Cf!="boolean"){Cf=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Cf=!0}});$.default.addEventListener("test",null,e),$.default.removeEventListener("test",null,e)}catch{}}return Cf},YB=["touchstart","touchmove"];function Bi(n,e,t){if(Array.isArray(e))return j_(Bi,n,e,t);di.has(n)||di.set(n,{});var i=di.get(n);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=Fn()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(a,s){if(!i.disabled){a=ip(a);var o=i.handlers[a.type];if(o)for(var u=o.slice(0),l=0,d=u.length;l<d&&!a.isImmediatePropagationStopped();l++)try{u[l].call(n,a,s)}catch(h){Ie.error(h)}}}),i.handlers[e].length===1)if(n.addEventListener){var r=!1;XB()&&YB.indexOf(e)>-1&&(r={passive:!0}),n.addEventListener(e,i.dispatcher,r)}else n.attachEvent&&n.attachEvent("on"+e,i.dispatcher)}function Xt(n,e,t){if(!!di.has(n)){var i=di.get(n);if(!!i.handlers){if(Array.isArray(e))return j_(Xt,n,e,t);var r=function(l,d){i.handlers[d]=[],QC(l,d)};if(e===void 0){for(var a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&r(n,a);return}var s=i.handlers[e];if(!!s){if(!t){r(n,e);return}if(t.guid)for(var o=0;o<s.length;o++)s[o].guid===t.guid&&s.splice(o--,1);QC(n,e)}}}}function tu(n,e,t){var i=di.has(n)?di.get(n):{},r=n.parentNode||n.ownerDocument;if(typeof e=="string"?e={type:e,target:n}:e.target||(e.target=n),e=ip(e),i.dispatcher&&i.dispatcher.call(n,e,t),r&&!e.isPropagationStopped()&&e.bubbles===!0)tu.call(null,r,e,t);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){di.has(e.target)||di.set(e.target,{});var a=di.get(e.target);e.target[e.type]&&(a.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function rp(n,e,t){if(Array.isArray(e))return j_(rp,n,e,t);var i=function r(){Xt(n,e,r),t.apply(this,arguments)};i.guid=t.guid=t.guid||Fn(),Bi(n,e,i)}function _A(n,e,t){var i=function r(){Xt(n,e,r),t.apply(this,arguments)};i.guid=t.guid=t.guid||Fn(),Bi(n,e,i)}var QB=Object.freeze({__proto__:null,fixEvent:ip,on:Bi,off:Xt,trigger:tu,one:rp,any:_A}),gr=30,ct=function(e,t,i){t.guid||(t.guid=Fn());var r=t.bind(e);return r.guid=i?i+"_"+t.guid:t.guid,r},kn=function(e,t){var i=$.default.performance.now(),r=function(){var s=$.default.performance.now();s-i>=t&&(e.apply(void 0,arguments),i=s)};return r},JB=function(e,t,i,r){r===void 0&&(r=$.default);var a,s=function(){r.clearTimeout(a),a=null},o=function(){var l=this,d=arguments,h=function(){a=null,h=null,i||e.apply(l,d)};!a&&i&&e.apply(l,d),r.clearTimeout(a),a=r.setTimeout(h,t)};return o.cancel=s,o},Rt=function(){};Rt.prototype.allowedEvents_={};Rt.prototype.on=function(n,e){var t=this.addEventListener;this.addEventListener=function(){},Bi(this,n,e),this.addEventListener=t};Rt.prototype.addEventListener=Rt.prototype.on;Rt.prototype.off=function(n,e){Xt(this,n,e)};Rt.prototype.removeEventListener=Rt.prototype.off;Rt.prototype.one=function(n,e){var t=this.addEventListener;this.addEventListener=function(){},rp(this,n,e),this.addEventListener=t};Rt.prototype.any=function(n,e){var t=this.addEventListener;this.addEventListener=function(){},_A(this,n,e),this.addEventListener=t};Rt.prototype.trigger=function(n){var e=n.type||n;typeof n=="string"&&(n={type:e}),n=ip(n),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](n),tu(this,n)};Rt.prototype.dispatchEvent=Rt.prototype.trigger;var Ql;Rt.prototype.queueTrigger=function(n){var e=this;Ql||(Ql=new Map);var t=n.type||n,i=Ql.get(this);i||(i=new Map,Ql.set(this,i));var r=i.get(t);i.delete(t),$.default.clearTimeout(r);var a=$.default.setTimeout(function(){i.delete(t),i.size===0&&(i=null,Ql.delete(e)),e.trigger(n)},0);i.set(t,a)};var np=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},wn=function(e){return e instanceof Rt||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return typeof e[t]=="function"})},ZB=function(e,t){wn(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},v_=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Nf=function(e,t,i){if(!e||!e.nodeName&&!wn(e))throw new Error("Invalid target for "+np(t)+"#"+i+"; must be a DOM node or evented object.")},yA=function(e,t,i){if(!v_(e))throw new Error("Invalid event type for "+np(t)+"#"+i+"; must be a non-empty string or array.")},TA=function(e,t,i){if(typeof e!="function")throw new Error("Invalid listener for "+np(t)+"#"+i+"; must be a function.")},Qv=function(e,t,i){var r=t.length<3||t[0]===e||t[0]===e.eventBusEl_,a,s,o;return r?(a=e.eventBusEl_,t.length>=3&&t.shift(),s=t[0],o=t[1]):(a=t[0],s=t[1],o=t[2]),Nf(a,e,i),yA(s,e,i),TA(o,e,i),o=ct(e,o),{isTargetingSelf:r,target:a,type:s,listener:o}},rs=function(e,t,i,r){Nf(e,e,t),e.nodeName?QB[t](e,i,r):e[t](i,r)},eU={on:function(){for(var e=this,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var a=Qv(this,i,"on"),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(rs(o,"on",u,l),!s){var d=function(){return e.off(o,u,l)};d.guid=l.guid;var h=function(){return e.off("dispose",d)};h.guid=l.guid,rs(this,"on","dispose",d),rs(o,"on","dispose",h)}},one:function(){for(var e=this,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var a=Qv(this,i,"one"),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s)rs(o,"one",u,l);else{var d=function h(){e.off(o,u,h);for(var p=arguments.length,_=new Array(p),D=0;D<p;D++)_[D]=arguments[D];l.apply(null,_)};d.guid=l.guid,rs(o,"one",u,d)}},any:function(){for(var e=this,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var a=Qv(this,i,"any"),s=a.isTargetingSelf,o=a.target,u=a.type,l=a.listener;if(s)rs(o,"any",u,l);else{var d=function h(){e.off(o,u,h);for(var p=arguments.length,_=new Array(p),D=0;D<p;D++)_[D]=arguments[D];l.apply(null,_)};d.guid=l.guid,rs(o,"any",u,d)}},off:function(e,t,i){if(!e||v_(e))Xt(this.eventBusEl_,e,t);else{var r=e,a=t;Nf(r,this,"off"),yA(a,this,"off"),TA(i,this,"off"),i=ct(this,i),this.off("dispose",i),r.nodeName?(Xt(r,a,i),Xt(r,"dispose",i)):wn(r)&&(r.off(a,i),r.off("dispose",i))}},trigger:function(e,t){Nf(this.eventBusEl_,this,"trigger");var i=e&&typeof e!="string"?e.type:e;if(!v_(i)){var r="Invalid event type for "+np(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||Ie).error(r);else throw new Error(r)}return tu(this.eventBusEl_,e,t)}};function H_(n,e){e===void 0&&(e={});var t=e,i=t.eventBusKey;if(i){if(!n[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');n.eventBusEl_=n[i]}else n.eventBusEl_=He("span",{className:"vjs-event-bus"});return yt(n,eU),n.eventedCallbacks&&n.eventedCallbacks.forEach(function(r){r()}),n.on("dispose",function(){n.off(),[n,n.el_,n.eventBusEl_].forEach(function(r){r&&di.has(r)&&di.delete(r)}),$.default.setTimeout(function(){n.eventBusEl_=null},0)}),n}var tU={state:{},setState:function(e){var t=this;typeof e=="function"&&(e=e());var i;return Wo(e,function(r,a){t.state[a]!==r&&(i=i||{},i[a]={from:t.state[a],to:r}),t.state[a]=r}),i&&wn(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function xA(n,e){return yt(n,tU),n.state=yt({},n.state,e),typeof n.handleStateChanged=="function"&&wn(n)&&n.on("statechanged",n.handleStateChanged),n}var Of=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toLowerCase()})},Dt=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},iU=function(e,t){return Dt(e)===Dt(t)};function dt(){for(var n={},e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.forEach(function(r){!r||Wo(r,function(a,s){if(!od(a)){n[s]=a;return}od(n[s])||(n[s]={}),n[s]=dt(n[s],a)})}),n}var rU=function(){function n(){this.map_={}}var e=n.prototype;return e.has=function(i){return i in this.map_},e.delete=function(i){var r=this.has(i);return delete this.map_[i],r},e.set=function(i,r){return this.map_[i]=r,this},e.forEach=function(i,r){for(var a in this.map_)i.call(r,this.map_[a],a,this)},n}(),nU=$.default.Map?$.default.Map:rU,aU=function(){function n(){this.set_={}}var e=n.prototype;return e.has=function(i){return i in this.set_},e.delete=function(i){var r=this.has(i);return delete this.set_[i],r},e.add=function(i){return this.set_[i]=1,this},e.forEach=function(i,r){for(var a in this.set_)i.call(r,a,a,this)},n}(),Jv=$.default.Set?$.default.Set:aU,se=function(){function n(t,i,r){var a=this;if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=dt({},this.options_),i=this.options_=dt(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var s=t&&t.id&&t.id()||"no_player";this.id_=s+"_component_"+Fn()}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(function(o){return a.addClass(o)}),i.evented!==!1&&(H_(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),xA(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Jv,this.setIntervalIds_=new Jv,this.rafIds_=new Jv,this.namedRafs_=new nU,this.clearingTimersOnDispose_=!1,i.initChildren!==!1&&this.initChildren(),this.ready(r),i.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=n.prototype;return e.dispose=function(i){if(i===void 0&&(i={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var r=this.children_.length-1;r>=0;r--)this.children_[r].dispose&&this.children_[r].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(i.restoreEl?this.el_.parentNode.replaceChild(i.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(i){return i?(this.options_=dt(this.options_,i),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(i,r,a){return He(i,r,a)},e.localize=function(i,r,a){a===void 0&&(a=i);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),u=o&&o[s],l=s&&s.split("-")[0],d=o&&o[l],h=a;return u&&u[i]?h=u[i]:d&&d[i]&&(h=d[i]),r&&(h=h.replace(/\{(\d+)\}/g,function(p,_){var D=r[_-1],C=D;return typeof D>"u"&&(C=p),C})),h},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(i){return this.childIndex_[i]},e.getChild=function(i){if(!!i)return this.childNameIndex_[i]},e.getDescendant=function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];r=r.reduce(function(u,l){return u.concat(l)},[]);for(var s=this,o=0;o<r.length;o++)if(s=s.getChild(r[o]),!s||!s.getChild)return;return s},e.addChild=function(i,r,a){r===void 0&&(r={}),a===void 0&&(a=this.children_.length);var s,o;if(typeof i=="string"){o=Dt(i);var u=r.componentClass||o;r.name=o;var l=n.getComponent(u);if(!l)throw new Error("Component "+u+" does not exist");if(typeof l!="function")return null;s=new l(this.player_||this,r)}else s=i;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(a,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&Dt(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[Of(o)]=s),typeof s.el=="function"&&s.el()){var d=null;this.children_[a+1]&&(this.children_[a+1].el_?d=this.children_[a+1].el_:eu(this.children_[a+1])&&(d=this.children_[a+1])),this.contentEl().insertBefore(s.el(),d)}return s},e.removeChild=function(i){if(typeof i=="string"&&(i=this.getChild(i)),!(!i||!this.children_)){for(var r=!1,a=this.children_.length-1;a>=0;a--)if(this.children_[a]===i){r=!0,this.children_.splice(a,1);break}if(!!r){i.parentComponent_=null,this.childIndex_[i.id()]=null,this.childNameIndex_[Dt(i.name())]=null,this.childNameIndex_[Of(i.name())]=null;var s=i.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(i.el())}}},e.initChildren=function(){var i=this,r=this.options_.children;if(r){var a=this.options_,s=function(d){var h=d.name,p=d.opts;if(a[h]!==void 0&&(p=a[h]),p!==!1){p===!0&&(p={}),p.playerOptions=i.options_.playerOptions;var _=i.addChild(h,p);_&&(i[h]=_)}},o,u=n.getComponent("Tech");Array.isArray(r)?o=r:o=Object.keys(r),o.concat(Object.keys(this.options_).filter(function(l){return!o.some(function(d){return typeof d=="string"?l===d:l===d.name})})).map(function(l){var d,h;return typeof l=="string"?(d=l,h=r[d]||i.options_[d]||{}):(d=l.name,h=l),{name:d,opts:h}}).filter(function(l){var d=n.getComponent(l.opts.componentClass||Dt(l.name));return d&&!u.isTech(d)}).forEach(s)}},e.buildCSSClass=function(){return""},e.ready=function(i,r){if(r===void 0&&(r=!1),!!i){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(i);return}r?i.call(this):this.setTimeout(i,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var i=this.readyQueue_;this.readyQueue_=[],i&&i.length>0&&i.forEach(function(r){r.call(this)},this),this.trigger("ready")},1)},e.$=function(i,r){return ha(i,r||this.contentEl())},e.$$=function(i,r){return hA(i,r||this.contentEl())},e.hasClass=function(i){return us(this.el_,i)},e.addClass=function(i){Cn(this.el_,i)},e.removeClass=function(i){pd(this.el_,i)},e.toggleClass=function(i,r){nA(this.el_,i,r)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(i){return sA(this.el_,i)},e.setAttribute=function(i,r){Ko(this.el_,i,r)},e.removeAttribute=function(i){ep(this.el_,i)},e.width=function(i,r){return this.dimension("width",i,r)},e.height=function(i,r){return this.dimension("height",i,r)},e.dimensions=function(i,r){this.width(i,!0),this.height(r)},e.dimension=function(i,r,a){if(r!==void 0){(r===null||r!==r)&&(r=0),(""+r).indexOf("%")!==-1||(""+r).indexOf("px")!==-1?this.el_.style[i]=r:r==="auto"?this.el_.style[i]="":this.el_.style[i]=r+"px",a||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[i],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+Dt(i)],10)},e.currentDimension=function(i){var r=0;if(i!=="width"&&i!=="height")throw new Error("currentDimension only accepts width or height value");if(r=ud(this.el_,i),r=parseFloat(r),r===0||isNaN(r)){var a="offset"+Dt(i);r=this.el_[a]}return r},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(i){this.player_&&(we.default.isEventKey(i,"Tab")||i.stopPropagation(),this.player_.handleKeyDown(i))},e.handleKeyPress=function(i){this.handleKeyDown(i)},e.emitTapEvents=function(){var i=0,r=null,a=10,s=200,o;this.on("touchstart",function(l){l.touches.length===1&&(r={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},i=$.default.performance.now(),o=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)o=!1;else if(r){var d=l.touches[0].pageX-r.pageX,h=l.touches[0].pageY-r.pageY,p=Math.sqrt(d*d+h*h);p>a&&(o=!1)}});var u=function(){o=!1};this.on("touchleave",u),this.on("touchcancel",u),this.on("touchend",function(l){if(r=null,o===!0){var d=$.default.performance.now()-i;d<s&&(l.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var i=ct(this.player(),this.player().reportUserActivity),r;this.on("touchstart",function(){i(),this.clearInterval(r),r=this.setInterval(i,250)});var a=function(o){i(),this.clearInterval(r)};this.on("touchmove",i),this.on("touchend",a),this.on("touchcancel",a)}},e.setTimeout=function(i,r){var a=this,s;return i=ct(this,i),this.clearTimersOnDispose_(),s=$.default.setTimeout(function(){a.setTimeoutIds_.has(s)&&a.setTimeoutIds_.delete(s),i()},r),this.setTimeoutIds_.add(s),s},e.clearTimeout=function(i){return this.setTimeoutIds_.has(i)&&(this.setTimeoutIds_.delete(i),$.default.clearTimeout(i)),i},e.setInterval=function(i,r){i=ct(this,i),this.clearTimersOnDispose_();var a=$.default.setInterval(i,r);return this.setIntervalIds_.add(a),a},e.clearInterval=function(i){return this.setIntervalIds_.has(i)&&(this.setIntervalIds_.delete(i),$.default.clearInterval(i)),i},e.requestAnimationFrame=function(i){var r=this;if(!this.supportsRaf_)return this.setTimeout(i,1e3/60);this.clearTimersOnDispose_();var a;return i=ct(this,i),a=$.default.requestAnimationFrame(function(){r.rafIds_.has(a)&&r.rafIds_.delete(a),i()}),this.rafIds_.add(a),a},e.requestNamedAnimationFrame=function(i,r){var a=this;if(!this.namedRafs_.has(i)){this.clearTimersOnDispose_(),r=ct(this,r);var s=this.requestAnimationFrame(function(){r(),a.namedRafs_.has(i)&&a.namedRafs_.delete(i)});return this.namedRafs_.set(i,s),i}},e.cancelNamedAnimationFrame=function(i){!this.namedRafs_.has(i)||(this.cancelAnimationFrame(this.namedRafs_.get(i)),this.namedRafs_.delete(i))},e.cancelAnimationFrame=function(i){return this.supportsRaf_?(this.rafIds_.has(i)&&(this.rafIds_.delete(i),$.default.cancelAnimationFrame(i)),i):this.clearTimeout(i)},e.clearTimersOnDispose_=function(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(r){var a=r[0],s=r[1];i[a].forEach(function(o,u){return i[s](u)})}),i.clearingTimersOnDispose_=!1}))},n.registerComponent=function(i,r){if(typeof i!="string"||!i)throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.');var a=n.getComponent("Tech"),s=a&&a.isTech(r),o=n===r||n.prototype.isPrototypeOf(r.prototype);if(s||!o){var u;throw s?u="techs must be registered using Tech.registerTech()":u="must be a Component subclass",new Error('Illegal component, "'+i+'"; '+u+".")}i=Dt(i),n.components_||(n.components_={});var l=n.getComponent("Player");if(i==="Player"&&l&&l.players){var d=l.players,h=Object.keys(d);if(d&&h.length>0&&h.map(function(p){return d[p]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return n.components_[i]=r,n.components_[Of(i)]=r,r},n.getComponent=function(i){if(!(!i||!n.components_))return n.components_[i]},n}();se.prototype.supportsRaf_=typeof $.default.requestAnimationFrame=="function"&&typeof $.default.cancelAnimationFrame=="function";se.registerComponent("Component",se);function sU(n,e,t){if(typeof e!="number"||e<0||e>t)throw new Error("Failed to execute '"+n+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+t+").")}function JC(n,e,t,i){return sU(n,i,t.length-1),t[i][e]}function Zv(n){var e;return n===void 0||n.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:n.length,start:JC.bind(null,"start",0,n),end:JC.bind(null,"end",1,n)},$.default.Symbol&&$.default.Symbol.iterator&&(e[$.default.Symbol.iterator]=function(){return(n||[]).values()}),e}function ls(n,e){return Array.isArray(n)?Zv(n):n===void 0||e===void 0?Zv():Zv([[n,e]])}function bA(n,e){var t=0,i,r;if(!e)return 0;(!n||!n.length)&&(n=ls(0,0));for(var a=0;a<n.length;a++)i=n.start(a),r=n.end(a),r>e&&(r=e),t+=r-i;return t/e}function ci(n){if(n instanceof ci)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:An(n)&&(typeof n.code=="number"&&(this.code=n.code),yt(this,n)),this.message||(this.message=ci.defaultMessages[this.code]||"")}ci.prototype.code=0;ci.prototype.message="";ci.prototype.status=null;ci.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];ci.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(ns=0;ns<ci.errorTypes.length;ns++)ci[ci.errorTypes[ns]]=ns,ci.prototype[ci.errorTypes[ns]]=ns;var ns;function rd(n){return n!=null&&typeof n.then=="function"}function Ur(n){rd(n)&&n.then(null,function(e){})}var __=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(i,r,a){return e[r]&&(i[r]=e[r]),i},{cues:e.cues&&Array.prototype.map.call(e.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})});return t},oU=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,function(a){return a.track}),r=Array.prototype.map.call(t,function(a){var s=__(a.track);return a.src&&(s.src=a.src),s});return r.concat(Array.prototype.filter.call(e.textTracks(),function(a){return i.indexOf(a)===-1}).map(__))},uU=function(e,t){return e.forEach(function(i){var r=t.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(function(a){return r.addCue(a)})}),t.textTracks()},ZC={textTracksToJson:oU,jsonToTextTracks:uU,trackToJson_:__},e_="vjs-modal-dialog",iu=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.close_=function(s){return a.close(s)},a.opened_=a.hasBeenOpened_=a.hasBeenFilled_=!1,a.closeable(!a.options_.uncloseable),a.content(a.options_.content),a.contentEl_=He("div",{className:e_+"-content"},{role:"document"}),a.descEl_=He("p",{className:e_+"-description vjs-control-text",id:a.el().getAttribute("aria-describedby")}),cs(a.descEl_,a.description()),a.el_.appendChild(a.descEl_),a.el_.appendChild(a.contentEl_),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return e_+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var r=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(r+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),r},t.open=function(){if(!this.opened_){var r=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!r.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&r.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=r.controls(),r.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(r){return typeof r=="boolean"&&this[r?"open":"close"](),this.opened_},t.close=function(){if(!!this.opened_){var r=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&r.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&r.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(r){if(typeof r=="boolean"){var a=this.closeable_=!!r,s=this.getChild("closeButton");if(a&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!a&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(r){var a=this.contentEl(),s=a.parentNode,o=a.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(a),this.empty(),cA(a,r),this.trigger("modalfill"),o?s.insertBefore(a,o):s.appendChild(a);var u=this.getChild("closeButton");u&&s.appendChild(u.el_)},t.empty=function(){this.trigger("beforemodalempty"),B_(this.contentEl()),this.trigger("modalempty")},t.content=function(r){return typeof r<"u"&&(this.content_=r),this.content_},t.conditionalFocus_=function(){var r=le.default.activeElement,a=this.player_.el_;this.previouslyActiveEl_=null,(a.contains(r)||a===r)&&(this.previouslyActiveEl_=r,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(r){if(r.stopPropagation(),we.default.isEventKey(r,"Escape")&&this.closeable()){r.preventDefault(),this.close();return}if(!!we.default.isEventKey(r,"Tab")){for(var a=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,u=0;u<a.length;u++)if(s===a[u]){o=u;break}le.default.activeElement===this.el_&&(o=0),r.shiftKey&&o===0?(a[a.length-1].focus(),r.preventDefault()):!r.shiftKey&&o===a.length-1&&(a[0].focus(),r.preventDefault())}},t.focusableEls_=function(){var r=this.el_.querySelectorAll("*");return Array.prototype.filter.call(r,function(a){return(a instanceof $.default.HTMLAnchorElement||a instanceof $.default.HTMLAreaElement)&&a.hasAttribute("href")||(a instanceof $.default.HTMLInputElement||a instanceof $.default.HTMLSelectElement||a instanceof $.default.HTMLTextAreaElement||a instanceof $.default.HTMLButtonElement)&&!a.hasAttribute("disabled")||a instanceof $.default.HTMLIFrameElement||a instanceof $.default.HTMLObjectElement||a instanceof $.default.HTMLEmbedElement||a.hasAttribute("tabindex")&&a.getAttribute("tabindex")!==-1||a.hasAttribute("contenteditable")})},e}(se);iu.prototype.options_={pauseOnOpen:!0,temporary:!0};se.registerComponent("ModalDialog",iu);var Yo=function(n){de(e,n);function e(i){var r;i===void 0&&(i=[]),r=n.call(this)||this,r.tracks_=[],Object.defineProperty(Se(r),"length",{get:function(){return this.tracks_.length}});for(var a=0;a<i.length;a++)r.addTrack(i[a]);return r}var t=e.prototype;return t.addTrack=function(r){var a=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(r)===-1&&(this.tracks_.push(r),this.trigger({track:r,type:"addtrack",target:this})),r.labelchange_=function(){a.trigger({track:r,type:"labelchange",target:a})},wn(r)&&r.addEventListener("labelchange",r.labelchange_)},t.removeTrack=function(r){for(var a,s=0,o=this.length;s<o;s++)if(this[s]===r){a=this[s],a.off&&a.off(),this.tracks_.splice(s,1);break}!a||this.trigger({track:a,type:"removetrack",target:this})},t.getTrackById=function(r){for(var a=null,s=0,o=this.length;s<o;s++){var u=this[s];if(u.id===r){a=u;break}}return a},e}(Rt);Yo.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(ew in Yo.prototype.allowedEvents_)Yo.prototype["on"+ew]=null;var ew,t_=function(e,t){for(var i=0;i<e.length;i++)!Object.keys(e[i]).length||t.id===e[i].id||(e[i].enabled=!1)},lU=function(n){de(e,n);function e(i){var r;i===void 0&&(i=[]);for(var a=i.length-1;a>=0;a--)if(i[a].enabled){t_(i,i[a]);break}return r=n.call(this,i)||this,r.changing_=!1,r}var t=e.prototype;return t.addTrack=function(r){var a=this;r.enabled&&t_(this,r),n.prototype.addTrack.call(this,r),r.addEventListener&&(r.enabledChange_=function(){a.changing_||(a.changing_=!0,t_(a,r),a.changing_=!1,a.trigger("change"))},r.addEventListener("enabledchange",r.enabledChange_))},t.removeTrack=function(r){n.prototype.removeTrack.call(this,r),r.removeEventListener&&r.enabledChange_&&(r.removeEventListener("enabledchange",r.enabledChange_),r.enabledChange_=null)},e}(Yo),i_=function(e,t){for(var i=0;i<e.length;i++)!Object.keys(e[i]).length||t.id===e[i].id||(e[i].selected=!1)},dU=function(n){de(e,n);function e(i){var r;i===void 0&&(i=[]);for(var a=i.length-1;a>=0;a--)if(i[a].selected){i_(i,i[a]);break}return r=n.call(this,i)||this,r.changing_=!1,Object.defineProperty(Se(r),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),r}var t=e.prototype;return t.addTrack=function(r){var a=this;r.selected&&i_(this,r),n.prototype.addTrack.call(this,r),r.addEventListener&&(r.selectedChange_=function(){a.changing_||(a.changing_=!0,i_(a,r),a.changing_=!1,a.trigger("change"))},r.addEventListener("selectedchange",r.selectedChange_))},t.removeTrack=function(r){n.prototype.removeTrack.call(this,r),r.removeEventListener&&r.selectedChange_&&(r.removeEventListener("selectedchange",r.selectedChange_),r.selectedChange_=null)},e}(Yo),SA=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.addTrack=function(r){var a=this;n.prototype.addTrack.call(this,r),this.queueChange_||(this.queueChange_=function(){return a.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return a.trigger("selectedlanguagechange")}),r.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(r.kind)===-1&&r.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(r){n.prototype.removeTrack.call(this,r),r.removeEventListener&&(this.queueChange_&&r.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&r.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Yo),cU=function(){function n(t){t===void 0&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var i=0,r=t.length;i<r;i++)this.addTrackElement_(t[i])}var e=n.prototype;return e.addTrackElement_=function(i){var r=this.trackElements_.length;""+r in this||Object.defineProperty(this,r,{get:function(){return this.trackElements_[r]}}),this.trackElements_.indexOf(i)===-1&&this.trackElements_.push(i)},e.getTrackElementByTrack_=function(i){for(var r,a=0,s=this.trackElements_.length;a<s;a++)if(i===this.trackElements_[a].track){r=this.trackElements_[a];break}return r},e.removeTrackElement_=function(i){for(var r=0,a=this.trackElements_.length;r<a;r++)if(i===this.trackElements_[r]){this.trackElements_[r].track&&typeof this.trackElements_[r].track.off=="function"&&this.trackElements_[r].track.off(),typeof this.trackElements_[r].off=="function"&&this.trackElements_[r].off(),this.trackElements_.splice(r,1);break}},n}(),tw=function(){function n(t){n.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=n.prototype;return e.setCues_=function(i){var r=this.length||0,a=0,s=i.length;this.cues_=i,this.length_=i.length;var o=function(l){""+l in this||Object.defineProperty(this,""+l,{get:function(){return this.cues_[l]}})};if(r<s)for(a=r;a<s;a++)o.call(this,a)},e.getCueById=function(i){for(var r=null,a=0,s=this.length;a<s;a++){var o=this[a];if(o.id===i){r=o;break}}return r},n}(),hU={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},fU={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},pU={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},iw={disabled:"disabled",hidden:"hidden",showing:"showing"},$_=function(n){de(e,n);function e(t){var i;t===void 0&&(t={}),i=n.call(this)||this;var r={id:t.id||"vjs_track_"+Fn(),kind:t.kind||"",language:t.language||""},a=t.label||"",s=function(l){Object.defineProperty(Se(i),l,{get:function(){return r[l]},set:function(){}})};for(var o in r)s(o);return Object.defineProperty(Se(i),"label",{get:function(){return a},set:function(l){l!==a&&(a=l,this.trigger("labelchange"))}}),i}return e}(Rt),V_=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=le.default.createElement("a");i.href=e;for(var r={},a=0;a<t.length;a++)r[t[a]]=i[t[a]];return r.protocol==="http:"&&(r.host=r.host.replace(/:80$/,"")),r.protocol==="https:"&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=$.default.location.protocol),r.host||(r.host=$.default.location.host),r},DA=function(e){if(!e.match(/^https?:\/\//)){var t=le.default.createElement("a");t.href=e,e=t.href}return e},W_=function(e){if(typeof e=="string"){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,i=t.exec(e);if(i)return i.pop().toLowerCase()}return""},ap=function(e,t){t===void 0&&(t=$.default.location);var i=V_(e),r=i.protocol===":"?t.protocol:i.protocol,a=r+i.host!==t.protocol+t.host;return a},mU=Object.freeze({__proto__:null,parseUrl:V_,getAbsoluteURL:DA,getFileExtension:W_,isCrossOrigin:ap}),rw=function(e,t){var i=new $.default.WebVTT.Parser($.default,$.default.vttjs,$.default.WebVTT.StringDecoder()),r=[];i.oncue=function(a){t.addCue(a)},i.onparsingerror=function(a){r.push(a)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),r.length>0&&($.default.console&&$.default.console.groupCollapsed&&$.default.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(a){return Ie.error(a)}),$.default.console&&$.default.console.groupEnd&&$.default.console.groupEnd()),i.flush()},nw=function(e,t){var i={uri:e},r=ap(e);r&&(i.cors=r);var a=t.tech_.crossOrigin()==="use-credentials";a&&(i.withCredentials=a),(0,O_.default)(i,ct(this,function(s,o,u){if(s)return Ie.error(s,o);t.loaded_=!0,typeof $.default.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(l){if(l.type==="vttjserror"){Ie.error("vttjs failed to load, stopping trying to process "+t.src);return}return rw(u,t)}):rw(u,t)}))},md=function(n){de(e,n);function e(i){var r;if(i===void 0&&(i={}),!i.tech)throw new Error("A tech was not provided.");var a=dt(i,{kind:pU[i.kind]||"subtitles",language:i.language||i.srclang||""}),s=iw[a.mode]||"disabled",o=a.default;(a.kind==="metadata"||a.kind==="chapters")&&(s="hidden"),r=n.call(this,a)||this,r.tech_=a.tech,r.cues_=[],r.activeCues_=[],r.preload_=r.tech_.preloadTextTracks!==!1;var u=new tw(r.cues_),l=new tw(r.activeCues_),d=!1;r.timeupdateHandler=ct(Se(r),function(p){if(p===void 0&&(p={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){p.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,d&&(this.trigger("cuechange"),d=!1),p.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var h=function(){r.stopTracking()};return r.tech_.one("dispose",h),s!=="disabled"&&r.startTracking(),Object.defineProperties(Se(r),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(_){!iw[_]||s!==_&&(s=_,!this.preload_&&s!=="disabled"&&this.cues.length===0&&nw(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?u:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return l;for(var _=this.tech_.currentTime(),D=[],C=0,S=this.cues.length;C<S;C++){var I=this.cues[C];(I.startTime<=_&&I.endTime>=_||I.startTime===I.endTime&&I.startTime<=_&&I.startTime+.5>=_)&&D.push(I)}if(d=!1,D.length!==this.activeCues_.length)d=!0;else for(var L=0;L<D.length;L++)this.activeCues_.indexOf(D[L])===-1&&(d=!0);return this.activeCues_=D,l.setCues_(this.activeCues_),l},set:function(){}}}),a.src?(r.src=a.src,r.preload_||(r.loaded_=!0),(r.preload_||a.kind!=="subtitles"&&a.kind!=="captions")&&nw(r.src,Se(r))):r.loaded_=!0,r}var t=e.prototype;return t.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},t.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},t.addCue=function(r){var a=r;if($.default.vttjs&&!(r instanceof $.default.vttjs.VTTCue)){a=new $.default.vttjs.VTTCue(r.startTime,r.endTime,r.text);for(var s in r)s in a||(a[s]=r[s]);a.id=r.id,a.originalCue_=r}for(var o=this.tech_.textTracks(),u=0;u<o.length;u++)o[u]!==this&&o[u].removeCue(a);this.cues_.push(a),this.cues.setCues_(this.cues_)},t.removeCue=function(r){for(var a=this.cues_.length;a--;){var s=this.cues_[a];if(s===r||s.originalCue_&&s.originalCue_===r){this.cues_.splice(a,1),this.cues.setCues_(this.cues_);break}}},e}($_);md.prototype.allowedEvents_={cuechange:"cuechange"};var EA=function(n){de(e,n);function e(t){var i;t===void 0&&(t={});var r=dt(t,{kind:fU[t.kind]||""});i=n.call(this,r)||this;var a=!1;return Object.defineProperty(Se(i),"enabled",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("enabledchange"))}}),r.enabled&&(i.enabled=r.enabled),i.loaded_=!0,i}return e}($_),CA=function(n){de(e,n);function e(t){var i;t===void 0&&(t={});var r=dt(t,{kind:hU[t.kind]||""});i=n.call(this,r)||this;var a=!1;return Object.defineProperty(Se(i),"selected",{get:function(){return a},set:function(o){typeof o!="boolean"||o===a||(a=o,this.trigger("selectedchange"))}}),r.selected&&(i.selected=r.selected),i}return e}($_),wA=0,gU=1,AA=2,vU=3,ru=function(n){de(e,n);function e(t){var i;t===void 0&&(t={}),i=n.call(this)||this;var r,a=new md(t);return i.kind=a.kind,i.src=a.src,i.srclang=a.language,i.label=a.label,i.default=a.default,Object.defineProperties(Se(i),{readyState:{get:function(){return r}},track:{get:function(){return a}}}),r=wA,a.addEventListener("loadeddata",function(){r=AA,i.trigger({type:"load",target:Se(i)})}),i}return e}(Rt);ru.prototype.allowedEvents_={load:"load"};ru.NONE=wA;ru.LOADING=gU;ru.LOADED=AA;ru.ERROR=vU;var er={audio:{ListClass:lU,TrackClass:EA,capitalName:"Audio"},video:{ListClass:dU,TrackClass:CA,capitalName:"Video"},text:{ListClass:SA,TrackClass:md,capitalName:"Text"}};Object.keys(er).forEach(function(n){er[n].getterName=n+"Tracks",er[n].privateName=n+"Tracks_"});var Qo={remoteText:{ListClass:SA,TrackClass:md,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:cU,TrackClass:ru,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},li=vt({},er,Qo);Qo.names=Object.keys(Qo);er.names=Object.keys(er);li.names=[].concat(Qo.names).concat(er.names);function _U(n,e,t,i,r){r===void 0&&(r={});var a=n.textTracks();r.kind=e,t&&(r.label=t),i&&(r.language=i),r.tech=n;var s=new li.text.TrackClass(r);return a.addTrack(s),s}var rt=function(n){de(e,n);function e(i,r){var a;return i===void 0&&(i={}),r===void 0&&(r=function(){}),i.reportTouchActivity=!1,a=n.call(this,null,i,r)||this,a.onDurationChange_=function(s){return a.onDurationChange(s)},a.trackProgress_=function(s){return a.trackProgress(s)},a.trackCurrentTime_=function(s){return a.trackCurrentTime(s)},a.stopTrackingCurrentTime_=function(s){return a.stopTrackingCurrentTime(s)},a.disposeSourceHandler_=function(s){return a.disposeSourceHandler(s)},a.queuedHanders_=new Set,a.hasStarted_=!1,a.on("playing",function(){this.hasStarted_=!0}),a.on("loadstart",function(){this.hasStarted_=!1}),li.names.forEach(function(s){var o=li[s];i&&i[o.getterName]&&(a[o.privateName]=i[o.getterName])}),a.featuresProgressEvents||a.manualProgressOn(),a.featuresTimeupdateEvents||a.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){i["native"+s+"Tracks"]===!1&&(a["featuresNative"+s+"Tracks"]=!1)}),i.nativeCaptions===!1||i.nativeTextTracks===!1?a.featuresNativeTextTracks=!1:(i.nativeCaptions===!0||i.nativeTextTracks===!0)&&(a.featuresNativeTextTracks=!0),a.featuresNativeTextTracks||a.emulateTextTracks(),a.preloadTextTracks=i.preloadTextTracks!==!1,a.autoRemoteTextTracks_=new li.text.ListClass,a.initTrackListeners(),i.nativeControlsForTouch||a.emitTapEvents(),a.constructor&&(a.name_=a.constructor.name||"Unknown Tech"),a}var t=e.prototype;return t.triggerSourceset=function(r){var a=this;this.isReady_||this.one("ready",function(){return a.setTimeout(function(){return a.triggerSourceset(r)},1)}),this.trigger({src:r,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},t.trackProgress=function(r){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ct(this,function(){var a=this.bufferedPercent();this.bufferedPercent_!==a&&this.trigger("progress"),this.bufferedPercent_=a,a===1&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(r){this.duration_=this.duration()},t.buffered=function(){return ls(0,0)},t.bufferedPercent=function(){return bA(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(er.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},t.clearTracks=function(r){var a=this;r=[].concat(r),r.forEach(function(s){for(var o=a[s+"Tracks"]()||[],u=o.length;u--;){var l=o[u];s==="text"&&a.removeRemoteTextTrack(l),o.removeTrack(l)}})},t.cleanupAutoTextTracks=function(){for(var r=this.autoRemoteTextTracks_||[],a=r.length;a--;){var s=r[a];this.removeRemoteTextTrack(s)}},t.reset=function(){},t.crossOrigin=function(){},t.setCrossOrigin=function(){},t.error=function(r){return r!==void 0&&(this.error_=new ci(r),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?ls(0,0):ls()},t.play=function(){},t.setScrubbing=function(){},t.scrubbing=function(){},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var r=this;er.names.forEach(function(a){var s=er[a],o=function(){r.trigger(a+"trackchange")},u=r[s.getterName]();u.addEventListener("removetrack",o),u.addEventListener("addtrack",o),r.on("dispose",function(){u.removeEventListener("removetrack",o),u.removeEventListener("addtrack",o)})})},t.addWebVttScript_=function(){var r=this;if(!$.default.WebVTT)if(le.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&od(h_.default)&&Object.keys(h_.default).length>0){this.trigger("vttjsloaded");return}var a=le.default.createElement("script");a.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",a.onload=function(){r.trigger("vttjsloaded")},a.onerror=function(){r.trigger("vttjserror")},this.on("dispose",function(){a.onload=null,a.onerror=null}),$.default.WebVTT=!0,this.el().parentNode.appendChild(a)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){var r=this,a=this.textTracks(),s=this.remoteTextTracks(),o=function(p){return a.addTrack(p.track)},u=function(p){return a.removeTrack(p.track)};s.on("addtrack",o),s.on("removetrack",u),this.addWebVttScript_();var l=function(){return r.trigger("texttrackchange")},d=function(){l();for(var p=0;p<a.length;p++){var _=a[p];_.removeEventListener("cuechange",l),_.mode==="showing"&&_.addEventListener("cuechange",l)}};d(),a.addEventListener("change",d),a.addEventListener("addtrack",d),a.addEventListener("removetrack",d),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",u),a.removeEventListener("change",d),a.removeEventListener("addtrack",d),a.removeEventListener("removetrack",d);for(var h=0;h<a.length;h++){var p=a[h];p.removeEventListener("cuechange",l)}})},t.addTextTrack=function(r,a,s){if(!r)throw new Error("TextTrack kind is required but was not provided");return _U(this,r,a,s)},t.createRemoteTextTrack=function(r){var a=dt(r,{tech:this});return new Qo.remoteTextEl.TrackClass(a)},t.addRemoteTextTrack=function(r,a){var s=this;r===void 0&&(r={});var o=this.createRemoteTextTrack(r);return a!==!0&&a!==!1&&(Ie.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),a=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),a!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},t.removeRemoteTextTrack=function(r){var a=this.remoteTextTrackEls().getTrackElementByTrack_(r);this.remoteTextTrackEls().removeTrackElement_(a),this.remoteTextTracks().removeTrack(r),this.autoRemoteTextTracks_.removeTrack(r)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var r=this.options_.Promise||$.default.Promise;if(r)return r.reject()},t.disablePictureInPicture=function(){return!0},t.setDisablePictureInPicture=function(){},t.requestVideoFrameCallback=function(r){var a=this,s=Fn();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){a.queuedHanders_.has(s)&&(a.queuedHanders_.delete(s),r())})):this.requestNamedAnimationFrame(s,r),s},t.cancelVideoFrameCallback=function(r){this.queuedHanders_.has(r)?this.queuedHanders_.delete(r):this.cancelNamedAnimationFrame(r)},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(r,a){return e.canPlayType(r.type)},e.isTech=function(r){return r.prototype instanceof e||r instanceof e||r===e},e.registerTech=function(r,a){if(e.techs_||(e.techs_={}),!e.isTech(a))throw new Error("Tech "+r+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return r=Dt(r),e.techs_[r]=a,e.techs_[Of(r)]=a,r!=="Tech"&&e.defaultTechOrder_.push(r),a},e.getTech=function(r){if(!!r){if(e.techs_&&e.techs_[r])return e.techs_[r];if(r=Dt(r),$.default&&$.default.videojs&&$.default.videojs[r])return Ie.warn("The "+r+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),$.default.videojs[r]}},e}(se);li.names.forEach(function(n){var e=li[n];rt.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});rt.prototype.featuresVolumeControl=!0;rt.prototype.featuresMuteControl=!0;rt.prototype.featuresFullscreenResize=!1;rt.prototype.featuresPlaybackRate=!1;rt.prototype.featuresProgressEvents=!1;rt.prototype.featuresSourceset=!1;rt.prototype.featuresTimeupdateEvents=!1;rt.prototype.featuresNativeTextTracks=!1;rt.prototype.featuresVideoFrameCallback=!1;rt.withSourceHandlers=function(n){n.registerSourceHandler=function(t,i){var r=n.sourceHandlers;r||(r=n.sourceHandlers=[]),i===void 0&&(i=r.length),r.splice(i,0,t)},n.canPlayType=function(t){for(var i=n.sourceHandlers||[],r,a=0;a<i.length;a++)if(r=i[a].canPlayType(t),r)return r;return""},n.selectSourceHandler=function(t,i){for(var r=n.sourceHandlers||[],a,s=0;s<r.length;s++)if(a=r[s].canHandleSource(t,i),a)return r[s];return null},n.canPlaySource=function(t,i){var r=n.selectSourceHandler(t,i);return r?r.canHandleSource(t,i):""};var e=["seekable","seeking","duration"];e.forEach(function(t){var i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){var i=n.selectSourceHandler(t,this.options_);i||(n.nativeSourceHandler?i=n.nativeSourceHandler:Ie.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};se.registerComponent("Tech",rt);rt.registerTech("Tech",rt);rt.defaultTechOrder_=[];var ds={},y_={},Bf={};function yU(n,e){ds[n]=ds[n]||[],ds[n].push(e)}function TU(n,e,t){n.setTimeout(function(){return as(e,ds[e.type],t,n)},1)}function xU(n,e){n.forEach(function(t){return t.setTech&&t.setTech(e)})}function bU(n,e,t){return n.reduceRight(q_(t),e[t]())}function SU(n,e,t,i){return e[t](n.reduce(q_(t),i))}function aw(n,e,t,i){i===void 0&&(i=null);var r="call"+Dt(t),a=n.reduce(q_(r),i),s=a===Bf,o=s?null:e[t](a);return CU(n,t,o,s),o}var DU={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},EU={setCurrentTime:1,setMuted:1,setVolume:1},sw={play:1,pause:1};function q_(n){return function(e,t){return e===Bf?Bf:t[n]?t[n](e):e}}function CU(n,e,t,i){for(var r=n.length-1;r>=0;r--){var a=n[r];a[e]&&a[e](i,t)}}function wU(n){y_[n.id()]=null}function AU(n,e){var t=y_[n.id()],i=null;if(t==null)return i=e(n),y_[n.id()]=[[e,i]],i;for(var r=0;r<t.length;r++){var a=t[r],s=a[0],o=a[1];s===e&&(i=o)}return i===null&&(i=e(n),t.push([e,i])),i}function as(n,e,t,i,r,a){n===void 0&&(n={}),e===void 0&&(e=[]),r===void 0&&(r=[]),a===void 0&&(a=!1);var s=e,o=s[0],u=s.slice(1);if(typeof o=="string")as(n,ds[o],t,i,r,a);else if(o){var l=AU(i,o);if(!l.setSource)return r.push(l),as(n,u,t,i,r,a);l.setSource(yt({},n),function(d,h){if(d)return as(n,u,t,i,r,a);r.push(l),as(h,n.type===h.type?u:ds[h.type],t,i,r,a)})}else u.length?as(n,u,t,i,r,a):a?t(n,r):as(n,ds["*"],t,i,r,!0)}var kU={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Uf=function(e){e===void 0&&(e="");var t=W_(e),i=kU[t.toLowerCase()];return i||""},IU=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(o){return o.src===t});if(i.length)return i[0].type;for(var r=e.$$("source"),a=0;a<r.length;a++){var s=r[a];if(s.type&&s.src&&s.src===t)return s.type}return Uf(t)},PU=function n(e){if(Array.isArray(e)){var t=[];e.forEach(function(i){i=n(i),Array.isArray(i)?t=t.concat(i):An(i)&&t.push(i)}),e=t}else typeof e=="string"&&e.trim()?e=[ow({src:e})]:An(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[ow(e)]:e=[];return e};function ow(n){if(!n.type){var e=Uf(n.src);e&&(n.type=e)}return n}var FU=function(n){de(e,n);function e(t,i,r){var a,s=dt({createEl:!1},i);if(a=n.call(this,t,s,r)||this,!i.playerOptions.sources||i.playerOptions.sources.length===0)for(var o=0,u=i.playerOptions.techOrder;o<u.length;o++){var l=Dt(u[o]),d=rt.getTech(l);if(l||(d=se.getComponent(l)),d&&d.isSupported()){t.loadTech_(l);break}}else t.src(i.playerOptions.sources);return a}return e}(se);se.registerComponent("MediaLoader",FU);var sp=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.options_.controlText&&a.controlText(a.options_.controlText),a.handleMouseOver_=function(s){return a.handleMouseOver(s)},a.handleMouseOut_=function(s){return a.handleMouseOut(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.emitTapEvents(),a.enable(),a}var t=e.prototype;return t.createEl=function(r,a,s){r===void 0&&(r="div"),a===void 0&&(a={}),s===void 0&&(s={}),a=yt({className:this.buildCSSClass(),tabIndex:0},a),r==="button"&&Ie.error("Creating a ClickableComponent with an HTML element of "+r+" is not supported; use a Button instead."),s=yt({role:"button"},s),this.tabIndex_=a.tabIndex;var o=He(r,a,s);return o.appendChild(He("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.dispose=function(){this.controlTextEl_=null,n.prototype.dispose.call(this)},t.createControlTextEl=function(r){return this.controlTextEl_=He("span",{className:"vjs-control-text"},{"aria-live":"polite"}),r&&r.appendChild(this.controlTextEl_),this.controlText(this.controlText_,r),this.controlTextEl_},t.controlText=function(r,a){if(a===void 0&&(a=this.el()),r===void 0)return this.controlText_||"Need Text";var s=this.localize(r);this.controlText_=r,cs(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&a.setAttribute("title",s)},t.buildCSSClass=function(){return"vjs-control vjs-button "+n.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(r){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(r){we.default.isEventKey(r,"Space")||we.default.isEventKey(r,"Enter")?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):n.prototype.handleKeyDown.call(this,r)},e}(se);se.registerComponent("ClickableComponent",sp);var OU=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.update(),a.update_=function(s){return a.update(s)},i.on("posterchange",a.update_),a}var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),n.prototype.dispose.call(this)},t.createEl=function(){var r=He("div",{className:"vjs-poster",tabIndex:-1});return r},t.update=function(r){var a=this.player().poster();this.setSrc(a),a?this.show():this.hide()},t.setSrc=function(r){var a="";r&&(a='url("'+r+'")'),this.el_.style.backgroundImage=a},t.handleClick=function(r){if(!!this.player_.controls()){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((fd||hd)&&a)&&this.player_.tech(!0).focus(),this.player_.paused()?Ur(this.player_.play()):this.player_.pause()}},e}(sp);se.registerComponent("PosterImage",OU);var Zi="#222",uw="#ccc",LU={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function r_(n,e){var t;if(n.length===4)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)t=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function n_(n,e,t){try{n.style[e]=t}catch{return}}var RU=function(n){de(e,n);function e(i,r,a){var s;s=n.call(this,i,r,a)||this;var o=function(l){return s.updateDisplay(l)};return i.on("loadstart",function(u){return s.toggleDisplay(u)}),i.on("texttrackchange",o),i.on("loadedmetadata",function(u){return s.preselectTrack(u)}),i.ready(ct(Se(s),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks){this.hide();return}i.on("fullscreenchange",o),i.on("playerresize",o),$.default.addEventListener("orientationchange",o),i.on("dispose",function(){return $.default.removeEventListener("orientationchange",o)});for(var u=this.options_.playerOptions.tracks||[],l=0;l<u.length;l++)this.player_.addRemoteTextTrack(u[l],!0);this.preselectTrack()})),s}var t=e.prototype;return t.preselectTrack=function(){for(var r={captions:1,subtitles:1},a=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,u,l,d=0;d<a.length;d++){var h=a[d];s&&s.enabled&&s.language&&s.language===h.language&&h.kind in r?h.kind===s.kind?l=h:l||(l=h):s&&!s.enabled?(l=null,o=null,u=null):h.default&&(h.kind==="descriptions"&&!o?o=h:h.kind in r&&!u&&(u=h))}l?l.mode="showing":u?u.mode="showing":o&&(o.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){typeof $.default.WebVTT=="function"&&$.default.WebVTT.processCues($.default,[],this.el_)},t.updateDisplay=function(){var r=this.player_.textTracks(),a=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),a){for(var s=[],o=0;o<r.length;++o){var u=r[o];u.mode==="showing"&&s.push(u)}this.updateForTrack(s);return}for(var l=null,d=null,h=r.length;h--;){var p=r[h];p.mode==="showing"&&(p.kind==="descriptions"?l=p:d=p)}d?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(d)):l&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(l))},t.updateDisplayState=function(r){for(var a=this.player_.textTrackSettings.getValues(),s=r.activeCues,o=s.length;o--;){var u=s[o];if(!!u){var l=u.displayState;if(a.color&&(l.firstChild.style.color=a.color),a.textOpacity&&n_(l.firstChild,"color",r_(a.color||"#fff",a.textOpacity)),a.backgroundColor&&(l.firstChild.style.backgroundColor=a.backgroundColor),a.backgroundOpacity&&n_(l.firstChild,"backgroundColor",r_(a.backgroundColor||"#000",a.backgroundOpacity)),a.windowColor&&(a.windowOpacity?n_(l,"backgroundColor",r_(a.windowColor,a.windowOpacity)):l.style.backgroundColor=a.windowColor),a.edgeStyle&&(a.edgeStyle==="dropshadow"?l.firstChild.style.textShadow="2px 2px 3px "+Zi+", 2px 2px 4px "+Zi+", 2px 2px 5px "+Zi:a.edgeStyle==="raised"?l.firstChild.style.textShadow="1px 1px "+Zi+", 2px 2px "+Zi+", 3px 3px "+Zi:a.edgeStyle==="depressed"?l.firstChild.style.textShadow="1px 1px "+uw+", 0 1px "+uw+", -1px -1px "+Zi+", 0 -1px "+Zi:a.edgeStyle==="uniform"&&(l.firstChild.style.textShadow="0 0 4px "+Zi+", 0 0 4px "+Zi+", 0 0 4px "+Zi+", 0 0 4px "+Zi)),a.fontPercent&&a.fontPercent!==1){var d=$.default.parseFloat(l.style.fontSize);l.style.fontSize=d*a.fontPercent+"px",l.style.height="auto",l.style.top="auto"}a.fontFamily&&a.fontFamily!=="default"&&(a.fontFamily==="small-caps"?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=LU[a.fontFamily])}}},t.updateForTrack=function(r){if(Array.isArray(r)||(r=[r]),!(typeof $.default.WebVTT!="function"||r.every(function(_){return!_.activeCues}))){for(var a=[],s=0;s<r.length;++s)for(var o=r[s],u=0;u<o.activeCues.length;++u)a.push(o.activeCues[u]);$.default.WebVTT.processCues($.default,a,this.el_);for(var l=0;l<r.length;++l){for(var d=r[l],h=0;h<d.activeCues.length;++h){var p=d.activeCues[h].displayState;Cn(p,"vjs-text-track-cue"),Cn(p,"vjs-text-track-cue-"+(d.language?d.language:l)),d.language&&Ko(p,"lang",d.language)}this.player_.textTrackSettings&&this.updateDisplayState(d)}}},e}(se);se.registerComponent("TextTrackDisplay",RU);var MU=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var r=this.player_.isAudio(),a=this.localize(r?"Audio Player":"Video Player"),s=He("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[a])}),o=n.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},e}(se);se.registerComponent("LoadingSpinner",MU);var mr=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(r,a,s){a===void 0&&(a={}),s===void 0&&(s={}),r="button",a=yt({className:this.buildCSSClass()},a),s=yt({type:"button"},s);var o=He(r,a,s);return o.appendChild(He("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.addChild=function(r,a){a===void 0&&(a={});var s=this.constructor.name;return Ie.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),se.prototype.addChild.call(this,r,a)},t.enable=function(){n.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.disable=function(){n.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.handleKeyDown=function(r){if(we.default.isEventKey(r,"Space")||we.default.isEventKey(r,"Enter")){r.stopPropagation();return}n.prototype.handleKeyDown.call(this,r)},e}(sp);se.registerComponent("Button",mr);var kA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.mouseused_=!1,a.on("mousedown",function(s){return a.handleMouseDown(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(r){var a=this.player_.play();if(this.mouseused_&&r.clientX&&r.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;Ur(a),this.player_.tech(!0)&&!((fd||hd)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),u=o&&o.getChild("playToggle");if(!u){this.player_.tech(!0).focus();return}var l=function(){return u.focus()};rd(a)?a.then(l,function(){}):this.setTimeout(l,1)},t.handleKeyDown=function(r){this.mouseused_=!1,n.prototype.handleKeyDown.call(this,r)},t.handleMouseDown=function(r){this.mouseused_=!0},e}(mr);kA.prototype.controlText_="Play Video";se.registerComponent("BigPlayButton",kA);var NU=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.controlText(r&&r.controlText||a.localize("Close")),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(r){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(r){we.default.isEventKey(r,"Esc")?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):n.prototype.handleKeyDown.call(this,r)},e}(mr);se.registerComponent("CloseButton",NU);var IA=function(n){de(e,n);function e(i,r){var a;return r===void 0&&(r={}),a=n.call(this,i,r)||this,r.replay=r.replay===void 0||r.replay,a.on(i,"play",function(s){return a.handlePlay(s)}),a.on(i,"pause",function(s){return a.handlePause(s)}),r.replay&&a.on(i,"ended",function(s){return a.handleEnded(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(r){this.player_.paused()?Ur(this.player_.play()):this.player_.pause()},t.handleSeeked=function(r){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(r):this.handlePlay(r)},t.handlePlay=function(r){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(r){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(r){var a=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return a.handleSeeked(s)})},e}(mr);IA.prototype.controlText_="Play";se.registerComponent("PlayToggle",IA);var PA=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),r=Math.floor(e/60%60),a=Math.floor(e/3600),s=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(a=r=i="-"),a=a>0||o>0?a+":":"",r=((a||s>=10)&&r<10?"0"+r:r)+":",i=i<10?"0"+i:i,a+r+i},G_=PA;function BU(n){G_=n}function UU(){G_=PA}function Jo(n,e){return e===void 0&&(e=n),G_(n,e)}var nu=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.on(i,["timeupdate","ended"],function(s){return a.updateContent(s)}),a.updateTextNode_(),a}var t=e.prototype;return t.createEl=function(){var r=this.buildCSSClass(),a=n.prototype.createEl.call(this,"div",{className:r+" vjs-time-control vjs-control"}),s=He("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});return a.appendChild(s),this.contentEl_=He("span",{className:r+"-display"},{"aria-live":"off",role:"presentation"}),a.appendChild(this.contentEl_),a},t.dispose=function(){this.contentEl_=null,this.textNode_=null,n.prototype.dispose.call(this)},t.updateTextNode_=function(r){var a=this;r===void 0&&(r=0),r=Jo(r),this.formattedTime_!==r&&(this.formattedTime_=r,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!!a.contentEl_){var s=a.textNode_;s&&a.contentEl_.firstChild!==s&&(s=null,Ie.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),a.textNode_=le.default.createTextNode(a.formattedTime_),a.textNode_&&(s?a.contentEl_.replaceChild(a.textNode_,s):a.contentEl_.appendChild(a.textNode_))}}))},t.updateContent=function(r){},e}(se);nu.prototype.labelText_="Time";nu.prototype.controlText_="Time";se.registerComponent("TimeDisplay",nu);var z_=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(r){var a;this.player_.ended()?a=this.player_.duration():a=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(a)},e}(nu);z_.prototype.labelText_="Current Time";z_.prototype.controlText_="Current Time";se.registerComponent("CurrentTimeDisplay",z_);var K_=function(n){de(e,n);function e(i,r){var a;a=n.call(this,i,r)||this;var s=function(u){return a.updateContent(u)};return a.on(i,"durationchange",s),a.on(i,"loadstart",s),a.on(i,"loadedmetadata",s),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(r){var a=this.player_.duration();this.updateTextNode_(a)},e}(nu);K_.prototype.labelText_="Duration";K_.prototype.controlText_="Duration";se.registerComponent("DurationDisplay",K_);var jU=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),a=n.prototype.createEl.call(this,"div"),s=n.prototype.createEl.call(this,"span",{textContent:"/"});return a.appendChild(s),r.appendChild(a),r},e}(se);se.registerComponent("TimeDivider",jU);var X_=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.on(i,"durationchange",function(s){return a.updateContent(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var r=n.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&r.insertBefore(He("span",{},{"aria-hidden":!0},"-"),this.contentEl_),r},t.updateContent=function(r){if(typeof this.player_.duration()=="number"){var a;this.player_.ended()?a=0:this.player_.remainingTimeDisplay?a=this.player_.remainingTimeDisplay():a=this.player_.remainingTime(),this.updateTextNode_(a)}},e}(nu);X_.prototype.labelText_="Remaining Time";X_.prototype.controlText_="Remaining Time";se.registerComponent("RemainingTimeDisplay",X_);var HU=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.updateShowing(),a.on(a.player(),"durationchange",function(s){return a.updateShowing(s)}),a}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=He("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(He("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"})),this.contentEl_.appendChild(le.default.createTextNode(this.localize("LIVE"))),r.appendChild(this.contentEl_),r},t.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},t.updateShowing=function(r){this.player().duration()===1/0?this.show():this.hide()},e}(se);se.registerComponent("LiveDisplay",HU);var FA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.updateLiveEdgeStatus(),a.player_.liveTracker&&(a.updateLiveEdgeStatusHandler_=function(s){return a.updateLiveEdgeStatus(s)},a.on(a.player_.liveTracker,"liveedgechange",a.updateLiveEdgeStatusHandler_)),a}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=He("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),r.appendChild(this.textEl_),r},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,n.prototype.dispose.call(this)},e}(mr);FA.prototype.controlText_="Seek to live, currently playing live";se.registerComponent("SeekToLive",FA);var op=function(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))},Y_=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.handleMouseDown_=function(s){return a.handleMouseDown(s)},a.handleMouseUp_=function(s){return a.handleMouseUp(s)},a.handleKeyDown_=function(s){return a.handleKeyDown(s)},a.handleClick_=function(s){return a.handleClick(s)},a.handleMouseMove_=function(s){return a.handleMouseMove(s)},a.update_=function(s){return a.update(s)},a.bar=a.getChild(a.options_.barName),a.vertical(!!a.options_.vertical),a.enable(),a}var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(!!this.enabled()){var r=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(r,"mousemove",this.handleMouseMove_),this.off(r,"mouseup",this.handleMouseUp_),this.off(r,"touchmove",this.handleMouseMove_),this.off(r,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(r,a,s){return a===void 0&&(a={}),s===void 0&&(s={}),a.className=a.className+" vjs-slider",a=yt({tabIndex:0},a),s=yt({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),n.prototype.createEl.call(this,r,a,s)},t.handleMouseDown=function(r){var a=this.bar.el_.ownerDocument;r.type==="mousedown"&&r.preventDefault(),r.type==="touchstart"&&!Pn&&r.preventDefault(),oA(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(a,"mousemove",this.handleMouseMove_),this.on(a,"mouseup",this.handleMouseUp_),this.on(a,"touchmove",this.handleMouseMove_),this.on(a,"touchend",this.handleMouseUp_),this.handleMouseMove(r,!0)},t.handleMouseMove=function(r){},t.handleMouseUp=function(){var r=this.bar.el_.ownerDocument;uA(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(r,"mousemove",this.handleMouseMove_),this.off(r,"mouseup",this.handleMouseUp_),this.off(r,"touchmove",this.handleMouseMove_),this.off(r,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var r=this;if(!(!this.el_||!this.bar)){var a=this.getProgress();return a===this.progress_||(this.progress_=a,this.requestNamedAnimationFrame("Slider#update",function(){var s=r.vertical()?"height":"width";r.bar.el().style[s]=(a*100).toFixed(2)+"%"})),a}},t.getProgress=function(){return Number(op(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(r){var a=tp(this.el_,r);return this.vertical()?a.y:a.x},t.handleKeyDown=function(r){we.default.isEventKey(r,"Left")||we.default.isEventKey(r,"Down")?(r.preventDefault(),r.stopPropagation(),this.stepBack()):we.default.isEventKey(r,"Right")||we.default.isEventKey(r,"Up")?(r.preventDefault(),r.stopPropagation(),this.stepForward()):n.prototype.handleKeyDown.call(this,r)},t.handleClick=function(r){r.stopPropagation(),r.preventDefault()},t.vertical=function(r){if(r===void 0)return this.vertical_||!1;this.vertical_=!!r,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(se);se.registerComponent("Slider",Y_);var a_=function(e,t){return op(e/t*100,0,100).toFixed(2)+"%"},$U=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.partEls_=[],a.on(i,"progress",function(s){return a.update(s)}),a}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),a=He("span",{className:"vjs-control-text"}),s=He("span",{textContent:this.localize("Loaded")}),o=le.default.createTextNode(": ");return this.percentageEl_=He("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),r.appendChild(a),a.appendChild(s),a.appendChild(o),a.appendChild(this.percentageEl_),r},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,n.prototype.dispose.call(this)},t.update=function(r){var a=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=a.player_.liveTracker,o=a.player_.buffered(),u=s&&s.isLive()?s.seekableEnd():a.player_.duration(),l=a.player_.bufferedEnd(),d=a.partEls_,h=a_(l,u);a.percent_!==h&&(a.el_.style.width=h,cs(a.percentageEl_,h),a.percent_=h);for(var p=0;p<o.length;p++){var _=o.start(p),D=o.end(p),C=d[p];C||(C=a.el_.appendChild(He()),d[p]=C),!(C.dataset.start===_&&C.dataset.end===D)&&(C.dataset.start=_,C.dataset.end=D,C.style.left=a_(_,l),C.style.width=a_(D-_,l))}for(var S=d.length;S>o.length;S--)a.el_.removeChild(d[S-1]);d.length=o.length})},e}(se);se.registerComponent("LoadProgressBar",$U);var VU=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.update=kn(ct(Se(a),a.update),gr),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(r,a,s){var o=ld(this.el_),u=Xo(this.player_.el()),l=r.width*a;if(!(!u||!o)){var d=r.left-u.left+l,h=r.width-l+(u.right-r.right),p=o.width/2;d<p?p+=p-d:h<p&&(p=h),p<0?p=0:p>o.width&&(p=o.width),p=Math.round(p),this.el_.style.right="-"+p+"px",this.write(s)}},t.write=function(r){cs(this.el_,r)},t.updateTime=function(r,a,s,o){var u=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var l,d=u.player_.duration();if(u.player_.liveTracker&&u.player_.liveTracker.isLive()){var h=u.player_.liveTracker.liveWindow(),p=h-a*h;l=(p<1?"":"-")+Jo(p,h)}else l=Jo(s,d);u.update(r,a,l),o&&o()})},e}(se);se.registerComponent("TimeTooltip",VU);var Q_=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.update=kn(ct(Se(a),a.update),gr),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(r,a){var s=this.getChild("timeTooltip");if(!!s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(r,a,o)}},e}(se);Q_.prototype.options_={children:[]};!hi&&!In&&Q_.prototype.options_.children.push("timeTooltip");se.registerComponent("PlayProgressBar",Q_);var OA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.update=kn(ct(Se(a),a.update),gr),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(r,a){var s=this,o=a*this.player_.duration();this.getChild("timeTooltip").updateTime(r,a,o,function(){s.el_.style.left=r.width*a+"px"})},e}(se);OA.prototype.options_={children:["timeTooltip"]};se.registerComponent("MouseTimeDisplay",OA);var wf=5,lw=12,J_=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.setEventHandlers_(),a}var t=e.prototype;return t.setEventHandlers_=function(){var r=this;this.update_=ct(this,this.update),this.update=kn(this.update_,gr),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(a){return r.enableInterval_(a)},this.disableIntervalHandler_=function(a){return r.disableInterval_(a)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in le.default&&"visibilityState"in le.default&&this.on(le.default,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(r){le.default.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(r)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,gr))},t.disableInterval_=function(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&r&&r.type!=="ended"||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(r){var a=this;if(le.default.visibilityState!=="hidden"){var s=n.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=a.player_.ended()?a.player_.duration():a.getCurrentTime_(),u=a.player_.liveTracker,l=a.player_.duration();u&&u.isLive()&&(l=a.player_.liveTracker.liveCurrentTime()),a.percent_!==s&&(a.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),a.percent_=s),(a.currentTime_!==o||a.duration_!==l)&&(a.el_.setAttribute("aria-valuetext",a.localize("progress bar timing: currentTime={1} duration={2}",[Jo(o,l),Jo(l,l)],"{1} of {2}")),a.currentTime_=o,a.duration_=l),a.bar&&a.bar.update(Xo(a.el()),a.getProgress())}),s}},t.userSeek_=function(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(r)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var r=this.getCurrentTime_(),a,s=this.player_.liveTracker;return s&&s.isLive()?(a=(r-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(a=1)):a=r/this.player_.duration(),a},t.handleMouseDown=function(r){!dd(r)||(r.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),n.prototype.handleMouseDown.call(this,r))},t.handleMouseMove=function(r,a){if(a===void 0&&(a=!1),!!dd(r)){!a&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,o=this.calculateDistance(r),u=this.player_.liveTracker;if(!u||!u.isLive())s=o*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(o>=.99){u.seekToLiveEdge();return}var l=u.seekableStart(),d=u.liveCurrentTime();if(s=l+o*u.liveWindow(),s>=d&&(s=d),s<=l&&(s=l+.1),s===1/0)return}this.userSeek_(s)}},t.enable=function(){n.prototype.enable.call(this);var r=this.getChild("mouseTimeDisplay");!r||r.show()},t.disable=function(){n.prototype.disable.call(this);var r=this.getChild("mouseTimeDisplay");!r||r.hide()},t.handleMouseUp=function(r){n.prototype.handleMouseUp.call(this,r),r&&r.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ur(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+wf)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-wf)},t.handleAction=function(r){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(r){var a=this.player_.liveTracker;if(we.default.isEventKey(r,"Space")||we.default.isEventKey(r,"Enter"))r.preventDefault(),r.stopPropagation(),this.handleAction(r);else if(we.default.isEventKey(r,"Home"))r.preventDefault(),r.stopPropagation(),this.userSeek_(0);else if(we.default.isEventKey(r,"End"))r.preventDefault(),r.stopPropagation(),a&&a.isLive()?this.userSeek_(a.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test((0,we.default)(r))){r.preventDefault(),r.stopPropagation();var s=(we.default.codes[(0,we.default)(r)]-we.default.codes[0])*10/100;a&&a.isLive()?this.userSeek_(a.seekableStart()+a.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else we.default.isEventKey(r,"PgDn")?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()-wf*lw)):we.default.isEventKey(r,"PgUp")?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()+wf*lw)):n.prototype.handleKeyDown.call(this,r)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in le.default&&"visibilityState"in le.default&&this.off(le.default,"visibilitychange",this.toggleVisibility_),n.prototype.dispose.call(this)},e}(Y_);J_.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!hi&&!In&&J_.prototype.options_.children.splice(1,0,"mouseTimeDisplay");se.registerComponent("SeekBar",J_);var LA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.handleMouseMove=kn(ct(Se(a),a.handleMouseMove),gr),a.throttledHandleMouseSeek=kn(ct(Se(a),a.handleMouseSeek),gr),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.handleMouseDownHandler_=function(s){return a.handleMouseDown(s)},a.enable(),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(r){var a=this.getChild("seekBar");if(!!a){var s=a.getChild("playProgressBar"),o=a.getChild("mouseTimeDisplay");if(!(!s&&!o)){var u=a.el(),l=ld(u),d=tp(u,r).x;d=op(d,0,1),o&&o.update(l,d),s&&s.update(l,a.getProgress())}}},t.handleMouseSeek=function(r){var a=this.getChild("seekBar");a&&a.handleMouseMove(r)},t.enabled=function(){return this.enabled_},t.disable=function(){if(this.children().forEach(function(a){return a.disable&&a.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var r=this.getChild("seekBar");this.player_.scrubbing(!1),r.videoWasPlaying&&Ur(this.player_.play())}},t.enable=function(){this.children().forEach(function(r){return r.enable&&r.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var r=this.el_.ownerDocument;this.off(r,"mousemove",this.throttledHandleMouseSeek),this.off(r,"touchmove",this.throttledHandleMouseSeek),this.off(r,"mouseup",this.handleMouseUpHandler_),this.off(r,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(r){var a=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(r),this.on(a,"mousemove",this.throttledHandleMouseSeek),this.on(a,"touchmove",this.throttledHandleMouseSeek),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(r){var a=this.getChild("seekBar");a&&a.handleMouseUp(r),this.removeListenersAddedOnMousedownAndTouchstart()},e}(se);LA.prototype.options_={children:["seekBar"]};se.registerComponent("ProgressControl",LA);var RA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.on(i,["enterpictureinpicture","leavepictureinpicture"],function(s){return a.handlePictureInPictureChange(s)}),a.on(i,["disablepictureinpicturechanged","loadedmetadata"],function(s){return a.handlePictureInPictureEnabledChange(s)}),a.on(i,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var s=i.currentType().substring(0,5)==="audio";s||i.audioPosterMode()||i.audioOnlyMode()?(i.isInPictureInPicture()&&i.exitPictureInPicture(),a.hide()):a.show()}),a.disable(),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+n.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){le.default.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},t.handlePictureInPictureChange=function(r){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(r){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(mr);RA.prototype.controlText_="Picture-in-Picture";se.registerComponent("PictureInPictureToggle",RA);var MA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.on(i,"fullscreenchange",function(s){return a.handleFullscreenChange(s)}),le.default[i.fsApi_.fullscreenEnabled]===!1&&a.disable(),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(r){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(r){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(mr);MA.prototype.controlText_="Fullscreen";se.registerComponent("FullscreenToggle",MA);var WU=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},qU=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return r.appendChild(n.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),r},e}(se);se.registerComponent("VolumeLevel",qU);var GU=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.update=kn(ct(Se(a),a.update),gr),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(r,a,s,o){if(!s){var u=Xo(this.el_),l=Xo(this.player_.el()),d=r.width*a;if(!l||!u)return;var h=r.left-l.left+d,p=r.width-d+(l.right-r.right),_=u.width/2;h<_?_+=_-h:p<_&&(_=p),_<0?_=0:_>u.width&&(_=u.width),this.el_.style.right="-"+_+"px"}this.write(o+"%")},t.write=function(r){cs(this.el_,r)},t.updateVolume=function(r,a,s,o,u){var l=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){l.update(r,a,s,o.toFixed(0)),u&&u()})},e}(se);se.registerComponent("VolumeLevelTooltip",GU);var NA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.update=kn(ct(Se(a),a.update),gr),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(r,a,s){var o=this,u=100*a;this.getChild("volumeLevelTooltip").updateVolume(r,a,s,u,function(){s?o.el_.style.bottom=r.height*a+"px":o.el_.style.left=r.width*a+"px"})},e}(se);NA.prototype.options_={children:["volumeLevelTooltip"]};se.registerComponent("MouseVolumeLevelDisplay",NA);var up=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.on("slideractive",function(s){return a.updateLastVolume_(s)}),a.on(i,"volumechange",function(s){return a.updateARIAAttributes(s)}),i.ready(function(){return a.updateARIAAttributes()}),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(r){!dd(r)||n.prototype.handleMouseDown.call(this,r)},t.handleMouseMove=function(r){var a=this.getChild("mouseVolumeLevelDisplay");if(a){var s=this.el(),o=Xo(s),u=this.vertical(),l=tp(s,r);l=u?l.y:l.x,l=op(l,0,1),a.update(o,l,u)}!dd(r)||(this.checkMuted(),this.player_.volume(this.calculateDistance(r)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(r){var a=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",a),this.el_.setAttribute("aria-valuetext",a+"%")},t.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},t.updateLastVolume_=function(){var r=this,a=this.player_.volume();this.one("sliderinactive",function(){r.player_.volume()===0&&r.player_.lastVolume_(a)})},e}(Y_);up.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!hi&&!In&&up.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");up.prototype.playerEvent="volumechange";se.registerComponent("VolumeBar",up);var BA=function(n){de(e,n);function e(i,r){var a;return r===void 0&&(r={}),r.vertical=r.vertical||!1,(typeof r.volumeBar>"u"||od(r.volumeBar))&&(r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=r.vertical),a=n.call(this,i,r)||this,WU(Se(a),i),a.throttledHandleMouseMove=kn(ct(Se(a),a.handleMouseMove),gr),a.handleMouseUpHandler_=function(s){return a.handleMouseUp(s)},a.on("mousedown",function(s){return a.handleMouseDown(s)}),a.on("touchstart",function(s){return a.handleMouseDown(s)}),a.on("mousemove",function(s){return a.handleMouseMove(s)}),a.on(a.volumeBar,["focus","slideractive"],function(){a.volumeBar.addClass("vjs-slider-active"),a.addClass("vjs-slider-active"),a.trigger("slideractive")}),a.on(a.volumeBar,["blur","sliderinactive"],function(){a.volumeBar.removeClass("vjs-slider-active"),a.removeClass("vjs-slider-active"),a.trigger("sliderinactive")}),a}var t=e.prototype;return t.createEl=function(){var r="vjs-volume-horizontal";return this.options_.vertical&&(r="vjs-volume-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+r})},t.handleMouseDown=function(r){var a=this.el_.ownerDocument;this.on(a,"mousemove",this.throttledHandleMouseMove),this.on(a,"touchmove",this.throttledHandleMouseMove),this.on(a,"mouseup",this.handleMouseUpHandler_),this.on(a,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(r){var a=this.el_.ownerDocument;this.off(a,"mousemove",this.throttledHandleMouseMove),this.off(a,"touchmove",this.throttledHandleMouseMove),this.off(a,"mouseup",this.handleMouseUpHandler_),this.off(a,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(r){this.volumeBar.handleMouseMove(r)},e}(se);BA.prototype.options_={children:["volumeBar"]};se.registerComponent("VolumeControl",BA);var zU=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},UA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,zU(Se(a),i),a.on(i,["loadstart","volumechange"],function(s){return a.update(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(r){var a=this.player_.volume(),s=this.player_.lastVolume_();if(a===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function(r){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var r=this.player_.volume(),a=3;hi&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),r===0||this.player_.muted()?a=0:r<.33?a=1:r<.67&&(a=2);for(var s=0;s<4;s++)pd(this.el_,"vjs-vol-"+s);Cn(this.el_,"vjs-vol-"+a)},t.updateControlText_=function(){var r=this.player_.muted()||this.player_.volume()===0,a=r?"Unmute":"Mute";this.controlText()!==a&&this.controlText(a)},e}(mr);UA.prototype.controlText_="Mute";se.registerComponent("MuteToggle",UA);var jA=function(n){de(e,n);function e(i,r){var a;return r===void 0&&(r={}),typeof r.inline<"u"?r.inline=r.inline:r.inline=!0,(typeof r.volumeControl>"u"||od(r.volumeControl))&&(r.volumeControl=r.volumeControl||{},r.volumeControl.vertical=!r.inline),a=n.call(this,i,r)||this,a.handleKeyPressHandler_=function(s){return a.handleKeyPress(s)},a.on(i,["loadstart"],function(s){return a.volumePanelState_(s)}),a.on(a.muteToggle,"keyup",function(s){return a.handleKeyPress(s)}),a.on(a.volumeControl,"keyup",function(s){return a.handleVolumeControlKeyUp(s)}),a.on("keydown",function(s){return a.handleKeyPress(s)}),a.on("mouseover",function(s){return a.handleMouseOver(s)}),a.on("mouseout",function(s){return a.handleMouseOut(s)}),a.on(a.volumeControl,["slideractive"],a.sliderActive_),a.on(a.volumeControl,["sliderinactive"],a.sliderInactive_),a}var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var r="vjs-volume-panel-horizontal";return this.options_.inline||(r="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+r})},t.dispose=function(){this.handleMouseOut(),n.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(r){we.default.isEventKey(r,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(r){this.addClass("vjs-hover"),Bi(le.default,"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(r){this.removeClass("vjs-hover"),Xt(le.default,"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(r){we.default.isEventKey(r,"Esc")&&this.handleMouseOut()},e}(se);jA.prototype.options_={children:["muteToggle","volumeControl"]};se.registerComponent("VolumePanel",jA);var HA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,r&&(a.menuButton_=r.menuButton),a.focusedChild_=-1,a.on("keydown",function(s){return a.handleKeyDown(s)}),a.boundHandleBlur_=function(s){return a.handleBlur(s)},a.boundHandleTapClick_=function(s){return a.handleTapClick(s)},a}var t=e.prototype;return t.addEventListenerForItem=function(r){r instanceof se&&(this.on(r,"blur",this.boundHandleBlur_),this.on(r,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(r){r instanceof se&&(this.off(r,"blur",this.boundHandleBlur_),this.off(r,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(r){typeof r=="string"&&(r=this.getChild(r)),this.removeEventListenerForItem(r),n.prototype.removeChild.call(this,r)},t.addItem=function(r){var a=this.addChild(r);a&&this.addEventListenerForItem(a)},t.createEl=function(){var r=this.options_.contentElType||"ul";this.contentEl_=He(r,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var a=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return a.appendChild(this.contentEl_),Bi(a,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),a},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,n.prototype.dispose.call(this)},t.handleBlur=function(r){var a=r.relatedTarget||le.default.activeElement;if(!this.children().some(function(o){return o.el()===a})){var s=this.menuButton_;s&&s.buttonPressed_&&a!==s.el().firstChild&&s.unpressButton()}},t.handleTapClick=function(r){if(this.menuButton_){this.menuButton_.unpressButton();var a=this.children();if(!Array.isArray(a))return;var s=a.filter(function(o){return o.el()===r.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},t.handleKeyDown=function(r){we.default.isEventKey(r,"Left")||we.default.isEventKey(r,"Down")?(r.preventDefault(),r.stopPropagation(),this.stepForward()):(we.default.isEventKey(r,"Right")||we.default.isEventKey(r,"Up"))&&(r.preventDefault(),r.stopPropagation(),this.stepBack())},t.stepForward=function(){var r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_+1),this.focus(r)},t.stepBack=function(){var r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_-1),this.focus(r)},t.focus=function(r){r===void 0&&(r=0);var a=this.children().slice(),s=a.length&&a[0].hasClass("vjs-menu-title");s&&a.shift(),a.length>0&&(r<0?r=0:r>=a.length&&(r=a.length-1),this.focusedChild_=r,a[r].el_.focus())},e}(se);se.registerComponent("Menu",HA);var Z_=function(n){de(e,n);function e(i,r){var a;r===void 0&&(r={}),a=n.call(this,i,r)||this,a.menuButton_=new mr(i,r),a.menuButton_.controlText(a.controlText_),a.menuButton_.el_.setAttribute("aria-haspopup","true");var s=mr.prototype.buildCSSClass();a.menuButton_.el_.className=a.buildCSSClass()+" "+s,a.menuButton_.removeClass("vjs-control"),a.addChild(a.menuButton_),a.update(),a.enabled_=!0;var o=function(l){return a.handleClick(l)};return a.handleMenuKeyUp_=function(u){return a.handleMenuKeyUp(u)},a.on(a.menuButton_,"tap",o),a.on(a.menuButton_,"click",o),a.on(a.menuButton_,"keydown",function(u){return a.handleKeyDown(u)}),a.on(a.menuButton_,"mouseenter",function(){a.addClass("vjs-hover"),a.menu.show(),Bi(le.default,"keyup",a.handleMenuKeyUp_)}),a.on("mouseleave",function(u){return a.handleMouseLeave(u)}),a.on("keydown",function(u){return a.handleSubmenuKeyDown(u)}),a}var t=e.prototype;return t.update=function(){var r=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=r,this.addChild(r),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},t.createMenu=function(){var r=new HA(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var a=He("li",{className:"vjs-menu-title",textContent:Dt(this.options_.title),tabIndex:-1}),s=new se(this.player_,{el:a});r.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)r.addItem(this.items[o]);return r},t.createItems=function(){},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var r="vjs-menu-button";this.options_.inline===!0?r+="-inline":r+="-popup";var a=mr.prototype.buildCSSClass();return"vjs-menu-button "+r+" "+a+" "+n.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var r="vjs-menu-button";return this.options_.inline===!0?r+="-inline":r+="-popup","vjs-menu-button "+r+" "+n.prototype.buildCSSClass.call(this)},t.controlText=function(r,a){return a===void 0&&(a=this.menuButton_.el()),this.menuButton_.controlText(r,a)},t.dispose=function(){this.handleMouseLeave(),n.prototype.dispose.call(this)},t.handleClick=function(r){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(r){this.removeClass("vjs-hover"),Xt(le.default,"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(r){we.default.isEventKey(r,"Esc")||we.default.isEventKey(r,"Tab")?(this.buttonPressed_&&this.unpressButton(),we.default.isEventKey(r,"Tab")||(r.preventDefault(),this.menuButton_.focus())):(we.default.isEventKey(r,"Up")||we.default.isEventKey(r,"Down"))&&(this.buttonPressed_||(r.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(r){(we.default.isEventKey(r,"Esc")||we.default.isEventKey(r,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(r){this.handleSubmenuKeyDown(r)},t.handleSubmenuKeyDown=function(r){(we.default.isEventKey(r,"Esc")||we.default.isEventKey(r,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),we.default.isEventKey(r,"Tab")||(r.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),hi&&iA())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(se);se.registerComponent("MenuButton",Z_);var ey=function(n){de(e,n);function e(t,i){var r,a=i.tracks;if(r=n.call(this,t,i)||this,r.items.length<=1&&r.hide(),!a)return Se(r);var s=ct(Se(r),r.update);return a.addEventListener("removetrack",s),a.addEventListener("addtrack",s),a.addEventListener("labelchange",s),r.player_.on("ready",s),r.player_.on("dispose",function(){a.removeEventListener("removetrack",s),a.removeEventListener("addtrack",s),a.removeEventListener("labelchange",s)}),r}return e}(Z_);se.registerComponent("TrackButton",ey);var KU=["Tab","Esc","Up","Down","Right","Left"],gd=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.selectable=r.selectable,a.isSelected_=r.selected||!1,a.multiSelectable=r.multiSelectable,a.selected(a.isSelected_),a.selectable?a.multiSelectable?a.el_.setAttribute("role","menuitemcheckbox"):a.el_.setAttribute("role","menuitemradio"):a.el_.setAttribute("role","menuitem"),a}var t=e.prototype;return t.createEl=function(r,a,s){this.nonIconControl=!0;var o=n.prototype.createEl.call(this,"li",yt({className:"vjs-menu-item",tabIndex:-1},a),s);return o.replaceChild(He("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},t.handleKeyDown=function(r){KU.some(function(a){return we.default.isEventKey(r,a)})||n.prototype.handleKeyDown.call(this,r)},t.handleClick=function(r){this.selected(!0)},t.selected=function(r){this.selectable&&(r?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(sp);se.registerComponent("MenuItem",gd);var vd=function(n){de(e,n);function e(i,r){var a,s=r.track,o=i.textTracks();r.label=s.label||s.language||"Unknown",r.selected=s.mode==="showing",a=n.call(this,i,r)||this,a.track=s,a.kinds=(r.kinds||[r.kind||a.track.kind]).filter(Boolean);var u=function(){for(var p=arguments.length,_=new Array(p),D=0;D<p;D++)_[D]=arguments[D];a.handleTracksChange.apply(Se(a),_)},l=function(){for(var p=arguments.length,_=new Array(p),D=0;D<p;D++)_[D]=arguments[D];a.handleSelectedLanguageChange.apply(Se(a),_)};if(i.on(["loadstart","texttrackchange"],u),o.addEventListener("change",u),o.addEventListener("selectedlanguagechange",l),a.on("dispose",function(){i.off(["loadstart","texttrackchange"],u),o.removeEventListener("change",u),o.removeEventListener("selectedlanguagechange",l)}),o.onchange===void 0){var d;a.on(["tap","click"],function(){if(typeof $.default.Event!="object")try{d=new $.default.Event("change")}catch{}d||(d=le.default.createEvent("Event"),d.initEvent("change",!0,!0)),o.dispatchEvent(d)})}return a.handleTracksChange(),a}var t=e.prototype;return t.handleClick=function(r){var a=this.track,s=this.player_.textTracks();if(n.prototype.handleClick.call(this,r),!!s)for(var o=0;o<s.length;o++){var u=s[o];this.kinds.indexOf(u.kind)!==-1&&(u===a?u.mode!=="showing"&&(u.mode="showing"):u.mode!=="disabled"&&(u.mode="disabled"))}},t.handleTracksChange=function(r){var a=this.track.mode==="showing";a!==this.isSelected_&&this.selected(a)},t.handleSelectedLanguageChange=function(r){if(this.track.mode==="showing"){var a=this.player_.cache_.selectedLanguage;if(a&&a.enabled&&a.language===this.track.language&&a.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,n.prototype.dispose.call(this)},e}(gd);se.registerComponent("TextTrackMenuItem",vd);var $A=function(n){de(e,n);function e(i,r){return r.track={player:i,kind:r.kind,kinds:r.kinds,default:!1,mode:"disabled"},r.kinds||(r.kinds=[r.kind]),r.label?r.track.label=r.label:r.track.label=r.kinds.join(" and ")+" off",r.selectable=!0,r.multiSelectable=!1,n.call(this,i,r)||this}var t=e.prototype;return t.handleTracksChange=function(r){for(var a=this.player().textTracks(),s=!0,o=0,u=a.length;o<u;o++){var l=a[o];if(this.options_.kinds.indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},t.handleSelectedLanguageChange=function(r){for(var a=this.player().textTracks(),s=!0,o=0,u=a.length;o<u;o++){var l=a[o];if(["captions","descriptions","subtitles"].indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(vd);se.registerComponent("OffTextTrackMenuItem",$A);var au=function(n){de(e,n);function e(i,r){return r===void 0&&(r={}),r.tracks=i.textTracks(),n.call(this,i,r)||this}var t=e.prototype;return t.createItems=function(r,a){r===void 0&&(r=[]),a===void 0&&(a=vd);var s;this.label_&&(s=this.label_+" off"),r.push(new $A(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var u=0;u<o.length;u++){var l=o[u];if(this.kinds_.indexOf(l.kind)>-1){var d=new a(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});d.addClass("vjs-"+l.kind+"-menu-item"),r.push(d)}}return r},e}(ey);se.registerComponent("TextTrackButton",au);var VA=function(n){de(e,n);function e(i,r){var a,s=r.track,o=r.cue,u=i.currentTime();return r.selectable=!0,r.multiSelectable=!1,r.label=o.text,r.selected=o.startTime<=u&&u<o.endTime,a=n.call(this,i,r)||this,a.track=s,a.cue=o,a}var t=e.prototype;return t.handleClick=function(r){n.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(gd);se.registerComponent("ChaptersTrackMenuItem",VA);var ty=function(n){de(e,n);function e(i,r,a){var s;return s=n.call(this,i,r,a)||this,s.selectCurrentItem_=function(){s.items.forEach(function(o){o.selected(s.track_.activeCues[0]===o.cue)})},s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)},t.update=function(r){if(!(r&&r.track&&r.track.kind!=="chapters")){var a=this.findChaptersTrack();a!==this.track_?(this.setTrack(a),n.prototype.update.call(this)):(!this.items||a&&a.cues&&a.cues.length!==this.items.length)&&n.prototype.update.call(this)}},t.setTrack=function(r){if(this.track_!==r){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=r,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},t.findChaptersTrack=function(){for(var r=this.player_.textTracks()||[],a=r.length-1;a>=0;a--){var s=r[a];if(s.kind===this.kind_)return s}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Dt(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),n.prototype.createMenu.call(this)},t.createItems=function(){var r=[];if(!this.track_)return r;var a=this.track_.cues;if(!a)return r;for(var s=0,o=a.length;s<o;s++){var u=a[s],l=new VA(this.player_,{track:this.track_,cue:u});r.push(l)}return r},e}(au);ty.prototype.kind_="chapters";ty.prototype.controlText_="Chapters";se.registerComponent("ChaptersButton",ty);var iy=function(n){de(e,n);function e(i,r,a){var s;s=n.call(this,i,r,a)||this;var o=i.textTracks(),u=ct(Se(s),s.handleTracksChange);return o.addEventListener("change",u),s.on("dispose",function(){o.removeEventListener("change",u)}),s}var t=e.prototype;return t.handleTracksChange=function(r){for(var a=this.player().textTracks(),s=!1,o=0,u=a.length;o<u;o++){var l=a[o];if(l.kind!==this.kind_&&l.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildWrapperCSSClass.call(this)},e}(au);iy.prototype.kind_="descriptions";iy.prototype.controlText_="Descriptions";se.registerComponent("DescriptionsButton",iy);var ry=function(n){de(e,n);function e(i,r,a){return n.call(this,i,r,a)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)},e}(au);ry.prototype.kind_="subtitles";ry.prototype.controlText_="Subtitles";se.registerComponent("SubtitlesButton",ry);var ny=function(n){de(e,n);function e(i,r){var a;return r.track={player:i,kind:r.kind,label:r.kind+" settings",selectable:!1,default:!1,mode:"disabled"},r.selectable=!1,r.name="CaptionSettingsMenuItem",a=n.call(this,i,r)||this,a.addClass("vjs-texttrack-settings"),a.controlText(", opens "+r.kind+" settings dialog"),a}var t=e.prototype;return t.handleClick=function(r){this.player().getChild("textTrackSettings").open()},e}(vd);se.registerComponent("CaptionSettingsMenuItem",ny);var ay=function(n){de(e,n);function e(i,r,a){return n.call(this,i,r,a)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new ny(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,r)},e}(au);ay.prototype.kind_="captions";ay.prototype.controlText_="Captions";se.registerComponent("CaptionsButton",ay);var WA=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(r,a,s){var o=n.prototype.createEl.call(this,r,a,s),u=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(u.appendChild(He("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(He("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e}(vd);se.registerComponent("SubsCapsMenuItem",WA);var sy=function(n){de(e,n);function e(i,r){var a;return r===void 0&&(r={}),a=n.call(this,i,r)||this,a.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(a.player_.language_)>-1&&(a.label_="captions"),a.menuButton_.controlText(Dt(a.label_)),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new ny(this.player_,{kind:this.label_})),this.hideThreshold_+=1),r=n.prototype.createItems.call(this,r,WA),r},e}(au);sy.prototype.kinds_=["captions","subtitles"];sy.prototype.controlText_="Subtitles";se.registerComponent("SubsCapsButton",sy);var qA=function(n){de(e,n);function e(i,r){var a,s=r.track,o=i.audioTracks();r.label=s.label||s.language||"Unknown",r.selected=s.enabled,a=n.call(this,i,r)||this,a.track=s,a.addClass("vjs-"+s.kind+"-menu-item");var u=function(){for(var d=arguments.length,h=new Array(d),p=0;p<d;p++)h[p]=arguments[p];a.handleTracksChange.apply(Se(a),h)};return o.addEventListener("change",u),a.on("dispose",function(){o.removeEventListener("change",u)}),a}var t=e.prototype;return t.createEl=function(r,a,s){var o=n.prototype.createEl.call(this,r,a,s),u=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(u.appendChild(He("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(He("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},t.handleClick=function(r){if(n.prototype.handleClick.call(this,r),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];o!==this.track&&(o.enabled=o===this.track)}},t.handleTracksChange=function(r){this.selected(this.track.enabled)},e}(gd);se.registerComponent("AudioTrackMenuItem",qA);var GA=function(n){de(e,n);function e(i,r){return r===void 0&&(r={}),r.tracks=i.audioTracks(),n.call(this,i,r)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(r){r===void 0&&(r=[]),this.hideThreshold_=1;for(var a=this.player_.audioTracks(),s=0;s<a.length;s++){var o=a[s];r.push(new qA(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return r},e}(ey);GA.prototype.controlText_="Audio Track";se.registerComponent("AudioTrackButton",GA);var oy=function(n){de(e,n);function e(i,r){var a,s=r.rate,o=parseFloat(s,10);return r.label=s,r.selected=o===i.playbackRate(),r.selectable=!0,r.multiSelectable=!1,a=n.call(this,i,r)||this,a.label=s,a.rate=o,a.on(i,"ratechange",function(u){return a.update(u)}),a}var t=e.prototype;return t.handleClick=function(r){n.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(r){this.selected(this.player().playbackRate()===this.rate)},e}(gd);oy.prototype.contentElType="button";se.registerComponent("PlaybackRateMenuItem",oy);var zA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.menuButton_.el_.setAttribute("aria-describedby",a.labelElId_),a.updateVisibility(),a.updateLabel(),a.on(i,"loadstart",function(s){return a.updateVisibility(s)}),a.on(i,"ratechange",function(s){return a.updateLabel(s)}),a.on(i,"playbackrateschange",function(s){return a.handlePlaybackRateschange(s)}),a}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=He("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),r.appendChild(this.labelEl_),r},t.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var r=this.playbackRates(),a=[],s=r.length-1;s>=0;s--)a.push(new oy(this.player(),{rate:r[s]+"x"}));return a},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(r){var a=this.player().playbackRate(),s=this.playbackRates(),o=s.indexOf(a),u=(o+1)%s.length;this.player().playbackRate(s[u])},t.handlePlaybackRateschange=function(r){this.update()},t.playbackRates=function(){var r=this.player();return r.playbackRates&&r.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.updateVisibility=function(r){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(r){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(Z_);zA.prototype.controlText_="Playback Rate";se.registerComponent("PlaybackRateMenuButton",zA);var KA=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-spacer "+n.prototype.buildCSSClass.call(this)},t.createEl=function(r,a,s){return r===void 0&&(r="div"),a===void 0&&(a={}),s===void 0&&(s={}),a.className||(a.className=this.buildCSSClass()),n.prototype.createEl.call(this,r,a,s)},e}(se);se.registerComponent("Spacer",KA);var XU=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-custom-control-spacer "+n.prototype.buildCSSClass.call(this)},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"})},e}(KA);se.registerComponent("CustomControlSpacer",XU);var jf=function(n){de(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(se);jf.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in le.default&&jf.prototype.options_.children.splice(jf.prototype.options_.children.length-1,0,"pictureInPictureToggle");se.registerComponent("ControlBar",jf);var XA=function(n){de(e,n);function e(i,r){var a;return a=n.call(this,i,r)||this,a.on(i,"error",function(s){return a.open(s)}),a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},t.content=function(){var r=this.player().error();return r?this.localize(r.message):""},e}(iu);XA.prototype.options_=vt({},iu.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});se.registerComponent("ErrorDisplay",XA);var s_="vjs-text-track-settings",dw=["#000","Black"],cw=["#00F","Blue"],hw=["#0FF","Cyan"],fw=["#0F0","Green"],pw=["#F0F","Magenta"],mw=["#F00","Red"],gw=["#FFF","White"],vw=["#FF0","Yellow"],o_=["1","Opaque"],u_=["0.5","Semi-Transparent"],_w=["0","Transparent"],ss={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[dw,gw,mw,fw,cw,vw,pw,hw]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[o_,u_,_w]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[gw,dw,mw,fw,cw,vw,pw,hw]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[o_,u_]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[_w,u_,o_]}};ss.windowColor.options=ss.backgroundColor.options;function YA(n,e){if(e&&(n=e(n)),n&&n!=="none")return n}function YU(n,e){var t=n.options[n.options.selectedIndex].value;return YA(t,e)}function QU(n,e,t){if(!!e){for(var i=0;i<n.options.length;i++)if(YA(n.options[i].value,t)===e){n.selectedIndex=i;break}}}var JU=function(n){de(e,n);function e(i,r){var a;return r.temporary=!1,a=n.call(this,i,r)||this,a.updateDisplay=a.updateDisplay.bind(Se(a)),a.fill(),a.hasBeenOpened_=a.hasBeenFilled_=!0,a.endDialog=He("p",{className:"vjs-control-text",textContent:a.localize("End of dialog window.")}),a.el().appendChild(a.endDialog),a.setDefaults(),r.persistTextTrackSettings===void 0&&(a.options_.persistTextTrackSettings=a.options_.playerOptions.persistTextTrackSettings),a.on(a.$(".vjs-done-button"),"click",function(){a.saveSettings(),a.close()}),a.on(a.$(".vjs-default-button"),"click",function(){a.setDefaults(),a.updateDisplay()}),Wo(ss,function(s){a.on(a.$(s.selector),"change",a.updateDisplay)}),a.options_.persistTextTrackSettings&&a.restoreSettings(),a}var t=e.prototype;return t.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},t.createElSelect_=function(r,a,s){var o=this;a===void 0&&(a=""),s===void 0&&(s="label");var u=ss[r],l=u.id.replace("%s",this.id_),d=[a,l].join(" ").trim();return["<"+s+' id="'+l+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(u.label),"</"+s+">",'<select aria-labelledby="'+d+'">'].concat(u.options.map(function(h){var p=l+"-"+h[1].replace(/\W+/g,"");return['<option id="'+p+'" value="'+h[0]+'" ','aria-labelledby="'+d+" "+p+'">',o.localize(h[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var r="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",r),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",r),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var r="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",r),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",r),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var r="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",r),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",r),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return He("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return He("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var r=this.localize("restore all settings to the default values");return He("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+r+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+r+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var r=this;return HB(ss,function(a,s,o){var u=YU(r.$(s.selector),s.parser);return u!==void 0&&(a[o]=u),a},{})},t.setValues=function(r){var a=this;Wo(ss,function(s,o){QU(a.$(s.selector),r[o],s.parser)})},t.setDefaults=function(){var r=this;Wo(ss,function(a){var s=a.hasOwnProperty("default")?a.default:0;r.$(a.selector).selectedIndex=s})},t.restoreSettings=function(){var r;try{r=JSON.parse($.default.localStorage.getItem(s_))}catch(a){Ie.warn(a)}r&&this.setValues(r)},t.saveSettings=function(){if(!!this.options_.persistTextTrackSettings){var r=this.getValues();try{Object.keys(r).length?$.default.localStorage.setItem(s_,JSON.stringify(r)):$.default.localStorage.removeItem(s_)}catch(a){Ie.warn(a)}}},t.updateDisplay=function(){var r=this.player_.getChild("textTrackDisplay");r&&r.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var r=this.player_.controlBar,a=r&&r.subsCapsButton,s=r&&r.captionsButton;a?a.focus():s&&s.focus()},e}(iu);se.registerComponent("TextTrackSettings",JU);var ZU=function(n){de(e,n);function e(i,r){var a,s=r.ResizeObserver||$.default.ResizeObserver;r.ResizeObserver===null&&(s=!1);var o=dt({createEl:!s,reportTouchActivity:!1},r);return a=n.call(this,i,o)||this,a.ResizeObserver=r.ResizeObserver||$.default.ResizeObserver,a.loadListener_=null,a.resizeObserver_=null,a.debouncedHandler_=JB(function(){a.resizeHandler()},100,!1,Se(a)),s?(a.resizeObserver_=new a.ResizeObserver(a.debouncedHandler_),a.resizeObserver_.observe(i.el())):(a.loadListener_=function(){if(!(!a.el_||!a.el_.contentWindow)){var u=a.debouncedHandler_,l=a.unloadListener_=function(){Xt(this,"resize",u),Xt(this,"unload",l),l=null};Bi(a.el_.contentWindow,"unload",l),Bi(a.el_.contentWindow,"resize",u)}},a.one("load",a.loadListener_)),a}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},t.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,n.prototype.dispose.call(this)},e}(se);se.registerComponent("ResizeManager",ZU);var e3={trackingThreshold:20,liveTolerance:15},t3=function(n){de(e,n);function e(i,r){var a,s=dt(e3,r,{createEl:!1});return a=n.call(this,i,s)||this,a.handleVisibilityChange_=function(o){return a.handleVisibilityChange(o)},a.trackLiveHandler_=function(){return a.trackLive_()},a.handlePlay_=function(o){return a.handlePlay(o)},a.handleFirstTimeupdate_=function(o){return a.handleFirstTimeupdate(o)},a.handleSeeked_=function(o){return a.handleSeeked(o)},a.seekToLiveEdge_=function(o){return a.seekToLiveEdge(o)},a.reset_(),a.on(a.player_,"durationchange",function(o){return a.handleDurationchange(o)}),a.on(a.player_,"canplay",function(){return a.toggleTracking()}),fd&&"hidden"in le.default&&"visibilityState"in le.default&&a.on(le.default,"visibilitychange",a.handleVisibilityChange_),a}var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(le.default.hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var r=this.player_.seekable();if(!(!r||!r.length)){var a=Number($.default.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(a-this.lastTime_)/1e3;this.lastTime_=a,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),u=this.player_.currentTime(),l=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-u)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(l=!1),l!==this.behindLiveEdge_&&(this.behindLiveEdge_=l,this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,gr),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var r=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&r>2,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var r=this.player_.seekable(),a=[],s=r?r.length:0;s--;)a.push(r.end(s));return a.length?a.sort()[a.length-1]:1/0},t.seekableStart=function(){for(var r=this.player_.seekable(),a=[],s=r?r.length:0;s--;)a.push(r.start(s));return a.length?a.sort()[0]:0},t.liveWindow=function(){var r=this.liveCurrentTime();return r===1/0?0:r-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var r=this.seekableEnd();return this.lastSeekEnd_!==-1&&r!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=r,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return typeof this.trackingInterval_=="number"},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(le.default,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),n.prototype.dispose.call(this)},e}(se);se.registerComponent("LiveTracker",t3);var T_=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),r=[],a="";if(!i.length)return!1;for(var s=0;s<i.length;s++){var o=i[s].src;o&&r.indexOf(o)===-1&&r.push(o)}return r.length?(r.length===1&&(a=r[0]),e.triggerSourceset(a),!0):!1},i3=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=le.default.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=le.default.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",$.default.Element.prototype.appendChild.call(this,i),this.innerHTML}}),QA=function(e,t){for(var i={},r=0;r<e.length&&(i=Object.getOwnPropertyDescriptor(e[r],t),!(i&&i.set&&i.get));r++);return i.enumerable=!0,i.configurable=!0,i},r3=function(e){return QA([e.el(),$.default.HTMLMediaElement.prototype,$.default.Element.prototype,i3],"innerHTML")},yw=function(e){var t=e.el();if(!t.resetSourceWatch_){var i={},r=r3(e),a=function(o){return function(){for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];var h=o.apply(t,l);return T_(e),h}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){!t[s]||(i[s]=t[s],t[s]=a(i[s]))}),Object.defineProperty(t,"innerHTML",dt(r,{set:a(r.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(i).forEach(function(s){t[s]=i[s]}),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)}},n3=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?DA($.default.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return $.default.Element.prototype.setAttribute.call(this,"src",e),e}}),a3=function(e){return QA([e.el(),$.default.HTMLMediaElement.prototype,n3],"src")},s3=function(e){if(!!e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var i=a3(e),r=t.setAttribute,a=t.load;Object.defineProperty(t,"src",dt(i,{set:function(o){var u=i.set.call(t,o);return e.triggerSourceset(t.src),u}})),t.setAttribute=function(s,o){var u=r.call(t,s,o);return/src/i.test(s)&&e.triggerSourceset(t.src),u},t.load=function(){var s=a.call(t);return T_(e)||(e.triggerSourceset(""),yw(e)),s},t.currentSrc?e.triggerSourceset(t.currentSrc):T_(e)||yw(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=a,t.setAttribute=r,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},uy=function(e,t,i,r){r===void 0&&(r=!0);var a=function(u){return Object.defineProperty(e,t,{value:u,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var u=i();return a(u),u}};return r&&(s.set=a),Object.defineProperty(e,t,s)},fe=function(n){de(e,n);function e(i,r){var a;a=n.call(this,i,r)||this;var s=i.source,o=!1;if(a.featuresVideoFrameCallback=a.featuresVideoFrameCallback&&a.el_.tagName==="VIDEO",s&&(a.el_.currentSrc!==s.src||i.tag&&i.tag.initNetworkState_===3)?a.setSource(s):a.handleLateInit_(a.el_),i.enableSourceset&&a.setupSourcesetHandling_(),a.isScrubbing_=!1,a.el_.hasChildNodes()){for(var u=a.el_.childNodes,l=u.length,d=[];l--;){var h=u[l],p=h.nodeName.toLowerCase();p==="track"&&(a.featuresNativeTextTracks?(a.remoteTextTrackEls().addTrackElement_(h),a.remoteTextTracks().addTrack(h.track),a.textTracks().addTrack(h.track),!o&&!a.el_.hasAttribute("crossorigin")&&ap(h.src)&&(o=!0)):d.push(h))}for(var _=0;_<d.length;_++)a.el_.removeChild(d[_])}return a.proxyNativeTracks_(),a.featuresNativeTextTracks&&o&&Ie.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),a.restoreMetadataTracksInIOSNativePlayer_(),(zo||N_||Qw)&&i.nativeControlsForTouch===!0&&a.setControls(!0),a.proxyWebkitFullscreen_(),a.triggerReady(),a}var t=e.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,n.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){s3(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){var r=this.textTracks(),a,s=function(){a=[];for(var l=0;l<r.length;l++){var d=r[l];d.kind==="metadata"&&a.push({track:d,storedMode:d.mode})}};s(),r.addEventListener("change",s),this.on("dispose",function(){return r.removeEventListener("change",s)});var o=function u(){for(var l=0;l<a.length;l++){var d=a[l];d.track.mode==="disabled"&&d.track.mode!==d.storedMode&&(d.track.mode=d.storedMode)}r.removeEventListener("change",u)};this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",s),r.removeEventListener("change",o),r.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",s),r.addEventListener("change",s),r.removeEventListener("change",o)})},t.overrideNative_=function(r,a){var s=this;if(a===this["featuresNative"+r+"Tracks"]){var o=r.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(u){var l=s.el()[o+"Tracks"];l.removeEventListener(u,s[o+"TracksListeners_"][u])}),this["featuresNative"+r+"Tracks"]=!a,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},t.overrideNativeAudioTracks=function(r){this.overrideNative_("Audio",r)},t.overrideNativeVideoTracks=function(r){this.overrideNative_("Video",r)},t.proxyNativeTracksForType_=function(r){var a=this,s=er[r],o=this.el()[s.getterName],u=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var l={change:function(p){var _={type:"change",target:u,currentTarget:u,srcElement:u};u.trigger(_),r==="text"&&a[Qo.remoteText.getterName]().trigger(_)},addtrack:function(p){u.addTrack(p.track)},removetrack:function(p){u.removeTrack(p.track)}},d=function(){for(var p=[],_=0;_<u.length;_++){for(var D=!1,C=0;C<o.length;C++)if(o[C]===u[_]){D=!0;break}D||p.push(u[_])}for(;p.length;)u.removeTrack(p.shift())};this[s.getterName+"Listeners_"]=l,Object.keys(l).forEach(function(h){var p=l[h];o.addEventListener(h,p),a.on("dispose",function(_){return o.removeEventListener(h,p)})}),this.on("loadstart",d),this.on("dispose",function(h){return a.off("loadstart",d)})}},t.proxyNativeTracks_=function(){var r=this;er.names.forEach(function(a){r.proxyNativeTracksForType_(a)})},t.createEl=function(){var r=this.options_.tag;if(!r||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(r){var a=r.cloneNode(!0);r.parentNode&&r.parentNode.insertBefore(a,r),e.disposeMediaElement(r),r=a}else{r=le.default.createElement("video");var s=this.options_.tag&&Sn(this.options_.tag),o=dt({},s);(!zo||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,aA(r,yt(o,{id:this.options_.techId,class:"vjs-tech"}))}r.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Ko(r,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(r.disablePictureInPicture=this.options_.disablePictureInPicture);for(var u=["loop","muted","playsinline","autoplay"],l=0;l<u.length;l++){var d=u[l],h=this.options_[d];typeof h<"u"&&(h?Ko(r,d,d):ep(r,d),r[d]=h)}return r},t.handleLateInit_=function(r){if(!(r.networkState===0||r.networkState===3)){if(r.readyState===0){var a=!1,s=function(){a=!0};this.on("loadstart",s);var o=function(){a||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),a||this.trigger("loadstart")});return}var u=["loadstart"];u.push("loadedmetadata"),r.readyState>=2&&u.push("loadeddata"),r.readyState>=3&&u.push("canplay"),r.readyState>=4&&u.push("canplaythrough"),this.ready(function(){u.forEach(function(l){this.trigger(l)},this)})}},t.setScrubbing=function(r){this.isScrubbing_=r},t.scrubbing=function(){return this.isScrubbing_},t.setCurrentTime=function(r){try{this.isScrubbing_&&this.el_.fastSeek&&Zf?this.el_.fastSeek(r):this.el_.currentTime=r}catch(a){Ie(a,"Video is not ready. (Video.js)")}},t.duration=function(){var r=this;if(this.el_.duration===1/0&&In&&Pn&&this.el_.currentTime===0){var a=function s(){r.el_.currentTime>0&&(r.el_.duration===1/0&&r.trigger("durationchange"),r.off("timeupdate",s))};return this.on("timeupdate",a),NaN}return this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var r=this;if("webkitDisplayingFullscreen"in this.el_){var a=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",a),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){r.off("webkitbeginfullscreen",s),r.off("webkitendfullscreen",a)})}},t.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var r=$.default.navigator&&$.default.navigator.userAgent||"";if(/Android/.test(r)||!/Chrome|Mac OS X 10.5/.test(r))return!0}return!1},t.enterFullScreen=function(){var r=this.el_;if(r.paused&&r.networkState<=r.HAVE_METADATA)Ur(this.el_.play()),this.setTimeout(function(){r.pause();try{r.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},0);else try{r.webkitEnterFullScreen()}catch(a){this.trigger("fullscreenerror",a)}},t.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.requestVideoFrameCallback=function(r){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(r):n.prototype.requestVideoFrameCallback.call(this,r)},t.cancelVideoFrameCallback=function(r){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(r):n.prototype.cancelVideoFrameCallback.call(this,r)},t.src=function(r){if(r===void 0)return this.el_.src;this.setSrc(r)},t.reset=function(){e.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(r){this.el_.controls=!!r},t.addTextTrack=function(r,a,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(r,a,s):n.prototype.addTextTrack.call(this,r,a,s)},t.createRemoteTextTrack=function(r){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,r);var a=le.default.createElement("track");return r.kind&&(a.kind=r.kind),r.label&&(a.label=r.label),(r.language||r.srclang)&&(a.srclang=r.language||r.srclang),r.default&&(a.default=r.default),r.id&&(a.id=r.id),r.src&&(a.src=r.src),a},t.addRemoteTextTrack=function(r,a){var s=n.prototype.addRemoteTextTrack.call(this,r,a);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},t.removeRemoteTextTrack=function(r){if(n.prototype.removeRemoteTextTrack.call(this,r),this.featuresNativeTextTracks)for(var a=this.$$("track"),s=a.length;s--;)(r===a[s]||r===a[s].track)&&this.el().removeChild(a[s])},t.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var r={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(r.droppedVideoFrames=this.el().webkitDroppedFrameCount,r.totalVideoFrames=this.el().webkitDecodedFrameCount),$.default.performance&&typeof $.default.performance.now=="function"?r.creationTime=$.default.performance.now():$.default.performance&&$.default.performance.timing&&typeof $.default.performance.timing.navigationStart=="number"&&(r.creationTime=$.default.Date.now()-$.default.performance.timing.navigationStart),r},e}(rt);uy(fe,"TEST_VID",function(){if(!!Zo()){var n=le.default.createElement("video"),e=le.default.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n}});fe.isSupported=function(){try{fe.TEST_VID.volume=.5}catch{return!1}return!!(fe.TEST_VID&&fe.TEST_VID.canPlayType)};fe.canPlayType=function(n){return fe.TEST_VID.canPlayType(n)};fe.canPlaySource=function(n,e){return fe.canPlayType(n.type)};fe.canControlVolume=function(){try{var n=fe.TEST_VID.volume;fe.TEST_VID.volume=n/2+.1;var e=n!==fe.TEST_VID.volume;return e&&hi?($.default.setTimeout(function(){fe&&fe.prototype&&(fe.prototype.featuresVolumeControl=n!==fe.TEST_VID.volume)}),!1):e}catch{return!1}};fe.canMuteVolume=function(){try{var n=fe.TEST_VID.muted;return fe.TEST_VID.muted=!n,fe.TEST_VID.muted?Ko(fe.TEST_VID,"muted","muted"):ep(fe.TEST_VID,"muted","muted"),n!==fe.TEST_VID.muted}catch{return!1}};fe.canControlPlaybackRate=function(){if(In&&Pn&&Zw<58)return!1;try{var n=fe.TEST_VID.playbackRate;return fe.TEST_VID.playbackRate=n/2+.1,n!==fe.TEST_VID.playbackRate}catch{return!1}};fe.canOverrideAttributes=function(){try{var n=function(){};Object.defineProperty(le.default.createElement("video"),"src",{get:n,set:n}),Object.defineProperty(le.default.createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(le.default.createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(le.default.createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0};fe.supportsNativeTextTracks=function(){return Zf||hi&&Pn};fe.supportsNativeVideoTracks=function(){return!!(fe.TEST_VID&&fe.TEST_VID.videoTracks)};fe.supportsNativeAudioTracks=function(){return!!(fe.TEST_VID&&fe.TEST_VID.audioTracks)};fe.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(n){var e=n[0],t=n[1];uy(fe.prototype,e,function(){return fe[t]()},!0)});fe.prototype.featuresVolumeControl=fe.canControlVolume();fe.prototype.movingMediaElementInDOM=!hi;fe.prototype.featuresFullscreenResize=!0;fe.prototype.featuresProgressEvents=!0;fe.prototype.featuresTimeupdateEvents=!0;fe.prototype.featuresVideoFrameCallback=!!(fe.TEST_VID&&fe.TEST_VID.requestVideoFrameCallback);var Hf;fe.patchCanPlayType=function(){L_>=4&&!Jw&&!Pn&&(Hf=fe.TEST_VID&&fe.TEST_VID.constructor.prototype.canPlayType,fe.TEST_VID.constructor.prototype.canPlayType=function(n){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return n&&e.test(n)?"maybe":Hf.call(this,n)})};fe.unpatchCanPlayType=function(){var n=fe.TEST_VID.constructor.prototype.canPlayType;return Hf&&(fe.TEST_VID.constructor.prototype.canPlayType=Hf),n};fe.patchCanPlayType();fe.disposeMediaElement=function(n){if(!!n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};fe.resetMediaElement=function(n){if(!!n){for(var e=n.querySelectorAll("source"),t=e.length;t--;)n.removeChild(e[t]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){fe.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){fe.prototype["set"+Dt(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){fe.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){fe.prototype["set"+Dt(n)]=function(e){this.el_[n]=e}});["pause","load","play"].forEach(function(n){fe.prototype[n]=function(){return this.el_[n]()}});rt.withSourceHandlers(fe);fe.nativeSourceHandler={};fe.nativeSourceHandler.canPlayType=function(n){try{return fe.TEST_VID.canPlayType(n)}catch{return""}};fe.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return fe.nativeSourceHandler.canPlayType(n.type);if(n.src){var t=W_(n.src);return fe.nativeSourceHandler.canPlayType("video/"+t)}return""};fe.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)};fe.nativeSourceHandler.dispose=function(){};fe.registerSourceHandler(fe.nativeSourceHandler);rt.registerTech("Html5",fe);var JA=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],l_={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},x_=["tiny","xsmall","small","medium","large","xlarge","huge"],Lf={};x_.forEach(function(n){var e=n.charAt(0)==="x"?"x-"+n.substring(1):n;Lf[n]="vjs-layout-"+e});var o3={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},wt=function(n){de(e,n);function e(i,r,a){var s;if(i.id=i.id||r.id||"vjs_video_"+Fn(),r=yt(e.getTagSettings(i),r),r.initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if(typeof i.closest=="function"){var o=i.closest("[lang]");o&&o.getAttribute&&(r.language=o.getAttribute("lang"))}else for(var u=i;u&&u.nodeType===1;){if(Sn(u).hasOwnProperty("lang")){r.language=u.getAttribute("lang");break}u=u.parentNode}if(s=n.call(this,null,r,a)||this,s.boundDocumentFullscreenChange_=function(p){return s.documentFullscreenChange_(p)},s.boundFullWindowOnEscKey_=function(p){return s.fullWindowOnEscKey(p)},s.boundUpdateStyleEl_=function(p){return s.updateStyleEl_(p)},s.boundApplyInitTime_=function(p){return s.applyInitTime_(p)},s.boundUpdateCurrentBreakpoint_=function(p){return s.updateCurrentBreakpoint_(p)},s.boundHandleTechClick_=function(p){return s.handleTechClick_(p)},s.boundHandleTechDoubleClick_=function(p){return s.handleTechDoubleClick_(p)},s.boundHandleTechTouchStart_=function(p){return s.handleTechTouchStart_(p)},s.boundHandleTechTouchMove_=function(p){return s.handleTechTouchMove_(p)},s.boundHandleTechTouchEnd_=function(p){return s.handleTechTouchEnd_(p)},s.boundHandleTechTap_=function(p){return s.handleTechTap_(p)},s.isFullscreen_=!1,s.log=Kw(s.id_),s.fsApi_=Mf,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=i,s.tagAttributes=i&&Sn(i),s.language(s.options_.language),r.languages){var l={};Object.getOwnPropertyNames(r.languages).forEach(function(p){l[p.toLowerCase()]=r.languages[p]}),s.languages_=l}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=r.poster||"",s.controls_=!!r.controls,i.controls=!1,i.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],i.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach(function(p){if(typeof s[p]!="function")throw new Error('plugin "'+p+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),H_(Se(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(Bi(le.default,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var d=dt(s.options_);r.plugins&&Object.keys(r.plugins).forEach(function(p){s[p](r.plugins[p])}),r.debug&&s.debug(!0),s.options_.playerOptions=d,s.middleware_=[],s.playbackRates(r.playbackRates),s.initChildren(),s.isAudio(i.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),zo&&s.addClass("vjs-touch-enabled"),hi||s.addClass("vjs-workinghover"),e.players[s.id_]=Se(s);var h=qw.split(".")[0];return s.addClass("vjs-v"+h),s.userActive(!0),s.reportUserActivity(),s.one("play",function(p){return s.listenForUserActivity_(p)}),s.on("stageclick",function(p){return s.handleStageClick_(p)}),s.on("keydown",function(p){return s.handleKeyDown(p)}),s.on("languagechange",function(p){return s.handleLanguagechange(p)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}var t=e.prototype;return t.dispose=function(){var r=this;this.trigger("dispose"),this.off("dispose"),Xt(le.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Xt(le.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),wU(this),li.names.forEach(function(a){var s=li[a],o=r[s.getterName]();o&&o.off&&o.off()}),n.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},t.createEl=function(){var r=this.tag,a,s=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?a=this.el_=r.parentNode:o||(a=this.el_=n.prototype.createEl.call(this,"div"));var u=Sn(r);if(o){for(a=this.el_=r,r=this.tag=le.default.createElement("video");a.children.length;)r.appendChild(a.firstChild);us(a,"video-js")||Cn(a,"video-js"),a.appendChild(r),s=this.playerElIngest_=a,Object.keys(a).forEach(function(D){try{r[D]=a[D]}catch{}})}if(r.setAttribute("tabindex","-1"),u.tabindex="-1",(fd||Pn&&eA)&&(r.setAttribute("role","application"),u.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in u&&delete u.width,"height"in u&&delete u.height,Object.getOwnPropertyNames(u).forEach(function(D){o&&D==="class"||a.setAttribute(D,u[D]),o&&r.setAttribute(D,u[D])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=a.player=this,this.addClass("vjs-paused"),$.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=mA("vjs-styles-dimensions");var l=ha(".vjs-styles-defaults"),d=ha("head");d.insertBefore(this.styleEl_,l?l.nextSibling:d.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var h=r.getElementsByTagName("a"),p=0;p<h.length;p++){var _=h.item(p);Cn(_,"vjs-hidden"),_.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!s&&r.parentNode.insertBefore(a,r),f_(r,a),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=a,a},t.crossOrigin=function(r){if(!r)return this.techGet_("crossOrigin");if(r!=="anonymous"&&r!=="use-credentials"){Ie.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+r+'"');return}this.techCall_("setCrossOrigin",r)},t.width=function(r){return this.dimension("width",r)},t.height=function(r){return this.dimension("height",r)},t.dimension=function(r,a){var s=r+"_";if(a===void 0)return this[s]||0;if(a===""||a==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(a);if(isNaN(o)){Ie.error('Improper value "'+a+'" supplied for for '+r);return}this[s]=o,this.updateStyleEl_()},t.fluid=function(r){var a=this;if(r===void 0)return!!this.fluid_;this.fluid_=!!r,wn(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),r?(this.addClass("vjs-fluid"),this.fill(!1),ZB(this,function(){a.on(["playerreset","resize"],a.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(r){if(r===void 0)return!!this.fill_;this.fill_=!!r,r?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(r){if(r===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(r))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=r,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if($.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){var r=typeof this.width_=="number"?this.width_:this.options_.width,a=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(r>=0&&(s.width=r),a>=0&&(s.height=a));return}var o,u,l,d;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?l=this.aspectRatio_:this.videoWidth()>0?l=this.videoWidth()+":"+this.videoHeight():l="16:9";var h=l.split(":"),p=h[1]/h[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/p:o=this.videoWidth()||300,this.height_!==void 0?u=this.height_:u=o*p,/^[^a-zA-Z]/.test(this.id())?d="dimensions-"+this.id():d=this.id()+"-dimensions",this.addClass(d),gA(this.styleEl_,`
      .`+d+` {
        width: `+o+`px;
        height: `+u+`px;
      }

      .`+d+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+p*100+`%;
      }
    `)},t.loadTech_=function(r,a){var s=this;this.tech_&&this.unloadTech_();var o=Dt(r),u=r.charAt(0).toLowerCase()+r.slice(1);o!=="Html5"&&this.tag&&(rt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var l=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(l=!1);var d={source:a,autoplay:l,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+u+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};li.names.forEach(function(p){var _=li[p];d[_.getterName]=s[_.privateName]}),yt(d,this.options_[o]),yt(d,this.options_[u]),yt(d,this.options_[r.toLowerCase()]),this.tag&&(d.tag=this.tag),a&&a.src===this.cache_.src&&this.cache_.currentTime>0&&(d.startTime=this.cache_.currentTime);var h=rt.getTech(r);if(!h)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new h(d),this.tech_.ready(ct(this,this.handleTechReady_),!0),ZC.jsonToTextTracks(this.textTracksJson_||[],this.tech_),JA.forEach(function(p){s.on(s.tech_,p,function(_){return s["handleTech"+Dt(p)+"_"](_)})}),Object.keys(l_).forEach(function(p){s.on(s.tech_,p,function(_){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+l_[p]+"_"].bind(s),event:_});return}s["handleTech"+l_[p]+"_"](_)})}),this.on(this.tech_,"loadstart",function(p){return s.handleTechLoadStart_(p)}),this.on(this.tech_,"sourceset",function(p){return s.handleTechSourceset_(p)}),this.on(this.tech_,"waiting",function(p){return s.handleTechWaiting_(p)}),this.on(this.tech_,"ended",function(p){return s.handleTechEnded_(p)}),this.on(this.tech_,"seeking",function(p){return s.handleTechSeeking_(p)}),this.on(this.tech_,"play",function(p){return s.handleTechPlay_(p)}),this.on(this.tech_,"firstplay",function(p){return s.handleTechFirstPlay_(p)}),this.on(this.tech_,"pause",function(p){return s.handleTechPause_(p)}),this.on(this.tech_,"durationchange",function(p){return s.handleTechDurationChange_(p)}),this.on(this.tech_,"fullscreenchange",function(p,_){return s.handleTechFullscreenChange_(p,_)}),this.on(this.tech_,"fullscreenerror",function(p,_){return s.handleTechFullscreenError_(p,_)}),this.on(this.tech_,"enterpictureinpicture",function(p){return s.handleTechEnterPictureInPicture_(p)}),this.on(this.tech_,"leavepictureinpicture",function(p){return s.handleTechLeavePictureInPicture_(p)}),this.on(this.tech_,"error",function(p){return s.handleTechError_(p)}),this.on(this.tech_,"posterchange",function(p){return s.handleTechPosterChange_(p)}),this.on(this.tech_,"textdata",function(p){return s.handleTechTextData_(p)}),this.on(this.tech_,"ratechange",function(p){return s.handleTechRateChange_(p)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&f_(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var r=this;li.names.forEach(function(a){var s=li[a];r[s.privateName]=r[s.getterName]()}),this.textTracksJson_=ZC.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(r){return r===void 0&&Ie.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},t.manualAutoplay_=function(r){var a=this;if(!(!this.tech_||typeof r!="string")){var s=function(){var l=a.muted();a.muted(!0);var d=function(){a.muted(l)};a.playTerminatedQueue_.push(d);var h=a.play();if(!!rd(h))return h.catch(function(p){throw d(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(p||""))})},o;if(r==="any"&&!this.muted()?(o=this.play(),rd(o)&&(o=o.catch(s))):r==="muted"&&!this.muted()?o=s():o=this.play(),!!rd(o))return o.then(function(){a.trigger({type:"autoplay-success",autoplay:r})}).catch(function(){a.trigger({type:"autoplay-failure",autoplay:r})})}},t.updateSourceCaches_=function(r){r===void 0&&(r="");var a=r,s="";typeof a!="string"&&(a=r.src,s=r.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],a&&!s&&(s=IU(this,a)),this.cache_.source=dt({},r,{src:a,type:s});for(var o=this.cache_.sources.filter(function(_){return _.src&&_.src===a}),u=[],l=this.$$("source"),d=[],h=0;h<l.length;h++){var p=Sn(l[h]);u.push(p),p.src&&p.src===a&&d.push(p.src)}d.length&&!o.length?this.cache_.sources=u:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=a},t.handleTechSourceset_=function(r){var a=this;if(!this.changingSrc_){var s=function(d){return a.updateSourceCaches_(d)},o=this.currentSource().src,u=r.src;o&&!/^blob:/.test(o)&&/^blob:/.test(u)&&(!this.lastSource_||this.lastSource_.tech!==u&&this.lastSource_.player!==o)&&(s=function(){}),s(u),r.src||this.tech_.any(["sourceset","loadstart"],function(l){if(l.type!=="sourceset"){var d=a.techGet("currentSrc");a.lastSource_.tech=d,a.updateSourceCaches_(d)}})}this.lastSource_={player:this.currentSource().src,tech:r.src},this.trigger({src:r.src,type:"sourceset"})},t.hasStarted=function(r){if(r===void 0)return this.hasStarted_;r!==this.hasStarted_&&(this.hasStarted_=r,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(r){return r.callback(r.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var r=this;this.addClass("vjs-waiting"),this.trigger("waiting");var a=this.currentTime(),s=function o(){a!==r.currentTime()&&(r.removeClass("vjs-waiting"),r.off("timeupdate",o))};this.on("timeupdate",s)},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(Ie.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(r){!this.controls_||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,r):this.paused()?Ur(this.play()):this.pause())},t.handleTechDoubleClick_=function(r){if(!!this.controls_){var a=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(r.target)});a||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,r):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(r){r.cancelable&&r.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(r){var a=r.target.player;if(!(a&&a!==this)){var s=this.el(),o=le.default[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},t.handleTechFullscreenChange_=function(r,a){var s=this;a&&(a.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(a.isFullscreen))},t.handleTechFullscreenError_=function(r,a){this.trigger("fullscreenerror",a)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(r){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(r){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var r=this.tech_.error();this.error(r)},t.handleTechTextData_=function(){var r=null;arguments.length>1&&(r=arguments[1]),this.trigger("textdata",r)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},t.techCall_=function(r,a){this.ready(function(){if(r in EU)return SU(this.middleware_,this.tech_,r,a);if(r in sw)return aw(this.middleware_,this.tech_,r,a);try{this.tech_&&this.tech_[r](a)}catch(s){throw Ie(s),s}},!0)},t.techGet_=function(r){if(!(!this.tech_||!this.tech_.isReady_)){if(r in DU)return bU(this.middleware_,this.tech_,r);if(r in sw)return aw(this.middleware_,this.tech_,r);try{return this.tech_[r]()}catch(a){throw this.tech_[r]===void 0?(Ie("Video.js: "+r+" method not defined for "+this.techName_+" playback technology.",a),a):a.name==="TypeError"?(Ie("Video.js: "+r+" unavailable on "+this.techName_+" playback technology element.",a),this.tech_.isReady_=!1,a):(Ie(a),a)}}},t.play=function(){var r=this,a=this.options_.Promise||$.default.Promise;return a?new a(function(s){r.play_(s)}):this.play_()},t.play_=function(r){var a=this;r===void 0&&(r=Ur),this.playCallbacks_.push(r);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(u){a.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&(Zf||hi)&&this.load();return}var o=this.techGet_("play");o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},t.runPlayTerminatedQueue_=function(){var r=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],r.forEach(function(a){a()})},t.runPlayCallbacks_=function(r){var a=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],a.forEach(function(s){s(r)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return this.techGet_("paused")!==!1},t.played=function(){return this.techGet_("played")||ls(0,0)},t.scrubbing=function(r){if(typeof r>"u")return this.scrubbing_;this.scrubbing_=!!r,this.techCall_("setScrubbing",this.scrubbing_),r?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(r){if(typeof r<"u"){if(r<0&&(r=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=r,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",r),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},t.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},t.duration=function(r){if(r===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;r=parseFloat(r),r<0&&(r=1/0),r!==this.cache_.duration&&(this.cache_.duration=r,r===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(r)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var r=this.techGet_("buffered");return(!r||!r.length)&&(r=ls(0,0)),r},t.bufferedPercent=function(){return bA(this.buffered(),this.duration())},t.bufferedEnd=function(){var r=this.buffered(),a=this.duration(),s=r.end(r.length-1);return s>a&&(s=a),s},t.volume=function(r){var a;if(r!==void 0){a=Math.max(0,Math.min(1,parseFloat(r))),this.cache_.volume=a,this.techCall_("setVolume",a),a>0&&this.lastVolume_(a);return}return a=parseFloat(this.techGet_("volume")),isNaN(a)?1:a},t.muted=function(r){if(r!==void 0){this.techCall_("setMuted",r);return}return this.techGet_("muted")||!1},t.defaultMuted=function(r){return r!==void 0?this.techCall_("setDefaultMuted",r):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(r){if(r!==void 0&&r!==0){this.cache_.lastVolume=r;return}return this.cache_.lastVolume},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(r){if(r!==void 0){var a=this.isFullscreen_;this.isFullscreen_=Boolean(r),this.isFullscreen_!==a&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},t.requestFullscreen=function(r){var a=this.options_.Promise||$.default.Promise;if(a){var s=this;return new a(function(o,u){function l(){s.off("fullscreenerror",h),s.off("fullscreenchange",d)}function d(){l(),o()}function h(_,D){l(),u(D)}s.one("fullscreenchange",d),s.one("fullscreenerror",h);var p=s.requestFullscreenHelper_(r);p&&(p.then(l,l),p.then(o,u))})}return this.requestFullscreenHelper_()},t.requestFullscreenHelper_=function(r){var a=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},r!==void 0&&(s=r)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return a.isFullscreen(!0)},function(){return a.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var r=this.options_.Promise||$.default.Promise;if(r){var a=this;return new r(function(s,o){function u(){a.off("fullscreenerror",d),a.off("fullscreenchange",l)}function l(){u(),s()}function d(p,_){u(),o(_)}a.one("fullscreenchange",l),a.one("fullscreenerror",d);var h=a.exitFullscreenHelper_();h&&(h.then(u,u),h.then(s,o))})}return this.exitFullscreenHelper_()},t.exitFullscreenHelper_=function(){var r=this;if(this.fsApi_.requestFullscreen){var a=le.default[this.fsApi_.exitFullscreen]();return a&&Ur(a.then(function(){return r.isFullscreen(!1)})),a}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=le.default.documentElement.style.overflow,Bi(le.default,"keydown",this.boundFullWindowOnEscKey_),le.default.documentElement.style.overflow="hidden",Cn(le.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(r){we.default.isEventKey(r,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Xt(le.default,"keydown",this.boundFullWindowOnEscKey_),le.default.documentElement.style.overflow=this.docOrigOverflow,pd(le.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.disablePictureInPicture=function(r){if(r===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",r),this.options_.disablePictureInPicture=r,this.trigger("disablepictureinpicturechanged")},t.isInPictureInPicture=function(r){if(r!==void 0){this.isInPictureInPicture_=!!r,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in le.default&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in le.default)return le.default.exitPictureInPicture()},t.handleKeyDown=function(r){var a=this.options_.userActions;if(!(!a||!a.hotkeys)){var s=function(u){var l=u.tagName.toLowerCase();if(u.isContentEditable)return!0;var d=["button","checkbox","hidden","radio","reset","submit"];if(l==="input")return d.indexOf(u.type)===-1;var h=["textarea"];return h.indexOf(l)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof a.hotkeys=="function"?a.hotkeys.call(this,r):this.handleHotkeys(r))}},t.handleHotkeys=function(r){var a=this.options_.userActions?this.options_.userActions.hotkeys:{},s=a.fullscreenKey,o=s===void 0?function(C){return we.default.isEventKey(C,"f")}:s,u=a.muteKey,l=u===void 0?function(C){return we.default.isEventKey(C,"m")}:u,d=a.playPauseKey,h=d===void 0?function(C){return we.default.isEventKey(C,"k")||we.default.isEventKey(C,"Space")}:d;if(o.call(this,r)){r.preventDefault(),r.stopPropagation();var p=se.getComponent("FullscreenToggle");le.default[this.fsApi_.fullscreenEnabled]!==!1&&p.prototype.handleClick.call(this,r)}else if(l.call(this,r)){r.preventDefault(),r.stopPropagation();var _=se.getComponent("MuteToggle");_.prototype.handleClick.call(this,r)}else if(h.call(this,r)){r.preventDefault(),r.stopPropagation();var D=se.getComponent("PlayToggle");D.prototype.handleClick.call(this,r)}},t.canPlayType=function(r){for(var a,s=0,o=this.options_.techOrder;s<o.length;s++){var u=o[s],l=rt.getTech(u);if(l||(l=se.getComponent(u)),!l){Ie.error('The "'+u+'" tech is undefined. Skipped browser support check for that tech.');continue}if(l.isSupported()&&(a=l.canPlayType(r),a))return a}return""},t.selectSource=function(r){var a=this,s=this.options_.techOrder.map(function(h){return[h,rt.getTech(h)]}).filter(function(h){var p=h[0],_=h[1];return _?_.isSupported():(Ie.error('The "'+p+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(p,_,D){var C;return p.some(function(S){return _.some(function(I){if(C=D(S,I),C)return!0})}),C},u,l=function(p){return function(_,D){return p(D,_)}},d=function(p,_){var D=p[0],C=p[1];if(C.canPlaySource(_,a.options_[D.toLowerCase()]))return{source:_,tech:D}};return this.options_.sourceOrder?u=o(r,s,l(d)):u=o(s,r,d),u||!1},t.handleSrc_=function(r,a){var s=this;if(typeof r>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=PU(r);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,a||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),TU(this,o[0],function(d,h){s.middleware_=h,a||(s.cache_.sources=o),s.updateSourceCaches_(d);var p=s.src_(d);if(p){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),s.triggerReady();return}xU(h,s.tech_)}),this.options_.retryOnError&&o.length>1){var u=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},l=function(){s.off("error",u)};this.one("error",u),this.one("playing",l),this.resetRetryOnError_=function(){s.off("error",u),s.off("playing",l)}}},t.src=function(r){return this.handleSrc_(r,!1)},t.src_=function(r){var a=this,s=this.selectSource([r]);return s?iU(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",r):this.techCall_("src",r.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){a.changingSrc_=!1}),!1):!0},t.load=function(){this.techCall_("load")},t.reset=function(){var r=this,a=this.options_.Promise||$.default.Promise;if(this.paused()||!a)this.doReset_();else{var s=this.play();Ur(s.then(function(){return r.doReset_()}))}},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),wn(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var r=this.controlBar||{},a=r.durationDisplay,s=r.remainingTimeDisplay;a&&a.updateContent(),s&&s.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var r=this.currentSource(),a=[];return Object.keys(r).length!==0&&a.push(r),this.cache_.sources||a},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(r){if(r!==void 0){this.techCall_("setPreload",r),this.options_.preload=r;return}return this.techGet_("preload")},t.autoplay=function(r){if(r===void 0)return this.options_.autoplay||!1;var a;typeof r=="string"&&/(any|play|muted)/.test(r)||r===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=r,this.manualAutoplay_(typeof r=="string"?r:"play"),a=!1):r?this.options_.autoplay=!0:this.options_.autoplay=!1,a=typeof a>"u"?this.options_.autoplay:a,this.tech_&&this.techCall_("setAutoplay",a)},t.playsinline=function(r){return r!==void 0?(this.techCall_("setPlaysinline",r),this.options_.playsinline=r,this):this.techGet_("playsinline")},t.loop=function(r){if(r!==void 0){this.techCall_("setLoop",r),this.options_.loop=r;return}return this.techGet_("loop")},t.poster=function(r){if(r===void 0)return this.poster_;r||(r=""),r!==this.poster_&&(this.poster_=r,this.techCall_("setPoster",r),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var r=this.tech_.poster()||"";r!==this.poster_&&(this.poster_=r,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(r){if(r===void 0)return!!this.controls_;r=!!r,this.controls_!==r&&(this.controls_=r,this.usingNativeControls()&&this.techCall_("setControls",r),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(r){if(r===void 0)return!!this.usingNativeControls_;r=!!r,this.usingNativeControls_!==r&&(this.usingNativeControls_=r,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(r){var a=this;if(r===void 0)return this.error_||null;if(ca("beforeerror").forEach(function(o){var u=o(a,r);if(!(An(u)&&!Array.isArray(u)||typeof u=="string"||typeof u=="number"||u===null)){a.log.error("please return a value that MediaError expects in beforeerror hooks");return}r=u}),this.options_.suppressNotSupportedError&&r&&r.code===4){var s=function(){this.error(r)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(r===null){this.error_=r,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new ci(r),this.addClass("vjs-error"),Ie.error("(CODE:"+this.error_.code+" "+ci.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),ca("error").forEach(function(o){return o(a,a.error_)})},t.reportUserActivity=function(r){this.userActivity_=!0},t.userActive=function(r){if(r===void 0)return this.userActive_;if(r=!!r,r!==this.userActive_){if(this.userActive_=r,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(a){a.stopPropagation(),a.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var r,a,s,o=ct(this,this.reportUserActivity),u=function(D){(D.screenX!==a||D.screenY!==s)&&(a=D.screenX,s=D.screenY,o())},l=function(){o(),this.clearInterval(r),r=this.setInterval(o,250)},d=function(D){o(),this.clearInterval(r)};this.on("mousedown",l),this.on("mousemove",u),this.on("mouseup",d),this.on("mouseleave",d);var h=this.getChild("controlBar");h&&!hi&&!In&&(h.on("mouseenter",function(_){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(_){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var p;this.setInterval(function(){if(!!this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(p);var _=this.options_.inactivityTimeout;_<=0||(p=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},_))}},250)},t.playbackRate=function(r){if(r!==void 0){this.techCall_("setPlaybackRate",r);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},t.defaultPlaybackRate=function(r){return r!==void 0?this.techCall_("setDefaultPlaybackRate",r):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(r){if(r!==void 0){this.isAudio_=!!r;return}return!!this.isAudio_},t.enableAudioOnlyUI_=function(){var r=this;this.addClass("vjs-audio-only-mode");var a=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();a.forEach(function(u){u!==s&&u.el_&&!u.hasClass("vjs-hidden")&&(u.hide(),r.audioOnlyCache_.hiddenChildren.push(u))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},t.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(r){return r.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},t.audioOnlyMode=function(r){var a=this;if(typeof r!="boolean"||r===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=r;var s=this.options_.Promise||$.default.Promise;if(s){if(r){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return a.enableAudioOnlyUI_()})}return s.resolve().then(function(){return a.disableAudioOnlyUI_()})}r?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},t.enablePosterModeUI_=function(){var r=this.tech_&&this.tech_;r.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.disablePosterModeUI_=function(){var r=this.tech_&&this.tech_;r.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.audioPosterMode=function(r){var a=this;if(typeof r!="boolean"||r===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=r;var s=this.options_.Promise||$.default.Promise;if(s){if(r){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.enablePosterModeUI_()})}return s.resolve().then(function(){a.disablePosterModeUI_()})}if(r){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},t.addTextTrack=function(r,a,s){if(this.tech_)return this.tech_.addTextTrack(r,a,s)},t.addRemoteTextTrack=function(r,a){if(this.tech_)return this.tech_.addRemoteTextTrack(r,a)},t.removeRemoteTextTrack=function(r){r===void 0&&(r={});var a=r,s=a.track;if(s||(s=r),this.tech_)return this.tech_.removeRemoteTextTrack(s)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(r){if(r===void 0)return this.language_;this.language_!==String(r).toLowerCase()&&(this.language_=String(r).toLowerCase(),wn(this)&&this.trigger("languagechange"))},t.languages=function(){return dt(e.prototype.options_.languages,this.languages_)},t.toJSON=function(){var r=dt(this.options_),a=r.tracks;r.tracks=[];for(var s=0;s<a.length;s++){var o=a[s];o=dt(o),o.player=void 0,r.tracks[s]=o}return r},t.createModal=function(r,a){var s=this;a=a||{},a.content=r||"";var o=new iu(this,a);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},t.updateCurrentBreakpoint_=function(){if(!!this.responsive())for(var r=this.currentBreakpoint(),a=this.currentWidth(),s=0;s<x_.length;s++){var o=x_[s],u=this.breakpoints_[o];if(a<=u){if(r===o)return;r&&this.removeClass(Lf[r]),this.addClass(Lf[o]),this.breakpoint_=o;break}}},t.removeCurrentBreakpoint_=function(){var r=this.currentBreakpointClass();this.breakpoint_="",r&&this.removeClass(r)},t.breakpoints=function(r){return r===void 0?yt(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=yt({},o3,r),this.updateCurrentBreakpoint_(),yt(this.breakpoints_))},t.responsive=function(r){if(r===void 0)return this.responsive_;r=Boolean(r);var a=this.responsive_;if(r!==a)return this.responsive_=r,r?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),r},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return Lf[this.breakpoint_]||""},t.loadMedia=function(r,a){var s=this;if(!(!r||typeof r!="object")){this.reset(),this.cache_.media=dt(r);var o=this.cache_.media,u=o.artwork,l=o.poster,d=o.src,h=o.textTracks;!u&&l&&(this.cache_.media.artwork=[{src:l,type:Uf(l)}]),d&&this.src(d),l&&this.poster(l),Array.isArray(h)&&h.forEach(function(p){return s.addRemoteTextTrack(p,!1)}),this.ready(a)}},t.getMedia=function(){if(!this.cache_.media){var r=this.poster(),a=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(u){return{kind:u.kind,label:u.label,language:u.language,src:u.src}}),o={src:a,textTracks:s};return r&&(o.poster=r,o.artwork=[{src:o.poster,type:Uf(o.poster)}]),o}return dt(this.cache_.media)},e.getTagSettings=function(r){var a={sources:[],tracks:[]},s=Sn(r),o=s["data-setup"];if(us(r,"vjs-fill")&&(s.fill=!0),us(r,"vjs-fluid")&&(s.fluid=!0),o!==null){var u=(0,Vw.default)(o||"{}"),l=u[0],d=u[1];l&&Ie.error(l),yt(s,d)}if(yt(a,s),r.hasChildNodes())for(var h=r.childNodes,p=0,_=h.length;p<_;p++){var D=h[p],C=D.nodeName.toLowerCase();C==="source"?a.sources.push(Sn(D)):C==="track"&&a.tracks.push(Sn(D))}return a},t.flexNotSupported_=function(){var r=le.default.createElement("i");return!("flexBasis"in r.style||"webkitFlexBasis"in r.style||"mozFlexBasis"in r.style||"msFlexBasis"in r.style||"msFlexOrder"in r.style)},t.debug=function(r){if(r===void 0)return this.debugEnabled_;r?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t.playbackRates=function(r){if(r===void 0)return this.cache_.playbackRates;!Array.isArray(r)||!r.every(function(a){return typeof a=="number"})||(this.cache_.playbackRates=r,this.trigger("playbackrateschange"))},e}(se);li.names.forEach(function(n){var e=li[n];wt.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});wt.prototype.crossorigin=wt.prototype.crossOrigin;wt.players={};var Jl=$.default.navigator;wt.prototype.options_={techOrder:rt.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Jl&&(Jl.languages&&Jl.languages[0]||Jl.userLanguage||Jl.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(n){wt.prototype[n]=function(){return this.techGet_(n)}});JA.forEach(function(n){wt.prototype["handleTech"+Dt(n)+"_"]=function(){return this.trigger(n)}});se.registerComponent("Player",wt);var $f="plugin",qo="activePlugins_",Ho={},Vf=function(e){return Ho.hasOwnProperty(e)},Rf=function(e){return Vf(e)?Ho[e]:void 0},ZA=function(e,t){e[qo]=e[qo]||{},e[qo][t]=!0},Wf=function(e,t,i){var r=(i?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},u3=function(e,t){var i=function(){Wf(this,{name:e,plugin:t,instance:null},!0);var a=t.apply(this,arguments);return ZA(this,e),Wf(this,{name:e,plugin:t,instance:a}),a};return Object.keys(t).forEach(function(r){i[r]=t[r]}),i},Tw=function(e,t){return t.prototype.name=e,function(){Wf(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var s=da(t,[this].concat(r));return this[e]=function(){return s},Wf(this,s.getEventHash()),s}},$r=function(){function n(t){if(this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),H_(this),delete this.trigger,xA(this,this.constructor.defaultState),ZA(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var e=n.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(i){return i===void 0&&(i={}),i.name=this.name,i.plugin=this.constructor,i.instance=this,i},e.trigger=function(i,r){return r===void 0&&(r={}),tu(this.eventBusEl_,i,this.getEventHash(r))},e.handleStateChanged=function(i){},e.dispose=function(){var i=this.name,r=this.player;this.trigger("dispose"),this.off(),r.off("dispose",this.dispose),r[qo][i]=!1,this.player=this.state=null,r[i]=Tw(i,Ho[i])},n.isBasic=function(i){var r=typeof i=="string"?Rf(i):i;return typeof r=="function"&&!n.prototype.isPrototypeOf(r.prototype)},n.registerPlugin=function(i,r){if(typeof i!="string")throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(Vf(i))Ie.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(wt.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if(typeof r!="function")throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof r+".");return Ho[i]=r,i!==$f&&(n.isBasic(r)?wt.prototype[i]=u3(i,r):wt.prototype[i]=Tw(i,r)),r},n.deregisterPlugin=function(i){if(i===$f)throw new Error("Cannot de-register base plugin.");Vf(i)&&(delete Ho[i],delete wt.prototype[i])},n.getPlugins=function(i){i===void 0&&(i=Object.keys(Ho));var r;return i.forEach(function(a){var s=Rf(a);s&&(r=r||{},r[a]=s)}),r},n.getPluginVersion=function(i){var r=Rf(i);return r&&r.VERSION||""},n}();$r.getPlugin=Rf;$r.BASE_PLUGIN_NAME=$f;$r.registerPlugin($f,$r);wt.prototype.usingPlugin=function(n){return!!this[qo]&&this[qo][n]===!0};wt.prototype.hasPlugin=function(n){return!!Vf(n)};var xw=!1,l3=function(e,t){t===void 0&&(t={}),xw||(Ie.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),xw=!0);var i=function(){e.apply(this,arguments)},r={};typeof t=="object"?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),r=t):typeof t=="function"&&(i=t),Ev(i,e),e&&(i.super_=e);for(var a in r)r.hasOwnProperty(a)&&(i.prototype[a]=r[a]);return i},ek=function(e){return e.indexOf("#")===0?e.slice(1):e};function X(n,e,t){var i=X.getPlayer(n);if(i)return e&&Ie.warn('Player "'+n+'" is already initialised. Options will not be applied.'),t&&i.ready(t),i;var r=typeof n=="string"?ha("#"+ek(n)):n;if(!eu(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!r.ownerDocument.defaultView||!r.ownerDocument.body.contains(r))&&Ie.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),ca("beforesetup").forEach(function(s){var o=s(r,dt(e));if(!An(o)||Array.isArray(o)){Ie.error("please return an object in beforesetup hooks");return}e=dt(e,o)});var a=se.getComponent("Player");return i=new a(r,e,t),ca("setup").forEach(function(s){return s(i)}),i}X.hooks_=Dn;X.hooks=ca;X.hook=NB;X.hookOnce=BB;X.removeHook=Gw;$.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Zo()&&(Zl=ha(".vjs-styles-defaults"),Zl||(Zl=mA("vjs-styles-defaults"),Af=ha("head"),Af&&Af.insertBefore(Zl,Af.firstChild),gA(Zl,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)));var Zl,Af;m_(1,X);X.VERSION=qw;X.options=wt.prototype.options_;X.getPlayers=function(){return wt.players};X.getPlayer=function(n){var e=wt.players,t;if(typeof n=="string"){var i=ek(n),r=e[i];if(r)return r;t=ha("#"+i)}else t=n;if(eu(t)){var a=t,s=a.player,o=a.playerId;if(s||e[o])return s||e[o]}};X.getAllPlayers=function(){return Object.keys(wt.players).map(function(n){return wt.players[n]}).filter(Boolean)};X.players=wt.players;X.getComponent=se.getComponent;X.registerComponent=function(n,e){rt.isTech(e)&&Ie.warn("The "+n+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),se.registerComponent.call(se,n,e)};X.getTech=rt.getTech;X.registerTech=rt.registerTech;X.use=yU;Object.defineProperty(X,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(X.middleware,"TERMINATOR",{value:Bf,writeable:!1,enumerable:!0});X.browser=WB;X.TOUCH_ENABLED=zo;X.extend=l3;X.mergeOptions=dt;X.bind=ct;X.registerPlugin=$r.registerPlugin;X.deregisterPlugin=$r.deregisterPlugin;X.plugin=function(n,e){return Ie.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),$r.registerPlugin(n,e)};X.getPlugins=$r.getPlugins;X.getPlugin=$r.getPlugin;X.getPluginVersion=$r.getPluginVersion;X.addLanguage=function(n,e){var t;return n=(""+n).toLowerCase(),X.options.languages=dt(X.options.languages,(t={},t[n]=e,t)),X.options.languages[n]};X.log=Ie;X.createLogger=Kw;X.createTimeRange=X.createTimeRanges=ls;X.formatTime=Jo;X.setFormatTime=BU;X.resetFormatTime=UU;X.parseUrl=V_;X.isCrossOrigin=ap;X.EventTarget=Rt;X.on=Bi;X.one=rp;X.off=Xt;X.trigger=tu;X.xhr=O_.default;X.TextTrack=md;X.AudioTrack=EA;X.VideoTrack=CA;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(n){X[n]=function(){return Ie.warn("videojs."+n+"() is deprecated; use videojs.dom."+n+"() instead"),fA[n].apply(null,arguments)}});X.computedStyle=ud;X.dom=fA;X.url=mU;X.defineLazyProperty=uy;X.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var pr=Dr,qf=function(e,t,i){return e&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t},vr=function(e){return X.log.debug?X.log.debug.bind(X,"VHS:",e+" >"):function(){}},fa=1/30,jr=fa*3,tk=function(e,t){var i=[],r;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&i.push([e.start(r),e.end(r)]);return X.createTimeRanges(i)},$o=function(e,t){return tk(e,function(i,r){return i-jr<=t&&r+jr>=t})},kf=function(e,t){return tk(e,function(i){return i-fa>=t})},d3=function(e){if(e.length<2)return X.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var r=e.end(i-1),a=e.start(i);t.push([r,a])}return X.createTimeRanges(t)},c3=function(e,t){var i=null,r=null,a=0,s=[],o=[];if(!e||!e.length||!t||!t.length)return X.createTimeRange();for(var u=e.length;u--;)s.push({time:e.start(u),type:"start"}),s.push({time:e.end(u),type:"end"});for(u=t.length;u--;)s.push({time:t.start(u),type:"start"}),s.push({time:t.end(u),type:"end"});for(s.sort(function(l,d){return l.time-d.time}),u=0;u<s.length;u++)s[u].type==="start"?(a++,a===2&&(i=s[u].time)):s[u].type==="end"&&(a--,a===1&&(r=s[u].time)),i!==null&&r!==null&&(o.push([i,r]),i=null,r=null);return X.createTimeRanges(o)},ik=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},h3=function(e,t,i){i===void 0&&(i=1);var r=e.length?e.end(e.length-1):0;return(r-t)/i},os=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},f3=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0;return!1},bw=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},ly=function(e,t){var i=0;if(!e||!e.length)return i;for(var r=0;r<e.length;r++){var a=e.start(r),s=e.end(r);if(!(t>s)){if(t>a&&t<=s){i+=s-t;continue}i+=s-a}}return i},Sw=X.createTimeRange,dy=function(e,t){if(!t.preload)return t.duration;var i=0;return(t.parts||[]).forEach(function(r){i+=r.duration}),(t.preloadHints||[]).forEach(function(r){r.type==="PART"&&(i+=e.partTargetDuration)}),i},b_=function(e){return(e.segments||[]).reduce(function(t,i,r){return i.parts?i.parts.forEach(function(a,s){t.push({duration:a.duration,segmentIndex:r,partIndex:s,part:a,segment:i})}):t.push({duration:i.duration,segmentIndex:r,partIndex:null,segment:i,part:null}),t},[])},rk=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},nk=function(e){var t=e.preloadSegment;if(!!t){var i=t.parts,r=t.preloadHints,a=(r||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return a+=i&&i.length?i.length:0,a}},ak=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var i=rk(t).length>0;return i&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:i&&t.partTargetDuration?t.partTargetDuration*3:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?t.targetDuration*3:0},p3=function(e,t){var i=0,r=t-e.mediaSequence,a=e.segments[r];if(a){if(typeof a.start<"u")return{result:a.start,precise:!0};if(typeof a.end<"u")return{result:a.end-a.duration,precise:!0}}for(;r--;){if(a=e.segments[r],typeof a.end<"u")return{result:i+a.end,precise:!0};if(i+=dy(e,a),typeof a.start<"u")return{result:i+a.start,precise:!0}}return{result:i,precise:!1}},m3=function(e,t){for(var i=0,r,a=t-e.mediaSequence;a<e.segments.length;a++){if(r=e.segments[a],typeof r.start<"u")return{result:r.start-i,precise:!0};if(i+=dy(e,r),typeof r.end<"u")return{result:r.end-i,precise:!0}}return{result:-1,precise:!1}},sk=function(e,t,i){if(typeof t>"u"&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var r=p3(e,t);if(r.precise)return r.result;var a=m3(e,t);return a.precise?a.result:r.result+i},ok=function(e,t,i){if(!e)return 0;if(typeof i!="number"&&(i=0),typeof t>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return $.default.Infinity}return sk(e,t,i)},nd=function(e){var t=e.defaultDuration,i=e.durationList,r=e.startIndex,a=e.endIndex,s=0;if(r>a){var o=[a,r];r=o[0],a=o[1]}if(r<0){for(var u=r;u<Math.min(0,a);u++)s+=t;r=0}for(var l=r;l<a;l++)s+=i[l].duration;return s},uk=function(e,t,i,r){if(!e||!e.segments)return null;if(e.endList)return ok(e);if(t===null)return null;t=t||0;var a=sk(e,e.mediaSequence+e.segments.length,t);return i&&(r=typeof r=="number"?r:ak(null,e),a-=r),Math.max(0,a)},g3=function(e,t,i){var r=!0,a=t||0,s=uk(e,t,r,i);return s===null?Sw():Sw(a,s)},v3=function(e){for(var t=e.playlist,i=e.currentTime,r=e.startingSegmentIndex,a=e.startingPartIndex,s=e.startTime,o=e.experimentalExactManifestTimings,u=i-s,l=b_(t),d=0,h=0;h<l.length;h++){var p=l[h];if(r===p.segmentIndex&&!(typeof a=="number"&&typeof p.partIndex=="number"&&a!==p.partIndex)){d=h;break}}if(u<0){if(d>0)for(var _=d-1;_>=0;_--){var D=l[_];if(u+=D.duration,o){if(u<0)continue}else if(u+fa<=0)continue;return{partIndex:D.partIndex,segmentIndex:D.segmentIndex,startTime:s-nd({defaultDuration:t.targetDuration,durationList:l,startIndex:d,endIndex:_})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i}}if(d<0){for(var C=d;C<0;C++)if(u-=t.targetDuration,u<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i};d=0}for(var S=d;S<l.length;S++){var I=l[S];if(u-=I.duration,o){if(u>0)continue}else if(u-fa>=0)continue;return{partIndex:I.partIndex,segmentIndex:I.segmentIndex,startTime:s+nd({defaultDuration:t.targetDuration,durationList:l,startIndex:d,endIndex:S})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:i}},lk=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},cy=function(e){return e.excludeUntil&&e.excludeUntil===1/0},lp=function(e){var t=lk(e);return!e.disabled&&!t},_3=function(e){return e.disabled},y3=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},dk=function(e,t){return t.attributes&&t.attributes[e]},T3=function(e,t,i,r){if(r===void 0&&(r=0),!dk("BANDWIDTH",i))return NaN;var a=e*i.attributes.BANDWIDTH;return(a-r*8)/t},S_=function(e,t){if(e.playlists.length===1)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(r){return lp(r)?(r.attributes.BANDWIDTH||0)<i:!1}).length===0},hy=function(e,t){return!e&&!t||!e&&t||e&&!t?!1:!!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri)},Dw=function(e,t){var i=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(var a in i){for(var s in i[a])if(r=t(i[a][s]),r)break;if(r)break}return!!r},_d=function(e){if(!e||!e.playlists||!e.playlists.length){var t=Dw(e,function(s){return s.playlists&&s.playlists.length||s.uri});return t}for(var i=function(o){var u=e.playlists[o],l=u.attributes&&u.attributes.CODECS;if(l&&l.split(",").every(function(h){return kv(h)}))return"continue";var d=Dw(e,function(h){return hy(u,h)});return d?"continue":{v:!1}},r=0;r<e.playlists.length;r++){var a=i(r);if(a!=="continue"&&typeof a=="object")return a.v}return!0},Ci={liveEdgeDelay:ak,duration:ok,seekable:g3,getMediaInfoForTime:v3,isEnabled:lp,isDisabled:_3,isBlacklisted:lk,isIncompatible:cy,playlistEnd:uk,isAes:y3,hasAttribute:dk,estimateSegmentRequestTime:T3,isLowestEnabledRendition:S_,isAudioOnly:_d,playlistMatch:hy,segmentDurationWithParts:dy},ck=X.log,fy=function(e,t){return e+"-"+t},x3=function(e,t,i){return"placeholder-uri-"+e+"-"+t+"-"+i},b3=function(e){var t=e.onwarn,i=e.oninfo,r=e.manifestString,a=e.customTagParsers,s=a===void 0?[]:a,o=e.customTagMappers,u=o===void 0?[]:o,l=e.experimentalLLHLS,d=new aC;t&&d.on("warn",t),i&&d.on("info",i),s.forEach(function(C){return d.addParser(C)}),u.forEach(function(C){return d.addTagMapper(C)}),d.push(r),d.end();var h=d.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(C){h.hasOwnProperty(C)&&delete h[C]}),h.segments&&h.segments.forEach(function(C){["parts","preloadHints"].forEach(function(S){C.hasOwnProperty(S)&&delete C[S]})})),!h.targetDuration){var p=10;h.segments&&h.segments.length&&(p=h.segments.reduce(function(C,S){return Math.max(C,S.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+p),h.targetDuration=p}var _=rk(h);if(_.length&&!h.partTargetDuration){var D=_.reduce(function(C,S){return Math.max(C,S.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+D),ck.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),h.partTargetDuration=D}return h},su=function(e,t){!e.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(i){if(!!e.mediaGroups[i])for(var r in e.mediaGroups[i])for(var a in e.mediaGroups[i][r]){var s=e.mediaGroups[i][r][a];t(s,i,r,a)}})},hk=function(e){var t=e.playlist,i=e.uri,r=e.id;t.id=r,t.playlistErrors_=0,i&&(t.uri=i),t.attributes=t.attributes||{}},S3=function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];hk({playlist:i,id:fy(t,i.uri)}),i.resolvedUri=pr(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||ck.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},D3=function(e){su(e,function(t){t.uri&&(t.resolvedUri=pr(e.uri,t.uri))})},E3=function(e,t){var i=fy(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:$.default.location.href,resolvedUri:$.default.location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]};return r.playlists[i]=r.playlists[0],r.playlists[t]=r.playlists[0],r},fk=function(e,t,i){i===void 0&&(i=x3),e.uri=t;for(var r=0;r<e.playlists.length;r++)if(!e.playlists[r].uri){var a="placeholder-uri-"+r;e.playlists[r].uri=a}var s=_d(e);su(e,function(o,u,l,d){if(!o.playlists||!o.playlists.length){if(s&&u==="AUDIO"&&!o.uri)for(var h=0;h<e.playlists.length;h++){var p=e.playlists[h];if(p.attributes&&p.attributes.AUDIO&&p.attributes.AUDIO===l)return}o.playlists=[vt({},o)]}o.playlists.forEach(function(_,D){var C=i(u,l,d,_),S=fy(D,C);_.uri?_.resolvedUri=_.resolvedUri||pr(e.uri,_.uri):(_.uri=D===0?C:S,_.resolvedUri=_.uri),_.id=_.id||S,_.attributes=_.attributes||{},e.playlists[_.id]=_,e.playlists[_.uri]=_})}),S3(e),D3(e)},Gf=X.mergeOptions,C3=X.EventTarget,w3=function(e,t){if(t.endList||!t.serverControl)return e;var i={};if(t.serverControl.canBlockReload){var r=t.preloadSegment,a=t.mediaSequence+t.segments.length;if(r){var s=r.parts||[],o=nk(t)-1;o>-1&&o!==s.length-1&&(i._HLS_part=o),(o>-1||s.length)&&a--}i._HLS_msn=a}if(t.serverControl&&t.serverControl.canSkipUntil&&(i._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){var u=new $.default.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(l){!i.hasOwnProperty(l)||u.searchParams.set(l,i[l])}),e=u.toString()}return e},A3=function(e,t){if(!e)return t;var i=Gf(e,t);if(e.preloadHints&&!t.preloadHints&&delete i.preloadHints,e.parts&&!t.parts)delete i.parts;else if(e.parts&&t.parts)for(var r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(i.parts[r]=Gf(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(i.skipped=!1),e.preload&&!t.preload&&(i.preload=!1),i},k3=function(e,t,i){var r=e.slice(),a=t.slice();i=i||0;for(var s=[],o,u=0;u<a.length;u++){var l=r[u+i],d=a[u];l?(o=l.map||o,s.push(A3(l,d))):(o&&!d.map&&(d.map=o),s.push(d))}return s},pk=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=pr(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=pr(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=pr(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=pr(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(i){i.resolvedUri||(i.resolvedUri=pr(t,i.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(i){i.resolvedUri||(i.resolvedUri=pr(t,i.uri))})},mk=function(e){var t=e.segments||[],i=e.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(var r=0;r<i.preloadHints.length;r++)if(i.preloadHints[r].type==="MAP")return t}i.duration=e.targetDuration,i.preload=!0,t.push(i)}return t},gk=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},D_=function(e,t,i){i===void 0&&(i=gk);var r=Gf(e,{}),a=r.playlists[t.id];if(!a||i(a,t))return null;t.segments=mk(t);var s=Gf(a,t);if(s.preloadSegment&&!t.preloadSegment&&delete s.preloadSegment,a.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}s.segments=k3(a.segments,t.segments,t.mediaSequence-a.mediaSequence)}s.segments.forEach(function(l){pk(l,s.resolvedUri)});for(var u=0;u<r.playlists.length;u++)r.playlists[u].id===t.id&&(r.playlists[u]=s);return r.playlists[t.id]=s,r.playlists[t.uri]=s,su(e,function(l,d,h,p){if(!!l.playlists)for(var _=0;_<l.playlists.length;_++)t.id===l.playlists[_].id&&(l.playlists[_]=s)}),r},E_=function(e,t){var i=e.segments||[],r=i[i.length-1],a=r&&r.parts&&r.parts[r.parts.length-1],s=a&&a.duration||r&&r.duration;return t&&s?s*1e3:(e.partTargetDuration||e.targetDuration||10)*500},Vo=function(n){de(e,n);function e(i,r,a){var s;if(a===void 0&&(a={}),s=n.call(this)||this,!i)throw new Error("A non-empty playlist URL or object is required");s.logger_=vr("PlaylistLoader");var o=a,u=o.withCredentials,l=u===void 0?!1:u,d=o.handleManifestRedirects,h=d===void 0?!1:d;s.src=i,s.vhs_=r,s.withCredentials=l,s.handleManifestRedirects=h;var p=r.options_;return s.customTagParsers=p&&p.customTagParsers||[],s.customTagMappers=p&&p.customTagMappers||[],s.experimentalLLHLS=p&&p.experimentalLLHLS||!1,X.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(Se(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var t=e.prototype;return t.handleMediaupdatetimeout_=function(){var r=this;if(this.state==="HAVE_METADATA"){var a=this.media(),s=pr(this.master.uri,a.uri);this.experimentalLLHLS&&(s=w3(s,a)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,u){if(!!r.request){if(o)return r.playlistRequestError(r.request,r.media(),"HAVE_METADATA");r.haveMetadata({playlistString:r.request.responseText,url:r.media().uri,id:r.media().id})}})}},t.playlistRequestError=function(r,a,s){var o=a.uri,u=a.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[u],status:r.status,message:"HLS playlist request error at URL: "+o+".",responseText:r.responseText,code:r.status>=500?4:2},this.trigger("error")},t.parseManifest_=function(r){var a=this,s=r.url,o=r.manifestString;return b3({onwarn:function(l){var d=l.message;return a.logger_("m3u8-parser warn for "+s+": "+d)},oninfo:function(l){var d=l.message;return a.logger_("m3u8-parser info for "+s+": "+d)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(r){var a=r.playlistString,s=r.playlistObject,o=r.url,u=r.id;this.request=null,this.state="HAVE_METADATA";var l=s||this.parseManifest_({url:o,manifestString:a});l.lastRequest=Date.now(),hk({playlist:l,uri:o,id:u});var d=D_(this.master,l);this.targetDuration=l.partTargetDuration||l.targetDuration,this.pendingMedia_=null,d?(this.master=d,this.media_=this.master.playlists[u]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(E_(this.media(),!!d)),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),$.default.clearTimeout(this.mediaUpdateTimeout),$.default.clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){if(this.request){var r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}},t.media=function(r,a){var s=this;if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof r=="string"){if(!this.master.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.master.playlists[r]}if($.default.clearTimeout(this.finalRenditionTimeout),a){var o=(r.partTargetDuration||r.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=$.default.setTimeout(this.media.bind(this,r,!1),o);return}var u=this.state,l=!this.media_||r.id!==this.media_.id,d=this.master.playlists[r.id];if(d&&d.endList||r.endList&&r.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=r,l&&(this.trigger("mediachanging"),u==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(E_(r,!0)),!!l){if(this.state="SWITCHING_MEDIA",this.request){if(r.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=r,this.request=this.vhs_.xhr({uri:r.resolvedUri,withCredentials:this.withCredentials},function(h,p){if(!!s.request){if(r.lastRequest=Date.now(),r.resolvedUri=qf(s.handleManifestRedirects,r.resolvedUri,p),h)return s.playlistRequestError(s.request,r,u);s.haveMetadata({playlistString:p.responseText,url:r.uri,id:r.id}),u==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},t.pause=function(){this.mediaUpdateTimeout&&($.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},t.load=function(r){var a=this;this.mediaUpdateTimeout&&($.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(r){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=$.default.setTimeout(function(){a.mediaUpdateTimeout=null,a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},t.updateMediaUpdateTimeout_=function(r){var a=this;this.mediaUpdateTimeout&&($.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=$.default.setTimeout(function(){a.mediaUpdateTimeout=null,a.trigger("mediaupdatetimeout"),a.updateMediaUpdateTimeout_(r)},r))},t.start=function(){var r=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=$.default.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){r.setupInitialPlaylist(r.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(a,s){if(!!r.request){if(r.request=null,a)return r.error={status:s.status,message:"HLS playlist request error at URL: "+r.src+".",responseText:s.responseText,code:2},r.state==="HAVE_NOTHING"&&(r.started=!1),r.trigger("error");r.src=qf(r.handleManifestRedirects,r.src,s);var o=r.parseManifest_({manifestString:s.responseText,url:r.src});r.setupInitialPlaylist(o)}})},t.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},t.setupInitialPlaylist=function(r){if(this.state="HAVE_MASTER",r.playlists){this.master=r,fk(this.master,this.srcUri()),r.playlists.forEach(function(s){s.segments=mk(s),s.segments.forEach(function(o){pk(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var a=this.srcUri()||$.default.location.href;this.master=E3(r,a),this.haveMetadata({playlistObject:r,url:a,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(C3),I3=X.xhr,P3=X.mergeOptions,C_=function(e,t,i,r){var a=e.responseType==="arraybuffer"?e.response:e.responseText;!t&&a&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=a.byteLength||a.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&t.code==="ETIMEDOUT"&&(e.timedout=!0),!t&&!e.aborted&&i.statusCode!==200&&i.statusCode!==206&&i.statusCode!==0&&(t=new Error("XHR Failed with a response of: "+(e&&(a||e.responseText)))),r(t,e)},vk=function(){var e=function t(i,r){i=P3({timeout:45e3},i);var a=t.beforeRequest||X.Vhs.xhr.beforeRequest;if(a&&typeof a=="function"){var s=a(i);s&&(i=s)}var o=X.Vhs.xhr.original===!0?I3:X.Vhs.xhr,u=o(i,function(d,h){return C_(u,d,h,r)}),l=u.abort;return u.abort=function(){return u.aborted=!0,l.apply(u,arguments)},u.uri=i.uri,u.requestTime=Date.now(),u};return e.original=!0,e},F3=function(e){var t,i=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=$.default.BigInt(e.offset)+$.default.BigInt(e.length)-$.default.BigInt(1):t=e.offset+e.length-1,"bytes="+i+"-"+t},w_=function(e){var t={};return e.byterange&&(t.Range=F3(e.byterange)),t},O3=function(e,t){return e.start(t)+"-"+e.end(t)},L3=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},R3=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},_k=function(e){var t={};return Object.keys(e).forEach(function(i){var r=e[i];Ov(r)?t[i]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[i]=r}),t},zf=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},yk=function(e){return e.resolvedUri},Tk=function(e){for(var t=Array.prototype.slice.call(e),i=16,r="",a,s,o=0;o<t.length/i;o++)a=t.slice(o*i,o*i+i).map(L3).join(""),s=t.slice(o*i,o*i+i).map(R3).join(""),r+=a+" "+s+`
`;return r},M3=function(e){var t=e.bytes;return Tk(t)},N3=function(e){var t="",i;for(i=0;i<e.length;i++)t+=O3(e,i)+" ";return t},B3=Object.freeze({__proto__:null,createTransferableMessage:_k,initSegmentId:zf,segmentKeyId:yk,hexDump:Tk,tagDump:M3,textRanges:N3}),xk=.25,U3=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,r=t.videoTimingInfo.transmuxedPresentationStart,a=r+i,s=e-a;return new Date(t.dateTimeObject.getTime()+s*1e3)},j3=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},H3=function(e,t){var i;try{i=new Date(e)}catch{return null}if(!t||!t.segments||t.segments.length===0)return null;var r=t.segments[0];if(i<r.dateTimeObject)return null;for(var a=0;a<t.segments.length-1;a++){r=t.segments[a];var s=t.segments[a+1].dateTimeObject;if(i<s)break}var o=t.segments[t.segments.length-1],u=o.dateTimeObject,l=o.videoTimingInfo?j3(o.videoTimingInfo):o.duration+o.duration*xk,d=new Date(u.getTime()+l*1e3);return i>d?null:(i>u&&(r=o),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Ci.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},$3=function(e,t){if(!t||!t.segments||t.segments.length===0)return null;for(var i=0,r,a=0;a<t.segments.length&&(r=t.segments[a],i=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:i+r.duration,!(e<=i));a++);var s=t.segments[t.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+s.duration*xk)return null;r=s}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:i-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},V3=function(e,t){var i,r;try{i=new Date(e),r=new Date(t)}catch{}var a=i.getTime(),s=r.getTime();return(s-a)/1e3},W3=function(e){if(!e.segments||e.segments.length===0)return!1;for(var t=0;t<e.segments.length;t++){var i=e.segments[t];if(!i.dateTimeObject)return!1}return!0},q3=function(e){var t=e.playlist,i=e.time,r=i===void 0?void 0:i,a=e.callback;if(!a)throw new Error("getProgramTime: callback must be provided");if(!t||r===void 0)return a({message:"getProgramTime: playlist and time must be provided"});var s=$3(r,t);if(!s)return a({message:"valid programTime was not found"});if(s.type==="estimate")return a({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:r},u=U3(r,s.segment);return u&&(o.programDateTime=u.toISOString()),a(null,o)},G3=function n(e){var t=e.programTime,i=e.playlist,r=e.retryCount,a=r===void 0?2:r,s=e.seekTo,o=e.pauseAfterSeek,u=o===void 0?!0:o,l=e.tech,d=e.callback;if(!d)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!i||!s)return d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return d({message:"player must be playing a live stream to start buffering"});if(!W3(i))return d({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var h=H3(t,i);if(!h)return d({message:t+" was not found in the stream"});var p=h.segment,_=V3(p.dateTimeObject,t);if(h.type==="estimate"){if(a===0)return d({message:t+" is not buffered yet. Try again"});s(h.estimatedStart+_),l.one("seeked",function(){n({programTime:t,playlist:i,retryCount:a-1,seekTo:s,pauseAfterSeek:u,tech:l,callback:d})});return}var D=p.start+_,C=function(){return d(null,l.currentTime())};l.one("seeked",C),u&&l.pause(),s(D)},d_=function(e,t){if(e.readyState===4)return t()},z3=function(e,t,i){var r=[],a,s=!1,o=function(p,_,D,C){return _.abort(),s=!0,i(p,_,D,C)},u=function(p,_){if(!s){if(p)return o(p,_,"",r);var D=_.responseText.substring(r&&r.byteLength||0,_.responseText.length);if(r=cC(r,yf(D,!0)),a=a||is(r),r.length<10||a&&r.length<a+2)return d_(_,function(){return o(p,_,"",r)});var C=Df(r);return C==="ts"&&r.length<188?d_(_,function(){return o(p,_,"",r)}):!C&&r.length<376?d_(_,function(){return o(p,_,"",r)}):o(null,_,C,r)}},l={uri:e,beforeSend:function(p){p.overrideMimeType("text/plain; charset=x-user-defined"),p.addEventListener("progress",function(_){return _.total,_.loaded,C_(p,null,{statusCode:p.status},u)})}},d=t(l,function(h,p){return C_(d,h,p,u)});return d},K3=X.EventTarget,bk=X.mergeOptions,Ew=function(e,t){if(!gk(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var i=0;i<e.segments.length;i++){var r=e.segments[i],a=t.segments[i];if(r.uri!==a.uri)return!1;if(!(!r.byterange&&!a.byterange)){var s=r.byterange,o=a.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},X3=function(e,t,i,r){var a=r.attributes.NAME||i;return"placeholder-uri-"+e+"-"+t+"-"+a},Y3=function(e){var t=e.masterXml,i=e.srcUrl,r=e.clientOffset,a=e.sidxMapping,s=e.previousManifest,o=CC(t,{manifestUri:i,clientOffset:r,sidxMapping:a,previousManifest:s});return fk(o,i,X3),o},Q3=function(e,t){su(e,function(i,r,a,s){s in t.mediaGroups[r][a]||delete e.mediaGroups[r][a][s]})},J3=function(e,t,i){for(var r=!0,a=bk(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),s=0;s<t.playlists.length;s++){var o=t.playlists[s];if(o.sidx){var u=ql(o.sidx);i&&i[u]&&i[u].sidx&&xf(o,i[u].sidx,o.sidx.resolvedUri)}var l=D_(a,o,Ew);l&&(a=l,r=!1)}return su(t,function(d,h,p,_){if(d.playlists&&d.playlists.length){var D=d.playlists[0].id,C=D_(a,d.playlists[0],Ew);C&&(a=C,_ in a.mediaGroups[h][p]||(a.mediaGroups[h][p][_]=d),a.mediaGroups[h][p][_].playlists[0]=a.playlists[D],r=!1)}}),Q3(a,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:a},Z3=function(e,t){var i=Boolean(!e.map&&!t.map),r=i||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return r&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Cw=function(e,t){var i={};for(var r in e){var a=e[r],s=a.sidx;if(s){var o=ql(s);if(!t[o])break;var u=t[o].sidxInfo;Z3(u,s)&&(i[o]=t[o])}}return i},e8=function(e,t){var i=Cw(e.playlists,t),r=i;return su(e,function(a,s,o,u){if(a.playlists&&a.playlists.length){var l=a.playlists;r=bk(r,Cw(l,t))}}),r},A_=function(n){de(e,n);function e(i,r,a,s){var o;a===void 0&&(a={}),o=n.call(this)||this,o.masterPlaylistLoader_=s||Se(o),s||(o.isMaster_=!0);var u=a,l=u.withCredentials,d=l===void 0?!1:l,h=u.handleManifestRedirects,p=h===void 0?!1:h;if(o.vhs_=r,o.withCredentials=d,o.handleManifestRedirects=p,!i)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=vr("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=i,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=i,o}var t=e.prototype;return t.requestErrored_=function(r,a,s){if(!this.request)return!0;if(this.request=null,r)return this.error=typeof r=="object"&&!(r instanceof Error)?r:{status:a.status,message:"DASH request error at URL: "+a.uri,response:a.response,code:2},s&&(this.state=s),this.trigger("error"),!0},t.addSidxSegments_=function(r,a,s){var o=this,u=r.sidx&&ql(r.sidx);if(!r.sidx||!u||this.masterPlaylistLoader_.sidxMapping_[u]){this.mediaRequest_=$.default.setTimeout(function(){return s(!1)},0);return}var l=qf(this.handleManifestRedirects,r.sidx.resolvedUri),d=function(p,_){if(!o.requestErrored_(p,_,a)){var D=o.masterPlaylistLoader_.sidxMapping_,C;try{C=(0,Ww.default)(_e(_.response).subarray(8))}catch(S){o.requestErrored_(S,_,a);return}return D[u]={sidxInfo:r.sidx,sidx:C},xf(r,C,r.sidx.resolvedUri),s(!0)}};this.request=z3(l,this.vhs_.xhr,function(h,p,_,D){if(h)return d(h,p);if(!_||_!=="mp4")return d({status:p.status,message:"Unsupported "+(_||"unknown")+" container type for sidx segment at URL: "+l,response:"",playlist:r,internal:!0,blacklistDuration:1/0,code:2},p);var C=r.sidx.byterange,S=C.offset,I=C.length;if(D.length>=I+S)return d(h,{response:D.subarray(S,S+I),status:p.status,uri:p.uri});o.request=o.vhs_.xhr({uri:l,responseType:"arraybuffer",headers:w_({byterange:r.sidx.byterange})},d)})},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},$.default.clearTimeout(this.minimumUpdatePeriodTimeout_),$.default.clearTimeout(this.mediaRequest_),$.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){if(this.request){var r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}},t.media=function(r){var a=this;if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof r=="string"){if(!this.masterPlaylistLoader_.master.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.masterPlaylistLoader_.master.playlists[r]}var o=!this.media_||r.id!==this.media_.id;if(o&&this.loadedPlaylists_[r.id]&&this.loadedPlaylists_[r.id].endList){this.state="HAVE_METADATA",this.media_=r,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}!o||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(r,s,function(u){a.haveMetadata({startingState:s,playlist:r})}))},t.haveMetadata=function(r){var a=r.startingState,s=r.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),a==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),$.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&($.default.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},t.load=function(r){var a=this;$.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(r){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=$.default.setTimeout(function(){return a.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},t.start=function(){var r=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=$.default.setTimeout(function(){return r.haveMaster_()},0);return}this.requestMaster_(function(a,s){r.haveMaster_(),!r.hasPendingRequest()&&!r.media_&&r.media(r.masterPlaylistLoader_.master.playlists[0])})},t.requestMaster_=function(r){var a=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(a.requestErrored_(s,o)){a.state==="HAVE_NOTHING"&&(a.started=!1);return}var u=o.responseText!==a.masterPlaylistLoader_.masterXml_;if(a.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?a.masterLoaded_=Date.parse(o.responseHeaders.date):a.masterLoaded_=Date.now(),a.masterPlaylistLoader_.srcUrl=qf(a.handleManifestRedirects,a.masterPlaylistLoader_.srcUrl,o),u){a.handleMaster_(),a.syncClientServerClock_(function(){return r(o,u)});return}return r(o,u)})},t.syncClientServerClock_=function(r){var a=this,s=wC(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),r();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),r();this.request=this.vhs_.xhr({uri:pr(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,u){if(!!a.request){if(o)return a.masterPlaylistLoader_.clientOffset_=a.masterLoaded_-Date.now(),r();var l;s.method==="HEAD"?!u.responseHeaders||!u.responseHeaders.date?l=a.masterLoaded_:l=Date.parse(u.responseHeaders.date):l=Date.parse(u.responseText),a.masterPlaylistLoader_.clientOffset_=l-Date.now(),r()}})},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var r=this.masterPlaylistLoader_.master,a=Y3({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:r});r&&(a=J3(r,a,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=a||r;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!r||a&&a.minimumUpdatePeriod!==r.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(a)},t.updateMinimumUpdatePeriodTimeout_=function(){var r=this.masterPlaylistLoader_;r.createMupOnMedia_&&(r.off("loadedmetadata",r.createMupOnMedia_),r.createMupOnMedia_=null),r.minimumUpdatePeriodTimeout_&&($.default.clearTimeout(r.minimumUpdatePeriodTimeout_),r.minimumUpdatePeriodTimeout_=null);var a=r.master&&r.master.minimumUpdatePeriod;if(a===0&&(r.media()?a=r.media().targetDuration*1e3:(r.createMupOnMedia_=r.updateMinimumUpdatePeriodTimeout_,r.one("loadedmetadata",r.createMupOnMedia_))),typeof a!="number"||a<=0){a<0&&this.logger_("found invalid minimumUpdatePeriod of "+a+", not setting a timeout");return}this.createMUPTimeout_(a)},t.createMUPTimeout_=function(r){var a=this.masterPlaylistLoader_;a.minimumUpdatePeriodTimeout_=$.default.setTimeout(function(){a.minimumUpdatePeriodTimeout_=null,a.trigger("minimumUpdatePeriod"),a.createMUPTimeout_(r)},r)},t.refreshXml_=function(){var r=this;this.requestMaster_(function(a,s){!s||(r.media_&&(r.media_=r.masterPlaylistLoader_.master.playlists[r.media_.id]),r.masterPlaylistLoader_.sidxMapping_=e8(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.sidxMapping_),r.addSidxSegments_(r.media(),r.state,function(o){r.refreshMedia_(r.media().id)}))})},t.refreshMedia_=function(r){var a=this;if(!r)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[r];if(o?this.media_=s[r]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var u=function l(){a.media().endList||(a.mediaUpdateTimeout=$.default.setTimeout(function(){a.trigger("mediaupdatetimeout"),l()},E_(a.media(),Boolean(o))))};u()}this.trigger("loadedplaylist")},e}(K3),Ot={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},t8=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer},Sk=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},i8=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}},Dk=function(e){return function(){var t=i8(e),i=Sk(new Worker(t));i.objURL=t;var r=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},i}},Ek=function(e){return"var browserWorkerPolyFill = "+Sk.toString()+`;
browserWorkerPolyFill(self);
`+e},Ck=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},r8=Ek(Ck(function(){var n=function(){this.init=function(){var f={};this.on=function(v,g){f[v]||(f[v]=[]),f[v]=f[v].concat(g)},this.off=function(v,g){var x;return f[v]?(x=f[v].indexOf(g),f[v]=f[v].slice(),f[v].splice(x,1),x>-1):!1},this.trigger=function(v){var g,x,E,A;if(g=f[v],!!g)if(arguments.length===2)for(E=g.length,x=0;x<E;++x)g[x].call(this,arguments[1]);else{for(A=[],x=arguments.length,x=1;x<arguments.length;++x)A.push(arguments[x]);for(E=g.length,x=0;x<E;++x)g[x].apply(this,A)}},this.dispose=function(){f={}}}};n.prototype.pipe=function(k){return this.on("data",function(f){k.push(f)}),this.on("done",function(f){k.flush(f)}),this.on("partialdone",function(f){k.partialFlush(f)}),this.on("endedtimeline",function(f){k.endTimeline(f)}),this.on("reset",function(f){k.reset(f)}),k},n.prototype.push=function(k){this.trigger("data",k)},n.prototype.flush=function(k){this.trigger("done",k)},n.prototype.partialFlush=function(k){this.trigger("partialdone",k)},n.prototype.endTimeline=function(k){this.trigger("endedtimeline",k)},n.prototype.reset=function(k){this.trigger("reset",k)};var e=n,t=Math.pow(2,32),i=function(f){var v=new DataView(f.buffer,f.byteOffset,f.byteLength),g;return v.getBigUint64?(g=v.getBigUint64(0),g<Number.MAX_SAFE_INTEGER?Number(g):g):v.getUint32(0)*t+v.getUint32(4)},r={getUint64:i,MAX_UINT32:t},a=r.MAX_UINT32,s,o,u,l,d,h,p,_,D,C,S,I,L,G,M,O,K,z,V,J,Q,oe,ne,ae,ye,Pe,xe,Ae,Be,ht,Oe,$i,Et,fi,tr,_r;(function(){var k;if(ne={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(k in ne)ne.hasOwnProperty(k)&&(ne[k]=[k.charCodeAt(0),k.charCodeAt(1),k.charCodeAt(2),k.charCodeAt(3)]);ae=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),Pe=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),ye=new Uint8Array([0,0,0,1]),xe=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Ae=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Be={video:xe,audio:Ae},$i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Oe=new Uint8Array([0,0,0,0,0,0,0,0]),Et=new Uint8Array([0,0,0,0,0,0,0,0]),fi=Et,tr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),_r=Et,ht=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(f){var v=[],g=0,x,E,A;for(x=1;x<arguments.length;x++)v.push(arguments[x]);for(x=v.length;x--;)g+=v[x].byteLength;for(E=new Uint8Array(g+8),A=new DataView(E.buffer,E.byteOffset,E.byteLength),A.setUint32(0,E.byteLength),E.set(f,4),x=0,g=8;x<v.length;x++)E.set(v[x],g),g+=v[x].byteLength;return E},o=function(){return s(ne.dinf,s(ne.dref,$i))},u=function(f){return s(ne.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,f.audioobjecttype<<3|f.samplingfrequencyindex>>>1,f.samplingfrequencyindex<<7|f.channelcount<<3,6,1,2]))},l=function(){return s(ne.ftyp,ae,ye,ae,Pe)},O=function(f){return s(ne.hdlr,Be[f])},d=function(f){return s(ne.mdat,f)},M=function(f){var v=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,f.duration>>>24&255,f.duration>>>16&255,f.duration>>>8&255,f.duration&255,85,196,0,0]);return f.samplerate&&(v[12]=f.samplerate>>>24&255,v[13]=f.samplerate>>>16&255,v[14]=f.samplerate>>>8&255,v[15]=f.samplerate&255),s(ne.mdhd,v)},G=function(f){return s(ne.mdia,M(f),O(f.type),p(f))},h=function(f){return s(ne.mfhd,new Uint8Array([0,0,0,0,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255]))},p=function(f){return s(ne.minf,f.type==="video"?s(ne.vmhd,ht):s(ne.smhd,Oe),o(),z(f))},_=function(f,v){for(var g=[],x=v.length;x--;)g[x]=J(v[x]);return s.apply(null,[ne.moof,h(f)].concat(g))},D=function(f){for(var v=f.length,g=[];v--;)g[v]=I(f[v]);return s.apply(null,[ne.moov,S(4294967295)].concat(g).concat(C(f)))},C=function(f){for(var v=f.length,g=[];v--;)g[v]=Q(f[v]);return s.apply(null,[ne.mvex].concat(g))},S=function(f){var v=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(f&4278190080)>>24,(f&16711680)>>16,(f&65280)>>8,f&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(ne.mvhd,v)},K=function(f){var v=f.samples||[],g=new Uint8Array(4+v.length),x,E;for(E=0;E<v.length;E++)x=v[E].flags,g[E+4]=x.dependsOn<<4|x.isDependedOn<<2|x.hasRedundancy;return s(ne.sdtp,g)},z=function(f){return s(ne.stbl,V(f),s(ne.stts,_r),s(ne.stsc,fi),s(ne.stsz,tr),s(ne.stco,Et))},function(){var k,f;V=function(g){return s(ne.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),g.type==="video"?k(g):f(g))},k=function(g){var x=g.sps||[],E=g.pps||[],A=[],P=[],N,H;for(N=0;N<x.length;N++)A.push((x[N].byteLength&65280)>>>8),A.push(x[N].byteLength&255),A=A.concat(Array.prototype.slice.call(x[N]));for(N=0;N<E.length;N++)P.push((E[N].byteLength&65280)>>>8),P.push(E[N].byteLength&255),P=P.concat(Array.prototype.slice.call(E[N]));if(H=[ne.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(g.width&65280)>>8,g.width&255,(g.height&65280)>>8,g.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(ne.avcC,new Uint8Array([1,g.profileIdc,g.profileCompatibility,g.levelIdc,255].concat([x.length],A,[E.length],P))),s(ne.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],g.sarRatio){var U=g.sarRatio[0],W=g.sarRatio[1];H.push(s(ne.pasp,new Uint8Array([(U&4278190080)>>24,(U&16711680)>>16,(U&65280)>>8,U&255,(W&4278190080)>>24,(W&16711680)>>16,(W&65280)>>8,W&255])))}return s.apply(null,H)},f=function(g){return s(ne.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(g.channelcount&65280)>>8,g.channelcount&255,(g.samplesize&65280)>>8,g.samplesize&255,0,0,0,0,(g.samplerate&65280)>>8,g.samplerate&255,0,0]),u(g))}}(),L=function(f){var v=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,0,(f.duration&4278190080)>>24,(f.duration&16711680)>>16,(f.duration&65280)>>8,f.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(f.width&65280)>>8,f.width&255,0,0,(f.height&65280)>>8,f.height&255,0,0]);return s(ne.tkhd,v)},J=function(f){var v,g,x,E,A,P,N;return v=s(ne.tfhd,new Uint8Array([0,0,0,58,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),P=Math.floor(f.baseMediaDecodeTime/a),N=Math.floor(f.baseMediaDecodeTime%a),g=s(ne.tfdt,new Uint8Array([1,0,0,0,P>>>24&255,P>>>16&255,P>>>8&255,P&255,N>>>24&255,N>>>16&255,N>>>8&255,N&255])),A=32+20+8+16+8+8,f.type==="audio"?(x=oe(f,A),s(ne.traf,v,g,x)):(E=K(f),x=oe(f,E.length+A),s(ne.traf,v,g,x,E))},I=function(f){return f.duration=f.duration||4294967295,s(ne.trak,L(f),G(f))},Q=function(f){var v=new Uint8Array([0,0,0,0,(f.id&4278190080)>>24,(f.id&16711680)>>16,(f.id&65280)>>8,f.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return f.type!=="video"&&(v[v.length-1]=0),s(ne.trex,v)},function(){var k,f,v;v=function(x,E){var A=0,P=0,N=0,H=0;return x.length&&(x[0].duration!==void 0&&(A=1),x[0].size!==void 0&&(P=2),x[0].flags!==void 0&&(N=4),x[0].compositionTimeOffset!==void 0&&(H=8)),[0,0,A|P|N|H,1,(x.length&4278190080)>>>24,(x.length&16711680)>>>16,(x.length&65280)>>>8,x.length&255,(E&4278190080)>>>24,(E&16711680)>>>16,(E&65280)>>>8,E&255]},f=function(x,E){var A,P,N,H,U,W;for(H=x.samples||[],E+=8+12+16*H.length,N=v(H,E),P=new Uint8Array(N.length+H.length*16),P.set(N),A=N.length,W=0;W<H.length;W++)U=H[W],P[A++]=(U.duration&4278190080)>>>24,P[A++]=(U.duration&16711680)>>>16,P[A++]=(U.duration&65280)>>>8,P[A++]=U.duration&255,P[A++]=(U.size&4278190080)>>>24,P[A++]=(U.size&16711680)>>>16,P[A++]=(U.size&65280)>>>8,P[A++]=U.size&255,P[A++]=U.flags.isLeading<<2|U.flags.dependsOn,P[A++]=U.flags.isDependedOn<<6|U.flags.hasRedundancy<<4|U.flags.paddingValue<<1|U.flags.isNonSyncSample,P[A++]=U.flags.degradationPriority&240<<8,P[A++]=U.flags.degradationPriority&15,P[A++]=(U.compositionTimeOffset&4278190080)>>>24,P[A++]=(U.compositionTimeOffset&16711680)>>>16,P[A++]=(U.compositionTimeOffset&65280)>>>8,P[A++]=U.compositionTimeOffset&255;return s(ne.trun,P)},k=function(x,E){var A,P,N,H,U,W;for(H=x.samples||[],E+=8+12+8*H.length,N=v(H,E),A=new Uint8Array(N.length+H.length*8),A.set(N),P=N.length,W=0;W<H.length;W++)U=H[W],A[P++]=(U.duration&4278190080)>>>24,A[P++]=(U.duration&16711680)>>>16,A[P++]=(U.duration&65280)>>>8,A[P++]=U.duration&255,A[P++]=(U.size&4278190080)>>>24,A[P++]=(U.size&16711680)>>>16,A[P++]=(U.size&65280)>>>8,A[P++]=U.size&255;return s(ne.trun,A)},oe=function(x,E){return x.type==="audio"?k(x,E):f(x,E)}}();var wi={ftyp:l,mdat:d,moof:_,moov:D,initSegment:function(f){var v=l(),g=D(f),x;return x=new Uint8Array(v.byteLength+g.byteLength),x.set(v),x.set(g,v.byteLength),x}},On=function(f){var v,g,x=[],E=[];for(E.byteLength=0,E.nalCount=0,E.duration=0,x.byteLength=0,v=0;v<f.length;v++)g=f[v],g.nalUnitType==="access_unit_delimiter_rbsp"?(x.length&&(x.duration=g.dts-x.dts,E.byteLength+=x.byteLength,E.nalCount+=x.length,E.duration+=x.duration,E.push(x)),x=[g],x.byteLength=g.data.byteLength,x.pts=g.pts,x.dts=g.dts):(g.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(x.keyFrame=!0),x.duration=g.dts-x.dts,x.byteLength+=g.data.byteLength,x.push(g));return E.length&&(!x.duration||x.duration<=0)&&(x.duration=E[E.length-1].duration),E.byteLength+=x.byteLength,E.nalCount+=x.length,E.duration+=x.duration,E.push(x),E},Ln=function(f){var v,g,x=[],E=[];for(x.byteLength=0,x.nalCount=0,x.duration=0,x.pts=f[0].pts,x.dts=f[0].dts,E.byteLength=0,E.nalCount=0,E.duration=0,E.pts=f[0].pts,E.dts=f[0].dts,v=0;v<f.length;v++)g=f[v],g.keyFrame?(x.length&&(E.push(x),E.byteLength+=x.byteLength,E.nalCount+=x.nalCount,E.duration+=x.duration),x=[g],x.nalCount=g.length,x.byteLength=g.byteLength,x.pts=g.pts,x.dts=g.dts,x.duration=g.duration):(x.duration+=g.duration,x.nalCount+=g.length,x.byteLength+=g.byteLength,x.push(g));return E.length&&x.duration<=0&&(x.duration=E[E.length-1].duration),E.byteLength+=x.byteLength,E.nalCount+=x.nalCount,E.duration+=x.duration,E.push(x),E},Rn=function(f){var v;return!f[0][0].keyFrame&&f.length>1&&(v=f.shift(),f.byteLength-=v.byteLength,f.nalCount-=v.nalCount,f[0][0].dts=v.dts,f[0][0].pts=v.pts,f[0][0].duration+=v.duration),f},pp=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Sd=function(f,v){var g=pp();return g.dataOffset=v,g.compositionTimeOffset=f.pts-f.dts,g.duration=f.duration,g.size=4*f.length,g.size+=f.byteLength,f.keyFrame&&(g.flags.dependsOn=2,g.flags.isNonSyncSample=0),g},Dd=function(f,v){var g,x,E,A,P,N=v||0,H=[];for(g=0;g<f.length;g++)for(A=f[g],x=0;x<A.length;x++)P=A[x],E=Sd(P,N),N+=E.size,H.push(E);return H},mp=function(f){var v,g,x,E,A,P,N=0,H=f.byteLength,U=f.nalCount,W=H+4*U,te=new Uint8Array(W),ce=new DataView(te.buffer);for(v=0;v<f.length;v++)for(E=f[v],g=0;g<E.length;g++)for(A=E[g],x=0;x<A.length;x++)P=A[x],ce.setUint32(N,P.data.byteLength),N+=4,te.set(P.data,N),N+=P.data.byteLength;return te},gp=function(f,v){var g,x=v||0,E=[];return g=Sd(f,x),E.push(g),E},vp=function(f){var v,g,x=0,E=f.byteLength,A=f.length,P=E+4*A,N=new Uint8Array(P),H=new DataView(N.buffer);for(v=0;v<f.length;v++)g=f[v],H.setUint32(x,g.data.byteLength),x+=4,N.set(g.data,x),x+=g.data.byteLength;return N},ga={groupNalsIntoFrames:On,groupFramesIntoGops:Ln,extendFirstKeyFrame:Rn,generateSampleTable:Dd,concatenateNalData:mp,generateSampleTableForFrame:gp,concatenateNalDataForFrame:vp},yr=[33,16,5,32,164,27],Vi=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],$e=function(f){for(var v=[];f--;)v.push(0);return v},qe=function(f){return Object.keys(f).reduce(function(v,g){return v[g]=new Uint8Array(f[g].reduce(function(x,E){return x.concat(E)},[])),v},{})},uu,lu=function(){if(!uu){var f={96e3:[yr,[227,64],$e(154),[56]],88200:[yr,[231],$e(170),[56]],64e3:[yr,[248,192],$e(240),[56]],48e3:[yr,[255,192],$e(268),[55,148,128],$e(54),[112]],44100:[yr,[255,192],$e(268),[55,163,128],$e(84),[112]],32e3:[yr,[255,192],$e(268),[55,234],$e(226),[112]],24e3:[yr,[255,192],$e(268),[55,255,128],$e(268),[111,112],$e(126),[224]],16e3:[yr,[255,192],$e(268),[55,255,128],$e(268),[111,255],$e(269),[223,108],$e(195),[1,192]],12e3:[Vi,$e(268),[3,127,248],$e(268),[6,255,240],$e(268),[13,255,224],$e(268),[27,253,128],$e(259),[56]],11025:[Vi,$e(268),[3,127,248],$e(268),[6,255,240],$e(268),[13,255,224],$e(268),[27,255,192],$e(268),[55,175,128],$e(108),[112]],8e3:[Vi,$e(268),[3,121,16],$e(47),[7]]};uu=qe(f)}return uu},du=9e4,va,_a,Mn,Nn,fs,cu,hu;va=function(f){return f*du},_a=function(f,v){return f*v},Mn=function(f){return f/du},Nn=function(f,v){return f/v},fs=function(f,v){return va(Nn(f,v))},cu=function(f,v){return _a(Mn(f),v)},hu=function(f,v,g){return Mn(g?f:f-v)};var Ue={ONE_SECOND_IN_TS:du,secondsToVideoTs:va,secondsToAudioTs:_a,videoTsToSeconds:Mn,audioTsToSeconds:Nn,audioTsToVideoTs:fs,videoTsToAudioTs:cu,metadataTsToSeconds:hu},Ze=function(f){var v,g,x=0;for(v=0;v<f.length;v++)g=f[v],x+=g.data.byteLength;return x},_p=function(f,v,g,x){var E,A=0,P=0,N=0,H=0,U,W,te;if(!!v.length&&(E=Ue.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),A=Math.ceil(Ue.ONE_SECOND_IN_TS/(f.samplerate/1024)),g&&x&&(P=E-Math.max(g,x),N=Math.floor(P/A),H=N*A),!(N<1||H>Ue.ONE_SECOND_IN_TS/2))){for(U=lu()[f.samplerate],U||(U=v[0].data),W=0;W<N;W++)te=v[0],v.splice(0,0,{data:U,dts:te.dts-A,pts:te.pts-A});return f.baseMediaDecodeTime-=Math.floor(Ue.videoTsToAudioTs(H,f.samplerate)),H}},ps=function(f,v,g){return v.minSegmentDts>=g?f:(v.minSegmentDts=1/0,f.filter(function(x){return x.dts>=g?(v.minSegmentDts=Math.min(v.minSegmentDts,x.dts),v.minSegmentPts=v.minSegmentDts,!0):!1}))},yp=function(f){var v,g,x=[];for(v=0;v<f.length;v++)g=f[v],x.push({size:g.data.byteLength,duration:1024});return x},Tp=function(f){var v,g,x=0,E=new Uint8Array(Ze(f));for(v=0;v<f.length;v++)g=f[v],E.set(g.data,x),x+=g.data.byteLength;return E},ms={prefixWithSilence:_p,trimAdtsFramesByEarliestDts:ps,generateSampleTable:yp,concatenateFrameData:Tp},xp=Ue.ONE_SECOND_IN_TS,bp=function(f,v){typeof v.pts=="number"&&(f.timelineStartInfo.pts===void 0&&(f.timelineStartInfo.pts=v.pts),f.minSegmentPts===void 0?f.minSegmentPts=v.pts:f.minSegmentPts=Math.min(f.minSegmentPts,v.pts),f.maxSegmentPts===void 0?f.maxSegmentPts=v.pts:f.maxSegmentPts=Math.max(f.maxSegmentPts,v.pts)),typeof v.dts=="number"&&(f.timelineStartInfo.dts===void 0&&(f.timelineStartInfo.dts=v.dts),f.minSegmentDts===void 0?f.minSegmentDts=v.dts:f.minSegmentDts=Math.min(f.minSegmentDts,v.dts),f.maxSegmentDts===void 0?f.maxSegmentDts=v.dts:f.maxSegmentDts=Math.max(f.maxSegmentDts,v.dts))},Sp=function(f){delete f.minSegmentDts,delete f.maxSegmentDts,delete f.minSegmentPts,delete f.maxSegmentPts},Dp=function(f,v){var g,x,E=f.minSegmentDts;return v||(E-=f.timelineStartInfo.dts),g=f.timelineStartInfo.baseMediaDecodeTime,g+=E,g=Math.max(0,g),f.type==="audio"&&(x=f.samplerate/xp,g*=x,g=Math.floor(g)),g},Ai={clearDtsInfo:Sp,calculateTrackBaseMediaDecodeTime:Dp,collectDtsInfo:bp},Ed=4,Ep=128,Cp=function(f){for(var v=0,g={payloadType:-1,payloadSize:0},x=0,E=0;v<f.byteLength&&f[v]!==Ep;){for(;f[v]===255;)x+=255,v++;for(x+=f[v++];f[v]===255;)E+=255,v++;if(E+=f[v++],!g.payload&&x===Ed){var A=String.fromCharCode(f[v+3],f[v+4],f[v+5],f[v+6]);if(A==="GA94"){g.payloadType=x,g.payloadSize=E,g.payload=f.subarray(v,v+E);break}else g.payload=void 0}v+=E,x=0,E=0}return g},Cd=function(f){return f.payload[0]!==181||(f.payload[1]<<8|f.payload[2])!==49||String.fromCharCode(f.payload[3],f.payload[4],f.payload[5],f.payload[6])!=="GA94"||f.payload[7]!==3?null:f.payload.subarray(8,f.payload.length-1)},wp=function(f,v){var g=[],x,E,A,P;if(!(v[0]&64))return g;for(E=v[0]&31,x=0;x<E;x++)A=x*3,P={type:v[A+2]&3,pts:f},v[A+2]&4&&(P.ccData=v[A+3]<<8|v[A+4],g.push(P));return g},Ap=function(f){for(var v=f.byteLength,g=[],x=1,E,A;x<v-2;)f[x]===0&&f[x+1]===0&&f[x+2]===3?(g.push(x+2),x+=2):x++;if(g.length===0)return f;E=v-g.length,A=new Uint8Array(E);var P=0;for(x=0;x<E;P++,x++)P===g[0]&&(P++,g.shift()),A[x]=f[P];return A},ya={parseSei:Cp,parseUserData:Cd,parseCaptionPackets:wp,discardEmulationPreventionBytes:Ap,USER_DATA_REGISTERED_ITU_T_T35:Ed},Yt=function k(f){f=f||{},k.prototype.init.call(this),this.parse708captions_=typeof f.parse708captions=="boolean"?f.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new ot(0,0),new ot(0,1),new ot(1,0),new ot(1,1)],this.parse708captions_&&(this.cc708Stream_=new Qe({captionServices:f.captionServices})),this.reset(),this.ccStreams_.forEach(function(v){v.on("data",this.trigger.bind(this,"data")),v.on("partialdone",this.trigger.bind(this,"partialdone")),v.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Yt.prototype=new e,Yt.prototype.push=function(k){var f,v,g;if(k.nalUnitType==="sei_rbsp"&&(f=ya.parseSei(k.escapedRBSP),!!f.payload&&f.payloadType===ya.USER_DATA_REGISTERED_ITU_T_T35&&(v=ya.parseUserData(f),!!v))){if(k.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(k.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}g=ya.parseCaptionPackets(k.pts,v),this.captionPackets_=this.captionPackets_.concat(g),this.latestDts_!==k.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=k.dts}},Yt.prototype.flushCCStreams=function(k){this.ccStreams_.forEach(function(f){return k==="flush"?f.flush():f.partialFlush()},this)},Yt.prototype.flushStream=function(k){if(!this.captionPackets_.length){this.flushCCStreams(k);return}this.captionPackets_.forEach(function(f,v){f.presortIndex=v}),this.captionPackets_.sort(function(f,v){return f.pts===v.pts?f.presortIndex-v.presortIndex:f.pts-v.pts}),this.captionPackets_.forEach(function(f){f.type<2?this.dispatchCea608Packet(f):this.dispatchCea708Packet(f)},this),this.captionPackets_.length=0,this.flushCCStreams(k)},Yt.prototype.flush=function(){return this.flushStream("flush")},Yt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Yt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(k){k.reset()})},Yt.prototype.dispatchCea608Packet=function(k){this.setsTextOrXDSActive(k)?this.activeCea608Channel_[k.type]=null:this.setsChannel1Active(k)?this.activeCea608Channel_[k.type]=0:this.setsChannel2Active(k)&&(this.activeCea608Channel_[k.type]=1),this.activeCea608Channel_[k.type]!==null&&this.ccStreams_[(k.type<<1)+this.activeCea608Channel_[k.type]].push(k)},Yt.prototype.setsChannel1Active=function(k){return(k.ccData&30720)===4096},Yt.prototype.setsChannel2Active=function(k){return(k.ccData&30720)===6144},Yt.prototype.setsTextOrXDSActive=function(k){return(k.ccData&28928)===256||(k.ccData&30974)===4138||(k.ccData&30974)===6186},Yt.prototype.dispatchCea708Packet=function(k){this.parse708captions_&&this.cc708Stream_.push(k)};var kp={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},wd=function(f){var v=kp[f]||f;return f&4096&&f===v?"":String.fromCharCode(v)},Bn=function(f){return 32<=f&&f<=127||160<=f&&f<=255},pi=function(f){this.windowNum=f,this.reset()};pi.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},pi.prototype.getText=function(){return this.rows.join(`
`)},pi.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},pi.prototype.newLine=function(k){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(k),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},pi.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},pi.prototype.addText=function(k){this.rows[this.rowIdx]+=k},pi.prototype.backspace=function(){if(!this.isEmpty()){var k=this.rows[this.rowIdx];this.rows[this.rowIdx]=k.substr(0,k.length-1)}};var At=function(f,v,g){this.serviceNum=f,this.text="",this.currentWindow=new pi(-1),this.windows=[],this.stream=g,typeof v=="string"&&this.createTextDecoder(v)};At.prototype.init=function(k,f){this.startPts=k;for(var v=0;v<8;v++)this.windows[v]=new pi(v),typeof f=="function"&&(this.windows[v].beforeRowOverflow=f)},At.prototype.setCurrentWindow=function(k){this.currentWindow=this.windows[k]},At.prototype.createTextDecoder=function(k){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(k)}catch(f){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+k+" encoding. "+f})}};var Qe=function k(f){f=f||{},k.prototype.init.call(this);var v=this,g=f.captionServices||{},x={},E;Object.keys(g).forEach(function(A){E=g[A],/^SERVICE/.test(A)&&(x[A]=E.encoding)}),this.serviceEncodings=x,this.current708Packet=null,this.services={},this.push=function(A){A.type===3?(v.new708Packet(),v.add708Bytes(A)):(v.current708Packet===null&&v.new708Packet(),v.add708Bytes(A))}};Qe.prototype=new e,Qe.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Qe.prototype.add708Bytes=function(k){var f=k.ccData,v=f>>>8,g=f&255;this.current708Packet.ptsVals.push(k.pts),this.current708Packet.data.push(v),this.current708Packet.data.push(g)},Qe.prototype.push708Packet=function(){var k=this.current708Packet,f=k.data,v=null,g=null,x=0,E=f[x++];for(k.seq=E>>6,k.sizeCode=E&63;x<f.length;x++)E=f[x++],v=E>>5,g=E&31,v===7&&g>0&&(E=f[x++],v=E),this.pushServiceBlock(v,x,g),g>0&&(x+=g-1)},Qe.prototype.pushServiceBlock=function(k,f,v){var g,x=f,E=this.current708Packet.data,A=this.services[k];for(A||(A=this.initService(k,x));x<f+v&&x<E.length;x++)g=E[x],Bn(g)?x=this.handleText(x,A):g===24?x=this.multiByteCharacter(x,A):g===16?x=this.extendedCommands(x,A):128<=g&&g<=135?x=this.setCurrentWindow(x,A):152<=g&&g<=159?x=this.defineWindow(x,A):g===136?x=this.clearWindows(x,A):g===140?x=this.deleteWindows(x,A):g===137?x=this.displayWindows(x,A):g===138?x=this.hideWindows(x,A):g===139?x=this.toggleWindows(x,A):g===151?x=this.setWindowAttributes(x,A):g===144?x=this.setPenAttributes(x,A):g===145?x=this.setPenColor(x,A):g===146?x=this.setPenLocation(x,A):g===143?A=this.reset(x,A):g===8?A.currentWindow.backspace():g===12?A.currentWindow.clearText():g===13?A.currentWindow.pendingNewLine=!0:g===14?A.currentWindow.clearText():g===141&&x++},Qe.prototype.extendedCommands=function(k,f){var v=this.current708Packet.data,g=v[++k];return Bn(g)&&(k=this.handleText(k,f,{isExtended:!0})),k},Qe.prototype.getPts=function(k){return this.current708Packet.ptsVals[Math.floor(k/2)]},Qe.prototype.initService=function(k,f){var g="SERVICE"+k,v=this,g,x;return g in this.serviceEncodings&&(x=this.serviceEncodings[g]),this.services[k]=new At(k,x,v),this.services[k].init(this.getPts(f),function(E){v.flushDisplayed(E,v.services[k])}),this.services[k]},Qe.prototype.handleText=function(k,f,v){var g=v&&v.isExtended,x=v&&v.isMultiByte,E=this.current708Packet.data,A=g?4096:0,P=E[k],N=E[k+1],H=f.currentWindow,U,W;return f.textDecoder_&&!g?(x?(W=[P,N],k++):W=[P],U=f.textDecoder_.decode(new Uint8Array(W))):U=wd(A|P),H.pendingNewLine&&!H.isEmpty()&&H.newLine(this.getPts(k)),H.pendingNewLine=!1,H.addText(U),k},Qe.prototype.multiByteCharacter=function(k,f){var v=this.current708Packet.data,g=v[k+1],x=v[k+2];return Bn(g)&&Bn(x)&&(k=this.handleText(++k,f,{isMultiByte:!0})),k},Qe.prototype.setCurrentWindow=function(k,f){var v=this.current708Packet.data,g=v[k],x=g&7;return f.setCurrentWindow(x),k},Qe.prototype.defineWindow=function(k,f){var v=this.current708Packet.data,g=v[k],x=g&7;f.setCurrentWindow(x);var E=f.currentWindow;return g=v[++k],E.visible=(g&32)>>5,E.rowLock=(g&16)>>4,E.columnLock=(g&8)>>3,E.priority=g&7,g=v[++k],E.relativePositioning=(g&128)>>7,E.anchorVertical=g&127,g=v[++k],E.anchorHorizontal=g,g=v[++k],E.anchorPoint=(g&240)>>4,E.rowCount=g&15,g=v[++k],E.columnCount=g&63,g=v[++k],E.windowStyle=(g&56)>>3,E.penStyle=g&7,E.virtualRowCount=E.rowCount+1,k},Qe.prototype.setWindowAttributes=function(k,f){var v=this.current708Packet.data,g=v[k],x=f.currentWindow.winAttr;return g=v[++k],x.fillOpacity=(g&192)>>6,x.fillRed=(g&48)>>4,x.fillGreen=(g&12)>>2,x.fillBlue=g&3,g=v[++k],x.borderType=(g&192)>>6,x.borderRed=(g&48)>>4,x.borderGreen=(g&12)>>2,x.borderBlue=g&3,g=v[++k],x.borderType+=(g&128)>>5,x.wordWrap=(g&64)>>6,x.printDirection=(g&48)>>4,x.scrollDirection=(g&12)>>2,x.justify=g&3,g=v[++k],x.effectSpeed=(g&240)>>4,x.effectDirection=(g&12)>>2,x.displayEffect=g&3,k},Qe.prototype.flushDisplayed=function(k,f){for(var v=[],g=0;g<8;g++)f.windows[g].visible&&!f.windows[g].isEmpty()&&v.push(f.windows[g].getText());f.endPts=k,f.text=v.join(`

`),this.pushCaption(f),f.startPts=k},Qe.prototype.pushCaption=function(k){k.text!==""&&(this.trigger("data",{startPts:k.startPts,endPts:k.endPts,text:k.text,stream:"cc708_"+k.serviceNum}),k.text="",k.startPts=k.endPts)},Qe.prototype.displayWindows=function(k,f){var v=this.current708Packet.data,g=v[++k],x=this.getPts(k);this.flushDisplayed(x,f);for(var E=0;E<8;E++)g&1<<E&&(f.windows[E].visible=1);return k},Qe.prototype.hideWindows=function(k,f){var v=this.current708Packet.data,g=v[++k],x=this.getPts(k);this.flushDisplayed(x,f);for(var E=0;E<8;E++)g&1<<E&&(f.windows[E].visible=0);return k},Qe.prototype.toggleWindows=function(k,f){var v=this.current708Packet.data,g=v[++k],x=this.getPts(k);this.flushDisplayed(x,f);for(var E=0;E<8;E++)g&1<<E&&(f.windows[E].visible^=1);return k},Qe.prototype.clearWindows=function(k,f){var v=this.current708Packet.data,g=v[++k],x=this.getPts(k);this.flushDisplayed(x,f);for(var E=0;E<8;E++)g&1<<E&&f.windows[E].clearText();return k},Qe.prototype.deleteWindows=function(k,f){var v=this.current708Packet.data,g=v[++k],x=this.getPts(k);this.flushDisplayed(x,f);for(var E=0;E<8;E++)g&1<<E&&f.windows[E].reset();return k},Qe.prototype.setPenAttributes=function(k,f){var v=this.current708Packet.data,g=v[k],x=f.currentWindow.penAttr;return g=v[++k],x.textTag=(g&240)>>4,x.offset=(g&12)>>2,x.penSize=g&3,g=v[++k],x.italics=(g&128)>>7,x.underline=(g&64)>>6,x.edgeType=(g&56)>>3,x.fontStyle=g&7,k},Qe.prototype.setPenColor=function(k,f){var v=this.current708Packet.data,g=v[k],x=f.currentWindow.penColor;return g=v[++k],x.fgOpacity=(g&192)>>6,x.fgRed=(g&48)>>4,x.fgGreen=(g&12)>>2,x.fgBlue=g&3,g=v[++k],x.bgOpacity=(g&192)>>6,x.bgRed=(g&48)>>4,x.bgGreen=(g&12)>>2,x.bgBlue=g&3,g=v[++k],x.edgeRed=(g&48)>>4,x.edgeGreen=(g&12)>>2,x.edgeBlue=g&3,k},Qe.prototype.setPenLocation=function(k,f){var v=this.current708Packet.data,g=v[k],x=f.currentWindow.penLoc;return f.currentWindow.pendingNewLine=!0,g=v[++k],x.row=g&15,g=v[++k],x.column=g&63,k},Qe.prototype.reset=function(k,f){var v=this.getPts(k);return this.flushDisplayed(v,f),this.initService(f.serviceNum,k)};var Ip={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Wr=function(f){return f===null?"":(f=Ip[f]||f,String.fromCharCode(f))},mi=14,gs=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Re=function(){for(var f=[],v=mi+1;v--;)f.push("");return f},ot=function k(f,v){k.prototype.init.call(this),this.field_=f||0,this.dataChannel_=v||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(g){var x,E,A,P,N;if(x=g.ccData&32639,x===this.lastControlCode_){this.lastControlCode_=null;return}if((x&61440)===4096?this.lastControlCode_=x:x!==this.PADDING_&&(this.lastControlCode_=null),A=x>>>8,P=x&255,x!==this.PADDING_)if(x===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(x===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(g.pts),this.flushDisplayed(g.pts),E=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=E,this.startPts_=g.pts;else if(x===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(g.pts);else if(x===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(g.pts);else if(x===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(g.pts);else if(x===this.CARRIAGE_RETURN_)this.clearFormatting(g.pts),this.flushDisplayed(g.pts),this.shiftRowsUp_(),this.startPts_=g.pts;else if(x===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(x===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(g.pts),this.displayed_=Re();else if(x===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Re();else if(x===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(g.pts),this.displayed_=Re()),this.mode_="paintOn",this.startPts_=g.pts;else if(this.isSpecialCharacter(A,P))A=(A&3)<<8,N=Wr(A|P),this[this.mode_](g.pts,N),this.column_++;else if(this.isExtCharacter(A,P))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),A=(A&3)<<8,N=Wr(A|P),this[this.mode_](g.pts,N),this.column_++;else if(this.isMidRowCode(A,P))this.clearFormatting(g.pts),this[this.mode_](g.pts," "),this.column_++,(P&14)===14&&this.addFormatting(g.pts,["i"]),(P&1)===1&&this.addFormatting(g.pts,["u"]);else if(this.isOffsetControlCode(A,P))this.column_+=P&3;else if(this.isPAC(A,P)){var H=gs.indexOf(x&7968);this.mode_==="rollUp"&&(H-this.rollUpRows_+1<0&&(H=this.rollUpRows_-1),this.setRollUp(g.pts,H)),H!==this.row_&&(this.clearFormatting(g.pts),this.row_=H),P&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(g.pts,["u"]),(x&16)===16&&(this.column_=((x&14)>>1)*4),this.isColorPAC(P)&&(P&14)===14&&this.addFormatting(g.pts,["i"])}else this.isNormalChar(A)&&(P===0&&(P=null),N=Wr(A),N+=Wr(P),this[this.mode_](g.pts,N),this.column_+=N.length)}};ot.prototype=new e,ot.prototype.flushDisplayed=function(k){var f=this.displayed_.map(function(v,g){try{return v.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+g+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");f.length&&this.trigger("data",{startPts:this.startPts_,endPts:k,text:f,stream:this.name_})},ot.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Re(),this.nonDisplayed_=Re(),this.lastControlCode_=null,this.column_=0,this.row_=mi,this.rollUpRows_=2,this.formatting_=[]},ot.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},ot.prototype.isSpecialCharacter=function(k,f){return k===this.EXT_&&f>=48&&f<=63},ot.prototype.isExtCharacter=function(k,f){return(k===this.EXT_+1||k===this.EXT_+2)&&f>=32&&f<=63},ot.prototype.isMidRowCode=function(k,f){return k===this.EXT_&&f>=32&&f<=47},ot.prototype.isOffsetControlCode=function(k,f){return k===this.OFFSET_&&f>=33&&f<=35},ot.prototype.isPAC=function(k,f){return k>=this.BASE_&&k<this.BASE_+8&&f>=64&&f<=127},ot.prototype.isColorPAC=function(k){return k>=64&&k<=79||k>=96&&k<=127},ot.prototype.isNormalChar=function(k){return k>=32&&k<=127},ot.prototype.setRollUp=function(k,f){if(this.mode_!=="rollUp"&&(this.row_=mi,this.mode_="rollUp",this.flushDisplayed(k),this.nonDisplayed_=Re(),this.displayed_=Re()),f!==void 0&&f!==this.row_)for(var v=0;v<this.rollUpRows_;v++)this.displayed_[f-v]=this.displayed_[this.row_-v],this.displayed_[this.row_-v]="";f===void 0&&(f=this.row_),this.topRow_=f-this.rollUpRows_+1},ot.prototype.addFormatting=function(k,f){this.formatting_=this.formatting_.concat(f);var v=f.reduce(function(g,x){return g+"<"+x+">"},"");this[this.mode_](k,v)},ot.prototype.clearFormatting=function(k){if(!!this.formatting_.length){var f=this.formatting_.reverse().reduce(function(v,g){return v+"</"+g+">"},"");this.formatting_=[],this[this.mode_](k,f)}},ot.prototype.popOn=function(k,f){var v=this.nonDisplayed_[this.row_];v+=f,this.nonDisplayed_[this.row_]=v},ot.prototype.rollUp=function(k,f){var v=this.displayed_[this.row_];v+=f,this.displayed_[this.row_]=v},ot.prototype.shiftRowsUp_=function(){var k;for(k=0;k<this.topRow_;k++)this.displayed_[k]="";for(k=this.row_+1;k<mi+1;k++)this.displayed_[k]="";for(k=this.topRow_;k<this.row_;k++)this.displayed_[k]=this.displayed_[k+1];this.displayed_[this.row_]=""},ot.prototype.paintOn=function(k,f){var v=this.displayed_[this.row_];v+=f,this.displayed_[this.row_]=v};var qr={CaptionStream:Yt,Cea608Stream:ot,Cea708Stream:Qe},gt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pp=8589934592,Gr=4294967296,et="shared",vs=function(f,v){var g=1;for(f>v&&(g=-1);Math.abs(v-f)>Gr;)f+=g*Pp;return f},Ta=function k(f){var v,g;k.prototype.init.call(this),this.type_=f||et,this.push=function(x){this.type_!==et&&x.type!==this.type_||(g===void 0&&(g=x.dts),x.dts=vs(x.dts,g),x.pts=vs(x.pts,g),v=x.dts,this.trigger("data",x))},this.flush=function(){g=v,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){g=void 0,v=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Ta.prototype=new e;var Ad={TimestampRolloverStream:Ta,handleRollover:vs},kd=function(f,v,g){var x,E="";for(x=v;x<g;x++)E+="%"+("00"+f[x].toString(16)).slice(-2);return E},_s=function(f,v,g){return decodeURIComponent(kd(f,v,g))},Id=function(f,v,g){return unescape(kd(f,v,g))},Un=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},ys={TXXX:function(f){var v;if(f.data[0]===3){for(v=1;v<f.data.length;v++)if(f.data[v]===0){f.description=_s(f.data,1,v),f.value=_s(f.data,v+1,f.data.length).replace(/\0*$/,"");break}f.data=f.value}},WXXX:function(f){var v;if(f.data[0]===3){for(v=1;v<f.data.length;v++)if(f.data[v]===0){f.description=_s(f.data,1,v),f.url=_s(f.data,v+1,f.data.length);break}}},PRIV:function(f){var v;for(v=0;v<f.data.length;v++)if(f.data[v]===0){f.owner=Id(f.data,0,v);break}f.privateData=f.data.subarray(v+1),f.data=f.privateData}},xa;xa=function(f){var v={descriptor:f&&f.descriptor},g=0,x=[],E=0,A;if(xa.prototype.init.call(this),this.dispatchType=gt.METADATA_STREAM_TYPE.toString(16),v.descriptor)for(A=0;A<v.descriptor.length;A++)this.dispatchType+=("00"+v.descriptor[A].toString(16)).slice(-2);this.push=function(P){var N,H,U,W,te,ce;if(P.type==="timed-metadata"){if(P.dataAlignmentIndicator&&(E=0,x.length=0),x.length===0&&(P.data.length<10||P.data[0]!=="I".charCodeAt(0)||P.data[1]!=="D".charCodeAt(0)||P.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(x.push(P),E+=P.data.byteLength,x.length===1&&(g=Un(P.data.subarray(6,10)),g+=10),!(E<g)){for(N={data:new Uint8Array(g),frames:[],pts:x[0].pts,dts:x[0].dts},te=0;te<g;)N.data.set(x[0].data.subarray(0,g-te),te),te+=x[0].data.byteLength,E-=x[0].data.byteLength,x.shift();H=10,N.data[5]&64&&(H+=4,H+=Un(N.data.subarray(10,14)),g-=Un(N.data.subarray(16,20)));do{if(U=Un(N.data.subarray(H+4,H+8)),U<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(ce=String.fromCharCode(N.data[H],N.data[H+1],N.data[H+2],N.data[H+3]),W={id:ce,data:N.data.subarray(H+10,H+U+10)},W.key=W.id,ys[W.id]&&(ys[W.id](W),W.owner==="com.apple.streaming.transportStreamTimestamp")){var pe=W.data,ue=(pe[3]&1)<<30|pe[4]<<22|pe[5]<<14|pe[6]<<6|pe[7]>>>2;ue*=4,ue+=pe[7]&3,W.timeStamp=ue,N.pts===void 0&&N.dts===void 0&&(N.pts=W.timeStamp,N.dts=W.timeStamp),this.trigger("timestamp",W)}N.frames.push(W),H+=10,H+=U}while(H<g);this.trigger("data",N)}}}},xa.prototype=new e;var Fp=xa,Op=Ad.TimestampRolloverStream,Ts,ba,zr,ir=188,xs=71;Ts=function(){var f=new Uint8Array(ir),v=0;Ts.prototype.init.call(this),this.push=function(g){var x=0,E=ir,A;for(v?(A=new Uint8Array(g.byteLength+v),A.set(f.subarray(0,v)),A.set(g,v),v=0):A=g;E<A.byteLength;){if(A[x]===xs&&A[E]===xs){this.trigger("data",A.subarray(x,E)),x+=ir,E+=ir;continue}x++,E++}x<A.byteLength&&(f.set(A.subarray(x),0),v=A.byteLength-x)},this.flush=function(){v===ir&&f[0]===xs&&(this.trigger("data",f),v=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){v=0,this.trigger("reset")}},Ts.prototype=new e,ba=function(){var f,v,g,x;ba.prototype.init.call(this),x=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,f=function(A,P){var N=0;P.payloadUnitStartIndicator&&(N+=A[N]+1),P.type==="pat"?v(A.subarray(N),P):g(A.subarray(N),P)},v=function(A,P){P.section_number=A[7],P.last_section_number=A[8],x.pmtPid=(A[10]&31)<<8|A[11],P.pmtPid=x.pmtPid},g=function(A,P){var N,H,U,W;if(!!(A[5]&1)){for(x.programMapTable={video:null,audio:null,"timed-metadata":{}},N=(A[1]&15)<<8|A[2],H=3+N-4,U=(A[10]&15)<<8|A[11],W=12+U;W<H;){var te=A[W],ce=(A[W+1]&31)<<8|A[W+2];te===gt.H264_STREAM_TYPE&&x.programMapTable.video===null?x.programMapTable.video=ce:te===gt.ADTS_STREAM_TYPE&&x.programMapTable.audio===null?x.programMapTable.audio=ce:te===gt.METADATA_STREAM_TYPE&&(x.programMapTable["timed-metadata"][ce]=te),W+=((A[W+3]&15)<<8|A[W+4])+5}P.programMapTable=x.programMapTable}},this.push=function(E){var A={},P=4;if(A.payloadUnitStartIndicator=!!(E[1]&64),A.pid=E[1]&31,A.pid<<=8,A.pid|=E[2],(E[3]&48)>>>4>1&&(P+=E[P]+1),A.pid===0)A.type="pat",f(E.subarray(P),A),this.trigger("data",A);else if(A.pid===this.pmtPid)for(A.type="pmt",f(E.subarray(P),A),this.trigger("data",A);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([E,P,A]):this.processPes_(E,P,A)},this.processPes_=function(E,A,P){P.pid===this.programMapTable.video?P.streamType=gt.H264_STREAM_TYPE:P.pid===this.programMapTable.audio?P.streamType=gt.ADTS_STREAM_TYPE:P.streamType=this.programMapTable["timed-metadata"][P.pid],P.type="pes",P.data=E.subarray(A),this.trigger("data",P)}},ba.prototype=new e,ba.STREAM_TYPES={h264:27,adts:15},zr=function(){var f=this,v=!1,g={data:[],size:0},x={data:[],size:0},E={data:[],size:0},A,P=function(U,W){var te,ce=U[0]<<16|U[1]<<8|U[2];W.data=new Uint8Array,ce===1&&(W.packetLength=6+(U[4]<<8|U[5]),W.dataAlignmentIndicator=(U[6]&4)!==0,te=U[7],te&192&&(W.pts=(U[9]&14)<<27|(U[10]&255)<<20|(U[11]&254)<<12|(U[12]&255)<<5|(U[13]&254)>>>3,W.pts*=4,W.pts+=(U[13]&6)>>>1,W.dts=W.pts,te&64&&(W.dts=(U[14]&14)<<27|(U[15]&255)<<20|(U[16]&254)<<12|(U[17]&255)<<5|(U[18]&254)>>>3,W.dts*=4,W.dts+=(U[18]&6)>>>1)),W.data=U.subarray(9+U[8]))},N=function(U,W,te){var ce=new Uint8Array(U.size),pe={type:W},ue=0,Te=0,ft=!1,It;if(!(!U.data.length||U.size<9)){for(pe.trackId=U.data[0].pid,ue=0;ue<U.data.length;ue++)It=U.data[ue],ce.set(It.data,Te),Te+=It.data.byteLength;P(ce,pe),ft=W==="video"||pe.packetLength<=U.size,(te||ft)&&(U.size=0,U.data.length=0),ft&&f.trigger("data",pe)}};zr.prototype.init.call(this),this.push=function(H){({pat:function(){},pes:function(){var W,te;switch(H.streamType){case gt.H264_STREAM_TYPE:W=g,te="video";break;case gt.ADTS_STREAM_TYPE:W=x,te="audio";break;case gt.METADATA_STREAM_TYPE:W=E,te="timed-metadata";break;default:return}H.payloadUnitStartIndicator&&N(W,te,!0),W.data.push(H),W.size+=H.data.byteLength},pmt:function(){var W={type:"metadata",tracks:[]};A=H.programMapTable,A.video!==null&&W.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.video,codec:"avc",type:"video"}),A.audio!==null&&W.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.audio,codec:"adts",type:"audio"}),v=!0,f.trigger("data",W)}})[H.type]()},this.reset=function(){g.size=0,g.data.length=0,x.size=0,x.data.length=0,this.trigger("reset")},this.flushStreams_=function(){N(g,"video"),N(x,"audio"),N(E,"timed-metadata")},this.flush=function(){if(!v&&A){var H={type:"metadata",tracks:[]};A.video!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.video,codec:"avc",type:"video"}),A.audio!==null&&H.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+A.audio,codec:"adts",type:"audio"}),f.trigger("data",H)}v=!1,this.flushStreams_(),this.trigger("done")}},zr.prototype=new e;var jn={PAT_PID:0,MP2T_PACKET_LENGTH:ir,TransportPacketStream:Ts,TransportParseStream:ba,ElementaryStream:zr,TimestampRolloverStream:Op,CaptionStream:qr.CaptionStream,Cea608Stream:qr.Cea608Stream,Cea708Stream:qr.Cea708Stream,MetadataStream:Fp};for(var Kr in gt)gt.hasOwnProperty(Kr)&&(jn[Kr]=gt[Kr]);var gi=jn,bs=Ue.ONE_SECOND_IN_TS,Xr,Pd=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Xr=function(f){var v,g=0;Xr.prototype.init.call(this),this.skipWarn_=function(x,E){this.trigger("log",{level:"warn",message:"adts skiping bytes "+x+" to "+E+" in frame "+g+" outside syncword"})},this.push=function(x){var E=0,A,P,N,H,U;if(f||(g=0),x.type==="audio"){v&&v.length?(N=v,v=new Uint8Array(N.byteLength+x.data.byteLength),v.set(N),v.set(x.data,N.byteLength)):v=x.data;for(var W;E+7<v.length;){if(v[E]!==255||(v[E+1]&246)!==240){typeof W!="number"&&(W=E),E++;continue}if(typeof W=="number"&&(this.skipWarn_(W,E),W=null),P=(~v[E+1]&1)*2,A=(v[E+3]&3)<<11|v[E+4]<<3|(v[E+5]&224)>>5,H=((v[E+6]&3)+1)*1024,U=H*bs/Pd[(v[E+2]&60)>>>2],v.byteLength-E<A)break;this.trigger("data",{pts:x.pts+g*U,dts:x.dts+g*U,sampleCount:H,audioobjecttype:(v[E+2]>>>6&3)+1,channelcount:(v[E+2]&1)<<2|(v[E+3]&192)>>>6,samplerate:Pd[(v[E+2]&60)>>>2],samplingfrequencyindex:(v[E+2]&60)>>>2,samplesize:16,data:v.subarray(E+7+P,E+A)}),g++,E+=A}typeof W=="number"&&(this.skipWarn_(W,E),W=null),v=v.subarray(E)}},this.flush=function(){g=0,this.trigger("done")},this.reset=function(){v=void 0,this.trigger("reset")},this.endTimeline=function(){v=void 0,this.trigger("endedtimeline")}},Xr.prototype=new e;var Ss=Xr,Ds;Ds=function(f){var v=f.byteLength,g=0,x=0;this.length=function(){return 8*v},this.bitsAvailable=function(){return 8*v+x},this.loadWord=function(){var E=f.byteLength-v,A=new Uint8Array(4),P=Math.min(4,v);if(P===0)throw new Error("no bytes available");A.set(f.subarray(E,E+P)),g=new DataView(A.buffer).getUint32(0),x=P*8,v-=P},this.skipBits=function(E){var A;x>E?(g<<=E,x-=E):(E-=x,A=Math.floor(E/8),E-=A*8,v-=A,this.loadWord(),g<<=E,x-=E)},this.readBits=function(E){var A=Math.min(x,E),P=g>>>32-A;return x-=A,x>0?g<<=A:v>0&&this.loadWord(),A=E-A,A>0?P<<A|this.readBits(A):P},this.skipLeadingZeros=function(){var E;for(E=0;E<x;++E)if((g&2147483648>>>E)!==0)return g<<=E,x-=E,E;return this.loadWord(),E+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var E=this.skipLeadingZeros();return this.readBits(E+1)-1},this.readExpGolomb=function(){var E=this.readUnsignedExpGolomb();return 1&E?1+E>>>1:-1*(E>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var ki=Ds,Es,Tr,Hn;Tr=function(){var f=0,v,g;Tr.prototype.init.call(this),this.push=function(x){var E;g?(E=new Uint8Array(g.byteLength+x.data.byteLength),E.set(g),E.set(x.data,g.byteLength),g=E):g=x.data;for(var A=g.byteLength;f<A-3;f++)if(g[f+2]===1){v=f+5;break}for(;v<A;)switch(g[v]){case 0:if(g[v-1]!==0){v+=2;break}else if(g[v-2]!==0){v++;break}f+3!==v-2&&this.trigger("data",g.subarray(f+3,v-2));do v++;while(g[v]!==1&&v<A);f=v-2,v+=3;break;case 1:if(g[v-1]!==0||g[v-2]!==0){v+=3;break}this.trigger("data",g.subarray(f+3,v-2)),f=v-2,v+=3;break;default:v+=3;break}g=g.subarray(f),v-=f,f=0},this.reset=function(){g=null,f=0,this.trigger("reset")},this.flush=function(){g&&g.byteLength>3&&this.trigger("data",g.subarray(f+3)),g=null,f=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Tr.prototype=new e,Hn={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Es=function(){var f=new Tr,v,g,x,E,A,P,N;Es.prototype.init.call(this),v=this,this.push=function(H){H.type==="video"&&(g=H.trackId,x=H.pts,E=H.dts,f.push(H))},f.on("data",function(H){var U={trackId:g,pts:x,dts:E,data:H,nalUnitTypeCode:H[0]&31};switch(U.nalUnitTypeCode){case 5:U.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:U.nalUnitType="sei_rbsp",U.escapedRBSP=A(H.subarray(1));break;case 7:U.nalUnitType="seq_parameter_set_rbsp",U.escapedRBSP=A(H.subarray(1)),U.config=P(U.escapedRBSP);break;case 8:U.nalUnitType="pic_parameter_set_rbsp";break;case 9:U.nalUnitType="access_unit_delimiter_rbsp";break}v.trigger("data",U)}),f.on("done",function(){v.trigger("done")}),f.on("partialdone",function(){v.trigger("partialdone")}),f.on("reset",function(){v.trigger("reset")}),f.on("endedtimeline",function(){v.trigger("endedtimeline")}),this.flush=function(){f.flush()},this.partialFlush=function(){f.partialFlush()},this.reset=function(){f.reset()},this.endTimeline=function(){f.endTimeline()},N=function(U,W){var te=8,ce=8,pe,ue;for(pe=0;pe<U;pe++)ce!==0&&(ue=W.readExpGolomb(),ce=(te+ue+256)%256),te=ce===0?te:ce},A=function(U){for(var W=U.byteLength,te=[],ce=1,pe,ue;ce<W-2;)U[ce]===0&&U[ce+1]===0&&U[ce+2]===3?(te.push(ce+2),ce+=2):ce++;if(te.length===0)return U;pe=W-te.length,ue=new Uint8Array(pe);var Te=0;for(ce=0;ce<pe;Te++,ce++)Te===te[0]&&(Te++,te.shift()),ue[ce]=U[Te];return ue},P=function(U){var W=0,te=0,ce=0,pe=0,ue,Te,ft,It,Gi,Wn,ic,rc,nc,bu,ac,ut=[1,1],sc,an;if(ue=new ki(U),Te=ue.readUnsignedByte(),It=ue.readUnsignedByte(),ft=ue.readUnsignedByte(),ue.skipUnsignedExpGolomb(),Hn[Te]&&(Gi=ue.readUnsignedExpGolomb(),Gi===3&&ue.skipBits(1),ue.skipUnsignedExpGolomb(),ue.skipUnsignedExpGolomb(),ue.skipBits(1),ue.readBoolean()))for(ac=Gi!==3?8:12,an=0;an<ac;an++)ue.readBoolean()&&(an<6?N(16,ue):N(64,ue));if(ue.skipUnsignedExpGolomb(),Wn=ue.readUnsignedExpGolomb(),Wn===0)ue.readUnsignedExpGolomb();else if(Wn===1)for(ue.skipBits(1),ue.skipExpGolomb(),ue.skipExpGolomb(),ic=ue.readUnsignedExpGolomb(),an=0;an<ic;an++)ue.skipExpGolomb();if(ue.skipUnsignedExpGolomb(),ue.skipBits(1),rc=ue.readUnsignedExpGolomb(),nc=ue.readUnsignedExpGolomb(),bu=ue.readBits(1),bu===0&&ue.skipBits(1),ue.skipBits(1),ue.readBoolean()&&(W=ue.readUnsignedExpGolomb(),te=ue.readUnsignedExpGolomb(),ce=ue.readUnsignedExpGolomb(),pe=ue.readUnsignedExpGolomb()),ue.readBoolean()&&ue.readBoolean()){switch(sc=ue.readUnsignedByte(),sc){case 1:ut=[1,1];break;case 2:ut=[12,11];break;case 3:ut=[10,11];break;case 4:ut=[16,11];break;case 5:ut=[40,33];break;case 6:ut=[24,11];break;case 7:ut=[20,11];break;case 8:ut=[32,11];break;case 9:ut=[80,33];break;case 10:ut=[18,11];break;case 11:ut=[15,11];break;case 12:ut=[64,33];break;case 13:ut=[160,99];break;case 14:ut=[4,3];break;case 15:ut=[3,2];break;case 16:ut=[2,1];break;case 255:{ut=[ue.readUnsignedByte()<<8|ue.readUnsignedByte(),ue.readUnsignedByte()<<8|ue.readUnsignedByte()];break}}ut&&ut[0]/ut[1]}return{profileIdc:Te,levelIdc:ft,profileCompatibility:It,width:(rc+1)*16-W*2-te*2,height:(2-bu)*(nc+1)*16-ce*2-pe*2,sarRatio:ut}}},Es.prototype=new e;var Cs={H264Stream:Es,NalByteStream:Tr},$n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ws=function(f,v){var g=f[v+6]<<21|f[v+7]<<14|f[v+8]<<7|f[v+9],x=f[v+5],E=(x&16)>>4;return g=g>=0?g:0,E?g+20:g+10},Fd=function k(f,v){return f.length-v<10||f[v]!=="I".charCodeAt(0)||f[v+1]!=="D".charCodeAt(0)||f[v+2]!=="3".charCodeAt(0)?v:(v+=ws(f,v),k(f,v))},fu=function(f){var v=Fd(f,0);return f.length>=v+2&&(f[v]&255)===255&&(f[v+1]&240)===240&&(f[v+1]&22)===16},Od=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},Lp=function(f,v,g){var x,E="";for(x=v;x<g;x++)E+="%"+("00"+f[x].toString(16)).slice(-2);return E},Rp=function(f,v,g){return unescape(Lp(f,v,g))},As=function(f,v){var g=(f[v+5]&224)>>5,x=f[v+4]<<3,E=f[v+3]&3<<11;return E|x|g},Ld=function(f,v){return f[v]==="I".charCodeAt(0)&&f[v+1]==="D".charCodeAt(0)&&f[v+2]==="3".charCodeAt(0)?"timed-metadata":f[v]&!0&&(f[v+1]&240)===240?"audio":null},Mp=function(f){for(var v=0;v+5<f.length;){if(f[v]!==255||(f[v+1]&246)!==240){v++;continue}return $n[(f[v+2]&60)>>>2]}return null},Rd=function(f){var v,g,x,E;v=10,f[5]&64&&(v+=4,v+=Od(f.subarray(10,14)));do{if(g=Od(f.subarray(v+4,v+8)),g<1)return null;if(E=String.fromCharCode(f[v],f[v+1],f[v+2],f[v+3]),E==="PRIV"){x=f.subarray(v+10,v+g+10);for(var A=0;A<x.byteLength;A++)if(x[A]===0){var P=Rp(x,0,A);if(P==="com.apple.streaming.transportStreamTimestamp"){var N=x.subarray(A+1),H=(N[3]&1)<<30|N[4]<<22|N[5]<<14|N[6]<<6|N[7]>>>2;return H*=4,H+=N[7]&3,H}break}}v+=10,v+=g}while(v<f.byteLength);return null},ks={isLikelyAacData:fu,parseId3TagSize:ws,parseAdtsSize:As,parseType:Ld,parseSampleRate:Mp,parseAacTimestamp:Rd},Sa;Sa=function(){var f=new Uint8Array,v=0;Sa.prototype.init.call(this),this.setTimestamp=function(g){v=g},this.push=function(g){var x=0,E=0,A,P,N,H;for(f.length?(H=f.length,f=new Uint8Array(g.byteLength+H),f.set(f.subarray(0,H)),f.set(g,H)):f=g;f.length-E>=3;){if(f[E]==="I".charCodeAt(0)&&f[E+1]==="D".charCodeAt(0)&&f[E+2]==="3".charCodeAt(0)){if(f.length-E<10||(x=ks.parseId3TagSize(f,E),E+x>f.length))break;P={type:"timed-metadata",data:f.subarray(E,E+x)},this.trigger("data",P),E+=x;continue}else if((f[E]&255)===255&&(f[E+1]&240)===240){if(f.length-E<7||(x=ks.parseAdtsSize(f,E),E+x>f.length))break;N={type:"audio",data:f.subarray(E,E+x),pts:v,dts:v},this.trigger("data",N),E+=x;continue}E++}A=f.length-E,A>0?f=f.subarray(E):f=new Uint8Array},this.reset=function(){f=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){f=new Uint8Array,this.trigger("endedtimeline")}},Sa.prototype=new e;var Np=Sa,Is=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Yr=Is,Md=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],pu=Md,Bp=Cs.H264Stream,Nd=ks.isLikelyAacData,Bd=Ue.ONE_SECOND_IN_TS,Da,Qr,Ps,Jr,Up=function(f,v){v.stream=f,this.trigger("log",v)},Ud=function(f,v){for(var g=Object.keys(v),x=0;x<g.length;x++){var E=g[x];E==="headOfPipeline"||!v[E].on||v[E].on("log",Up.bind(f,E))}},jd=function(f,v){var g;if(f.length!==v.length)return!1;for(g=0;g<f.length;g++)if(f[g]!==v[g])return!1;return!0},mu=function(f,v,g,x,E,A){var P=g-v,N=x-v,H=E-g;return{start:{dts:f,pts:f+P},end:{dts:f+N,pts:f+H},prependedContentDuration:A,baseMediaDecodeTime:f}};Qr=function(f,v){var g=[],x,E=0,A=0,P=1/0;v=v||{},x=v.firstSequenceNumber||0,Qr.prototype.init.call(this),this.push=function(N){Ai.collectDtsInfo(f,N),f&&Yr.forEach(function(H){f[H]=N[H]}),g.push(N)},this.setEarliestDts=function(N){E=N},this.setVideoBaseMediaDecodeTime=function(N){P=N},this.setAudioAppendStart=function(N){A=N},this.flush=function(){var N,H,U,W,te,ce,pe;if(g.length===0){this.trigger("done","AudioSegmentStream");return}N=ms.trimAdtsFramesByEarliestDts(g,f,E),f.baseMediaDecodeTime=Ai.calculateTrackBaseMediaDecodeTime(f,v.keepOriginalTimestamps),pe=ms.prefixWithSilence(f,N,A,P),f.samples=ms.generateSampleTable(N),U=wi.mdat(ms.concatenateFrameData(N)),g=[],H=wi.moof(x,[f]),W=new Uint8Array(H.byteLength+U.byteLength),x++,W.set(H),W.set(U,H.byteLength),Ai.clearDtsInfo(f),te=Math.ceil(Bd*1024/f.samplerate),N.length&&(ce=N.length*te,this.trigger("segmentTimingInfo",mu(Ue.audioTsToVideoTs(f.baseMediaDecodeTime,f.samplerate),N[0].dts,N[0].pts,N[0].dts+ce,N[0].pts+ce,pe||0)),this.trigger("timingInfo",{start:N[0].pts,end:N[0].pts+ce})),this.trigger("data",{track:f,boxes:W}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Ai.clearDtsInfo(f),g=[],this.trigger("reset")}},Qr.prototype=new e,Da=function(f,v){var g,x=[],E=[],A,P;v=v||{},g=v.firstSequenceNumber||0,Da.prototype.init.call(this),delete f.minPTS,this.gopCache_=[],this.push=function(N){Ai.collectDtsInfo(f,N),N.nalUnitType==="seq_parameter_set_rbsp"&&!A&&(A=N.config,f.sps=[N.data],pu.forEach(function(H){f[H]=A[H]},this)),N.nalUnitType==="pic_parameter_set_rbsp"&&!P&&(P=N.data,f.pps=[N.data]),x.push(N)},this.flush=function(){for(var N,H,U,W,te,ce,pe=0,ue,Te;x.length&&x[0].nalUnitType!=="access_unit_delimiter_rbsp";)x.shift();if(x.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(N=ga.groupNalsIntoFrames(x),U=ga.groupFramesIntoGops(N),U[0][0].keyFrame||(H=this.getGopForFusion_(x[0],f),H?(pe=H.duration,U.unshift(H),U.byteLength+=H.byteLength,U.nalCount+=H.nalCount,U.pts=H.pts,U.dts=H.dts,U.duration+=H.duration):U=ga.extendFirstKeyFrame(U)),E.length){var ft;if(v.alignGopsAtEnd?ft=this.alignGopsAtEnd_(U):ft=this.alignGopsAtStart_(U),!ft){this.gopCache_.unshift({gop:U.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Ai.clearDtsInfo(f),U=ft}Ai.collectDtsInfo(f,U),f.samples=ga.generateSampleTable(U),te=wi.mdat(ga.concatenateNalData(U)),f.baseMediaDecodeTime=Ai.calculateTrackBaseMediaDecodeTime(f,v.keepOriginalTimestamps),this.trigger("processedGopsInfo",U.map(function(It){return{pts:It.pts,dts:It.dts,byteLength:It.byteLength}})),ue=U[0],Te=U[U.length-1],this.trigger("segmentTimingInfo",mu(f.baseMediaDecodeTime,ue.dts,ue.pts,Te.dts+Te.duration,Te.pts+Te.duration,pe)),this.trigger("timingInfo",{start:U[0].pts,end:U[U.length-1].pts+U[U.length-1].duration}),this.gopCache_.unshift({gop:U.pop(),pps:f.pps,sps:f.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),x=[],this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime),this.trigger("timelineStartInfo",f.timelineStartInfo),W=wi.moof(g,[f]),ce=new Uint8Array(W.byteLength+te.byteLength),g++,ce.set(W),ce.set(te,W.byteLength),this.trigger("data",{track:f,boxes:ce}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),x=[],this.gopCache_.length=0,E.length=0,this.trigger("reset")},this.resetStream_=function(){Ai.clearDtsInfo(f),A=void 0,P=void 0},this.getGopForFusion_=function(N){var H=45e3,U=1e4,W=1/0,te,ce,pe,ue,Te;for(Te=0;Te<this.gopCache_.length;Te++)ue=this.gopCache_[Te],pe=ue.gop,!(!(f.pps&&jd(f.pps[0],ue.pps[0]))||!(f.sps&&jd(f.sps[0],ue.sps[0])))&&(pe.dts<f.timelineStartInfo.dts||(te=N.dts-pe.dts-pe.duration,te>=-U&&te<=H&&(!ce||W>te)&&(ce=ue,W=te)));return ce?ce.gop:null},this.alignGopsAtStart_=function(N){var H,U,W,te,ce,pe,ue,Te;for(ce=N.byteLength,pe=N.nalCount,ue=N.duration,H=U=0;H<E.length&&U<N.length&&(W=E[H],te=N[U],W.pts!==te.pts);){if(te.pts>W.pts){H++;continue}U++,ce-=te.byteLength,pe-=te.nalCount,ue-=te.duration}return U===0?N:U===N.length?null:(Te=N.slice(U),Te.byteLength=ce,Te.duration=ue,Te.nalCount=pe,Te.pts=Te[0].pts,Te.dts=Te[0].dts,Te)},this.alignGopsAtEnd_=function(N){var H,U,W,te,ce,pe;for(H=E.length-1,U=N.length-1,ce=null,pe=!1;H>=0&&U>=0;){if(W=E[H],te=N[U],W.pts===te.pts){pe=!0;break}if(W.pts>te.pts){H--;continue}H===E.length-1&&(ce=U),U--}if(!pe&&ce===null)return null;var ue;if(pe?ue=U:ue=ce,ue===0)return N;var Te=N.slice(ue),ft=Te.reduce(function(It,Gi){return It.byteLength+=Gi.byteLength,It.duration+=Gi.duration,It.nalCount+=Gi.nalCount,It},{byteLength:0,duration:0,nalCount:0});return Te.byteLength=ft.byteLength,Te.duration=ft.duration,Te.nalCount=ft.nalCount,Te.pts=Te[0].pts,Te.dts=Te[0].dts,Te},this.alignGopsWith=function(N){E=N}},Da.prototype=new e,Jr=function(f,v){this.numberOfTracks=0,this.metadataStream=v,f=f||{},typeof f.remux<"u"?this.remuxTracks=!!f.remux:this.remuxTracks=!0,typeof f.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=f.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Jr.prototype.init.call(this),this.push=function(g){if(g.text)return this.pendingCaptions.push(g);if(g.frames)return this.pendingMetadata.push(g);this.pendingTracks.push(g.track),this.pendingBytes+=g.boxes.byteLength,g.track.type==="video"&&(this.videoTrack=g.track,this.pendingBoxes.push(g.boxes)),g.track.type==="audio"&&(this.audioTrack=g.track,this.pendingBoxes.unshift(g.boxes))}},Jr.prototype=new e,Jr.prototype.flush=function(k){var f=0,v={captions:[],captionStreams:{},metadata:[],info:{}},g,x,E,A=0,P;if(this.pendingTracks.length<this.numberOfTracks){if(k!=="VideoSegmentStream"&&k!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(A=this.videoTrack.timelineStartInfo.pts,pu.forEach(function(N){v.info[N]=this.videoTrack[N]},this)):this.audioTrack&&(A=this.audioTrack.timelineStartInfo.pts,Yr.forEach(function(N){v.info[N]=this.audioTrack[N]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?v.type=this.pendingTracks[0].type:v.type="combined",this.emittedTracks+=this.pendingTracks.length,E=wi.initSegment(this.pendingTracks),v.initSegment=new Uint8Array(E.byteLength),v.initSegment.set(E),v.data=new Uint8Array(this.pendingBytes),P=0;P<this.pendingBoxes.length;P++)v.data.set(this.pendingBoxes[P],f),f+=this.pendingBoxes[P].byteLength;for(P=0;P<this.pendingCaptions.length;P++)g=this.pendingCaptions[P],g.startTime=Ue.metadataTsToSeconds(g.startPts,A,this.keepOriginalTimestamps),g.endTime=Ue.metadataTsToSeconds(g.endPts,A,this.keepOriginalTimestamps),v.captionStreams[g.stream]=!0,v.captions.push(g);for(P=0;P<this.pendingMetadata.length;P++)x=this.pendingMetadata[P],x.cueTime=Ue.metadataTsToSeconds(x.pts,A,this.keepOriginalTimestamps),v.metadata.push(x);for(v.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",v),P=0;P<v.captions.length;P++)g=v.captions[P],this.trigger("caption",g);for(P=0;P<v.metadata.length;P++)x=v.metadata[P],this.trigger("id3Frame",x)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Jr.prototype.setRemux=function(k){this.remuxTracks=k},Ps=function(f){var v=this,g=!0,x,E;Ps.prototype.init.call(this),f=f||{},this.baseMediaDecodeTime=f.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var A={};this.transmuxPipeline_=A,A.type="aac",A.metadataStream=new gi.MetadataStream,A.aacStream=new Np,A.audioTimestampRolloverStream=new gi.TimestampRolloverStream("audio"),A.timedMetadataTimestampRolloverStream=new gi.TimestampRolloverStream("timed-metadata"),A.adtsStream=new Ss,A.coalesceStream=new Jr(f,A.metadataStream),A.headOfPipeline=A.aacStream,A.aacStream.pipe(A.audioTimestampRolloverStream).pipe(A.adtsStream),A.aacStream.pipe(A.timedMetadataTimestampRolloverStream).pipe(A.metadataStream).pipe(A.coalesceStream),A.metadataStream.on("timestamp",function(P){A.aacStream.setTimestamp(P.timeStamp)}),A.aacStream.on("data",function(P){P.type!=="timed-metadata"&&P.type!=="audio"||A.audioSegmentStream||(E=E||{timelineStartInfo:{baseMediaDecodeTime:v.baseMediaDecodeTime},codec:"adts",type:"audio"},A.coalesceStream.numberOfTracks++,A.audioSegmentStream=new Qr(E,f),A.audioSegmentStream.on("log",v.getLogTrigger_("audioSegmentStream")),A.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),A.adtsStream.pipe(A.audioSegmentStream).pipe(A.coalesceStream),v.trigger("trackinfo",{hasAudio:!!E,hasVideo:!!x}))}),A.coalesceStream.on("data",this.trigger.bind(this,"data")),A.coalesceStream.on("done",this.trigger.bind(this,"done")),Ud(this,A)},this.setupTsPipeline=function(){var A={};this.transmuxPipeline_=A,A.type="ts",A.metadataStream=new gi.MetadataStream,A.packetStream=new gi.TransportPacketStream,A.parseStream=new gi.TransportParseStream,A.elementaryStream=new gi.ElementaryStream,A.timestampRolloverStream=new gi.TimestampRolloverStream,A.adtsStream=new Ss,A.h264Stream=new Bp,A.captionStream=new gi.CaptionStream(f),A.coalesceStream=new Jr(f,A.metadataStream),A.headOfPipeline=A.packetStream,A.packetStream.pipe(A.parseStream).pipe(A.elementaryStream).pipe(A.timestampRolloverStream),A.timestampRolloverStream.pipe(A.h264Stream),A.timestampRolloverStream.pipe(A.adtsStream),A.timestampRolloverStream.pipe(A.metadataStream).pipe(A.coalesceStream),A.h264Stream.pipe(A.captionStream).pipe(A.coalesceStream),A.elementaryStream.on("data",function(P){var N;if(P.type==="metadata"){for(N=P.tracks.length;N--;)!x&&P.tracks[N].type==="video"?(x=P.tracks[N],x.timelineStartInfo.baseMediaDecodeTime=v.baseMediaDecodeTime):!E&&P.tracks[N].type==="audio"&&(E=P.tracks[N],E.timelineStartInfo.baseMediaDecodeTime=v.baseMediaDecodeTime);x&&!A.videoSegmentStream&&(A.coalesceStream.numberOfTracks++,A.videoSegmentStream=new Da(x,f),A.videoSegmentStream.on("log",v.getLogTrigger_("videoSegmentStream")),A.videoSegmentStream.on("timelineStartInfo",function(H){E&&!f.keepOriginalTimestamps&&(E.timelineStartInfo=H,A.audioSegmentStream.setEarliestDts(H.dts-v.baseMediaDecodeTime))}),A.videoSegmentStream.on("processedGopsInfo",v.trigger.bind(v,"gopInfo")),A.videoSegmentStream.on("segmentTimingInfo",v.trigger.bind(v,"videoSegmentTimingInfo")),A.videoSegmentStream.on("baseMediaDecodeTime",function(H){E&&A.audioSegmentStream.setVideoBaseMediaDecodeTime(H)}),A.videoSegmentStream.on("timingInfo",v.trigger.bind(v,"videoTimingInfo")),A.h264Stream.pipe(A.videoSegmentStream).pipe(A.coalesceStream)),E&&!A.audioSegmentStream&&(A.coalesceStream.numberOfTracks++,A.audioSegmentStream=new Qr(E,f),A.audioSegmentStream.on("log",v.getLogTrigger_("audioSegmentStream")),A.audioSegmentStream.on("timingInfo",v.trigger.bind(v,"audioTimingInfo")),A.audioSegmentStream.on("segmentTimingInfo",v.trigger.bind(v,"audioSegmentTimingInfo")),A.adtsStream.pipe(A.audioSegmentStream).pipe(A.coalesceStream)),v.trigger("trackinfo",{hasAudio:!!E,hasVideo:!!x})}}),A.coalesceStream.on("data",this.trigger.bind(this,"data")),A.coalesceStream.on("id3Frame",function(P){P.dispatchType=A.metadataStream.dispatchType,v.trigger("id3Frame",P)}),A.coalesceStream.on("caption",this.trigger.bind(this,"caption")),A.coalesceStream.on("done",this.trigger.bind(this,"done")),Ud(this,A)},this.setBaseMediaDecodeTime=function(A){var P=this.transmuxPipeline_;f.keepOriginalTimestamps||(this.baseMediaDecodeTime=A),E&&(E.timelineStartInfo.dts=void 0,E.timelineStartInfo.pts=void 0,Ai.clearDtsInfo(E),P.audioTimestampRolloverStream&&P.audioTimestampRolloverStream.discontinuity()),x&&(P.videoSegmentStream&&(P.videoSegmentStream.gopCache_=[]),x.timelineStartInfo.dts=void 0,x.timelineStartInfo.pts=void 0,Ai.clearDtsInfo(x),P.captionStream.reset()),P.timestampRolloverStream&&P.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(A){E&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(A)},this.setRemux=function(A){var P=this.transmuxPipeline_;f.remux=A,P&&P.coalesceStream&&P.coalesceStream.setRemux(A)},this.alignGopsWith=function(A){x&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(A)},this.getLogTrigger_=function(A){var P=this;return function(N){N.stream=A,P.trigger("log",N)}},this.push=function(A){if(g){var P=Nd(A);P&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!P&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),g=!1}this.transmuxPipeline_.headOfPipeline.push(A)},this.flush=function(){g=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Ps.prototype=new e;var gu={Transmuxer:Ps,VideoSegmentStream:Da,AudioSegmentStream:Qr,AUDIO_PROPERTIES:Yr,VIDEO_PROPERTIES:pu,generateSegmentTimingInfo:mu},jp=function(f){return f>>>0},Hd=function(f){return("00"+f.toString(16)).slice(-2)},Zr={toUnsigned:jp,toHexString:Hd},Hp=function(f){var v="";return v+=String.fromCharCode(f[0]),v+=String.fromCharCode(f[1]),v+=String.fromCharCode(f[2]),v+=String.fromCharCode(f[3]),v},en=Hp,$p=Zr.toUnsigned,Vp=function k(f,v){var g=[],x,E,A,P,N;if(!v.length)return null;for(x=0;x<f.byteLength;)E=$p(f[x]<<24|f[x+1]<<16|f[x+2]<<8|f[x+3]),A=en(f.subarray(x+4,x+8)),P=E>1?x+E:f.byteLength,A===v[0]&&(v.length===1?g.push(f.subarray(x+8,P)):(N=k(f.subarray(x+8,P),v.slice(1)),N.length&&(g=g.concat(N)))),x=P;return g},tt=Vp,Fs=Zr.toUnsigned,Ea=r.getUint64,Ca=function(f){var v={version:f[0],flags:new Uint8Array(f.subarray(1,4))};return v.version===1?v.baseMediaDecodeTime=Ea(f.subarray(4)):v.baseMediaDecodeTime=Fs(f[4]<<24|f[5]<<16|f[6]<<8|f[7]),v},wa=Ca,Ii=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},Wi=Ii,Os=function(f){var v={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},g=new DataView(f.buffer,f.byteOffset,f.byteLength),x=v.flags[2]&1,E=v.flags[2]&4,A=v.flags[1]&1,P=v.flags[1]&2,N=v.flags[1]&4,H=v.flags[1]&8,U=g.getUint32(4),W=8,te;for(x&&(v.dataOffset=g.getInt32(W),W+=4),E&&U&&(te={flags:Wi(f.subarray(W,W+4))},W+=4,A&&(te.duration=g.getUint32(W),W+=4),P&&(te.size=g.getUint32(W),W+=4),H&&(v.version===1?te.compositionTimeOffset=g.getInt32(W):te.compositionTimeOffset=g.getUint32(W),W+=4),v.samples.push(te),U--);U--;)te={},A&&(te.duration=g.getUint32(W),W+=4),P&&(te.size=g.getUint32(W),W+=4),N&&(te.flags=Wi(f.subarray(W,W+4)),W+=4),H&&(v.version===1?te.compositionTimeOffset=g.getInt32(W):te.compositionTimeOffset=g.getUint32(W),W+=4),v.samples.push(te);return v},vu=Os,Wp=function(f){var v=new DataView(f.buffer,f.byteOffset,f.byteLength),g={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:v.getUint32(4)},x=g.flags[2]&1,E=g.flags[2]&2,A=g.flags[2]&8,P=g.flags[2]&16,N=g.flags[2]&32,H=g.flags[0]&65536,U=g.flags[0]&131072,W;return W=8,x&&(W+=4,g.baseDataOffset=v.getUint32(12),W+=4),E&&(g.sampleDescriptionIndex=v.getUint32(W),W+=4),A&&(g.defaultSampleDuration=v.getUint32(W),W+=4),P&&(g.defaultSampleSize=v.getUint32(W),W+=4),N&&(g.defaultSampleFlags=v.getUint32(W)),H&&(g.durationIsEmpty=!0),!x&&U&&(g.baseDataOffsetIsMoof=!0),g},$d=Wp,Vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Aa;typeof window<"u"?Aa=window:typeof Vd<"u"?Aa=Vd:typeof self<"u"?Aa=self:Aa={};var tn=Aa,_u=ya.discardEmulationPreventionBytes,ka=qr.CaptionStream,Vn=function(f,v){for(var g=f,x=0;x<v.length;x++){var E=v[x];if(g<E.size)return E;g-=E.size}return null},Ls=function(f,v,g){var x=new DataView(f.buffer,f.byteOffset,f.byteLength),E={logs:[],seiNals:[]},A,P,N,H;for(P=0;P+4<f.length;P+=N)if(N=x.getUint32(P),P+=4,!(N<=0))switch(f[P]&31){case 6:var U=f.subarray(P+1,P+1+N),W=Vn(P,v);if(A={nalUnitType:"sei_rbsp",size:N,data:U,escapedRBSP:_u(U),trackId:g},W)A.pts=W.pts,A.dts=W.dts,H=W;else if(H)A.pts=H.pts,A.dts=H.dts;else{E.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+P+" for trackId "+g+". See mux.js#223."});break}E.seiNals.push(A);break}return E},rn=function(f,v,g){var x=v,E=g.defaultSampleDuration||0,A=g.defaultSampleSize||0,P=g.trackId,N=[];return f.forEach(function(H){var U=vu(H),W=U.samples;W.forEach(function(te){te.duration===void 0&&(te.duration=E),te.size===void 0&&(te.size=A),te.trackId=P,te.dts=x,te.compositionTimeOffset===void 0&&(te.compositionTimeOffset=0),typeof x=="bigint"?(te.pts=x+tn.BigInt(te.compositionTimeOffset),x+=tn.BigInt(te.duration)):(te.pts=x+te.compositionTimeOffset,x+=te.duration)}),N=N.concat(W)}),N},qp=function(f,v){var g=tt(f,["moof","traf"]),x=tt(f,["mdat"]),E={},A=[];return x.forEach(function(P,N){var H=g[N];A.push({mdat:P,traf:H})}),A.forEach(function(P){var N=P.mdat,H=P.traf,U=tt(H,["tfhd"]),W=$d(U[0]),te=W.trackId,ce=tt(H,["tfdt"]),pe=ce.length>0?wa(ce[0]).baseMediaDecodeTime:0,ue=tt(H,["trun"]),Te,ft;v===te&&ue.length>0&&(Te=rn(ue,pe,W),ft=Ls(N,Te,te),E[te]||(E[te]={seiNals:[],logs:[]}),E[te].seiNals=E[te].seiNals.concat(ft.seiNals),E[te].logs=E[te].logs.concat(ft.logs))}),E},Wd=function(f,v,g){var x;if(v===null)return null;x=qp(f,v);var E=x[v]||{};return{seiNals:E.seiNals,logs:E.logs,timescale:g}},qd=function(){var f=!1,v,g,x,E,A,P;this.isInitialized=function(){return f},this.init=function(N){v=new ka,f=!0,P=N?N.isPartial:!1,v.on("data",function(H){H.startTime=H.startPts/E,H.endTime=H.endPts/E,A.captions.push(H),A.captionStreams[H.stream]=!0}),v.on("log",function(H){A.logs.push(H)})},this.isNewInit=function(N,H){return N&&N.length===0||H&&typeof H=="object"&&Object.keys(H).length===0?!1:x!==N[0]||E!==H[x]},this.parse=function(N,H,U){var W;if(this.isInitialized()){if(!H||!U)return null;if(this.isNewInit(H,U))x=H[0],E=U[x];else if(x===null||!E)return g.push(N),null}else return null;for(;g.length>0;){var te=g.shift();this.parse(te,H,U)}return W=Wd(N,x,E),W&&W.logs&&(A.logs=A.logs.concat(W.logs)),W===null||!W.seiNals?A.logs.length?{logs:A.logs,captions:[],captionStreams:[]}:null:(this.pushNals(W.seiNals),this.flushStream(),A)},this.pushNals=function(N){if(!this.isInitialized()||!N||N.length===0)return null;N.forEach(function(H){v.push(H)})},this.flushStream=function(){if(!this.isInitialized())return null;P?v.partialFlush():v.flush()},this.clearParsedCaptions=function(){A.captions=[],A.captionStreams={},A.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;v.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){g=[],x=null,E=null,A?this.clearParsedCaptions():A={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},yu=qd,Rs=Zr.toUnsigned,Ia=Zr.toHexString,Gp=r.getUint64,Pa,Gd,Tu,zd,Kd,Ms;Pa=function(f){var v={},g=tt(f,["moov","trak"]);return g.reduce(function(x,E){var A,P,N,H,U;return A=tt(E,["tkhd"])[0],!A||(P=A[0],N=P===0?12:20,H=Rs(A[N]<<24|A[N+1]<<16|A[N+2]<<8|A[N+3]),U=tt(E,["mdia","mdhd"])[0],!U)?null:(P=U[0],N=P===0?12:20,x[H]=Rs(U[N]<<24|U[N+1]<<16|U[N+2]<<8|U[N+3]),x)},v)},Gd=function(f,v){var g;g=tt(v,["moof","traf"]);var x=g.reduce(function(E,A){var P=tt(A,["tfhd"])[0],N=Rs(P[4]<<24|P[5]<<16|P[6]<<8|P[7]),H=f[N]||9e4,U=tt(A,["tfdt"])[0],W=new DataView(U.buffer,U.byteOffset,U.byteLength),te;U[0]===1?te=Gp(U.subarray(4,12)):te=W.getUint32(4);var ce;return typeof te=="bigint"?ce=te/tn.BigInt(H):typeof te=="number"&&!isNaN(te)&&(ce=te/H),ce<Number.MAX_SAFE_INTEGER&&(ce=Number(ce)),ce<E&&(E=ce),E},1/0);return typeof x=="bigint"||isFinite(x)?x:0},Tu=function(f,v){var g=tt(v,["moof","traf"]),x=0,E=0,A;if(g&&g.length){var P=tt(g[0],["tfhd"])[0],N=tt(g[0],["trun"])[0],H=tt(g[0],["tfdt"])[0];if(P){var U=$d(P);A=U.trackId}if(H){var W=wa(H);x=W.baseMediaDecodeTime}if(N){var te=vu(N);te.samples&&te.samples.length&&(E=te.samples[0].compositionTimeOffset||0)}}var ce=f[A]||9e4;typeof x=="bigint"&&(E=tn.BigInt(E),ce=tn.BigInt(ce));var pe=(x+E)/ce;return typeof pe=="bigint"&&pe<Number.MAX_SAFE_INTEGER&&(pe=Number(pe)),pe},zd=function(f){var v=tt(f,["moov","trak"]),g=[];return v.forEach(function(x){var E=tt(x,["mdia","hdlr"]),A=tt(x,["tkhd"]);E.forEach(function(P,N){var H=en(P.subarray(8,12)),U=A[N],W,te,ce;H==="vide"&&(W=new DataView(U.buffer,U.byteOffset,U.byteLength),te=W.getUint8(0),ce=te===0?W.getUint32(12):W.getUint32(20),g.push(ce))})}),g},Ms=function(f){var v=f[0],g=v===0?12:20;return Rs(f[g]<<24|f[g+1]<<16|f[g+2]<<8|f[g+3])},Kd=function(f){var v=tt(f,["moov","trak"]),g=[];return v.forEach(function(x){var E={},A=tt(x,["tkhd"])[0],P,N;A&&(P=new DataView(A.buffer,A.byteOffset,A.byteLength),N=P.getUint8(0),E.id=N===0?P.getUint32(12):P.getUint32(20));var H=tt(x,["mdia","hdlr"])[0];if(H){var U=en(H.subarray(8,12));U==="vide"?E.type="video":U==="soun"?E.type="audio":E.type=U}var W=tt(x,["mdia","minf","stbl","stsd"])[0];if(W){var te=W.subarray(8);E.codec=en(te.subarray(4,8));var ce=tt(te,[E.codec])[0],pe,ue;ce&&(/^[asm]vc[1-9]$/i.test(E.codec)?(pe=ce.subarray(78),ue=en(pe.subarray(4,8)),ue==="avcC"&&pe.length>11?(E.codec+=".",E.codec+=Ia(pe[9]),E.codec+=Ia(pe[10]),E.codec+=Ia(pe[11])):E.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(E.codec)?(pe=ce.subarray(28),ue=en(pe.subarray(4,8)),ue==="esds"&&pe.length>20&&pe[19]!==0?(E.codec+="."+Ia(pe[19]),E.codec+="."+Ia(pe[20]>>>2&63).replace(/^0/,"")):E.codec="mp4a.40.2"):E.codec=E.codec.toLowerCase())}var Te=tt(x,["mdia","mdhd"])[0];Te&&(E.timescale=Ms(Te)),g.push(E)}),g};var xu={findBox:tt,parseType:en,timescale:Pa,startTime:Gd,compositionStartTime:Tu,videoTrackIds:zd,tracks:Kd,getTimescaleFromMediaHeader:Ms},Xd=function(f){var v=f[1]&31;return v<<=8,v|=f[2],v},Ns=function(f){return!!(f[1]&64)},Bs=function(f){var v=0;return(f[3]&48)>>>4>1&&(v+=f[4]+1),v},Yd=function(f,v){var g=Xd(f);return g===0?"pat":g===v?"pmt":v?"pes":null},zp=function(f){var v=Ns(f),g=4+Bs(f);return v&&(g+=f[g]+1),(f[g+10]&31)<<8|f[g+11]},Kp=function(f){var v={},g=Ns(f),x=4+Bs(f);if(g&&(x+=f[x]+1),!!(f[x+5]&1)){var E,A,P;E=(f[x+1]&15)<<8|f[x+2],A=3+E-4,P=(f[x+10]&15)<<8|f[x+11];for(var N=12+P;N<A;){var H=x+N;v[(f[H+1]&31)<<8|f[H+2]]=f[H],N+=((f[H+3]&15)<<8|f[H+4])+5}return v}},Qd=function(f,v){var g=Xd(f),x=v[g];switch(x){case gt.H264_STREAM_TYPE:return"video";case gt.ADTS_STREAM_TYPE:return"audio";case gt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Xp=function(f){var v=Ns(f);if(!v)return null;var g=4+Bs(f);if(g>=f.byteLength)return null;var x=null,E;return E=f[g+7],E&192&&(x={},x.pts=(f[g+9]&14)<<27|(f[g+10]&255)<<20|(f[g+11]&254)<<12|(f[g+12]&255)<<5|(f[g+13]&254)>>>3,x.pts*=4,x.pts+=(f[g+13]&6)>>>1,x.dts=x.pts,E&64&&(x.dts=(f[g+14]&14)<<27|(f[g+15]&255)<<20|(f[g+16]&254)<<12|(f[g+17]&255)<<5|(f[g+18]&254)>>>3,x.dts*=4,x.dts+=(f[g+18]&6)>>>1)),x},Us=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Yp=function(f){for(var v=4+Bs(f),g=f.subarray(v),x=0,E=0,A=!1,P;E<g.byteLength-3;E++)if(g[E+2]===1){x=E+5;break}for(;x<g.byteLength;)switch(g[x]){case 0:if(g[x-1]!==0){x+=2;break}else if(g[x-2]!==0){x++;break}E+3!==x-2&&(P=Us(g[E+3]&31),P==="slice_layer_without_partitioning_rbsp_idr"&&(A=!0));do x++;while(g[x]!==1&&x<g.length);E=x-2,x+=3;break;case 1:if(g[x-1]!==0||g[x-2]!==0){x+=3;break}P=Us(g[E+3]&31),P==="slice_layer_without_partitioning_rbsp_idr"&&(A=!0),E=x-2,x+=3;break;default:x+=3;break}return g=g.subarray(E),x-=E,E=0,g&&g.byteLength>3&&(P=Us(g[E+3]&31),P==="slice_layer_without_partitioning_rbsp_idr"&&(A=!0)),A},Jd={parseType:Yd,parsePat:zp,parsePmt:Kp,parsePayloadUnitStartIndicator:Ns,parsePesType:Qd,parsePesTime:Xp,videoPacketContainsKeyFrame:Yp},qi=Ad.handleRollover,Ve={};Ve.ts=Jd,Ve.aac=ks;var nn=Ue.ONE_SECOND_IN_TS,Mt=188,jt=71,Qp=function(f,v){for(var g=0,x=Mt,E,A;x<f.byteLength;){if(f[g]===jt&&f[x]===jt){switch(E=f.subarray(g,x),A=Ve.ts.parseType(E,v.pid),A){case"pat":v.pid=Ve.ts.parsePat(E);break;case"pmt":var P=Ve.ts.parsePmt(E);v.table=v.table||{},Object.keys(P).forEach(function(N){v.table[N]=P[N]});break}g+=Mt,x+=Mt;continue}g++,x++}},Zd=function(f,v,g){for(var x=0,E=Mt,A,P,N,H,U,W=!1;E<=f.byteLength;){if(f[x]===jt&&(f[E]===jt||E===f.byteLength)){switch(A=f.subarray(x,E),P=Ve.ts.parseType(A,v.pid),P){case"pes":N=Ve.ts.parsePesType(A,v.table),H=Ve.ts.parsePayloadUnitStartIndicator(A),N==="audio"&&H&&(U=Ve.ts.parsePesTime(A),U&&(U.type="audio",g.audio.push(U),W=!0));break}if(W)break;x+=Mt,E+=Mt;continue}x++,E++}for(E=f.byteLength,x=E-Mt,W=!1;x>=0;){if(f[x]===jt&&(f[E]===jt||E===f.byteLength)){switch(A=f.subarray(x,E),P=Ve.ts.parseType(A,v.pid),P){case"pes":N=Ve.ts.parsePesType(A,v.table),H=Ve.ts.parsePayloadUnitStartIndicator(A),N==="audio"&&H&&(U=Ve.ts.parsePesTime(A),U&&(U.type="audio",g.audio.push(U),W=!0));break}if(W)break;x-=Mt,E-=Mt;continue}x--,E--}},Jp=function(f,v,g){for(var x=0,E=Mt,A,P,N,H,U,W,te,ce,pe=!1,ue={data:[],size:0};E<f.byteLength;){if(f[x]===jt&&f[E]===jt){switch(A=f.subarray(x,E),P=Ve.ts.parseType(A,v.pid),P){case"pes":if(N=Ve.ts.parsePesType(A,v.table),H=Ve.ts.parsePayloadUnitStartIndicator(A),N==="video"&&(H&&!pe&&(U=Ve.ts.parsePesTime(A),U&&(U.type="video",g.video.push(U),pe=!0)),!g.firstKeyFrame)){if(H&&ue.size!==0){for(W=new Uint8Array(ue.size),te=0;ue.data.length;)ce=ue.data.shift(),W.set(ce,te),te+=ce.byteLength;if(Ve.ts.videoPacketContainsKeyFrame(W)){var Te=Ve.ts.parsePesTime(W);Te?(g.firstKeyFrame=Te,g.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}ue.size=0}ue.data.push(A),ue.size+=A.byteLength}break}if(pe&&g.firstKeyFrame)break;x+=Mt,E+=Mt;continue}x++,E++}for(E=f.byteLength,x=E-Mt,pe=!1;x>=0;){if(f[x]===jt&&f[E]===jt){switch(A=f.subarray(x,E),P=Ve.ts.parseType(A,v.pid),P){case"pes":N=Ve.ts.parsePesType(A,v.table),H=Ve.ts.parsePayloadUnitStartIndicator(A),N==="video"&&H&&(U=Ve.ts.parsePesTime(A),U&&(U.type="video",g.video.push(U),pe=!0));break}if(pe)break;x-=Mt,E-=Mt;continue}x--,E--}},ec=function(f,v){if(f.audio&&f.audio.length){var g=v;(typeof g>"u"||isNaN(g))&&(g=f.audio[0].dts),f.audio.forEach(function(A){A.dts=qi(A.dts,g),A.pts=qi(A.pts,g),A.dtsTime=A.dts/nn,A.ptsTime=A.pts/nn})}if(f.video&&f.video.length){var x=v;if((typeof x>"u"||isNaN(x))&&(x=f.video[0].dts),f.video.forEach(function(A){A.dts=qi(A.dts,x),A.pts=qi(A.pts,x),A.dtsTime=A.dts/nn,A.ptsTime=A.pts/nn}),f.firstKeyFrame){var E=f.firstKeyFrame;E.dts=qi(E.dts,x),E.pts=qi(E.pts,x),E.dtsTime=E.dts/nn,E.ptsTime=E.pts/nn}}},Zp=function(f){for(var v=!1,g=0,x=null,E=null,A=0,P=0,N;f.length-P>=3;){var H=Ve.aac.parseType(f,P);switch(H){case"timed-metadata":if(f.length-P<10){v=!0;break}if(A=Ve.aac.parseId3TagSize(f,P),A>f.length){v=!0;break}E===null&&(N=f.subarray(P,P+A),E=Ve.aac.parseAacTimestamp(N)),P+=A;break;case"audio":if(f.length-P<7){v=!0;break}if(A=Ve.aac.parseAdtsSize(f,P),A>f.length){v=!0;break}x===null&&(N=f.subarray(P,P+A),x=Ve.aac.parseSampleRate(N)),g++,P+=A;break;default:P++;break}if(v)return null}if(x===null||E===null)return null;var U=nn/x,W={audio:[{type:"audio",dts:E,pts:E},{type:"audio",dts:E+g*1024*U,pts:E+g*1024*U}]};return W},em=function(f){var v={pid:null,table:null},g={};Qp(f,v);for(var x in v.table)if(v.table.hasOwnProperty(x)){var E=v.table[x];switch(E){case gt.H264_STREAM_TYPE:g.video=[],Jp(f,v,g),g.video.length===0&&delete g.video;break;case gt.ADTS_STREAM_TYPE:g.audio=[],Zd(f,v,g),g.audio.length===0&&delete g.audio;break}}return g},tm=function(f,v){var g=Ve.aac.isLikelyAacData(f),x;return g?x=Zp(f):x=em(f),!x||!x.audio&&!x.video?null:(ec(x,v),x)},im={inspect:tm,parseAudioPes_:Zd},rm=function(f,v){v.on("data",function(g){var x=g.initSegment;g.initSegment={data:x.buffer,byteOffset:x.byteOffset,byteLength:x.byteLength};var E=g.data;g.data=E.buffer,f.postMessage({action:"data",segment:g,byteOffset:E.byteOffset,byteLength:E.byteLength},[g.data])}),v.on("done",function(g){f.postMessage({action:"done"})}),v.on("gopInfo",function(g){f.postMessage({action:"gopInfo",gopInfo:g})}),v.on("videoSegmentTimingInfo",function(g){var x={start:{decode:Ue.videoTsToSeconds(g.start.dts),presentation:Ue.videoTsToSeconds(g.start.pts)},end:{decode:Ue.videoTsToSeconds(g.end.dts),presentation:Ue.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:Ue.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(x.prependedContentDuration=Ue.videoTsToSeconds(g.prependedContentDuration)),f.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:x})}),v.on("audioSegmentTimingInfo",function(g){var x={start:{decode:Ue.videoTsToSeconds(g.start.dts),presentation:Ue.videoTsToSeconds(g.start.pts)},end:{decode:Ue.videoTsToSeconds(g.end.dts),presentation:Ue.videoTsToSeconds(g.end.pts)},baseMediaDecodeTime:Ue.videoTsToSeconds(g.baseMediaDecodeTime)};g.prependedContentDuration&&(x.prependedContentDuration=Ue.videoTsToSeconds(g.prependedContentDuration)),f.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:x})}),v.on("id3Frame",function(g){f.postMessage({action:"id3Frame",id3Frame:g})}),v.on("caption",function(g){f.postMessage({action:"caption",caption:g})}),v.on("trackinfo",function(g){f.postMessage({action:"trackinfo",trackInfo:g})}),v.on("audioTimingInfo",function(g){f.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Ue.videoTsToSeconds(g.start),end:Ue.videoTsToSeconds(g.end)}})}),v.on("videoTimingInfo",function(g){f.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Ue.videoTsToSeconds(g.start),end:Ue.videoTsToSeconds(g.end)}})}),v.on("log",function(g){f.postMessage({action:"log",log:g})})},tc=function(){function k(v,g){this.options=g||{},this.self=v,this.init()}var f=k.prototype;return f.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new gu.Transmuxer(this.options),rm(this.self,this.transmuxer)},f.pushMp4Captions=function(g){this.captionParser||(this.captionParser=new yu,this.captionParser.init());var x=new Uint8Array(g.data,g.byteOffset,g.byteLength),E=this.captionParser.parse(x,g.trackIds,g.timescales);this.self.postMessage({action:"mp4Captions",captions:E&&E.captions||[],logs:E&&E.logs||[],data:x.buffer},[x.buffer])},f.probeMp4StartTime=function(g){var x=g.timescales,E=g.data,A=xu.startTime(x,E);this.self.postMessage({action:"probeMp4StartTime",startTime:A,data:E},[E.buffer])},f.probeMp4Tracks=function(g){var x=g.data,E=xu.tracks(x);this.self.postMessage({action:"probeMp4Tracks",tracks:E,data:x},[x.buffer])},f.probeTs=function(g){var x=g.data,E=g.baseStartTime,A=typeof E=="number"&&!isNaN(E)?E*Ue.ONE_SECOND_IN_TS:void 0,P=im.inspect(x,A),N=null;P&&(N={hasVideo:P.video&&P.video.length===2||!1,hasAudio:P.audio&&P.audio.length===2||!1},N.hasVideo&&(N.videoStart=P.video[0].ptsTime),N.hasAudio&&(N.audioStart=P.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:N,data:x},[x.buffer])},f.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},f.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},f.push=function(g){var x=new Uint8Array(g.data,g.byteOffset,g.byteLength);this.transmuxer.push(x)},f.reset=function(){this.transmuxer.reset()},f.setTimestampOffset=function(g){var x=g.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Ue.secondsToVideoTs(x)))},f.setAudioAppendStart=function(g){this.transmuxer.setAudioAppendStart(Math.ceil(Ue.secondsToVideoTs(g.appendStart)))},f.setRemux=function(g){this.transmuxer.setRemux(g.remux)},f.flush=function(g){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},f.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},f.alignGopsWith=function(g){this.transmuxer.alignGopsWith(g.gopsToAlignWith.slice())},k}();self.onmessage=function(k){if(k.data.action==="init"&&k.data.options){this.messageHandlers=new tc(self,k.data.options);return}this.messageHandlers||(this.messageHandlers=new tc(self)),k.data&&k.data.action&&k.data.action!=="init"&&this.messageHandlers[k.data.action]&&this.messageHandlers[k.data.action](k.data)}})),n8=Dk(r8),a8=function(e,t,i){var r=e.data.segment,a=r.type,s=r.initSegment,o=r.captions,u=r.captionStreams,l=r.metadata,d=r.videoFrameDtsTime,h=r.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:u,metadata:l});var p=e.data.segment.boxes||{data:e.data.segment.data},_={type:a,data:new Uint8Array(p.data,p.data.byteOffset,p.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof d<"u"&&(_.videoFrameDtsTime=d),typeof h<"u"&&(_.videoFramePtsTime=h),i(_)},s8=function(e){var t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)},o8=function(e,t){t.gopInfo=e.data.gopInfo},wk=function(e){var t=e.transmuxer,i=e.bytes,r=e.audioAppendStart,a=e.gopsToAlignWith,s=e.remux,o=e.onData,u=e.onTrackInfo,l=e.onAudioTimingInfo,d=e.onVideoTimingInfo,h=e.onVideoSegmentTimingInfo,p=e.onAudioSegmentTimingInfo,_=e.onId3,D=e.onCaptions,C=e.onDone,S=e.onEndedTimeline,I=e.onTransmuxerLog,L=e.isEndOfTimeline,G={buffer:[]},M=L,O=function(J){t.currentTransmux===e&&(J.data.action==="data"&&a8(J,G,o),J.data.action==="trackinfo"&&u(J.data.trackInfo),J.data.action==="gopInfo"&&o8(J,G),J.data.action==="audioTimingInfo"&&l(J.data.audioTimingInfo),J.data.action==="videoTimingInfo"&&d(J.data.videoTimingInfo),J.data.action==="videoSegmentTimingInfo"&&h(J.data.videoSegmentTimingInfo),J.data.action==="audioSegmentTimingInfo"&&p(J.data.audioSegmentTimingInfo),J.data.action==="id3Frame"&&_([J.data.id3Frame],J.data.id3Frame.dispatchType),J.data.action==="caption"&&D(J.data.caption),J.data.action==="endedtimeline"&&(M=!1,S()),J.data.action==="log"&&I(J.data.log),J.data.type==="transmuxed"&&(M||(t.onmessage=null,s8({transmuxedData:G,callback:C}),Ak(t))))};if(t.onmessage=O,r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(a)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:a}),typeof s<"u"&&t.postMessage({action:"setRemux",remux:s}),i.byteLength){var K=i instanceof ArrayBuffer?i:i.buffer,z=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:K,byteOffset:z,byteLength:i.byteLength},[K])}L&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Ak=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():wk(e.currentTransmux))},ww=function(e,t){e.postMessage({action:t}),Ak(e)},kk=function(e,t){if(!t.currentTransmux){t.currentTransmux=e,ww(t,e);return}t.transmuxQueue.push(ww.bind(null,t,e))},u8=function(e){kk("reset",e)},l8=function(e){kk("endTimeline",e)},Ik=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,wk(e);return}e.transmuxer.transmuxQueue.push(e)},d8=function(e){var t=new n8;t.currentTransmux=null,t.transmuxQueue=[];var i=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)},t.postMessage({action:"init",options:e}),t},c_={reset:u8,endTimeline:l8,transmux:Ik,createTransmuxer:d8},Kf=function(e){var t=e.transmuxer,i=e.endAction||e.action,r=e.callback,a=vt({},e,{endAction:null,transmuxer:null,callback:null}),s=function l(d){d.data.action===i&&(t.removeEventListener("message",l),d.data.data&&(d.data.data=new Uint8Array(d.data.data,e.byteOffset||0,e.byteLength||d.data.data.byteLength),e.data&&(e.data=d.data.data)),r(d.data))};if(t.addEventListener("message",s),e.data){var o=e.data instanceof ArrayBuffer;a.byteOffset=o?0:e.data.byteOffset,a.byteLength=e.data.byteLength;var u=[o?e.data:e.data.buffer];t.postMessage(a,u)}else t.postMessage(a)},Hr={FAILURE:2,TIMEOUT:-101,ABORTED:-102},k_=function(e){e.forEach(function(t){t.abort()})},c8=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},h8=function(e){var t=e.target,i=Date.now()-t.requestTime,r={bandwidth:1/0,bytesReceived:0,roundTripTime:i||0};return r.bytesReceived=e.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},py=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Hr.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Hr.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Hr.FAILURE,xhr:t}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:Hr.FAILURE,xhr:t}:null},Aw=function(e,t,i){return function(r,a){var s=a.response,o=py(r,a);if(o)return i(o,e);if(s.byteLength!==16)return i({status:a.status,message:"Invalid HLS key at URL: "+a.uri,code:Hr.FAILURE,xhr:a},e);for(var u=new DataView(s),l=new Uint32Array([u.getUint32(0),u.getUint32(4),u.getUint32(8),u.getUint32(12)]),d=0;d<t.length;d++)t[d].bytes=l;return i(null,e)}},Pk=function(e,t){var i=Df(e.map.bytes);if(i!=="mp4"){var r=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(i||"unknown")+" container for initialization segment at URL: "+r,code:Hr.FAILURE})}Kf({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(s){var o=s.tracks,u=s.data;return e.map.bytes=u,o.forEach(function(l){e.map.tracks=e.map.tracks||{},!e.map.tracks[l.type]&&(e.map.tracks[l.type]=l,typeof l.id=="number"&&l.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[l.id]=l.timescale))}),t(null)}})},f8=function(e){var t=e.segment,i=e.finishProcessingFn;return function(r,a){var s=py(r,a);if(s)return i(s,t);var o=new Uint8Array(a.response);if(t.map.key)return t.map.encryptedBytes=o,i(null,t);t.map.bytes=o,Pk(t,function(u){if(u)return u.xhr=a,u.status=a.status,i(u,t);i(null,t)})}},p8=function(e){var t=e.segment,i=e.finishProcessingFn,r=e.responseType;return function(a,s){var o=py(a,s);if(o)return i(o,t);var u=r==="arraybuffer"||!s.responseText?s.response:t8(s.responseText.substring(t.lastReachedChar||0));return t.stats=c8(s),t.key?t.encryptedBytes=new Uint8Array(u):t.bytes=new Uint8Array(u),i(null,t)}},m8=function(e){var t=e.segment,i=e.bytes,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,d=e.isEndOfTimeline,h=e.endedTimelineFn,p=e.dataFn,_=e.doneFn,D=e.onTransmuxerLog,C=t.map&&t.map.tracks||{},S=Boolean(C.audio&&C.video),I=a.bind(null,t,"audio","start"),L=a.bind(null,t,"audio","end"),G=a.bind(null,t,"video","start"),M=a.bind(null,t,"video","end"),O=function(){return Ik({bytes:i,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:S,onData:function(V){V.type=V.type==="combined"?"video":V.type,p(t,V)},onTrackInfo:function(V){r&&(S&&(V.isMuxed=!0),r(t,V))},onAudioTimingInfo:function(V){I&&typeof V.start<"u"&&(I(V.start),I=null),L&&typeof V.end<"u"&&L(V.end)},onVideoTimingInfo:function(V){G&&typeof V.start<"u"&&(G(V.start),G=null),M&&typeof V.end<"u"&&M(V.end)},onVideoSegmentTimingInfo:function(V){s(V)},onAudioSegmentTimingInfo:function(V){o(V)},onId3:function(V,J){u(t,V,J)},onCaptions:function(V){l(t,[V])},isEndOfTimeline:d,onEndedTimeline:function(){h()},onTransmuxerLog:D,onDone:function(V){!_||(V.type=V.type==="combined"?"video":V.type,_(null,t,V))}})};Kf({action:"probeTs",transmuxer:t.transmuxer,data:i,baseStartTime:t.baseStartTime,callback:function(z){t.bytes=i=z.data;var V=z.result;V&&(r(t,{hasAudio:V.hasAudio,hasVideo:V.hasVideo,isMuxed:S}),r=null,V.hasAudio&&!S&&I(V.audioStart),V.hasVideo&&G(V.videoStart),I=null,G=null),O()}})},Fk=function(e){var t=e.segment,i=e.bytes,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,d=e.isEndOfTimeline,h=e.endedTimelineFn,p=e.dataFn,_=e.doneFn,D=e.onTransmuxerLog,C=new Uint8Array(i);if($C(C)){t.isFmp4=!0;var S=t.map.tracks,I={isFmp4:!0,hasVideo:!!S.video,hasAudio:!!S.audio};S.audio&&S.audio.codec&&S.audio.codec!=="enca"&&(I.audioCodec=S.audio.codec),S.video&&S.video.codec&&S.video.codec!=="encv"&&(I.videoCodec=S.video.codec),S.video&&S.audio&&(I.isMuxed=!0),r(t,I);var L=function(M){p(t,{data:C,type:I.hasAudio&&!I.isMuxed?"audio":"video"}),M&&M.length&&l(t,M),_(null,t,{})};Kf({action:"probeMp4StartTime",timescales:t.map.timescales,data:C,transmuxer:t.transmuxer,callback:function(M){var O=M.data,K=M.startTime;if(i=O.buffer,t.bytes=C=O,I.hasAudio&&!I.isMuxed&&a(t,"audio","start",K),I.hasVideo&&a(t,"video","start",K),!S.video||!O.byteLength||!t.transmuxer){L();return}Kf({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:C,timescales:t.map.timescales,trackIds:[S.video.id],callback:function(V){i=V.data.buffer,t.bytes=C=V.data,V.logs.forEach(function(J){D(X.mergeOptions(J,{stream:"mp4CaptionParser"}))}),L(V.captions)}})}});return}if(!t.transmuxer){_(null,t,{});return}if(typeof t.container>"u"&&(t.container=Df(C)),t.container!=="ts"&&t.container!=="aac"){r(t,{hasAudio:!1,hasVideo:!1}),_(null,t,{});return}m8({segment:t,bytes:i,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:d,endedTimelineFn:h,dataFn:p,doneFn:_,onTransmuxerLog:D})},Ok=function(e,t){var i=e.id,r=e.key,a=e.encryptedBytes,s=e.decryptionWorker,o=function l(d){if(d.data.source===i){s.removeEventListener("message",l);var h=d.data.decrypted;t(new Uint8Array(h.bytes,h.byteOffset,h.byteLength))}};s.addEventListener("message",o);var u;r.bytes.slice?u=r.bytes.slice():u=new Uint32Array(Array.prototype.slice.call(r.bytes)),s.postMessage(_k({source:i,encrypted:a,key:u,iv:r.iv}),[a.buffer,u.buffer])},g8=function(e){var t=e.decryptionWorker,i=e.segment,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,d=e.isEndOfTimeline,h=e.endedTimelineFn,p=e.dataFn,_=e.doneFn,D=e.onTransmuxerLog;Ok({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:t},function(C){i.bytes=C,Fk({segment:i,bytes:i.bytes,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:d,endedTimelineFn:h,dataFn:p,doneFn:_,onTransmuxerLog:D})})},v8=function(e){var t=e.activeXhrs,i=e.decryptionWorker,r=e.trackInfoFn,a=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,d=e.isEndOfTimeline,h=e.endedTimelineFn,p=e.dataFn,_=e.doneFn,D=e.onTransmuxerLog,C=0,S=!1;return function(I,L){if(!S){if(I)return S=!0,k_(t),_(I,L);if(C+=1,C===t.length){var G=function(){if(L.encryptedBytes)return g8({decryptionWorker:i,segment:L,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:d,endedTimelineFn:h,dataFn:p,doneFn:_,onTransmuxerLog:D});Fk({segment:L,bytes:L.bytes,trackInfoFn:r,timingInfoFn:a,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:d,endedTimelineFn:h,dataFn:p,doneFn:_,onTransmuxerLog:D})};if(L.endOfAllRequests=Date.now(),L.map&&L.map.encryptedBytes&&!L.map.bytes)return Ok({decryptionWorker:i,id:L.requestId+"-init",encryptedBytes:L.map.encryptedBytes,key:L.map.key},function(M){L.map.bytes=M,Pk(L,function(O){if(O)return k_(t),_(O,L);G()})});G()}}}},_8=function(e){var t=e.loadendState,i=e.abortFn;return function(r){var a=r.target;a.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}},y8=function(e){var t=e.segment,i=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(r){var a=r.target;if(!a.aborted)return t.stats=X.mergeOptions(t.stats,h8(r)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(r,t)}},T8=function(e){var t=e.xhr,i=e.xhrOptions,r=e.decryptionWorker,a=e.segment,s=e.abortFn,o=e.progressFn,u=e.trackInfoFn,l=e.timingInfoFn,d=e.videoSegmentTimingInfoFn,h=e.audioSegmentTimingInfoFn,p=e.id3Fn,_=e.captionsFn,D=e.isEndOfTimeline,C=e.endedTimelineFn,S=e.dataFn,I=e.doneFn,L=e.onTransmuxerLog,G=[],M=v8({activeXhrs:G,decryptionWorker:r,trackInfoFn:u,timingInfoFn:l,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:h,id3Fn:p,captionsFn:_,isEndOfTimeline:D,endedTimelineFn:C,dataFn:S,doneFn:I,onTransmuxerLog:L});if(a.key&&!a.key.bytes){var O=[a.key];a.map&&!a.map.bytes&&a.map.key&&a.map.key.resolvedUri===a.key.resolvedUri&&O.push(a.map.key);var K=X.mergeOptions(i,{uri:a.key.resolvedUri,responseType:"arraybuffer"}),z=Aw(a,O,M),V=t(K,z);G.push(V)}if(a.map&&!a.map.bytes){var J=a.map.key&&(!a.key||a.key.resolvedUri!==a.map.key.resolvedUri);if(J){var Q=X.mergeOptions(i,{uri:a.map.key.resolvedUri,responseType:"arraybuffer"}),oe=Aw(a,[a.map.key],M),ne=t(Q,oe);G.push(ne)}var ae=X.mergeOptions(i,{uri:a.map.resolvedUri,responseType:"arraybuffer",headers:w_(a.map)}),ye=f8({segment:a,finishProcessingFn:M}),Pe=t(ae,ye);G.push(Pe)}var xe=X.mergeOptions(i,{uri:a.part&&a.part.resolvedUri||a.resolvedUri,responseType:"arraybuffer",headers:w_(a)}),Ae=p8({segment:a,finishProcessingFn:M,responseType:xe.responseType}),Be=t(xe,Ae);Be.addEventListener("progress",y8({segment:a,progressFn:o,trackInfoFn:u,timingInfoFn:l,videoSegmentTimingInfoFn:d,audioSegmentTimingInfoFn:h,id3Fn:p,captionsFn:_,isEndOfTimeline:D,endedTimelineFn:C,dataFn:S})),G.push(Be);var ht={};return G.forEach(function(Oe){Oe.addEventListener("loadend",_8({loadendState:ht,abortFn:s}))}),function(){return k_(G)}},x8=vr("CodecUtils"),b8=function(e){var t=e.attributes||{};if(t.CODECS)return fr(t.CODECS)},Lk=function(e,t){var i=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]},S8=function(e,t){if(!Lk(e,t))return!0;var i=t.attributes||{},r=e.mediaGroups.AUDIO[i.AUDIO];for(var a in r)if(!r[a].uri&&!r[a].playlists)return!0;return!1},Xf=function(e){var t={};return e.forEach(function(i){var r=i.mediaType,a=i.type,s=i.details;t[r]=t[r]||[],t[r].push(Av(""+a+s))}),Object.keys(t).forEach(function(i){if(t[i].length>1){x8("multiple "+i+" codecs found as attributes: "+t[i].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),t[i]=null;return}t[i]=t[i][0]}),t},kw=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},ad=function(e,t){var i=t.attributes||{},r=Xf(b8(t)||[]);if(Lk(e,t)&&!r.audio&&!S8(e,t)){var a=Xf(oC(e,i.AUDIO)||[]);a.audio&&(r.audio=a.audio)}return r},If=vr("PlaylistSelector"),Iw=function(e){if(!(!e||!e.playlist)){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Yf=function(e,t){if(!e)return"";var i=$.default.getComputedStyle(e);return i?i[t]:""},Go=function(e,t){var i=e.slice();e.sort(function(r,a){var s=t(r,a);return s===0?i.indexOf(r)-i.indexOf(a):s})},my=function(e,t){var i,r;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||$.default.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||$.default.Number.MAX_VALUE,i-r},D8=function(e,t){var i,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||$.default.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||$.default.Number.MAX_VALUE,i===r&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-r},Rk=function(e,t,i,r,a,s){if(!!e){var o={bandwidth:t,width:i,height:r,limitRenditionByPlayerDimensions:a},u=e.playlists;Ci.isAudioOnly(e)&&(u=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var l=u.map(function(Q){var oe,ne=Q.attributes&&Q.attributes.RESOLUTION&&Q.attributes.RESOLUTION.width,ae=Q.attributes&&Q.attributes.RESOLUTION&&Q.attributes.RESOLUTION.height;return oe=Q.attributes&&Q.attributes.BANDWIDTH,oe=oe||$.default.Number.MAX_VALUE,{bandwidth:oe,width:ne,height:ae,playlist:Q}});Go(l,function(Q,oe){return Q.bandwidth-oe.bandwidth}),l=l.filter(function(Q){return!Ci.isIncompatible(Q.playlist)});var d=l.filter(function(Q){return Ci.isEnabled(Q.playlist)});d.length||(d=l.filter(function(Q){return!Ci.isDisabled(Q.playlist)}));var h=d.filter(function(Q){return Q.bandwidth*Ot.BANDWIDTH_VARIANCE<t}),p=h[h.length-1],_=h.filter(function(Q){return Q.bandwidth===p.bandwidth})[0];if(a===!1){var D=_||d[0]||l[0];if(D&&D.playlist){var C="sortedPlaylistReps";return _&&(C="bandwidthBestRep"),d[0]&&(C="enabledPlaylistReps"),If("choosing "+Iw(D)+" using "+C+" with options",o),D.playlist}return If("could not choose a playlist with options",o),null}var S=h.filter(function(Q){return Q.width&&Q.height});Go(S,function(Q,oe){return Q.width-oe.width});var I=S.filter(function(Q){return Q.width===i&&Q.height===r});p=I[I.length-1];var L=I.filter(function(Q){return Q.bandwidth===p.bandwidth})[0],G,M,O;L||(G=S.filter(function(Q){return Q.width>i||Q.height>r}),M=G.filter(function(Q){return Q.width===G[0].width&&Q.height===G[0].height}),p=M[M.length-1],O=M.filter(function(Q){return Q.bandwidth===p.bandwidth})[0]);var K;if(s.experimentalLeastPixelDiffSelector){var z=S.map(function(Q){return Q.pixelDiff=Math.abs(Q.width-i)+Math.abs(Q.height-r),Q});Go(z,function(Q,oe){return Q.pixelDiff===oe.pixelDiff?oe.bandwidth-Q.bandwidth:Q.pixelDiff-oe.pixelDiff}),K=z[0]}var V=K||O||L||_||d[0]||l[0];if(V&&V.playlist){var J="sortedPlaylistReps";return K?J="leastPixelDiffRep":O?J="resolutionPlusOneRep":L?J="resolutionBestRep":_?J="bandwidthBestRep":d[0]&&(J="enabledPlaylistReps"),If("choosing "+Iw(V)+" using "+J+" with options",o),V.playlist}return If("could not choose a playlist with options",o),null}},Pw=function(){var e=this.useDevicePixelRatio&&$.default.devicePixelRatio||1;return Rk(this.playlists.master,this.systemBandwidth,parseInt(Yf(this.tech_.el(),"width"),10)*e,parseInt(Yf(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},E8=function(e){var t=-1,i=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var r=this.useDevicePixelRatio&&$.default.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(t=e*this.systemBandwidth+(1-e)*t,i=this.systemBandwidth),Rk(this.playlists.master,t,parseInt(Yf(this.tech_.el(),"width"),10)*r,parseInt(Yf(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},C8=function(e){var t=e.master,i=e.currentTime,r=e.bandwidth,a=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,u=e.currentTimeline,l=e.syncController,d=t.playlists.filter(function(C){return!Ci.isIncompatible(C)}),h=d.filter(Ci.isEnabled);h.length||(h=d.filter(function(C){return!Ci.isDisabled(C)}));var p=h.filter(Ci.hasAttribute.bind(null,"BANDWIDTH")),_=p.map(function(C){var S=l.getSyncPoint(C,a,u,i),I=S?1:2,L=Ci.estimateSegmentRequestTime(s,r,C),G=L*I-o;return{playlist:C,rebufferingImpact:G}}),D=_.filter(function(C){return C.rebufferingImpact<=0});return Go(D,function(C,S){return my(S.playlist,C.playlist)}),D.length?D[0]:(Go(_,function(C,S){return C.rebufferingImpact-S.rebufferingImpact}),_[0]||null)},w8=function(){var e=this,t=this.playlists.master.playlists.filter(Ci.isEnabled);Go(t,function(r,a){return my(r,a)});var i=t.filter(function(r){return!!ad(e.playlists.master,r).video});return i[0]||null},A8=function(e){var t=0,i;return e.bytes&&(i=new Uint8Array(e.bytes),e.segments.forEach(function(r){i.set(r,t),t+=r.byteLength})),i},k8=function(e,t,i){if(!e[i]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var r=i;/^cc708_/.test(i)&&(r="SERVICE"+i.split("_")[1]);var a=t.textTracks().getTrackById(r);if(a)e[i]=a;else{var s=t.options_.vhs&&t.options_.vhs.captionServices||{},o=i,u=i,l=!1,d=s[r];d&&(o=d.label,u=d.language,l=d.default),e[i]=t.addRemoteTextTrack({kind:"captions",id:r,default:l,label:o,language:u},!1).track}}},I8=function(e){var t=e.inbandTextTracks,i=e.captionArray,r=e.timestampOffset;if(!!i){var a=$.default.WebKitDataCue||$.default.VTTCue;i.forEach(function(s){var o=s.stream;t[o].addCue(new a(s.startTime+r,s.endTime+r,s.text))})}},P8=function(e){Object.defineProperties(e.frame,{id:{get:function(){return X.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return X.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return X.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},F8=function(e){var t=e.inbandTextTracks,i=e.metadataArray,r=e.timestampOffset,a=e.videoDuration;if(!!i){var s=$.default.WebKitDataCue||$.default.VTTCue,o=t.metadataTrack_;if(!!o&&(i.forEach(function(_){var D=_.cueTime+r;typeof D!="number"||$.default.isNaN(D)||D<0||!(D<1/0)||_.frames.forEach(function(C){var S=new s(D,D,C.value||C.url||C.data||"");S.frame=C,S.value=C,P8(S),o.addCue(S)})}),!(!o.cues||!o.cues.length))){for(var u=o.cues,l=[],d=0;d<u.length;d++)u[d]&&l.push(u[d]);var h=l.reduce(function(_,D){var C=_[D.startTime]||[];return C.push(D),_[D.startTime]=C,_},{}),p=Object.keys(h).sort(function(_,D){return Number(_)-Number(D)});p.forEach(function(_,D){var C=h[_],S=Number(p[D+1])||a;C.forEach(function(I){I.endTime=S})})}}},O8=function(e,t,i){e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},id=function(e,t,i){var r,a;if(!!i&&!!i.cues)for(r=i.cues.length;r--;)a=i.cues[r],a.startTime>=e&&a.endTime<=t&&i.removeCue(a)},L8=function(e){var t=e.cues;if(!!t)for(var i=0;i<t.length;i++){for(var r=[],a=0,s=0;s<t.length;s++)t[i].startTime===t[s].startTime&&t[i].endTime===t[s].endTime&&t[i].text===t[s].text&&(a++,a>1&&r.push(t[s]));r.length&&r.forEach(function(o){return e.removeCue(o)})}},R8=function(e,t,i){if(typeof t>"u"||t===null||!e.length)return[];var r=Math.ceil((t-i+3)*sd.ONE_SECOND_IN_TS),a;for(a=0;a<e.length&&!(e[a].pts>r);a++);return e.slice(a)},M8=function(e,t,i){if(!t.length)return e;if(i)return t.slice();var r=t[0].pts,a=0;for(a;a<e.length&&!(e[a].pts>=r);a++);return e.slice(0,a).concat(t)},N8=function(e,t,i,r){for(var a=Math.ceil((t-r)*sd.ONE_SECOND_IN_TS),s=Math.ceil((i-r)*sd.ONE_SECOND_IN_TS),o=e.slice(),u=e.length;u--&&!(e[u].pts<=s););if(u===-1)return o;for(var l=u+1;l--&&!(e[l].pts<=a););return l=Math.max(l,0),o.splice(l,u-l+1),o},B8=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var i=Object.keys(e).sort(),r=Object.keys(t).sort();if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++){var s=i[a];if(s!==r[a]||e[s]!==t[s])return!1}return!0},Mk=22,U8=function(e,t,i){t=t||[];for(var r=[],a=0,s=0;s<t.length;s++){var o=t[s];if(e===o.timeline&&(r.push(s),a+=o.duration,a>i))return s}return r.length===0?0:r[r.length-1]},ed=1,j8=500,Fw=function(e){return typeof e=="number"&&isFinite(e)},Pf=1/60,H8=function(e,t,i){return e!=="main"||!t||!i?null:!i.hasAudio&&!i.hasVideo?"Neither audio nor video found in segment.":t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},$8=function(e,t,i){var r=t-Ot.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));var a=t-i;return Math.min(a,r)},jo=function(e){var t=e.startOfSegment,i=e.duration,r=e.segment,a=e.part,s=e.playlist,o=s.mediaSequence,u=s.id,l=s.segments,d=l===void 0?[]:l,h=e.mediaIndex,p=e.partIndex,_=e.timeline,D=d.length-1,C="mediaIndex/partIndex increment";e.getMediaInfoForTime?C="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(C="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(C+=" with independent "+e.independent);var S=typeof p=="number",I=e.segment.uri?"segment":"pre-segment",L=S?nk({preloadSegment:r})-1:0;return I+" ["+(o+h)+"/"+(o+D)+"]"+(S?" part ["+p+"/"+L+"]":"")+(" segment start/end ["+r.start+" => "+r.end+"]")+(S?" part start/end ["+a.start+" => "+a.end+"]":"")+(" startOfSegment ["+t+"]")+(" duration ["+i+"]")+(" timeline ["+_+"]")+(" selected by ["+C+"]")+(" playlist ["+u+"]")},Ow=function(e){return e+"TimingInfo"},V8=function(e){var t=e.segmentTimeline,i=e.currentTimeline,r=e.startOfSegment,a=e.buffered,s=e.overrideCheck;return!s&&t===i?null:t<i?r:a.length?a.end(a.length-1):r},Lw=function(e){var t=e.timelineChangeController,i=e.currentTimeline,r=e.segmentTimeline,a=e.loaderType,s=e.audioDisabled;if(i===r)return!1;if(a==="audio"){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==r}if(a==="main"&&s){var u=t.pendingTimelineChange({type:"audio"});return!(u&&u.to===r)}return!1},W8=function(e){var t=0;return["video","audio"].forEach(function(i){var r=e[i+"TimingInfo"];if(!!r){var a=r.start,s=r.end,o;typeof a=="bigint"||typeof s=="bigint"?o=$.default.BigInt(s)-$.default.BigInt(a):typeof a=="number"&&typeof s=="number"&&(o=s-a),typeof o<"u"&&o>t&&(t=o)}}),typeof t=="bigint"&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},Rw=function(e){var t=e.segmentDuration,i=e.maxDuration;return t?Math.round(t)>i+fa:!1},q8=function(e,t){if(t!=="hls")return null;var i=W8({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!i)return null;var r=e.playlist.targetDuration,a=Rw({segmentDuration:i,maxDuration:r*2}),s=Rw({segmentDuration:i,maxDuration:r}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+i+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+r+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return a||s?{severity:a?"warn":"info",message:o}:null},I_=function(n){de(e,n);function e(i,r){var a;if(a=n.call(this)||this,!i)throw new TypeError("Initialization settings are required");if(typeof i.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!i.mediaSource)throw new TypeError("No MediaSource specified");return a.bandwidth=i.bandwidth,a.throughput={rate:0,count:0},a.roundTrip=NaN,a.resetStats_(),a.mediaIndex=null,a.partIndex=null,a.hasPlayed_=i.hasPlayed,a.currentTime_=i.currentTime,a.seekable_=i.seekable,a.seeking_=i.seeking,a.duration_=i.duration,a.mediaSource_=i.mediaSource,a.vhs_=i.vhs,a.loaderType_=i.loaderType,a.currentMediaInfo_=void 0,a.startingMediaInfo_=void 0,a.segmentMetadataTrack_=i.segmentMetadataTrack,a.goalBufferLength_=i.goalBufferLength,a.sourceType_=i.sourceType,a.sourceUpdater_=i.sourceUpdater,a.inbandTextTracks_=i.inbandTextTracks,a.state_="INIT",a.timelineChangeController_=i.timelineChangeController,a.shouldSaveSegmentTimingInfo_=!0,a.parse708captions_=i.parse708captions,a.useDtsForTimestampOffset_=i.useDtsForTimestampOffset,a.captionServices_=i.captionServices,a.experimentalExactManifestTimings=i.experimentalExactManifestTimings,a.checkBufferTimeout_=null,a.error_=void 0,a.currentTimeline_=-1,a.pendingSegment_=null,a.xhrOptions_=null,a.pendingSegments_=[],a.audioDisabled_=!1,a.isPendingTimestampOffset_=!1,a.gopBuffer_=[],a.timeMapping_=0,a.safeAppend_=X.browser.IE_VERSION>=11,a.appendInitSegment_={audio:!0,video:!0},a.playlistOfLastInitSegment_={audio:null,video:null},a.callQueue_=[],a.loadQueue_=[],a.metadataQueue_={id3:[],caption:[]},a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=null,a.activeInitSegmentId_=null,a.initSegments_={},a.cacheEncryptionKeys_=i.cacheEncryptionKeys,a.keyCache_={},a.decrypter_=i.decrypter,a.syncController_=i.syncController,a.syncPoint_={segmentIndex:0,time:0},a.transmuxer_=a.createTransmuxer_(),a.triggerSyncInfoUpdate_=function(){return a.trigger("syncinfoupdate")},a.syncController_.on("syncinfoupdate",a.triggerSyncInfoUpdate_),a.mediaSource_.addEventListener("sourceopen",function(){a.isEndOfStream_()||(a.ended_=!1)}),a.fetchAtBuffer_=!1,a.logger_=vr("SegmentLoader["+a.loaderType_+"]"),Object.defineProperty(Se(a),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),a.sourceUpdater_.on("ready",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="main"&&a.timelineChangeController_.on("pendingtimelinechange",function(){a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a.loaderType_==="audio"&&a.timelineChangeController_.on("timelinechange",function(){a.hasEnoughInfoToLoad_()&&a.processLoadQueue_(),a.hasEnoughInfoToAppend_()&&a.processCallQueue_()}),a}var t=e.prototype;return t.createTransmuxer_=function(){return c_.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&$.default.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(r){this.audioDisabled_=!r,r?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,$.default.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(r){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==r},t.error=function(r){return typeof r<"u"&&(this.logger_("error occurred:",r),this.error_=r),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&c_.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){var r=this.getMediaInfo_();if(!this.sourceUpdater_||!r)return X.createTimeRanges();if(this.loaderType_==="main"){var a=r.hasAudio,s=r.hasVideo,o=r.isMuxed;if(s&&a&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(r,a){if(a===void 0&&(a=!1),!r)return null;var s=zf(r),o=this.initSegments_[s];return a&&!o&&r.bytes&&(this.initSegments_[s]=o={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:r.bytes,tracks:r.tracks,timescales:r.timescales}),o||r},t.segmentKey=function(r,a){if(a===void 0&&(a=!1),!r)return null;var s=yk(r),o=this.keyCache_[s];this.cacheEncryptionKeys_&&a&&!o&&r.bytes&&(this.keyCache_[s]=o={resolvedUri:r.resolvedUri,bytes:r.bytes});var u={resolvedUri:(o||r).resolvedUri};return o&&(u.bytes=o.bytes),u},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(r,a){if(a===void 0&&(a={}),!!r){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=r,this.xhrOptions_=a,this.state==="INIT"&&(r.syncInfo={mediaSequence:r.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(r));var u=null;if(s&&(s.id?u=s.id:s.uri&&(u=s.uri)),this.logger_("playlist update ["+u+" => "+(r.id||r.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==r.uri){this.mediaIndex!==null&&(r.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var l=r.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+l+"]"),this.mediaIndex!==null)if(this.mediaIndex-=l,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var d=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!d.parts||!d.parts.length||!d.parts[this.partIndex])){var h=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=h}}o&&(o.mediaIndex-=l,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=r.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,r)}},t.pause=function(){this.checkBufferTimeout_&&($.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return this.checkBufferTimeout_===null},t.resetEverything=function(r){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,r),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&c_.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(r,a,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),a===1/0&&(a=this.duration_()),a<=r){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var u=1,l=function(){u--,u===0&&s()};(o||!this.audioDisabled_)&&(u++,this.sourceUpdater_.removeAudio(r,a,l)),(o||this.loaderType_==="main")&&(this.gopBuffer_=N8(this.gopBuffer_,r,a,this.timeMapping_),u++,this.sourceUpdater_.removeVideo(r,a,l));for(var d in this.inbandTextTracks_)id(r,a,this.inbandTextTracks_[d]);id(r,a,this.segmentMetadataTrack_),l()},t.monitorBuffer_=function(){this.checkBufferTimeout_&&$.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=$.default.setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&$.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=$.default.setTimeout(this.monitorBufferTick_.bind(this),j8)},t.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var r=this.chooseNextRequest_();!r||(typeof r.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline})),this.loadSegment_(r))}},t.isEndOfStream_=function(r,a,s){if(r===void 0&&(r=this.mediaIndex),a===void 0&&(a=this.playlist_),s===void 0&&(s=this.partIndex),!a||!this.mediaSource_)return!1;var o=typeof r=="number"&&a.segments[r],u=r+1===a.segments.length,l=!o||!o.parts||s+1===o.parts.length;return a.endList&&this.mediaSource_.readyState==="open"&&u&&l},t.chooseNextRequest_=function(){var r=this.buffered_(),a=bw(r)||0,s=ly(r,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,u=s>=this.goalBufferLength_(),l=this.playlist_.segments;if(!l.length||o||u)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var d={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(d.isSyncRequest)d.mediaIndex=U8(this.currentTimeline_,l,a);else if(this.mediaIndex!==null){var h=l[this.mediaIndex],p=typeof this.partIndex=="number"?this.partIndex:-1;d.startOfSegment=h.end?h.end:a,h.parts&&h.parts[p+1]?(d.mediaIndex=this.mediaIndex,d.partIndex=p+1):d.mediaIndex=this.mediaIndex+1}else{var _=Ci.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?a:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),D=_.segmentIndex,C=_.startTime,S=_.partIndex;d.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+a:"currentTime "+this.currentTime_(),d.mediaIndex=D,d.startOfSegment=C,d.partIndex=S}var I=l[d.mediaIndex],L=I&&typeof d.partIndex=="number"&&I.parts&&I.parts[d.partIndex];if(!I||typeof d.partIndex=="number"&&!L)return null;if(typeof d.partIndex!="number"&&I.parts&&(d.partIndex=0,L=I.parts[0]),!s&&L&&!L.independent)if(d.partIndex===0){var G=l[d.mediaIndex-1],M=G.parts&&G.parts.length&&G.parts[G.parts.length-1];M&&M.independent&&(d.mediaIndex-=1,d.partIndex=G.parts.length-1,d.independent="previous segment")}else I.parts[d.partIndex-1].independent&&(d.partIndex-=1,d.independent="previous part");var O=this.mediaSource_&&this.mediaSource_.readyState==="ended";return d.mediaIndex>=l.length-1&&O&&!this.seeking_()?null:this.generateSegmentInfo_(d)},t.generateSegmentInfo_=function(r){var a=r.independent,s=r.playlist,o=r.mediaIndex,u=r.startOfSegment,l=r.isSyncRequest,d=r.partIndex,h=r.forceTimestampOffset,p=r.getMediaInfoForTime,_=s.segments[o],D=typeof d=="number"&&_.parts[d],C={requestId:"segment-loader-"+Math.random(),uri:D&&D.resolvedUri||_.resolvedUri,mediaIndex:o,partIndex:D?d:null,isSyncRequest:l,startOfSegment:u,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:_.timeline,duration:D&&D.duration||_.duration,segment:_,part:D,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:p,independent:a},S=typeof h<"u"?h:this.isPendingTimestampOffset_;C.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:_.timeline,currentTimeline:this.currentTimeline_,startOfSegment:u,buffered:this.buffered_(),overrideCheck:S});var I=bw(this.sourceUpdater_.audioBuffered());return typeof I=="number"&&(C.audioAppendStart=I-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(C.gopsToAlignWith=R8(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),C},t.timestampOffsetForSegment_=function(r){return V8(r)},t.earlyAbortWhenNeeded_=function(r){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(r.firstBytesReceivedAt||Date.now())<1e3)){var a=this.currentTime_(),s=r.bandwidth,o=this.pendingSegment_.duration,u=Ci.estimateSegmentRequestTime(o,s,this.playlist_,r.bytesReceived),l=h3(this.buffered_(),a,this.vhs_.tech_.playbackRate())-1;if(!(u<=l)){var d=C8({master:this.vhs_.playlists.master,currentTime:a,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!!d){var h=u-l,p=h-d.rebufferingImpact,_=.5;l<=fa&&(_=1),!(!d.playlist||d.playlist.uri===this.playlist_.uri||p<_)&&(this.bandwidth=d.playlist.attributes.BANDWIDTH*Ot.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},t.handleAbort_=function(r){this.logger_("Aborting "+jo(r)),this.mediaRequestsAborted+=1},t.handleProgress_=function(r,a){this.earlyAbortWhenNeeded_(a.stats),!this.checkForAbort_(a.requestId)&&this.trigger("progress")},t.handleTrackInfo_=function(r,a){this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)&&(this.checkForIllegalMediaSwitch(a)||(a=a||{},B8(this.currentMediaInfo_,a)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=a,this.currentMediaInfo_=a,this.logger_("trackinfo update",a),this.trigger("trackinfo")),!this.checkForAbort_(r.requestId)&&(this.pendingSegment_.trackInfo=a,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},t.handleTimingInfo_=function(r,a,s,o){if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){var u=this.pendingSegment_,l=Ow(a);u[l]=u[l]||{},u[l][s]=o,this.logger_("timinginfo: "+a+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},t.handleCaptions_=function(r,a){var s=this;if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){if(a.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,r,a));return}var u=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),l={};a.forEach(function(d){l[d.stream]=l[d.stream]||{startTime:1/0,captions:[],endTime:0};var h=l[d.stream];h.startTime=Math.min(h.startTime,d.startTime+u),h.endTime=Math.max(h.endTime,d.endTime+u),h.captions.push(d)}),Object.keys(l).forEach(function(d){var h=l[d],p=h.startTime,_=h.endTime,D=h.captions,C=s.inbandTextTracks_;s.logger_("adding cues from "+p+" -> "+_+" for "+d),k8(C,s.vhs_.tech_,d),id(p,_,C[d]),I8({captionArray:D,inbandTextTracks:C,timestampOffset:u})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},t.handleId3_=function(r,a,s){if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,r,a,s));return}var u=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();O8(this.inbandTextTracks_,s,this.vhs_.tech_),F8({inbandTextTracks:this.inbandTextTracks_,metadataArray:a,timestampOffset:u,videoDuration:this.duration_()})}},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(r){return r()}),this.metadataQueue_.caption.forEach(function(r){return r()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var r=this.callQueue_;this.callQueue_=[],r.forEach(function(a){return a()})},t.processLoadQueue_=function(){var r=this.loadQueue_;this.loadQueue_=[],r.forEach(function(a){return a()})},t.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var r=this.pendingSegment_;return r?this.getCurrentMediaInfo_()?!Lw({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},t.getCurrentMediaInfo_=function(r){return r===void 0&&(r=this.pendingSegment_),r&&r.trackInfo||this.currentMediaInfo_},t.getMediaInfo_=function(r){return r===void 0&&(r=this.pendingSegment_),this.getCurrentMediaInfo_(r)||this.startingMediaInfo_},t.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var r=this.pendingSegment_,a=this.getCurrentMediaInfo_();if(!r||!a)return!1;var s=a.hasAudio,o=a.hasVideo,u=a.isMuxed;return!(o&&!r.videoTimingInfo||s&&!this.audioDisabled_&&!u&&!r.audioTimingInfo||Lw({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(r,a){if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,r,a));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(r.map&&(r.map=this.initSegmentForMap(r.map,!0),s.segment.map=r.map),r.key&&this.segmentKey(r.key,!0),s.isFmp4=r.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[Ow(a.type)].start;else{var o=this.getCurrentMediaInfo_(),u=this.loaderType_==="main"&&o&&o.hasVideo,l;u&&(l=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:u,firstVideoFrameTimeForData:l,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,a.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var d=this.chooseNextRequest_();if(d.mediaIndex!==s.mediaIndex||d.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,a)}}},t.updateAppendInitSegmentStatus=function(r,a){this.loaderType_==="main"&&typeof r.timestampOffset=="number"&&!r.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[a]!==r.playlist&&(this.appendInitSegment_[a]=!0)},t.getInitSegmentAndUpdateState_=function(r){var a=r.type,s=r.initSegment,o=r.map,u=r.playlist;if(o){var l=zf(o);if(this.activeInitSegmentId_===l)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=l}return s&&this.appendInitSegment_[a]?(this.playlistOfLastInitSegment_[a]=u,this.appendInitSegment_[a]=!1,this.activeInitSegmentId_=null,s):null},t.handleQuotaExceededError_=function(r,a){var s=this,o=r.segmentInfo,u=r.type,l=r.bytes,d=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();d.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+os(d).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+os(h).join(", "));var p=d.length?d.start(0):0,_=d.length?d.end(d.length-1):0,D=h.length?h.start(0):0,C=h.length?h.end(h.length-1):0;if(_-p<=ed&&C-D<=ed){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+l.byteLength+", ")+("audio buffer: "+os(d).join(", ")+", ")+("video buffer: "+os(h).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:u,bytes:l}));var S=this.currentTime_(),I=S-ed;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+I),this.remove(0,I,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+ed+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=$.default.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},ed*1e3)},!0)},t.handleAppendError_=function(r,a){var s=r.segmentInfo,o=r.type,u=r.bytes;if(!!a){if(a.code===Mk){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:u});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",a),this.error(o+" append of "+u.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},t.appendToSourceBuffer_=function(r){var a=r.segmentInfo,s=r.type,o=r.initSegment,u=r.data,l=r.bytes;if(!l){var d=[u],h=u.byteLength;o&&(d.unshift(o),h+=o.byteLength),l=A8({bytes:h,segments:d})}this.sourceUpdater_.appendBuffer({segmentInfo:a,type:s,bytes:l},this.handleAppendError_.bind(this,{segmentInfo:a,type:s,bytes:l}))},t.handleSegmentTimingInfo_=function(r,a,s){if(!(!this.pendingSegment_||a!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,u=r+"TimingInfo";o[u]||(o[u]={}),o[u].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[u].transmuxedPresentationStart=s.start.presentation,o[u].transmuxedDecodeStart=s.start.decode,o[u].transmuxedPresentationEnd=s.end.presentation,o[u].transmuxedDecodeEnd=s.end.decode,o[u].baseMediaDecodeTime=s.baseMediaDecodeTime}},t.appendData_=function(r,a){var s=a.type,o=a.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var u=this.getInitSegmentAndUpdateState_({type:s,initSegment:a.initSegment,playlist:r.playlist,map:r.isFmp4?r.segment.map:null});this.appendToSourceBuffer_({segmentInfo:r,type:s,initSegment:u,data:o})}},t.loadSegment_=function(r){var a=this;if(this.state="WAITING",this.pendingSegment_=r,this.trimBackBuffer_(r),typeof r.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=vt({},r,{forceTimestampOffset:!0});vt(r,a.generateSegmentInfo_(s)),a.isPendingTimestampOffset_=!1,a.updateTransmuxerAndRequestSegment_(r)});return}this.updateTransmuxerAndRequestSegment_(r)},t.updateTransmuxerAndRequestSegment_=function(r){var a=this;this.shouldUpdateTransmuxerTimestampOffset_(r.timestampOffset)&&(this.gopBuffer_.length=0,r.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:r.timestampOffset}));var s=this.createSimplifiedSegmentObj_(r),o=this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex),u=this.mediaIndex!==null,l=r.timeline!==this.currentTimeline_&&r.timeline>0,d=o||u&&l;this.logger_("Requesting "+jo(r)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),r.abortRequests=T8({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,r),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",r.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",r.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:d,endedTimelineFn:function(){a.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(p){var _=p.message,D=p.level,C=p.stream;a.logger_(jo(r)+" logged from transmuxer stream "+C+" as a "+D+": "+_)}})},t.trimBackBuffer_=function(r){var a=$8(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);a>0&&this.remove(0,a)},t.createSimplifiedSegmentObj_=function(r){var a=r.segment,s=r.part,o={resolvedUri:s?s.resolvedUri:a.resolvedUri,byterange:s?s.byterange:a.byterange,requestId:r.requestId,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,part:r.part},u=r.playlist.segments[r.mediaIndex-1];if(u&&u.timeline===a.timeline&&(u.videoTimingInfo?o.baseStartTime=u.videoTimingInfo.transmuxedDecodeEnd:u.audioTimingInfo&&(o.baseStartTime=u.audioTimingInfo.transmuxedDecodeEnd)),a.key){var l=a.key.iv||new Uint32Array([0,0,0,r.mediaIndex+r.playlist.mediaSequence]);o.key=this.segmentKey(a.key),o.key.iv=l}return a.map&&(o.map=this.initSegmentForMap(a.map)),o},t.saveTransferStats_=function(r){this.mediaRequests+=1,r&&(this.mediaBytesTransferred+=r.bytesReceived,this.mediaTransferDuration+=r.roundTripTime)},t.saveBandwidthRelatedStats_=function(r,a){if(this.pendingSegment_.byteLength=a.bytesReceived,r<Pf){this.logger_("Ignoring segment's bandwidth because its duration of "+r+(" is less than the min to record "+Pf));return}this.bandwidth=a.bandwidth,this.roundTrip=a.roundTripTime},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},t.segmentRequestFinished_=function(r,a,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,r,a,s));return}if(this.saveTransferStats_(a.stats),!!this.pendingSegment_&&a.requestId===this.pendingSegment_.requestId){if(r){if(this.pendingSegment_=null,this.state="READY",r.code===Hr.ABORTED)return;if(this.pause(),r.code===Hr.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(r),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,a.stats),o.endOfAllRequests=a.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=M8(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},t.setTimeMapping_=function(r){var a=this.syncController_.mappingForTimeline(r);a!==null&&(this.timeMapping_=a)},t.updateMediaSecondsLoaded_=function(r){typeof r.start=="number"&&typeof r.end=="number"?this.mediaSecondsLoaded+=r.end-r.start:this.mediaSecondsLoaded+=r.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(r){return r===null?!1:this.loaderType_==="main"&&r!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&r!==this.sourceUpdater_.audioTimestampOffset()},t.trueSegmentStart_=function(r){var a=r.currentStart,s=r.playlist,o=r.mediaIndex,u=r.firstVideoFrameTimeForData,l=r.currentVideoTimestampOffset,d=r.useVideoTimingInfo,h=r.videoTimingInfo,p=r.audioTimingInfo;if(typeof a<"u")return a;if(!d)return p.start;var _=s.segments[o-1];return o===0||!_||typeof _.start>"u"||_.end!==u+l?u:h.start},t.waitForAppendsToComplete_=function(r){var a=this.getCurrentMediaInfo_(r);if(!a){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=a.hasAudio,o=a.hasVideo,u=a.isMuxed,l=this.loaderType_==="main"&&o,d=!this.audioDisabled_&&s&&!u;if(r.waitingOnAppends=0,!r.hasAppendedData_){!r.timingInfo&&typeof r.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),r.timingInfo={start:0},r.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(r),this.processMetadataQueue_()),this.checkAppendsDone_(r);return}l&&r.waitingOnAppends++,d&&r.waitingOnAppends++,l&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,r)),d&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,r))},t.checkAppendsDone_=function(r){this.checkForAbort_(r.requestId)||(r.waitingOnAppends--,r.waitingOnAppends===0&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(r){var a=H8(this.loaderType_,this.getCurrentMediaInfo_(),r);return a?(this.error({message:a,blacklistDuration:1/0}),this.trigger("error"),!0):!1},t.updateSourceBufferTimestampOffset_=function(r){if(!(r.timestampOffset===null||typeof r.timingInfo.start!="number"||r.changedTimestampOffset||this.loaderType_!=="main")){var a=!1;r.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:r.segment.videoTimingInfo,audioTimingInfo:r.segment.audioTimingInfo,timingInfo:r.timingInfo}),r.changedTimestampOffset=!0,r.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(r.timestampOffset),a=!0),r.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(r.timestampOffset),a=!0),a&&this.trigger("timestampoffset")}},t.getSegmentStartTimeForTimestampOffsetCalculation_=function(r){var a=r.videoTimingInfo,s=r.audioTimingInfo,o=r.timingInfo;return this.useDtsForTimestampOffset_?a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},t.updateTimingInfoEnd_=function(r){r.timingInfo=r.timingInfo||{};var a=this.getMediaInfo_(),s=this.loaderType_==="main"&&a&&a.hasVideo,o=s&&r.videoTimingInfo?r.videoTimingInfo:r.audioTimingInfo;!o||(r.timingInfo.end=typeof o.end=="number"?o.end:o.start+r.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var r=this.pendingSegment_;this.updateTimingInfoEnd_(r),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});var a=q8(r,this.sourceType_);if(a&&(a.severity==="warn"?X.log.warn(a.message):this.logger_(a.message)),this.recordThroughput_(r),this.pendingSegment_=null,this.state="READY",r.isSyncRequest&&(this.trigger("syncinfoupdate"),!r.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+jo(r));return}this.logger_("Appended "+jo(r)),this.addSegmentMetadataCue_(r),this.fetchAtBuffer_=!0,this.currentTimeline_!==r.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:r.timeline})),this.currentTimeline_=r.timeline,this.trigger("syncinfoupdate");var s=r.segment,o=r.part,u=s.end&&this.currentTime_()-s.end>r.playlist.targetDuration*3,l=o&&o.end&&this.currentTime_()-o.end>r.playlist.partTargetDuration*3;if(u||l){this.logger_("bad "+(u?"segment":"part")+" "+jo(r)),this.resetEverything();return}var d=this.mediaIndex!==null;d&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=r.mediaIndex,this.partIndex=r.partIndex,this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex)&&this.endOfStream(),this.trigger("appended"),r.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},t.recordThroughput_=function(r){if(r.duration<Pf){this.logger_("Ignoring segment's throughput because its duration of "+r.duration+(" is less than the min to record "+Pf));return}var a=this.throughput.rate,s=Date.now()-r.endOfAllRequests+1,o=Math.floor(r.byteLength/s*8*1e3);this.throughput.rate+=(o-a)/++this.throughput.count},t.addSegmentMetadataCue_=function(r){if(!!this.segmentMetadataTrack_){var a=r.segment,s=a.start,o=a.end;if(!(!Fw(s)||!Fw(o))){id(s,o,this.segmentMetadataTrack_);var u=$.default.WebKitDataCue||$.default.VTTCue,l={custom:a.custom,dateTimeObject:a.dateTimeObject,dateTimeString:a.dateTimeString,bandwidth:r.playlist.attributes.BANDWIDTH,resolution:r.playlist.attributes.RESOLUTION,codecs:r.playlist.attributes.CODECS,byteLength:r.byteLength,uri:r.uri,timeline:r.timeline,playlist:r.playlist.id,start:s,end:o},d=JSON.stringify(l),h=new u(s,o,d);h.value=l,this.segmentMetadataTrack_.addCue(h)}}},e}(X.EventTarget);function En(){}var Nk=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},G8=["video","audio"],P_=function(e,t){var i=t[e+"Buffer"];return i&&i.updating||t.queuePending[e]},z8=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];if(r.type==="mediaSource")return null;if(r.type===e)return i}return null},gy=function n(e,t){if(t.queue.length!==0){var i=0,r=t.queue[i];if(r.type==="mediaSource"){!t.updating()&&t.mediaSource.readyState!=="closed"&&(t.queue.shift(),r.action(t),r.doneFn&&r.doneFn(),n("audio",t),n("video",t));return}if(e!=="mediaSource"&&!(!t.ready()||t.mediaSource.readyState==="closed"||P_(e,t))){if(r.type!==e){if(i=z8(e,t.queue),i===null)return;r=t.queue[i]}if(t.queue.splice(i,1),t.queuePending[e]=r,r.action(e,t),!r.doneFn){t.queuePending[e]=null,n(e,t);return}}}},Bk=function(e,t){var i=t[e+"Buffer"],r=Nk(e);!i||(i.removeEventListener("updateend",t["on"+r+"UpdateEnd_"]),i.removeEventListener("error",t["on"+r+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},Br=function(e,t){return e&&t&&Array.prototype.indexOf.call(e.sourceBuffers,t)!==-1},Mi={appendBuffer:function(e,t,i){return function(r,a){var s=a[r+"Buffer"];if(!!Br(a.mediaSource,s)){a.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+r+"Buffer");try{s.appendBuffer(e)}catch(o){a.logger_("Error with code "+o.code+" "+(o.code===Mk?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+t.mediaIndex+" to "+r+"Buffer")),a.queuePending[r]=null,i(o)}}}},remove:function(e,t){return function(i,r){var a=r[i+"Buffer"];if(!!Br(r.mediaSource,a)){r.logger_("Removing "+e+" to "+t+" from "+i+"Buffer");try{a.remove(e,t)}catch{r.logger_("Remove "+e+" to "+t+" from "+i+"Buffer failed")}}}},timestampOffset:function(e){return function(t,i){var r=i[t+"Buffer"];!Br(i.mediaSource,r)||(i.logger_("Setting "+t+"timestampOffset to "+e),r.timestampOffset=e)}},callback:function(e){return function(t,i){e()}},endOfStream:function(e){return function(t){if(t.mediaSource.readyState==="open"){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(i){X.log.warn("Failed to call media source endOfStream",i)}}}},duration:function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(i){X.log.warn("Failed to set media source duration",i)}}},abort:function(){return function(e,t){if(t.mediaSource.readyState==="open"){var i=t[e+"Buffer"];if(!!Br(t.mediaSource,i)){t.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(r){X.log.warn("Failed to abort on "+e+"Buffer",r)}}}}},addSourceBuffer:function(e,t){return function(i){var r=Nk(e),a=Mo(t);i.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var s=i.mediaSource.addSourceBuffer(a);s.addEventListener("updateend",i["on"+r+"UpdateEnd_"]),s.addEventListener("error",i["on"+r+"Error_"]),i.codecs[e]=t,i[e+"Buffer"]=s}},removeSourceBuffer:function(e){return function(t){var i=t[e+"Buffer"];if(Bk(e,t),!!Br(t.mediaSource,i)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(i)}catch(r){X.log.warn("Failed to removeSourceBuffer "+e+"Buffer",r)}}}},changeType:function(e){return function(t,i){var r=i[t+"Buffer"],a=Mo(e);!Br(i.mediaSource,r)||i.codecs[t]!==e&&(i.logger_("changing "+t+"Buffer codec from "+i.codecs[t]+" to "+e),r.changeType(a),i.codecs[t]=e)}}},Ni=function(e){var t=e.type,i=e.sourceUpdater,r=e.action,a=e.doneFn,s=e.name;i.queue.push({type:t,action:r,doneFn:a,name:s}),gy(t,i)},Mw=function(e,t){return function(i){if(t.queuePending[e]){var r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t[e+"Error_"])}gy(e,t)}},Uk=function(n){de(e,n);function e(i){var r;return r=n.call(this)||this,r.mediaSource=i,r.sourceopenListener_=function(){return gy("mediaSource",Se(r))},r.mediaSource.addEventListener("sourceopen",r.sourceopenListener_),r.logger_=vr("SourceUpdater"),r.audioTimestampOffset_=0,r.videoTimestampOffset_=0,r.queue=[],r.queuePending={audio:null,video:null},r.delayedAudioAppendQueue_=[],r.videoAppendQueued_=!1,r.codecs={},r.onVideoUpdateEnd_=Mw("video",Se(r)),r.onAudioUpdateEnd_=Mw("audio",Se(r)),r.onVideoError_=function(a){r.videoError_=a},r.onAudioError_=function(a){r.audioError_=a},r.createdSourceBuffers_=!1,r.initializedEme_=!1,r.triggeredReady_=!1,r}var t=e.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(r){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(r),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(r,a){Ni({type:"mediaSource",sourceUpdater:this,action:Mi.addSourceBuffer(r,a),name:"addSourceBuffer"})},t.abort=function(r){Ni({type:r,sourceUpdater:this,action:Mi.abort(r),name:"abort"})},t.removeSourceBuffer=function(r){if(!this.canRemoveSourceBuffer()){X.log.error("removeSourceBuffer is not supported!");return}Ni({type:"mediaSource",sourceUpdater:this,action:Mi.removeSourceBuffer(r),name:"removeSourceBuffer"})},t.canRemoveSourceBuffer=function(){return!X.browser.IE_VERSION&&!X.browser.IS_FIREFOX&&$.default.MediaSource&&$.default.MediaSource.prototype&&typeof $.default.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return $.default.SourceBuffer&&$.default.SourceBuffer.prototype&&typeof $.default.SourceBuffer.prototype.changeType=="function"},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(r,a){if(!this.canChangeType()){X.log.error("changeType is not supported!");return}Ni({type:r,sourceUpdater:this,action:Mi.changeType(a),name:"changeType"})},t.addOrChangeSourceBuffers=function(r){var a=this;if(!r||typeof r!="object"||Object.keys(r).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(r).forEach(function(s){var o=r[s];if(!a.hasCreatedSourceBuffers())return a.addSourceBuffer(s,o);a.canChangeType()&&a.changeType(s,o)})},t.appendBuffer=function(r,a){var s=this,o=r.segmentInfo,u=r.type,l=r.bytes;if(this.processedAppend_=!0,u==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([r,a]),this.logger_("delayed audio append of "+l.length+" until video append");return}var d=a;if(Ni({type:u,sourceUpdater:this,action:Mi.appendBuffer(l,o||{mediaIndex:-1},d),doneFn:a,name:"appendBuffer"}),u==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var h=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+h.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,h.forEach(function(p){s.appendBuffer.apply(s,p)})}},t.audioBuffered=function(){return Br(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:X.createTimeRange()},t.videoBuffered=function(){return Br(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:X.createTimeRange()},t.buffered=function(){var r=Br(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,a=Br(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return a&&!r?this.audioBuffered():r&&!a?this.videoBuffered():c3(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(r,a){a===void 0&&(a=En),Ni({type:"mediaSource",sourceUpdater:this,action:Mi.duration(r),name:"duration",doneFn:a})},t.endOfStream=function(r,a){r===void 0&&(r=null),a===void 0&&(a=En),typeof r!="string"&&(r=void 0),Ni({type:"mediaSource",sourceUpdater:this,action:Mi.endOfStream(r),name:"endOfStream",doneFn:a})},t.removeAudio=function(r,a,s){if(s===void 0&&(s=En),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}Ni({type:"audio",sourceUpdater:this,action:Mi.remove(r,a),doneFn:s,name:"remove"})},t.removeVideo=function(r,a,s){if(s===void 0&&(s=En),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}Ni({type:"video",sourceUpdater:this,action:Mi.remove(r,a),doneFn:s,name:"remove"})},t.updating=function(){return!!(P_("audio",this)||P_("video",this))},t.audioTimestampOffset=function(r){return typeof r<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==r&&(Ni({type:"audio",sourceUpdater:this,action:Mi.timestampOffset(r),name:"timestampOffset"}),this.audioTimestampOffset_=r),this.audioTimestampOffset_},t.videoTimestampOffset=function(r){return typeof r<"u"&&this.videoBuffer&&this.videoTimestampOffset!==r&&(Ni({type:"video",sourceUpdater:this,action:Mi.timestampOffset(r),name:"timestampOffset"}),this.videoTimestampOffset_=r),this.videoTimestampOffset_},t.audioQueueCallback=function(r){!this.audioBuffer||Ni({type:"audio",sourceUpdater:this,action:Mi.callback(r),name:"callback"})},t.videoQueueCallback=function(r){!this.videoBuffer||Ni({type:"video",sourceUpdater:this,action:Mi.callback(r),name:"callback"})},t.dispose=function(){var r=this;this.trigger("dispose"),G8.forEach(function(a){r.abort(a),r.canRemoveSourceBuffer()?r.removeSourceBuffer(a):r[a+"QueueCallback"](function(){return Bk(a,r)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(X.EventTarget),Nw=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Bw=new Uint8Array(`

`.split("").map(function(n){return n.charCodeAt(0)})),K8=function(n){de(e,n);function e(){return n.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return e}(Kl(Error)),X8=function(n){de(e,n);function e(i,r){var a;return r===void 0&&(r={}),a=n.call(this,i,r)||this,a.mediaSource_=null,a.subtitlesTrack_=null,a.loaderType_="subtitle",a.featuresNativeTextTracks_=i.featuresNativeTextTracks,a.loadVttJs=i.loadVttJs,a.shouldSaveSegmentTimingInfo_=!1,a}var t=e.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return X.createTimeRanges();var r=this.subtitlesTrack_.cues,a=r[0].startTime,s=r[r.length-1].startTime;return X.createTimeRanges([[a,s]])},t.initSegmentForMap=function(r,a){if(a===void 0&&(a=!1),!r)return null;var s=zf(r),o=this.initSegments_[s];if(a&&!o&&r.bytes){var u=Bw.byteLength+r.bytes.byteLength,l=new Uint8Array(u);l.set(r.bytes),l.set(Bw,r.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:l}}return o||r},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(r){return typeof r>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=r,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},t.remove=function(r,a){id(r,a,this.subtitlesTrack_)},t.fillBuffer_=function(){var r=this,a=this.chooseNextRequest_();if(!!a){if(this.syncController_.timestampOffsetForTimeline(a.timeline)===null){var s=function(){r.state="READY",r.paused()||r.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(a)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(n.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(r){for(;r&&r.segment.empty;){if(r.mediaIndex+1>=r.playlist.segments.length){r=null;break}r=this.generateSegmentInfo_({playlist:r.playlist,mediaIndex:r.mediaIndex+1,startOfSegment:r.startOfSegment+r.duration,isSyncRequest:r.isSyncRequest})}return r},t.stopForError=function(r){this.error(r),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(r,a,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(a.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(r){r.code===Hr.TIMEOUT&&this.handleTimeout_(),r.code===Hr.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(r);return}var u=this.pendingSegment_;this.saveBandwidthRelatedStats_(u.duration,a.stats),a.key&&this.segmentKey(a.key,!0),this.state="APPENDING",this.trigger("appending");var l=u.segment;if(l.map&&(l.map.bytes=a.map.bytes),u.bytes=a.bytes,typeof $.default.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(r,a,s)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}l.requested=!0;try{this.parseVTTCues_(u)}catch(d){this.stopForError({message:d.message});return}if(this.updateTimeMapping_(u,this.syncController_.timelines[u.timeline],this.playlist_),u.cues.length?u.timingInfo={start:u.cues[0].startTime,end:u.cues[u.cues.length-1].endTime}:u.timingInfo={start:u.startOfSegment,end:u.startOfSegment+u.duration},u.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}u.byteLength=u.bytes.byteLength,this.mediaSecondsLoaded+=l.duration,u.cues.forEach(function(d){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new $.default.VTTCue(d.startTime,d.endTime,d.text):d)}),L8(this.subtitlesTrack_),this.handleAppendsDone_()},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(r){var a,s=!1;if(typeof $.default.WebVTT!="function")throw new K8;typeof $.default.TextDecoder=="function"?a=new $.default.TextDecoder("utf8"):(a=$.default.WebVTT.StringDecoder(),s=!0);var o=new $.default.WebVTT.Parser($.default,$.default.vttjs,a);if(r.cues=[],r.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=r.cues.push.bind(r.cues),o.ontimestampmap=function(d){r.timestampmap=d},o.onparsingerror=function(d){X.log.warn("Error encountered when parsing cues: "+d.message)},r.segment.map){var u=r.segment.map.bytes;s&&(u=Nw(u)),o.parse(u)}var l=r.bytes;s&&(l=Nw(l)),o.parse(l),o.flush()},t.updateTimeMapping_=function(r,a,s){var o=r.segment;if(!!a){if(!r.cues.length){o.empty=!0;return}var u=r.timestampmap,l=u.MPEGTS/sd.ONE_SECOND_IN_TS-u.LOCAL+a.mapping;if(r.cues.forEach(function(p){p.startTime+=l,p.endTime+=l}),!s.syncInfo){var d=r.cues[0].startTime,h=r.cues[r.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+r.mediaIndex,time:Math.min(d,h-o.duration)}}}},e}(I_),Y8=function(e,t){for(var i=e.cues,r=0;r<i.length;r++){var a=i[r];if(t>=a.adStartTime&&t<=a.adEndTime)return a}return null},Q8=function(e,t,i){if(i===void 0&&(i=0),!!e.segments)for(var r=i,a,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a||(a=Y8(t,r+o.duration/2)),a){if("cueIn"in o){a.endTime=r,a.adEndTime=r,r+=o.duration,a=null;continue}if(r<a.endTime){r+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&(a=new $.default.VTTCue(r,r+o.duration,o.cueOut),a.adStartTime=r,a.adEndTime=r+parseFloat(o.cueOut),t.addCue(a)),"cueOutCont"in o){var u=o.cueOutCont.split("/").map(parseFloat),l=u[0],d=u[1];a=new $.default.VTTCue(r,r+o.duration,""),a.adStartTime=r-l,a.adEndTime=a.adStartTime+d,t.addCue(a)}r+=o.duration}},J8=86400,Uw=[{name:"VOD",run:function(e,t,i,r,a){if(i!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(e,t,i,r,a){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var s=null,o=null,u=b_(t);a=a||0;for(var l=0;l<u.length;l++){var d=t.endList||a===0?l:u.length-(l+1),h=u[d],p=h.segment,_=e.timelineToDatetimeMappings[p.timeline];if(!(!_||!p.dateTimeObject)){var D=p.dateTimeObject.getTime()/1e3,C=D+_;if(p.parts&&typeof h.partIndex=="number")for(var S=0;S<h.partIndex;S++)C+=p.parts[S].duration;var I=Math.abs(a-C);if(o!==null&&(I===0||o<I))break;o=I,s={time:C,segmentIndex:h.segmentIndex,partIndex:h.partIndex}}}return s}},{name:"Segment",run:function(e,t,i,r,a){var s=null,o=null;a=a||0;for(var u=b_(t),l=0;l<u.length;l++){var d=t.endList||a===0?l:u.length-(l+1),h=u[d],p=h.segment,_=h.part&&h.part.start||p&&p.start;if(p.timeline===r&&typeof _<"u"){var D=Math.abs(a-_);if(o!==null&&o<D)break;(!s||o===null||o>=D)&&(o=D,s={time:_,segmentIndex:h.segmentIndex,partIndex:h.partIndex})}}return s}},{name:"Discontinuity",run:function(e,t,i,r,a){var s=null;if(a=a||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,u=0;u<t.discontinuityStarts.length;u++){var l=t.discontinuityStarts[u],d=t.discontinuitySequence+u+1,h=e.discontinuities[d];if(h){var p=Math.abs(a-h.time);if(o!==null&&o<p)break;(!s||o===null||o>=p)&&(o=p,s={time:h.time,segmentIndex:l,partIndex:null})}}return s}},{name:"Playlist",run:function(e,t,i,r,a){if(t.syncInfo){var s={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null};return s}return null}}],Z8=function(n){de(e,n);function e(i){var r;return r=n.call(this)||this,r.timelines=[],r.discontinuities=[],r.timelineToDatetimeMappings={},r.logger_=vr("SyncController"),r}var t=e.prototype;return t.getSyncPoint=function(r,a,s,o){var u=this.runStrategies_(r,a,s,o);return u.length?this.selectSyncPoint_(u,{key:"time",value:o}):null},t.getExpiredTime=function(r,a){if(!r||!r.segments)return null;var s=this.runStrategies_(r,a,r.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+nd({defaultDuration:r.targetDuration,durationList:r.segments,startIndex:o.segmentIndex,endIndex:0}))},t.runStrategies_=function(r,a,s,o){for(var u=[],l=0;l<Uw.length;l++){var d=Uw[l],h=d.run(this,r,a,s,o);h&&(h.strategy=d.name,u.push({strategy:d.name,syncPoint:h}))}return u},t.selectSyncPoint_=function(r,a){for(var s=r[0].syncPoint,o=Math.abs(r[0].syncPoint[a.key]-a.value),u=r[0].strategy,l=1;l<r.length;l++){var d=Math.abs(r[l].syncPoint[a.key]-a.value);d<o&&(o=d,s=r[l].syncPoint,u=r[l].strategy)}return this.logger_("syncPoint for ["+a.key+": "+a.value+"] chosen with strategy"+(" ["+u+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},t.saveExpiredSegmentInfo=function(r,a){var s=a.mediaSequence-r.mediaSequence;if(s>J8){X.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var u=r.segments[o];if(u&&typeof u.start<"u"){a.syncInfo={mediaSequence:r.mediaSequence+o,time:u.start},this.logger_("playlist refresh sync: [time:"+a.syncInfo.time+","+(" mediaSequence: "+a.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(r){if(this.timelineToDatetimeMappings={},r.segments&&r.segments.length&&r.segments[0].dateTimeObject){var a=r.segments[0],s=a.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[a.timeline]=-s}},t.saveSegmentTimingInfo=function(r){var a=r.segmentInfo,s=r.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(a,a.timingInfo,s),u=a.segment;o&&(this.saveDiscontinuitySyncInfo_(a),a.playlist.syncInfo||(a.playlist.syncInfo={mediaSequence:a.playlist.mediaSequence+a.mediaIndex,time:u.start}));var l=u.dateTimeObject;u.discontinuity&&s&&l&&(this.timelineToDatetimeMappings[u.timeline]=-(l.getTime()/1e3))},t.timestampOffsetForTimeline=function(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].time},t.mappingForTimeline=function(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].mapping},t.calculateSegmentTimeMapping_=function(r,a,s){var o=r.segment,u=r.part,l=this.timelines[r.timeline],d,h;if(typeof r.timestampOffset=="number")l={time:r.startOfSegment,mapping:r.startOfSegment-a.start},s&&(this.timelines[r.timeline]=l,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+r.timeline+": "+("[time: "+l.time+"] [mapping: "+l.mapping+"]"))),d=r.startOfSegment,h=a.end+l.mapping;else if(l)d=a.start+l.mapping,h=a.end+l.mapping;else return!1;return u&&(u.start=d,u.end=h),(!o.start||d<o.start)&&(o.start=d),o.end=h,!0},t.saveDiscontinuitySyncInfo_=function(r){var a=r.playlist,s=r.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(a.discontinuityStarts&&a.discontinuityStarts.length)for(var o=0;o<a.discontinuityStarts.length;o++){var u=a.discontinuityStarts[o],l=a.discontinuitySequence+o+1,d=u-r.mediaIndex,h=Math.abs(d);if(!this.discontinuities[l]||this.discontinuities[l].accuracy>h){var p=void 0;d<0?p=s.start-nd({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:r.mediaIndex,endIndex:u}):p=s.end+nd({defaultDuration:a.targetDuration,durationList:a.segments,startIndex:r.mediaIndex+1,endIndex:u}),this.discontinuities[l]={time:p,accuracy:h}}}},t.dispose=function(){this.trigger("dispose"),this.off()},e}(X.EventTarget),e4=function(n){de(e,n);function e(){var i;return i=n.call(this)||this,i.pendingTimelineChanges_={},i.lastTimelineChanges_={},i}var t=e.prototype;return t.clearPendingTimelineChange=function(r){this.pendingTimelineChanges_[r]=null,this.trigger("pendingtimelinechange")},t.pendingTimelineChange=function(r){var a=r.type,s=r.from,o=r.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[a]={type:a,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[a]},t.lastTimelineChange=function(r){var a=r.type,s=r.from,o=r.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[a]={type:a,from:s,to:o},delete this.pendingTimelineChanges_[a],this.trigger("timelinechange")),this.lastTimelineChanges_[a]},t.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(X.EventTarget),t4=Ek(Ck(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e(M,O,K){return K={path:O,exports:{},require:function(V,J){return t(V,J??K.path)}},M(K,K.exports),K.exports}function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var i=e(function(M){function O(z,V){for(var J=0;J<V.length;J++){var Q=V[J];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(z,Q.key,Q)}}function K(z,V,J){return V&&O(z.prototype,V),J&&O(z,J),z}M.exports=K,M.exports.default=M.exports,M.exports.__esModule=!0}),r=e(function(M){function O(K,z){return M.exports=O=Object.setPrototypeOf||function(J,Q){return J.__proto__=Q,J},M.exports.default=M.exports,M.exports.__esModule=!0,O(K,z)}M.exports=O,M.exports.default=M.exports,M.exports.__esModule=!0}),a=e(function(M){function O(K,z){K.prototype=Object.create(z.prototype),K.prototype.constructor=K,r(K,z)}M.exports=O,M.exports.default=M.exports,M.exports.__esModule=!0}),s=function(){function M(){this.listeners={}}var O=M.prototype;return O.on=function(z,V){this.listeners[z]||(this.listeners[z]=[]),this.listeners[z].push(V)},O.off=function(z,V){if(!this.listeners[z])return!1;var J=this.listeners[z].indexOf(V);return this.listeners[z]=this.listeners[z].slice(0),this.listeners[z].splice(J,1),J>-1},O.trigger=function(z){var V=this.listeners[z];if(!!V)if(arguments.length===2)for(var J=V.length,Q=0;Q<J;++Q)V[Q].call(this,arguments[1]);else for(var oe=Array.prototype.slice.call(arguments,1),ne=V.length,ae=0;ae<ne;++ae)V[ae].apply(this,oe)},O.dispose=function(){this.listeners={}},O.pipe=function(z){this.on("data",function(V){z.push(V)})},M}();function o(M){return M.subarray(0,M.byteLength-M[M.byteLength-1])}var u=function(){var O=[[[],[],[],[],[]],[[],[],[],[],[]]],K=O[0],z=O[1],V=K[4],J=z[4],Q,oe,ne,ae=[],ye=[],Pe,xe,Ae,Be,ht,Oe;for(Q=0;Q<256;Q++)ye[(ae[Q]=Q<<1^(Q>>7)*283)^Q]=Q;for(oe=ne=0;!V[oe];oe^=Pe||1,ne=ye[ne]||1)for(Be=ne^ne<<1^ne<<2^ne<<3^ne<<4,Be=Be>>8^Be&255^99,V[oe]=Be,J[Be]=oe,Ae=ae[xe=ae[Pe=ae[oe]]],Oe=Ae*16843009^xe*65537^Pe*257^oe*16843008,ht=ae[Be]*257^Be*16843008,Q=0;Q<4;Q++)K[Q][oe]=ht=ht<<24^ht>>>8,z[Q][Be]=Oe=Oe<<24^Oe>>>8;for(Q=0;Q<5;Q++)K[Q]=K[Q].slice(0),z[Q]=z[Q].slice(0);return O},l=null,d=function(){function M(K){l||(l=u()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];var z,V,J,Q=this._tables[0][4],oe=this._tables[1],ne=K.length,ae=1;if(ne!==4&&ne!==6&&ne!==8)throw new Error("Invalid aes key size");var ye=K.slice(0),Pe=[];for(this._key=[ye,Pe],z=ne;z<4*ne+28;z++)J=ye[z-1],(z%ne===0||ne===8&&z%ne===4)&&(J=Q[J>>>24]<<24^Q[J>>16&255]<<16^Q[J>>8&255]<<8^Q[J&255],z%ne===0&&(J=J<<8^J>>>24^ae<<24,ae=ae<<1^(ae>>7)*283)),ye[z]=ye[z-ne]^J;for(V=0;z;V++,z--)J=ye[V&3?z:z-4],z<=4||V<4?Pe[V]=J:Pe[V]=oe[0][Q[J>>>24]]^oe[1][Q[J>>16&255]]^oe[2][Q[J>>8&255]]^oe[3][Q[J&255]]}var O=M.prototype;return O.decrypt=function(z,V,J,Q,oe,ne){var ae=this._key[1],ye=z^ae[0],Pe=Q^ae[1],xe=J^ae[2],Ae=V^ae[3],Be,ht,Oe,$i=ae.length/4-2,Et,fi=4,tr=this._tables[1],_r=tr[0],wi=tr[1],On=tr[2],Ln=tr[3],Rn=tr[4];for(Et=0;Et<$i;Et++)Be=_r[ye>>>24]^wi[Pe>>16&255]^On[xe>>8&255]^Ln[Ae&255]^ae[fi],ht=_r[Pe>>>24]^wi[xe>>16&255]^On[Ae>>8&255]^Ln[ye&255]^ae[fi+1],Oe=_r[xe>>>24]^wi[Ae>>16&255]^On[ye>>8&255]^Ln[Pe&255]^ae[fi+2],Ae=_r[Ae>>>24]^wi[ye>>16&255]^On[Pe>>8&255]^Ln[xe&255]^ae[fi+3],fi+=4,ye=Be,Pe=ht,xe=Oe;for(Et=0;Et<4;Et++)oe[(3&-Et)+ne]=Rn[ye>>>24]<<24^Rn[Pe>>16&255]<<16^Rn[xe>>8&255]<<8^Rn[Ae&255]^ae[fi++],Be=ye,ye=Pe,Pe=xe,xe=Ae,Ae=Be},M}(),h=function(M){a(O,M);function O(){var z;return z=M.call(this,s)||this,z.jobs=[],z.delay=1,z.timeout_=null,z}var K=O.prototype;return K.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},K.push=function(V){this.jobs.push(V),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},O}(s),p=function(O){return O<<24|(O&65280)<<8|(O&16711680)>>8|O>>>24},_=function(O,K,z){var V=new Int32Array(O.buffer,O.byteOffset,O.byteLength>>2),J=new d(Array.prototype.slice.call(K)),Q=new Uint8Array(O.byteLength),oe=new Int32Array(Q.buffer),ne,ae,ye,Pe,xe,Ae,Be,ht,Oe;for(ne=z[0],ae=z[1],ye=z[2],Pe=z[3],Oe=0;Oe<V.length;Oe+=4)xe=p(V[Oe]),Ae=p(V[Oe+1]),Be=p(V[Oe+2]),ht=p(V[Oe+3]),J.decrypt(xe,Ae,Be,ht,oe,Oe),oe[Oe]=p(oe[Oe]^ne),oe[Oe+1]=p(oe[Oe+1]^ae),oe[Oe+2]=p(oe[Oe+2]^ye),oe[Oe+3]=p(oe[Oe+3]^Pe),ne=xe,ae=Ae,ye=Be,Pe=ht;return Q},D=function(){function M(K,z,V,J){var Q=M.STEP,oe=new Int32Array(K.buffer),ne=new Uint8Array(K.byteLength),ae=0;for(this.asyncStream_=new h,this.asyncStream_.push(this.decryptChunk_(oe.subarray(ae,ae+Q),z,V,ne)),ae=Q;ae<oe.length;ae+=Q)V=new Uint32Array([p(oe[ae-4]),p(oe[ae-3]),p(oe[ae-2]),p(oe[ae-1])]),this.asyncStream_.push(this.decryptChunk_(oe.subarray(ae,ae+Q),z,V,ne));this.asyncStream_.push(function(){J(null,o(ne))})}var O=M.prototype;return O.decryptChunk_=function(z,V,J,Q){return function(){var oe=_(z,V,J);Q.set(oe,z.byteOffset)}},i(M,null,[{key:"STEP",get:function(){return 32e3}}]),M}(),C;typeof window<"u"?C=window:typeof n<"u"?C=n:typeof self<"u"?C=self:C={};var S=C,I=function(O){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(O):O&&O.buffer instanceof ArrayBuffer},L=S.BigInt||Number;L("0x1"),L("0x100"),L("0x10000"),L("0x1000000"),L("0x100000000"),L("0x10000000000"),L("0x1000000000000"),L("0x100000000000000"),L("0x10000000000000000");var G=function(O){var K={};return Object.keys(O).forEach(function(z){var V=O[z];I(V)?K[z]={bytes:V.buffer,byteOffset:V.byteOffset,byteLength:V.byteLength}:K[z]=V}),K};self.onmessage=function(M){var O=M.data,K=new Uint8Array(O.encrypted.bytes,O.encrypted.byteOffset,O.encrypted.byteLength),z=new Uint32Array(O.key.bytes,O.key.byteOffset,O.key.byteLength/4),V=new Uint32Array(O.iv.bytes,O.iv.byteOffset,O.iv.byteLength/4);new D(K,z,V,function(J,Q){self.postMessage(G({source:O.source,decrypted:Q}),[Q.buffer])})}})),i4=Dk(t4),r4=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Qf=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},F_=function(e,t){t.activePlaylistLoader=e,e.load()},n4=function(e,t){return function(){var i=t.segmentLoaders,r=i[e],a=i.main,s=t.mediaTypes[e],o=s.activeTrack(),u=s.getActiveGroup(),l=s.activePlaylistLoader,d=s.lastGroup_;if(!(u&&d&&u.id===d.id)&&(s.lastGroup_=u,s.lastTrack_=o,Qf(r,s),!(!u||u.isMasterPlaylist))){if(!u.playlistLoader){l&&a.resetEverything();return}r.resyncLoader(),F_(u.playlistLoader,s)}}},a4=function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e];r.lastGroup_=null,i.abort(),i.pause()}},s4=function(e,t){return function(){var i=t.masterPlaylistLoader,r=t.segmentLoaders,a=r[e],s=r.main,o=t.mediaTypes[e],u=o.activeTrack(),l=o.getActiveGroup(),d=o.activePlaylistLoader,h=o.lastTrack_;if(!(h&&u&&h.id===u.id)&&(o.lastGroup_=l,o.lastTrack_=u,Qf(a,o),!!l)){if(l.isMasterPlaylist){if(!u||!h||u.id===h.id)return;var p=t.vhs.masterPlaylistController_,_=p.selectPlaylist();if(p.media()===_)return;o.logger_("track change. Switching master audio from "+h.id+" to "+u.id),i.pause(),s.resetEverything(),p.fastQualityChange_(_);return}if(e==="AUDIO"){if(!l.playlistLoader){s.setAudio(!0),s.resetEverything();return}a.setAudio(!0),s.setAudio(!1)}if(d===l.playlistLoader){F_(l.playlistLoader,o);return}a.track&&a.track(u),a.resetEverything(),F_(l.playlistLoader,o)}}},Jf={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e],a=t.blacklistCurrentPlaylist;Qf(i,r);var s=r.activeTrack(),o=r.activeGroup(),u=(o.filter(function(h){return h.default})[0]||o[0]).id,l=r.tracks[u];if(s===l){a({message:"Problem encountered loading the default audio track."});return}X.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var d in r.tracks)r.tracks[d].enabled=r.tracks[d]===l;r.onTrackChanged()}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e];X.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Qf(i,r);var a=r.activeTrack();a&&(a.mode="disabled"),r.onTrackChanged()}}},jw={AUDIO:function(e,t,i){if(!!t){var r=i.tech,a=i.requestOptions,s=i.segmentLoaders[e];t.on("loadedmetadata",function(){var o=t.media();s.playlist(o,a),(!r.paused()||o.endList&&r.preload()!=="none")&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),a),r.paused()||s.load()}),t.on("error",Jf[e](e,i))}},SUBTITLES:function(e,t,i){var r=i.tech,a=i.requestOptions,s=i.segmentLoaders[e],o=i.mediaTypes[e];t.on("loadedmetadata",function(){var u=t.media();s.playlist(u,a),s.track(o.activeTrack()),(!r.paused()||u.endList&&r.preload()!=="none")&&s.load()}),t.on("loadedplaylist",function(){s.playlist(t.media(),a),r.paused()||s.load()}),t.on("error",Jf[e](e,i))}},o4={AUDIO:function(e,t){var i=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,u=t.mediaTypes[e],l=u.groups,d=u.tracks,h=u.logger_,p=t.masterPlaylistLoader,_=_d(p.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},_&&(o[e].main.default.playlists=p.master.playlists));for(var D in o[e]){l[D]||(l[D]=[]);for(var C in o[e][D]){var S=o[e][D][C],I=void 0;if(_?(h("AUDIO group '"+D+"' label '"+C+"' is a master playlist"),S.isMasterPlaylist=!0,I=null):r==="vhs-json"&&S.playlists?I=new Vo(S.playlists[0],i,s):S.resolvedUri?I=new Vo(S.resolvedUri,i,s):S.playlists&&r==="dash"?I=new A_(S.playlists[0],i,s,p):I=null,S=X.mergeOptions({id:C,playlistLoader:I},S),jw[e](e,S.playlistLoader,t),l[D].push(S),typeof d[C]>"u"){var L=new X.AudioTrack({id:C,kind:r4(S),enabled:!1,language:S.language,default:S.default,label:C});d[C]=L}}}a.on("error",Jf[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,r=t.vhs,a=t.sourceType,s=t.segmentLoaders[e],o=t.requestOptions,u=t.master.mediaGroups,l=t.mediaTypes[e],d=l.groups,h=l.tracks,p=t.masterPlaylistLoader;for(var _ in u[e]){d[_]||(d[_]=[]);for(var D in u[e][_])if(!u[e][_][D].forced){var C=u[e][_][D],S=void 0;if(a==="hls")S=new Vo(C.resolvedUri,r,o);else if(a==="dash"){var I=C.playlists.filter(function(G){return G.excludeUntil!==1/0});if(!I.length)return;S=new A_(C.playlists[0],r,o,p)}else a==="vhs-json"&&(S=new Vo(C.playlists?C.playlists[0]:C.resolvedUri,r,o));if(C=X.mergeOptions({id:D,playlistLoader:S},C),jw[e](e,C.playlistLoader,t),d[_].push(C),typeof h[D]>"u"){var L=i.addRemoteTextTrack({id:D,kind:"subtitles",default:C.default&&C.autoselect,language:C.language,label:D},!1).track;h[D]=L}}}s.on("error",Jf[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,r=t.master.mediaGroups,a=t.mediaTypes[e],s=a.groups,o=a.tracks;for(var u in r[e]){s[u]||(s[u]=[]);for(var l in r[e][u]){var d=r[e][u][l];if(!!/^(?:CC|SERVICE)/.test(d.instreamId)){var h=i.options_.vhs&&i.options_.vhs.captionServices||{},p={label:l,language:d.language,instreamId:d.instreamId,default:d.default&&d.autoselect};if(h[p.instreamId]&&(p=X.mergeOptions(p,h[p.instreamId])),p.default===void 0&&delete p.default,s[u].push(X.mergeOptions({id:l},d)),typeof o[l]>"u"){var _=i.addRemoteTextTrack({id:p.instreamId,kind:"captions",default:p.default,language:p.language,label:p.label},!1).track;o[l]=_}}}}}},u4=function n(e,t){for(var i=0;i<e.length;i++)if(hy(t,e[i])||e[i].playlists&&n(e[i].playlists,t))return!0;return!1},l4=function(e,t){return function(i){var r=t.masterPlaylistLoader,a=t.mediaTypes[e].groups,s=r.media();if(!s)return null;var o=null;s.attributes[e]&&(o=a[s.attributes[e]]);var u=Object.keys(a);if(!o)if(e==="AUDIO"&&u.length>1&&_d(t.master))for(var l=0;l<u.length;l++){var d=a[u[l]];if(u4(d,s)){o=d;break}}else a.main?o=a.main:u.length===1&&(o=a[u[0]]);return typeof i>"u"?o:i===null||!o?null:o.filter(function(h){return h.id===i.id})[0]||null}},d4={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var r in i)if(i[r].enabled)return i[r];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var r in i)if(i[r].mode==="showing"||i[r].mode==="hidden")return i[r];return null}}},c4=function(e,t){var i=t.mediaTypes;return function(){var r=i[e].activeTrack();return r?i[e].activeGroup(r):null}},h4=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(D){o4[D](D,e)});var t=e.mediaTypes,i=e.masterPlaylistLoader,r=e.tech,a=e.vhs,s=e.segmentLoaders,o=s.AUDIO,u=s.main;["AUDIO","SUBTITLES"].forEach(function(D){t[D].activeGroup=l4(D,e),t[D].activeTrack=d4[D](D,e),t[D].onGroupChanged=n4(D,e),t[D].onGroupChanging=a4(D,e),t[D].onTrackChanged=s4(D,e),t[D].getActiveGroup=c4(D,e)});var l=t.AUDIO.activeGroup();if(l){var d=(l.filter(function(D){return D.default})[0]||l[0]).id;t.AUDIO.tracks[d].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();var h=t.AUDIO.getActiveGroup();h.playlistLoader?(u.setAudio(!1),o.setAudio(!0)):u.setAudio(!0)}i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(D){return t[D].onGroupChanged()})}),i.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(D){return t[D].onGroupChanging()})});var p=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})};r.audioTracks().addEventListener("change",p),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),a.on("dispose",function(){r.audioTracks().removeEventListener("change",p),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(var _ in t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[_])},f4=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:En,activeTrack:En,getActiveGroup:En,onGroupChanged:En,onTrackChanged:En,lastTrack_:null,logger_:vr("MediaGroups["+t+"]")}}),e},p4=60*2,bn,m4=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],g4=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},v4=function(e){var t=e.currentPlaylist,i=e.buffered,r=e.currentTime,a=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,u=e.duration,l=e.experimentalBufferBasedABR,d=e.log;if(!a)return X.log.warn("We received no playlist to switch to. Please check your stream."),!1;var h="allowing switch "+(t&&t.id||"null")+" -> "+a.id;if(!t)return d(h+" as current playlist is not set"),!0;if(a.id===t.id)return!1;var p=Boolean($o(i,r).length);if(!t.endList)return!p&&typeof t.partTargetDuration=="number"?(d("not "+h+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(d(h+" as current playlist is live"),!0);var _=ly(i,r),D=l?Ot.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ot.MAX_BUFFER_LOW_WATER_LINE;if(u<D)return d(h+" as duration < max low water line ("+u+" < "+D+")"),!0;var C=a.attributes.BANDWIDTH,S=t.attributes.BANDWIDTH;if(C<S&&(!l||_<o)){var I=h+" as next bandwidth < current bandwidth ("+C+" < "+S+")";return l&&(I+=" and forwardBuffer < bufferHighWaterLine ("+_+" < "+o+")"),d(I),!0}if((!l||C>S)&&_>=s){var L=h+" as forwardBuffer >= bufferLowWaterLine ("+_+" >= "+s+")";return l&&(L+=" and next bandwidth > current bandwidth ("+C+" > "+S+")"),d(L),!0}return d("not "+h+" as no switching criteria met"),!1},_4=function(n){de(e,n);function e(i){var r;r=n.call(this)||this;var a=i.src,s=i.handleManifestRedirects,o=i.withCredentials,u=i.tech,l=i.bandwidth,d=i.externVhs,h=i.useCueTags,p=i.blacklistDuration,_=i.enableLowInitialPlaylist,D=i.sourceType,C=i.cacheEncryptionKeys,S=i.experimentalBufferBasedABR,I=i.experimentalLeastPixelDiffSelector,L=i.captionServices;if(!a)throw new Error("A non-empty playlist URL or JSON manifest string is required");var G=i.maxPlaylistRetries;(G===null||typeof G>"u")&&(G=1/0),bn=d,r.experimentalBufferBasedABR=Boolean(S),r.experimentalLeastPixelDiffSelector=Boolean(I),r.withCredentials=o,r.tech_=u,r.vhs_=u.vhs,r.sourceType_=D,r.useCueTags_=h,r.blacklistDuration=p,r.maxPlaylistRetries=G,r.enableLowInitialPlaylist=_,r.useCueTags_&&(r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues"),r.cueTagsTrack_.inBandMetadataTrackDispatchType=""),r.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:G,timeout:null},r.on("error",r.pauseLoading),r.mediaTypes_=f4(),r.mediaSource=new $.default.MediaSource,r.handleDurationChange_=r.handleDurationChange_.bind(Se(r)),r.handleSourceOpen_=r.handleSourceOpen_.bind(Se(r)),r.handleSourceEnded_=r.handleSourceEnded_.bind(Se(r)),r.mediaSource.addEventListener("durationchange",r.handleDurationChange_),r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_),r.mediaSource.addEventListener("sourceended",r.handleSourceEnded_),r.seekable_=X.createTimeRanges(),r.hasPlayed_=!1,r.syncController_=new Z8(i),r.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,r.decrypter_=new i4,r.sourceUpdater_=new Uk(r.mediaSource),r.inbandTextTracks_={},r.timelineChangeController_=new e4;var M={vhs:r.vhs_,parse708captions:i.parse708captions,useDtsForTimestampOffset:i.useDtsForTimestampOffset,captionServices:L,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},duration:function(){return r.duration()},hasPlayed:function(){return r.hasPlayed_},goalBufferLength:function(){return r.goalBufferLength()},bandwidth:l,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_,inbandTextTracks:r.inbandTextTracks_,cacheEncryptionKeys:C,sourceUpdater:r.sourceUpdater_,timelineChangeController:r.timelineChangeController_,experimentalExactManifestTimings:i.experimentalExactManifestTimings};r.masterPlaylistLoader_=r.sourceType_==="dash"?new A_(a,r.vhs_,r.requestOptions_):new Vo(a,r.vhs_,r.requestOptions_),r.setupMasterPlaylistLoaderListeners_(),r.mainSegmentLoader_=new I_(X.mergeOptions(M,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),i),r.audioSegmentLoader_=new I_(X.mergeOptions(M,{loaderType:"audio"}),i),r.subtitleSegmentLoader_=new X8(X.mergeOptions(M,{loaderType:"vtt",featuresNativeTextTracks:r.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(z,V){function J(){u.off("vttjserror",Q),z()}function Q(){u.off("vttjsloaded",J),V()}u.one("vttjsloaded",J),u.one("vttjserror",Q),u.addWebVttScript_()})}}),i),r.setupSegmentLoaderListeners_(),r.experimentalBufferBasedABR&&(r.masterPlaylistLoader_.one("loadedplaylist",function(){return r.startABRTimer_()}),r.tech_.on("pause",function(){return r.stopABRTimer_()}),r.tech_.on("play",function(){return r.startABRTimer_()})),m4.forEach(function(K){r[K+"_"]=g4.bind(Se(r),K)}),r.logger_=vr("MPC"),r.triggeredFmp4Usage=!1,r.tech_.preload()==="none"?(r.loadOnPlay_=function(){r.loadOnPlay_=null,r.masterPlaylistLoader_.load()},r.tech_.one("play",r.loadOnPlay_)):r.masterPlaylistLoader_.load(),r.timeToLoadedData__=-1,r.mainAppendsToLoadedData__=-1,r.audioAppendsToLoadedData__=-1;var O=r.tech_.preload()==="none"?"play":"loadstart";return r.tech_.one(O,function(){var K=Date.now();r.tech_.one("loadeddata",function(){r.timeToLoadedData__=Date.now()-K,r.mainAppendsToLoadedData__=r.mainSegmentLoader_.mediaAppends,r.audioAppendsToLoadedData__=r.audioSegmentLoader_.mediaAppends})}),r}var t=e.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var r=this.mainAppendsToLoadedData_(),a=this.audioAppendsToLoadedData_();return r===-1||a===-1?-1:r+a},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(r){r===void 0&&(r="abr");var a=this.selectPlaylist();a&&this.shouldSwitchToMedia_(a)&&this.switchMedia_(a,r)},t.switchMedia_=function(r,a,s){var o=this.media(),u=o&&(o.id||o.uri),l=r.id||r.uri;u&&u!==l&&(this.logger_("switch media "+u+" -> "+l+" from "+a),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+a})),this.masterPlaylistLoader_.media(r,s)},t.startABRTimer_=function(){var r=this;this.stopABRTimer_(),this.abrTimer_=$.default.setInterval(function(){return r.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||($.default.clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var r=this.master(),a=r&&r.playlists||[];if(!r||!r.mediaGroups||!r.mediaGroups.AUDIO)return a;var s=r.mediaGroups.AUDIO,o=Object.keys(s),u;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)u=this.mediaTypes_.AUDIO.activeTrack();else{var l=s.main||o.length&&s[o[0]];for(var d in l)if(l[d].default){u={label:d};break}}if(!u)return a;var h=[];for(var p in s)if(s[p][u.label]){var _=s[p][u.label];if(_.playlists&&_.playlists.length)h.push.apply(h,_.playlists);else if(_.uri)h.push(_);else if(r.playlists.length)for(var D=0;D<r.playlists.length;D++){var C=r.playlists[D];C.attributes&&C.attributes.AUDIO&&C.attributes.AUDIO===p&&h.push(C)}}return h.length?h:a},t.setupMasterPlaylistLoaderListeners_=function(){var r=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var a=r.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;S_(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=s,a.endList&&r.tech_.preload()!=="none"&&(r.mainSegmentLoader_.playlist(a,r.requestOptions_),r.mainSegmentLoader_.load()),h4({sourceType:r.sourceType_,segmentLoaders:{AUDIO:r.audioSegmentLoader_,SUBTITLES:r.subtitleSegmentLoader_,main:r.mainSegmentLoader_},tech:r.tech_,requestOptions:r.requestOptions_,masterPlaylistLoader:r.masterPlaylistLoader_,vhs:r.vhs_,master:r.master(),mediaTypes:r.mediaTypes_,blacklistCurrentPlaylist:r.blacklistCurrentPlaylist.bind(r)}),r.triggerPresenceUsage_(r.master(),a),r.setupFirstPlay(),!r.mediaTypes_.AUDIO.activePlaylistLoader||r.mediaTypes_.AUDIO.activePlaylistLoader.media()?r.trigger("selectedinitialmedia"):r.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){r.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){r.loadOnPlay_&&r.tech_.off("play",r.loadOnPlay_);var a=r.masterPlaylistLoader_.media();if(!a){r.excludeUnsupportedVariants_();var s;if(r.enableLowInitialPlaylist&&(s=r.selectInitialPlaylist()),s||(s=r.selectPlaylist()),!s||!r.shouldSwitchToMedia_(s))return;r.initialMedia_=s,r.switchMedia_(r.initialMedia_,"initial");var o=r.sourceType_==="vhs-json"&&r.initialMedia_.segments;if(!o)return;a=r.initialMedia_}r.handleUpdatedMediaPlaylist(a)}),this.masterPlaylistLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){r.mainSegmentLoader_.abort(),r.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var a=r.masterPlaylistLoader_.media(),s=a.targetDuration*1.5*1e3;S_(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=s,r.masterPlaylistLoader_.load(),r.mainSegmentLoader_.playlist(a,r.requestOptions_),r.mainSegmentLoader_.load(),r.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var a=r.masterPlaylistLoader_.media();if(a.lastExcludeReason_!=="playlist-unchanged"){var s=r.stuckAtPlaylistEnd_(a);s&&(r.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),r.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){r.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),r.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){r.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),r.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(r){this.useCueTags_&&this.updateAdCues_(r),this.mainSegmentLoader_.playlist(r,this.requestOptions_),this.updateDuration(!r.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(r,a){var s=r.mediaGroups||{},o=!0,u=Object.keys(s.AUDIO);for(var l in s.AUDIO)for(var d in s.AUDIO[l]){var h=s.AUDIO[l][d];h.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),bn.Playlist.isAes(a)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),u.length&&Object.keys(s.AUDIO[u[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(r){var a=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),u=this.bufferHighWaterLine(),l=this.tech_.buffered();return v4({buffered:l,currentTime:s,currentPlaylist:a,nextPlaylist:r,bufferLowWaterLine:o,bufferHighWaterLine:u,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var r=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){r.checkABR_("bandwidthupdate"),r.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){r.experimentalBufferBasedABR&&r.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){r.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){r.error=r.mainSegmentLoader_.error_,r.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){r.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),r.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){r.error=r.audioSegmentLoader_.error_,r.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){r.logger_("main segment loader ended"),r.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){r.experimentalBufferBasedABR||(r.delegateLoaders_("all",["abort"]),r.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},p4))});var a=function(){if(!r.sourceUpdater_.hasCreatedSourceBuffers())return r.tryToCreateSourceBuffers_();var o=r.getCodecsOrExclude_();!o||r.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",a),this.audioSegmentLoader_.on("trackinfo",a),this.mainSegmentLoader_.on("fmp4",function(){r.triggeredFmp4Usage||(r.tech_.trigger({type:"usage",name:"vhs-fmp4"}),r.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){r.triggeredFmp4Usage||(r.tech_.trigger({type:"usage",name:"vhs-fmp4"}),r.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){r.logger_("audioSegmentLoader ended"),r.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(r){r===void 0&&(r=this.selectPlaylist()),this.fastQualityChange_(r)},t.fastQualityChange_=function(r){var a=this;if(r===void 0&&(r=this.selectPlaylist()),r===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(r,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){X.browser.IE_VERSION||X.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())})},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var r=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<r.start(0))return this.tech_.setCurrentTime(r.end(r.length-1))}},t.setupFirstPlay=function(){var r=this,a=this.masterPlaylistLoader_.media();if(!a||this.tech_.paused()||this.hasPlayed_)return!1;if(!a.endList){var s=this.seekable();if(!s.length)return!1;if(X.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){r.trigger("firstplay"),r.tech_.setCurrentTime(s.end(0)),r.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var r=this.tech_.play();typeof r<"u"&&typeof r.then=="function"&&r.then(null,function(a){})}this.trigger("sourceopen")},t.handleSourceEnded_=function(){if(!!this.inbandTextTracks_.metadataTrack_){var r=this.inbandTextTracks_.metadataTrack_.cues;if(!(!r||!r.length)){var a=this.duration();r[r.length-1].endTime=isNaN(a)||Math.abs(a)===1/0?Number.MAX_VALUE:a}}},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var r=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var a=this.mainSegmentLoader_.getCurrentMediaInfo_();!a||a.hasVideo?r=r&&this.audioSegmentLoader_.ended_:r=this.audioSegmentLoader_.ended_}!r||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(r){var a=this.seekable();if(!a.length)return!1;var s=this.syncController_.getExpiredTime(r,this.duration());if(s===null)return!1;var o=bn.Playlist.playlistEnd(r,s),u=this.tech_.currentTime(),l=this.tech_.buffered();if(!l.length)return o-u<=jr;var d=l.end(l.length-1);return d-u<=jr&&o-d<=jr},t.blacklistCurrentPlaylist=function(r,a){r===void 0&&(r={});var s=r.playlist||this.masterPlaylistLoader_.media();if(a=a||r.blacklistDuration||this.blacklistDuration,!s){this.error=r,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,u=o.filter(lp),l=u.length===1&&u[0]===s;if(o.length===1&&a!==1/0)return X.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(l);if(l){var d=!1;o.forEach(function(I){if(I!==s){var L=I.excludeUntil;typeof L<"u"&&L!==1/0&&(d=!0,delete I.excludeUntil)}}),d&&(X.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var h;s.playlistErrors_>this.maxPlaylistRetries?h=1/0:h=Date.now()+a*1e3,s.excludeUntil=h,r.reason&&(s.lastExcludeReason_=r.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var p=this.selectPlaylist();if(!p){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var _=r.internal?this.logger_:X.log.warn,D=r.message?" "+r.message:"";_((r.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(D+" Switching to playlist "+p.id+".")),p.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),p.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var C=p.targetDuration/2*1e3||5*1e3,S=typeof p.lastRequest=="number"&&Date.now()-p.lastRequest<=C;return this.switchMedia_(p,"exclude",l||S)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(r,a){var s=this,o=[],u=r==="all";(u||r==="main")&&o.push(this.masterPlaylistLoader_);var l=[];(u||r==="audio")&&l.push("AUDIO"),(u||r==="subtitle")&&(l.push("CLOSED-CAPTIONS"),l.push("SUBTITLES")),l.forEach(function(d){var h=s.mediaTypes_[d]&&s.mediaTypes_[d].activePlaylistLoader;h&&o.push(h)}),["main","audio","subtitle"].forEach(function(d){var h=s[d+"SegmentLoader_"];h&&(r===d||r==="all")&&o.push(h)}),o.forEach(function(d){return a.forEach(function(h){typeof d[h]=="function"&&d[h]()})})},t.setCurrentTime=function(r){var a=$o(this.tech_.buffered(),r);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(a&&a.length)return r;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var r=this.masterPlaylistLoader_.media();return r?r.endList?this.mediaSource?this.mediaSource.duration:bn.Playlist.duration(r):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var r;if(!!this.masterPlaylistLoader_){var a=this.masterPlaylistLoader_.media();if(!!a){var s=this.syncController_.getExpiredTime(a,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,u=bn.Playlist.seekable(a,s,bn.Playlist.liveEdgeDelay(o,a));if(u.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(a,this.duration()),s===null||(r=bn.Playlist.seekable(a,s,bn.Playlist.liveEdgeDelay(o,a)),r.length===0)))){var l,d;this.seekable_&&this.seekable_.length&&(l=this.seekable_.end(0),d=this.seekable_.start(0)),r?r.start(0)>u.end(0)||u.start(0)>r.end(0)?this.seekable_=u:this.seekable_=X.createTimeRanges([[r.start(0)>u.start(0)?r.start(0):u.start(0),r.end(0)<u.end(0)?r.end(0):u.end(0)]]):this.seekable_=u,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===l&&this.seekable_.start(0)===d)&&(this.logger_("seekable updated ["+ik(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},t.updateDuration=function(r){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,r),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(r){var a=this.seekable();if(!a.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<a.end(a.length-1))&&this.sourceUpdater_.setDuration(a.end(a.length-1));return}var s=this.tech_.buffered(),o=bn.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},t.dispose=function(){var r=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(a){var s=r.mediaTypes_[a].groups;for(var o in s)s[o].forEach(function(u){u.playlistLoader&&u.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var r=!!this.mediaTypes_.AUDIO.activePlaylistLoader,a=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=r?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!a||!s)},t.getCodecsOrExclude_=function(){var r=this,a={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();a.video=a.main;var o=ad(this.master(),s),u={},l=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(a.main.hasVideo&&(u.video=o.video||a.main.videoCodec||uC),a.main.isMuxed&&(u.video+=","+(o.audio||a.main.audioCodec||Iv)),(a.main.hasAudio&&!a.main.isMuxed||a.audio.hasAudio||l)&&(u.audio=o.audio||a.main.audioCodec||a.audio.audioCodec||Iv,a.audio.isFmp4=a.main.hasAudio&&!a.main.isMuxed?a.main.isFmp4:a.audio.isFmp4),!u.audio&&!u.video){this.blacklistCurrentPlaylist({playlist:s,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var d=function(I,L){return I?Vl(L):_f(L)},h={},p;if(["video","audio"].forEach(function(S){if(u.hasOwnProperty(S)&&!d(a[S].isFmp4,u[S])){var I=a[S].isFmp4?"browser":"muxer";h[I]=h[I]||[],h[I].push(u[S]),S==="audio"&&(p=I)}}),l&&p&&s.attributes.AUDIO){var _=s.attributes.AUDIO;this.master().playlists.forEach(function(S){var I=S.attributes&&S.attributes.AUDIO;I===_&&S!==s&&(S.excludeUntil=1/0)}),this.logger_("excluding audio group "+_+" as "+p+' does not support codec(s): "'+u.audio+'"')}if(Object.keys(h).length){var D=Object.keys(h).reduce(function(S,I){return S&&(S+=", "),S+=I+' does not support codec(s): "'+h[I].join(",")+'"',S},"")+".";this.blacklistCurrentPlaylist({playlist:s,internal:!0,message:D,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var C=[];if(["video","audio"].forEach(function(S){var I=(fr(r.sourceUpdater_.codecs[S]||"")[0]||{}).type,L=(fr(u[S]||"")[0]||{}).type;I&&L&&I.toLowerCase()!==L.toLowerCase()&&C.push('"'+r.sourceUpdater_.codecs[S]+'" -> "'+u[S]+'"')}),C.length){this.blacklistCurrentPlaylist({playlist:s,message:"Codec switching not supported: "+C.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return u},t.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&!!this.areMediaTypesKnown_()){var r=this.getCodecsOrExclude_();if(!!r){this.sourceUpdater_.createSourceBuffers(r);var a=[r.video,r.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(a)}}},t.excludeUnsupportedVariants_=function(){var r=this,a=this.master().playlists,s=[];Object.keys(a).forEach(function(o){var u=a[o];if(s.indexOf(u.id)===-1){s.push(u.id);var l=ad(r.master,u),d=[];l.audio&&!_f(l.audio)&&!Vl(l.audio)&&d.push("audio codec "+l.audio),l.video&&!_f(l.video)&&!Vl(l.video)&&d.push("video codec "+l.video),l.text&&l.text==="stpp.ttml.im1t"&&d.push("text codec "+l.text),d.length&&(u.excludeUntil=1/0,r.logger_("excluding "+u.id+" for unsupported: "+d.join(", ")))}})},t.excludeIncompatibleVariants_=function(r){var a=this,s=[],o=this.master().playlists,u=Xf(fr(r)),l=kw(u),d=u.video&&fr(u.video)[0]||null,h=u.audio&&fr(u.audio)[0]||null;Object.keys(o).forEach(function(p){var _=o[p];if(!(s.indexOf(_.id)!==-1||_.excludeUntil===1/0)){s.push(_.id);var D=[],C=ad(a.masterPlaylistLoader_.master,_),S=kw(C);if(!(!C.audio&&!C.video)){if(S!==l&&D.push('codec count "'+S+'" !== "'+l+'"'),!a.sourceUpdater_.canChangeType()){var I=C.video&&fr(C.video)[0]||null,L=C.audio&&fr(C.audio)[0]||null;I&&d&&I.type.toLowerCase()!==d.type.toLowerCase()&&D.push('video codec "'+I.type+'" !== "'+d.type+'"'),L&&h&&L.type.toLowerCase()!==h.type.toLowerCase()&&D.push('audio codec "'+L.type+'" !== "'+h.type+'"')}D.length&&(_.excludeUntil=1/0,a.logger_("blacklisting "+_.id+": "+D.join(" && ")))}}})},t.updateAdCues_=function(r){var a=0,s=this.seekable();s.length&&(a=s.start(0)),Q8(r,this.cueTagsTrack_,a)},t.goalBufferLength=function(){var r=this.tech_.currentTime(),a=Ot.GOAL_BUFFER_LENGTH,s=Ot.GOAL_BUFFER_LENGTH_RATE,o=Math.max(a,Ot.MAX_GOAL_BUFFER_LENGTH);return Math.min(a+r*s,o)},t.bufferLowWaterLine=function(){var r=this.tech_.currentTime(),a=Ot.BUFFER_LOW_WATER_LINE,s=Ot.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(a,Ot.MAX_BUFFER_LOW_WATER_LINE),u=Math.max(a,Ot.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(a+r*s,this.experimentalBufferBasedABR?u:o)},t.bufferHighWaterLine=function(){return Ot.BUFFER_HIGH_WATER_LINE},e}(X.EventTarget),y4=function(e,t,i){return function(r){var a=e.master.playlists[t],s=cy(a),o=lp(a);return typeof r>"u"?o:(r?delete a.disabled:a.disabled=!0,r!==o&&!s&&(i(),r?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),r)}},T4=function(e,t,i){var r=e.masterPlaylistController_,a=e.options_.smoothQualityChange,s=a?"smooth":"fast",o=r[s+"QualityChange_"].bind(r);if(t.attributes){var u=t.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=ad(r.master(),t),this.playlist=t,this.id=i,this.enabled=y4(e.playlists,t.id,o)},x4=function(e){e.representations=function(){var t=e.masterPlaylistController_.master(),i=_d(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return i?i.filter(function(r){return!cy(r)}).map(function(r,a){return new T4(e,r,r.id)}):[]}},Hw=["seeking","seeked","pause","playing","error"],b4=function(){function n(t){var i=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=vr("PlaybackWatcher"),this.logger_("initialize");var r=function(){return i.monitorCurrentTime_()},a=function(){return i.monitorCurrentTime_()},s=function(){return i.techWaiting_()},o=function(){return i.cancelTimer_()},u=this.masterPlaylistController_,l=["main","subtitle","audio"],d={};l.forEach(function(p){d[p]={reset:function(){return i.resetSegmentDownloads_(p)},updateend:function(){return i.checkSegmentDownloads_(p)}},u[p+"SegmentLoader_"].on("appendsdone",d[p].updateend),u[p+"SegmentLoader_"].on("playlistupdate",d[p].reset),i.tech_.on(["seeked","seeking"],d[p].reset)});var h=function(_){["main","audio"].forEach(function(D){u[D+"SegmentLoader_"][_]("appended",i.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){i.fixesBadSeeks_()&&(i.consecutiveUpdates=0,i.lastRecordedTime=i.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=function(){return h("off")},this.watchForBadSeeking_=function(){i.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(Hw,o),this.tech_.on("canplay",a),this.tech_.one("play",r),this.dispose=function(){i.clearSeekingAppendCheck_(),i.logger_("dispose"),i.tech_.off("waiting",s),i.tech_.off(Hw,o),i.tech_.off("canplay",a),i.tech_.off("play",r),i.tech_.off("seeking",i.watchForBadSeeking_),i.tech_.off("seeked",i.clearSeekingAppendCheck_),l.forEach(function(p){u[p+"SegmentLoader_"].off("appendsdone",d[p].updateend),u[p+"SegmentLoader_"].off("playlistupdate",d[p].reset),i.tech_.off(["seeked","seeking"],d[p].reset)}),i.checkCurrentTimeTimeout_&&$.default.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}var e=n.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&$.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=$.default.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(i){var r=this.masterPlaylistController_[i+"SegmentLoader_"];this[i+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+i+" loader"),this[i+"StalledDownloads_"]=0,this[i+"Buffered_"]=r.buffered_()},e.checkSegmentDownloads_=function(i){var r=this.masterPlaylistController_,a=r[i+"SegmentLoader_"],s=a.buffered_(),o=f3(this[i+"Buffered_"],s);if(this[i+"Buffered_"]=s,o){this.resetSegmentDownloads_(i);return}this[i+"StalledDownloads_"]++,this.logger_("found #"+this[i+"StalledDownloads_"]+" "+i+" appends that did not increase buffer (possible stalled download)",{playlistId:a.playlist_&&a.playlist_.id,buffered:os(s)}),!(this[i+"StalledDownloads_"]<10)&&(this.logger_(i+" loader stalled download exclusion"),this.resetSegmentDownloads_(i),this.tech_.trigger({type:"usage",name:"vhs-"+i+"-download-exclusion"}),i!=="subtitle"&&r.blacklistCurrentPlaylist({message:"Excessive "+i+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var i=this.tech_.currentTime(),r=this.tech_.buffered();if(this.lastRecordedTime===i&&(!r.length||i+jr>=r.end(r.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&i===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):i===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=i)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var i=this.tech_.seeking();if(!i)return!1;var r=this.seekable(),a=this.tech_.currentTime(),s=this.afterSeekableWindow_(r,a,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var u=r.end(r.length-1);o=u}if(this.beforeSeekableWindow_(r,a)){var l=r.start(0);o=l+(l===r.end(0)?0:jr)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+a+" with "+("seekable range "+ik(r)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var d=this.masterPlaylistController_.sourceUpdater_,h=this.tech_.buffered(),p=d.audioBuffer?d.audioBuffered():null,_=d.videoBuffer?d.videoBuffered():null,D=this.media(),C=D.partTargetDuration?D.partTargetDuration:(D.targetDuration-fa)*2,S=[p,_],I=0;I<S.length;I++)if(!!S[I]){var L=ly(S[I],a);if(L<C)return!1}var G=kf(h,a);return G.length===0?!1:(o=G.start(0)+jr,this.logger_("Buffered region starts ("+G.start(0)+") "+(" just beyond seek point ("+a+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var i=this.tech_.currentTime(),r=this.tech_.buffered(),a=$o(r,i);if(a.length&&i+3<=a.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(i),this.logger_("Stopped at "+i+" while inside a buffered region "+("["+a.start(0)+" -> "+a.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var i=this.seekable(),r=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(i,r)){var a=i.end(i.length-1);return this.logger_("Fell out of live window at time "+r+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.tech_.setCurrentTime(a),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),u=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:r});if(u)return this.cancelTimer_(),this.tech_.setCurrentTime(r),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var l=kf(o,r);if(l.length>0){var d=l.start(0)-r;return this.logger_("Stopped at "+r+", setting timer for "+d+", seeking "+("to "+l.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),d*1e3,r),!0}return!1},e.afterSeekableWindow_=function(i,r,a,s){if(s===void 0&&(s=!1),!i.length)return!1;var o=i.end(i.length-1)+jr,u=!a.endList;return u&&s&&(o=i.end(i.length-1)+a.targetDuration*3),r>o},e.beforeSeekableWindow_=function(i,r){return!!(i.length&&i.start(0)>0&&r<i.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(i){var r=i.videoBuffered,a=i.audioBuffered,s=i.currentTime;if(!!r){var o;if(r.length&&a.length){var u=$o(r,s-3),l=$o(r,s),d=$o(a,s);d.length&&!l.length&&u.length&&(o={start:u.end(0),end:d.end(0)})}else{var h=kf(r,s);h.length||(o=this.gapFromVideoUnderflow_(r,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},e.skipTheGap_=function(i){var r=this.tech_.buffered(),a=this.tech_.currentTime(),s=kf(r,a);this.cancelTimer_(),!(s.length===0||a!==i)&&(this.logger_("skipTheGap_:","currentTime:",a,"scheduled currentTime:",i,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+fa),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(i,r){for(var a=d3(i),s=0;s<a.length;s++){var o=a.start(s),u=a.end(s);if(r-o<4&&r-o>2)return{start:o,end:u}}return null},n}(),S4={errorInterval:30,getSource:function(e){var t=this.tech({IWillNotUseThisInPlugins:!0}),i=t.currentSource_||this.currentSource();return e(i)}},D4=function n(e,t){var i=0,r=0,a=X.mergeOptions(S4,t);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){r&&e.currentTime(r)},o=function(p){p!=null&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(p),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},u=function(){if(Date.now()-i<a.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!a.getSource||typeof a.getSource!="function"){X.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return i=Date.now(),a.getSource.call(e,o)},l=function h(){e.off("loadedmetadata",s),e.off("error",u),e.off("dispose",h)},d=function(p){l(),n(e,p)};e.on("error",u),e.on("dispose",l),e.reloadSourceOnError=d},E4=function(e){D4(this,e)},jk="2.16.2",C4="6.0.1",w4="0.22.1",A4="4.8.0",k4="3.1.3",Ut={PlaylistLoader:Vo,Playlist:Ci,utils:B3,STANDARD_PLAYLIST_SELECTOR:Pw,INITIAL_PLAYLIST_SELECTOR:w8,lastBandwidthSelector:Pw,movingAverageBandwidthSelector:E8,comparePlaylistBandwidth:my,comparePlaylistResolution:D8,xhr:vk()};Object.keys(Ot).forEach(function(n){Object.defineProperty(Ut,n,{get:function(){return X.log.warn("using Vhs."+n+" is UNSAFE be sure you know what you are doing"),Ot[n]},set:function(t){if(X.log.warn("using Vhs."+n+" is UNSAFE be sure you know what you are doing"),typeof t!="number"||t<0){X.log.warn("value of Vhs."+n+" must be greater than or equal to 0");return}Ot[n]=t}})});var Hk="videojs-vhs",$k=function(e,t){for(var i=t.media(),r=-1,a=0;a<e.length;a++)if(e[a].id===i.id){r=a;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})},I4=function(e,t){t.representations().forEach(function(i){e.addQualityLevel(i)}),$k(e,t.playlists)};Ut.canPlaySource=function(){return X.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var P4=function(e,t,i){if(!e)return e;var r={};t&&t.attributes&&t.attributes.CODECS&&(r=Xf(fr(t.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(r.audio=i.attributes.CODECS);var a=Mo(r.video),s=Mo(r.audio),o={};for(var u in e)o[u]={},s&&(o[u].audioContentType=s),a&&(o[u].videoContentType=a),t.contentProtection&&t.contentProtection[u]&&t.contentProtection[u].pssh&&(o[u].pssh=t.contentProtection[u].pssh),typeof e[u]=="string"&&(o[u].url=e[u]);return X.mergeOptions(e,o)},F4=function(e,t){return e.reduce(function(i,r){if(!r.contentProtection)return i;var a=t.reduce(function(s,o){var u=r.contentProtection[o];return u&&u.pssh&&(s[o]={pssh:u.pssh}),s},{});return Object.keys(a).length&&i.push(a),i},[])},O4=function(e){var t=e.player,i=e.sourceKeySystems,r=e.audioMedia,a=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var s=r?a.concat([r]):a,o=F4(s,Object.keys(i)),u=[],l=[];return o.forEach(function(d){l.push(new Promise(function(h,p){t.tech_.one("keysessioncreated",h)})),u.push(new Promise(function(h,p){t.eme.initializeMediaKeys({keySystems:d},function(_){if(_){p(_);return}h()})}))}),Promise.race([Promise.all(u),Promise.race(l)])},L4=function(e){var t=e.player,i=e.sourceKeySystems,r=e.media,a=e.audioMedia,s=P4(i,r,a);return s?(t.currentSource().keySystems=s,s&&!t.eme?(X.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},Vk=function(){if(!$.default.localStorage)return null;var e=$.default.localStorage.getItem(Hk);if(!e)return null;try{return JSON.parse(e)}catch{return null}},R4=function(e){if(!$.default.localStorage)return!1;var t=Vk();t=t?X.mergeOptions(t,e):e;try{$.default.localStorage.setItem(Hk,JSON.stringify(t))}catch{return!1}return t},M4=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};Ut.supportsNativeHls=function(){if(!le.default||!le.default.createElement)return!1;var n=le.default.createElement("video");if(!X.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(t){return/maybe|probably/i.test(n.canPlayType(t))})}();Ut.supportsNativeDash=function(){return!le.default||!le.default.createElement||!X.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(le.default.createElement("video").canPlayType("application/dash+xml"))}();Ut.supportsTypeNatively=function(n){return n==="hls"?Ut.supportsNativeHls:n==="dash"?Ut.supportsNativeDash:!1};Ut.isSupported=function(){return X.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var N4=X.getComponent("Component"),vy=function(n){de(e,n);function e(i,r,a){var s;if(s=n.call(this,r,X.mergeOptions(a.hls,a.vhs))||this,a.hls&&Object.keys(a.hls).length&&X.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof a.initialBandwidth=="number"&&(s.options_.bandwidth=a.initialBandwidth),s.logger_=vr("VhsHandler"),r.options_&&r.options_.playerId){var o=X(r.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return X.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"hls-player-access"}),Se(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return X.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"vhs-player-access"}),Se(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return X.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Se(s)},configurable:!0}),s.player_=o}if(s.tech_=r,s.source_=i,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks)r.overrideNativeAudioTracks(!0),r.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(le.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(u){var l=le.default.fullscreenElement||le.default.webkitFullscreenElement||le.default.mozFullScreenElement||le.default.msFullscreenElement;l&&l.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var t=e.prototype;return t.setOptions_=function(){var r=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var a=Vk();a&&a.bandwidth&&(this.options_.bandwidth=a.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),a&&a.throughput&&(this.options_.throughput=a.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Ot.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ot.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof r.source_[s]<"u"&&(r.options_[s]=r.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(r,a){var s=this;if(!!r){this.setOptions_(),this.options_.src=M4(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ut,this.options_.sourceType=Pv(a),this.options_.seekTo=function(l){s.tech_.setCurrentTime(l)},this.options_.smoothQualityChange&&X.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new _4(this.options_);var o=X.mergeOptions({liveRangeSafeTimeDelta:jr},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new b4(o),this.masterPlaylistController_.on("error",function(){var l=X.players[s.tech_.options_.playerId],d=s.masterPlaylistController_.error;typeof d=="object"&&!d.code?d.code=3:typeof d=="string"&&(d={message:d,code:3}),l.error(d)});var u=this.options_.experimentalBufferBasedABR?Ut.movingAverageBandwidthSelector(.55):Ut.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):u.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ut.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(d){this.masterPlaylistController_.selectPlaylist=d.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(d){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=d,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var d=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,h=$.default.navigator.connection||$.default.navigator.mozConnection||$.default.navigator.webkitConnection,p=1e7;if(this.options_.useNetworkInformationApi&&h){var _=h.downlink*1e3*1e3;_>=p&&d>=p?d=Math.max(d,_):d=_}return d},set:function(d){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=d,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var d=1/(this.bandwidth||1),h;this.throughput>0?h=1/this.throughput:h=0;var p=Math.floor(1/(d+h));return p},set:function(){X.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return os(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return os(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&R4({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){x4(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=$.default.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},t.createKeySessions_=function(){var r=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),O4({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:a&&a.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){r.logger_("created EME key session"),r.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){r.logger_("error while creating EME key session",s),r.player_.error({message:"Failed to initialize media keys for EME",code:3})})},t.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},t.setupEme_=function(){var r=this,a=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=L4({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:a&&a.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var u=r.masterPlaylistController_.master();if(!(!u||!u.playlists)){var l=[];if(u.playlists.forEach(function(h){h&&h.attributes&&h.attributes.RESOLUTION&&h.attributes.RESOLUTION.height>=720&&(!h.excludeUntil||h.excludeUntil<1/0)&&(h.excludeUntil=1/0,l.push(h))}),l.length){var d;(d=X.log).warn.apply(d,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(l)),r.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),X.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},t.setupQualityLevels_=function(){var r=this,a=X.players[this.tech_.options_.playerId];!a||!a.qualityLevels||this.qualityLevels_||(this.qualityLevels_=a.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){I4(r.qualityLevels_,r)}),this.playlists.on("mediachange",function(){$k(r.qualityLevels_,r.playlists)}))},e.version=function(){return{"@videojs/http-streaming":jk,"mux.js":C4,"mpd-parser":w4,"m3u8-parser":A4,"aes-decrypter":k4}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return Uk.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(r){this.masterPlaylistController_.setCurrentTime(r)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&$.default.URL.revokeObjectURL&&($.default.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),n.prototype.dispose.call(this)},t.convertToProgramTime=function(r,a){return q3({playlist:this.masterPlaylistController_.media(),time:r,callback:a})},t.seekToProgramTime=function(r,a,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),G3({programTime:r,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:a})},e}(N4),cd={name:"videojs-http-streaming",VERSION:jk,canHandleSource:function(e,t){t===void 0&&(t={});var i=X.mergeOptions(X.options,t);return cd.canPlayType(e.type,i)},handleSource:function(e,t,i){i===void 0&&(i={});var r=X.mergeOptions(X.options,i);return t.vhs=new vy(e,t,r),X.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return X.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=vk(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var i=Pv(e);if(!i)return"";var r=cd.getOverrideNative(t),a=Ut.supportsTypeNatively(i),s=!a||r;return s?"maybe":""},getOverrideNative:function(e){e===void 0&&(e={});var t=e,i=t.vhs,r=i===void 0?{}:i,a=t.hls,s=a===void 0?{}:a,o=!(X.browser.IS_ANY_SAFARI||X.browser.IS_IOS),u=r.overrideNative,l=u===void 0?o:u,d=s.overrideNative,h=d===void 0?!1:d;return h||l}},B4=function(){return Vl("avc1.4d400d,mp4a.40.2")};B4()&&X.getTech("Html5").registerSourceHandler(cd,0);X.VhsHandler=vy;Object.defineProperty(X,"HlsHandler",{get:function(){return X.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),vy},configurable:!0});X.VhsSourceHandler=cd;Object.defineProperty(X,"HlsSourceHandler",{get:function(){return X.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),cd},configurable:!0});X.Vhs=Ut;Object.defineProperty(X,"Hls",{get:function(){return X.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Ut},configurable:!0});X.use||(X.registerComponent("Hls",Ut),X.registerComponent("Vhs",Ut));X.options.vhs=X.options.vhs||{};X.options.hls=X.options.hls||{};(!X.getPlugin||!X.getPlugin("reloadSourceOnError"))&&($w=X.registerPlugin||X.plugin,$w("reloadSourceOnError",E4));var $w,dp=X;var U4=n=>typeof n=="number"&&!isNaN(n)&&n>=0&&n<1/0,_y=n=>{let e=n.playlist.autoadvance_;e.timeout&&n.clearTimeout(e.timeout),e.trigger&&n.off("ended",e.trigger),e.timeout=null,e.trigger=null},yy=(n,e)=>{if(_y(n),!U4(e)){n.playlist.autoadvance_.delay=null;return}n.playlist.autoadvance_.delay=e,n.playlist.autoadvance_.trigger=function(){let t=()=>yy(n,e);n.one("play",t),n.playlist.autoadvance_.timeout=n.setTimeout(()=>{_y(n),n.off("play",t),n.playlist.next()},e*1e3)},n.one("ended",n.playlist.autoadvance_.trigger)},j4=n=>{let e=n.remoteTextTracks(),t=e&&e.length||0;for(;t--;)n.removeRemoteTextTrack(e[t])},H4=(n,e)=>{let t=!n.paused()||n.ended();return n.trigger("beforeplaylistitem",e.originalValue||e),e.playlistItemId_&&(n.playlist.currentPlaylistItemId_=e.playlistItemId_),n.poster(e.poster||""),n.src(e.sources),j4(n),n.ready(()=>{if((e.textTracks||[]).forEach(n.addRemoteTextTrack.bind(n)),n.trigger("playlistitem",e.originalValue||e),t){let i=n.play();typeof i<"u"&&typeof i.then=="function"&&i.then(null,r=>{})}yy(n,n.playlist.autoadvance_.delay)}),n},Wk=n=>!!n&&typeof n=="object",$4=n=>{let e=[],t;return n.forEach(i=>{Wk(i)?t=i:(t=Object(i),t.originalValue=i),e.push(t)}),e},V4=n=>{let e=1;n.forEach(t=>{t.playlistItemId_=e++})},W4=(n,e)=>{for(let t=0;t<n.length;t++)if(n[t].playlistItemId_===e)return t;return-1},q4=(n,e)=>{let t=n,i=e;return typeof n=="object"&&(t=n.src),typeof e=="object"&&(i=e.src),/^\/\//.test(t)&&(i=i.slice(i.indexOf("//"))),/^\/\//.test(i)&&(t=t.slice(t.indexOf("//"))),t===i},cp=(n,e)=>{for(let t=0;t<n.length;t++){let i=n[t].sources;if(Array.isArray(i))for(let r=0;r<i.length;r++){let a=i[r];if(a&&q4(a,e))return t}}return-1},G4=n=>{let e=-1,t=n.length-1;for(;++e<n.length;){let i=e+Math.floor(Math.random()*(t-e+1)),r=n[i];n[i]=n[e],n[e]=r}return n};function z4(n,e,t=0){let i=null,r=!1,a=n.playlist=(s,o=0)=>{if(r)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(s)){let u=Array.isArray(i)?i.slice():null,l=s.slice();i=l.slice(),i.filter(d=>Wk(d)).length!==i.length&&(i=$4(i)),V4(i),r=!0,n.trigger({type:"duringplaylistchange",nextIndex:o,nextPlaylist:l,previousIndex:a.currentIndex_,previousPlaylist:u||[]}),r=!1,o!==-1&&a.currentItem(o),u&&n.setTimeout(()=>{n.trigger("playlistchange")},0)}return i.map(u=>u.originalValue||u).slice()};return n.on("loadstart",()=>{a.currentItem()===-1&&_y(n)}),a.currentIndex_=-1,a.player_=n,a.autoadvance_={},a.repeat_=!1,a.currentPlaylistItemId_=null,a.currentItem=s=>{if(r)return a.currentIndex_;if(typeof s=="number"&&a.currentIndex_!==s&&s>=0&&s<i.length)return a.currentIndex_=s,H4(a.player_,i[a.currentIndex_]),a.currentIndex_;let o=a.player_.currentSrc()||"";if(a.currentPlaylistItemId_){let u=W4(i,a.currentPlaylistItemId_),l=i[u];if(l&&Array.isArray(l.sources)&&cp([l],o)>-1)return a.currentIndex_=u,a.currentIndex_;a.currentPlaylistItemId_=null}return a.currentIndex_=a.indexOf(o),a.currentIndex_},a.contains=s=>a.indexOf(s)!==-1,a.indexOf=s=>{if(typeof s=="string")return cp(i,s);let o=Array.isArray(s)?s:s.sources;for(let u=0;u<o.length;u++){let l=o[u];if(typeof l=="string")return cp(i,l);if(l.src)return cp(i,l.src)}return-1},a.currentIndex=()=>a.currentItem(),a.lastIndex=()=>i.length-1,a.nextIndex=()=>{let s=a.currentItem();if(s===-1)return-1;let o=a.lastIndex();return a.repeat_&&s===o?0:Math.min(s+1,o)},a.previousIndex=()=>{let s=a.currentItem();return s===-1?-1:a.repeat_&&s===0?a.lastIndex():Math.max(s-1,0)},a.first=()=>{if(r)return;let s=a.currentItem(0);if(i.length)return i[s].originalValue||i[s];a.currentIndex_=-1},a.last=()=>{if(r)return;let s=a.currentItem(a.lastIndex());if(i.length)return i[s].originalValue||i[s];a.currentIndex_=-1},a.next=()=>{if(r)return;let s=a.nextIndex();if(s!==a.currentIndex_){let o=a.currentItem(s);return i[o].originalValue||i[o]}},a.previous=()=>{if(r)return;let s=a.previousIndex();if(s!==a.currentIndex_){let o=a.currentItem(s);return i[o].originalValue||i[o]}},a.autoadvance=s=>{yy(a.player_,s)},a.repeat=s=>{if(s===void 0)return a.repeat_;if(typeof s!="boolean"){dp.log.error("videojs-playlist: Invalid value for repeat",s);return}return a.repeat_=!!s,a.repeat_},a.sort=s=>{!i.length||(i.sort(s),!r&&n.trigger("playlistsorted"))},a.reverse=()=>{!i.length||(i.reverse(),!r&&n.trigger("playlistsorted"))},a.shuffle=({rest:s}={})=>{let o=0,u=i;s&&(o=a.currentIndex_+1,u=i.slice(o)),!(u.length<=1)&&(G4(u),s&&i.splice(...[o,u.length].concat(u)),!r&&n.trigger("playlistsorted"))},Array.isArray(e)?a(e.slice(),t):i=[],a}var K4="5.0.0",X4=dp.registerPlugin||dp.plugin,qk=function(n,e){z4(this,n,e)};X4("playlist",qk);qk.VERSION=K4;var Y4=Symbol("error");function Q4(n){return n instanceof Error||typeof n=="string"?n:new Error("Unknown error")}function J4(n){n=Q4(n);let e=i1(yd,Y4);if(!e)throw n;for(let t of e)t(n)}var yd=null;function ma(n,e){return[()=>n,t=>n=typeof t=="function"?t(n):t]}function t1(n,e){yd={owner:yd,context:null};let t;try{t=n(e)}catch(i){J4(i)}finally{yd=yd.owner}return()=>t}function i1(n,e){return n?n.context&&n.context[e]!==void 0?n.context[e]:i1(n.owner,e):void 0}var ji={};function Gk(n){ji.context=n}function Z4(){return ji.context?{...ji.context,id:`${ji.context.id}${ji.context.count++}-`,count:0}:void 0}function pa(n,e){if(ji.context&&!ji.context.noHydrate){let t=ji.context;Gk(Z4());let i=n(e||{});return Gk(t),i}return n(e||{})}function ej(n,e){let t=n.each||[],i=t.length,r=n.children;if(i){let a=Array(i);for(let s=0;s<i;s++)a[s]=e(r,t[s],s);return a}return n.fallback}function zk(n){return ej(n,(e,t,i)=>e(t,()=>i))}function by(n){let e;return n.when?typeof(e=n.children)=="function"?e(n.when):e:n.fallback||""}var tj=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"];[...tj];var{hasOwnProperty:ij}=Object.prototype,Sy="hjkmoquxzABCDEFGHIJKLNPQRTUVWXYZ$_",Kk=Sy.length,r1="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$_",Xk=r1.length,hs=[],Ye=[""],Td=new Map,ou=new WeakMap,xd=0;Ye.pop();function hp(n){if(fp(n,"")){let e=Ye[0];for(let t=1,i=Ye.length;t<i;t++)e+=Ye[t];if(xd){if(Td.size){let t=ou.get(n);typeof t=="number"&&(t=Dy(xd++),e=t+"="+e);for(let[i,r]of Td)e+=";"+r+i;e+=";return "+t,Td=new Map}else e="return "+e;e="(function("+oj()+"){"+e+"}())"}else n&&n.constructor===Object&&(e="("+e+")");return Ye.length=0,ou=new WeakMap,e}return"void 0"}function fp(n,e){switch(typeof n){case"string":Ye.push(n1(n,0));break;case"number":Ye.push(n+"");break;case"boolean":Ye.push(n?"!0":"!1");break;case"object":if(n===null)Ye.push("null");else{let t=rj(n,e);switch(t){case!0:return!1;case!1:switch(n.constructor){case Object:Yk(n);break;case Array:Ty(n);break;case Date:Ye.push('new Date("'+n.toISOString()+'")');break;case RegExp:Ye.push(n+"");break;case Map:Ye.push("new Map("),Ty(Array.from(n)),Ye.push(")");break;case Set:Ye.push("new Set("),Ty(Array.from(n)),Ye.push(")");break;case void 0:Ye.push("Object.assign(Object.create(null),"),Yk(n),Ye.push(")");break;default:return!1}break;default:Ye.push(t);break}}break;default:return!1}return!0}function Yk(n){let e="{";hs.push(n);for(let t in n)if(ij.call(n,t)){let i=n[t],r=nj(t);Ye.push(e+r+":"),fp(i,r)?e=",":Ye.pop()}e==="{"?Ye.push("{}"):Ye.push("}"),hs.pop()}function Ty(n){Ye.push("["),hs.push(n),fp(n[0],0);for(let e=1,t=n.length;e<t;e++)Ye.push(","),fp(n[e],e);hs.pop(),Ye.push("]")}function rj(n,e){let t=ou.get(n);if(t===void 0)return ou.set(n,Ye.length),!1;if(typeof t=="number"&&(t=Qk(n,t)),hs.includes(n)){let i=hs[hs.length-1],r=ou.get(i);return typeof r=="number"&&(r=Qk(i,r)),Td.set(t,(Td.get(t)||"")+aj(r,e)+"="),!0}return t}function nj(n){let e=sj(n);return e===-1?n:n1(n,e)}function aj(n,e){return n+(typeof e=="number"||e[0]==='"'?"["+e+"]":"."+e)}function sj(n){let e=n[0];if(!(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"))return 0;for(let t=1,i=n.length;t<i;t++)if(e=n[t],!(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"))return t;return-1}function n1(n,e){let t="",i=0;for(let r=e,a=n.length;r<a;r++){let s;switch(n[r]){case'"':s='\\"';break;case"\\":s="\\\\";break;case"<":s="\\x3C";break;case`
`:s="\\n";break;case"\r":s="\\r";break;case"\u2028":s="\\u2028";break;case"\u2029":s="\\u2029";break;default:continue}t+=n.slice(i,r)+s,i=r+1}return i===e?t=n:t+=n.slice(i),'"'+t+'"'}function Qk(n,e){let t=Dy(xd++);return ou.set(n,t),e?Ye[e-1]+=t+"=":Ye[e]=t+"="+Ye[e],t}function oj(){let n=Sy[0];for(let e=1;e<xd;e++)n+=","+Dy(e);return xd=0,n}function Dy(n){let e=n%Kk,t=Sy[e];for(n=(n-e)/Kk;n>0;)e=n%Xk,t+=r1[e],n=(n-e)/Xk;return t}function a1(n,e={}){let t="";ji.context={id:e.renderId||"",count:0,suspense:{},lazy:{},assets:[],nonce:e.nonce,writeResource(r,a,s){if(!ji.context.noHydrate){if(s)return t+=`_$HY.set("${r}", ${cj(a)});`;t+=`_$HY.set("${r}", ${hp(a)});`}}};let i=bd(Ui(n()));return ji.context.noHydrate=!0,i=lj(ji.context.assets,i),t.length&&(i=dj(i,t,e.nonce)),i}function Hi(n,...e){if(e.length){let t="";for(let i=0;i<e.length;i++){t+=n[i];let r=e[i];r!==void 0&&(t+=bd(r))}n=t+n[e.length]}return{t:n}}function Ey(n,e,t){return t?e?" "+n:"":e!=null?` ${n}="${e}"`:""}function Vr(){let n=uj();return n?` data-hk="${n}"`:""}function Ui(n,e){let t=typeof n;if(t!=="string"){if(!e&&t==="function")return Ui(n(),e);if(!e&&Array.isArray(n)){let l="";for(let d=0;d<n.length;d++)l+=bd(Ui(n[d],e));return{t:l}}return e&&t==="boolean"?String(n):n}let i=e?'"':"<",r=e?"&quot;":"&lt;",a=n.indexOf(i),s=n.indexOf("&");if(a<0&&s<0)return n;let o=0,u="";for(;a>=0&&s>=0;)a<s?(o<a&&(u+=n.substring(o,a)),u+=r,o=a+1,a=n.indexOf(i,o)):(o<s&&(u+=n.substring(o,s)),u+="&amp;",o=s+1,s=n.indexOf("&",o));if(a>=0)do o<a&&(u+=n.substring(o,a)),u+=r,o=a+1,a=n.indexOf(i,o);while(a>=0);else for(;s>=0;)o<s&&(u+=n.substring(o,s)),u+="&amp;",o=s+1,s=n.indexOf("&",o);return o<n.length?u+n.substring(o):u}function bd(n){let e=typeof n;if(e==="string")return n;if(n==null||e==="boolean")return"";if(Array.isArray(n)){let t="";for(let i=0,r=n.length;i<r;i++)t+=bd(n[i]);return t}return e==="object"?n.t:e==="function"?bd(n()):String(n)}function uj(){let n=ji.context;return n&&!n.noHydrate&&`${n.id}${n.count++}`}function lj(n,e){if(!n||!n.length)return e;let t="";for(let i=0,r=n.length;i<r;i++)t+=n[i]();return e.replace("</head>",t+"</head>")}function dj(n,e,t){let i=`<script${t?` nonce="${t}"`:""}>${e}<\/script>`,r=n.indexOf("<!--xs-->");return r>-1?n.slice(0,r)+i+n.slice(r):n+i}function cj(n){if(n.message){let e={},t=Object.getOwnPropertyNames(n);for(let i=0;i<t.length;i++){let r=t[i],a=n[r];(!a||r!=="message"&&typeof a!="function")&&(e[r]=a)}return`Object.assign(new Error(${hp(n.message)}), ${hp(e)})`}return hp(n)}var hj=Cc(),Cy=Ec(async(n,e,t)=>{let i=n.createAstro(hj,e,t);i.self=Cy;let{title:r}=i.props;return Ba`<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <meta name="generator"${Ac(i.generator,"content")}>
    <title>${r}</title>
    <!-- <link
      href="https://unpkg.com/video.js@7/dist/video-js.min.css"
      rel="stylesheet"
    /> -->
    <link href="https://vjs.zencdn.net/8.0.4/video-js.css" rel="stylesheet">
    

    <!-- {pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} />} -->
  ${LT(n)}</head>
  <body>
    ${on(n,t.default)}
  </body></html>`},"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/layouts/Layout.astro"),[fj,VV]=ma(!1),[Jk,WV]=ma([]),[pj,qV]=ma([]),[Zk,GV]=ma([]),[xy,mj]=ma(),[gj,zV]=ma(""),e1=t1(()=>{let n;if(!Jk().length)return n="",n;let e=encodeURIComponent(JSON.stringify(Jk())),t=encodeURIComponent(JSON.stringify(pj())),i=encodeURIComponent(JSON.stringify(Zk())),r=Zk(),a="";return r.length&&(a=r?.reduce((s,o)=>Number(s)+Number(o))),n=`2test.zip?src=${e}&names=${t}&size=${a}`,n});t1(()=>{let n=gj();if(n){let e=xy().filter(i=>i.name?.toLowerCase().normalize().includes(n)),t=xy().map(i=>i.filter(r=>r.name?.toLowerCase().normalize().includes(n))).filter(i=>i.length);return console.log({filteredByBucket:t}),t}else return xy()});function vj(n){let e=Math.floor(n/1e3),t=Math.floor(e/3600),i=Math.floor(e%3600/60),r=e%60,a="";return t>0&&(a=`${t}:${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`),t==0||i>0?a=`${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:a=`0:${r.toString().padStart(2,"0")}`,a}function _j(n){return(n/1024/1024).toFixed(0)}function yj(n){let e=n.sources.find(t=>t.container&&t.container=="MP4");return _j(e.size)}function s1(n){return n.replace(/[\/|\\:*?"<>]/g," ").replace(" ","_")}function o1(n,e){let t=[],i={};return n.forEach(r=>{let a=r[e];i[a]||(i[a]=[]),i[a].push(r)}),Object.keys(i).forEach(r=>{t.push(i[r])}),t}var Tj=["<div",' class=" mx-auto relative video-js w-full aspect-video" id="videoPlayerDiv"><video class="video-js" id="videoPlayer" src=""></video></div>'],xj=["<form",' method="post"',"><button>Download this video</button></form>"];function wy(n){let[e,t]=ma("");return n.videos.map(i=>({sources:i.sources,poster:i.poster,slug:i.slugName,size:i.sources.filter(r=>r.container&&r.container=="MP4")[0].size})),[Hi(Tj,Vr()),pa(by,{get when(){return e()},get children(){return Hi(xj,Vr(),Ey("action",Ui(e(),!0),!1))}})]}Lu(wy,"@astrojs/solid-js");var bj=["<button",' class="block  py-2 px-1 border bg-neutral-100 shadow">Choose videos to download</button>'],Sj=["<label",'>Search<input class="border border-red-400 px-2 py-1 my-2 ml-2" type="text"></label>'],Dj=["<form",' method="post"><button>Dowload Selected Videos</button></form>'];function Ay(n){return[Hi(bj,Vr()),Hi(Sj,Vr()),pa(by,{get when(){return e1()},get children(){return Hi(Dj,Vr()+Ey("action",Ui(e1(),!0),!1))}})]}Lu(Ay,"@astrojs/solid-js");var Ej=["<label",' class="absolute w-full h-full left-0" aria-label="Select to add video to download list"><input class="relative z-10 rounded-full w-4 h-4 align-middle bg-white appearance-none checked:bg-blue-700 ml-auto block mr-1" type="checkbox"></label>'],Cj=["<li",' class="flex gap-2 bg-neutral-200 class relative items-stretch content-stretch my-2"><button class="absolute w-full h-full" aria-label="switch to this video"></button><div class="w-1/3"><img class="h-full object-cover" loading="lazy"',' alt=""></div><div class="flex justify-between p-2 flex-grow-1"><div class="flex flex-col justify-center"><p>',"</p><p>Duration <!--#-->","<!--/--></p><p>Size: <!--#-->","<!--/--> MB</p></div><!--#-->","<!--/--></div></li>"];function u1(n){let e=n.vid.sources.filter(t=>t.container&&t.container=="MP4");return e[0].src,e[0].size,s1(n.vid.name),Hi(Cj,Vr(),Ey("src",Ui(n.img,!0),!1),Ui(n.vid.name),Ui(vj(n.vid.duration)),Ui(yj(n.vid)),Ui(pa(by,{get when(){return fj()},get children(){return Hi(Ej,Vr())}})))}Lu(u1,"@astrojs/solid-js");var wj=["<nav",'><ul class="grid gap-2">',"</ul></nav>"],Aj=["<div","> No results for this search...</div>"],kj=["<details",' open class=""><summary>',"</summary> <!--#-->","<!--/--></details>"];function ky(n){let[e,t]=ma(n.vidsByBook);return mj(n.vidsByBook),Hi(wj,Vr(),Ui(pa(zk,{get each(){return e()},get fallback(){return Hi(Aj,Vr())},children:(i,r)=>Hi(kj,Vr(),Ui(i[0]?.book)||"no title",Ui(pa(zk,{each:i,children:(a,s)=>pa(u1,{get idx(){return a.originalIdx},get img(){return a.thumbnail},vid:a,get id(){return a.id}})})))})))}Lu(ky,"@astrojs/solid-js");var Ij=Cc(),l1=Ec(async(n,e,t)=>{let i=n.createAstro(Ij,e,t);i.self=l1;let r="https://edge.api.brightcove.com/playback/v1",a="6314154063001",s="BCpkADawqM0bQiUyoSejARSlmKAaReqHw7sRy-4OFGmD8lb2ibVNF-d7H4wtYWIS8NMHOP-3IrfH1mVnUzhxQThtzvPBe-IUyk9EagJcJwWrbIBBCg1tsi8vJFv7_S6GGiTNhDwXFJfwF_W-",o=new Headers;o.append("Accept",`application/json;pk=${s}`);let u={method:"GET",headers:o},l=`${r}/accounts/${a}/playlists/ref:benin-new-testament?limit=300`,h=await(await fetch(l,u)).json();h.videos.map(D=>D.sources.filter(C=>C.container&&C.container=="MP4")).flat();let p=h.videos.sort((D,C)=>{let S=/^.*?(\d{2})-(?:\d)?[A-Z]{2,3}_(\d?.+?)_([0-9]{2,3})(?:\..+)?$/;if(!D||!C)return;let I=D.reference_id?.toUpperCase(),L=C.reference_id?.toUpperCase(),G=I.match(S),M=L.match(S);if(!G||!M)return-1;let O=Number(G[1]),K=G[2],z=Number(G[3]),V=Number(M[1]),J=M[2],Q=Number(M[3]);D.book=D.book||K,C.book=C.book||J;let oe;return O==V?oe=z<Q?-1:z==Q?0:1:oe=O<V?-1:O==V?0:1,oe});p.forEach((D,C)=>D.originalIdx=C);let _=o1(p,"book");return Ba`${Xi(n,"Layout",Cy,{title:"Welcome to Astro."},{default:D=>Ba`${kc(D)}<div class="flex relative flex-col md:flex-row items-start p-4 gap-4">
    <div class="w-full md:w-3/4  top-0 sticky aspect-video">
      ${Xi(D,"VideoJs",wy,{"client:load":!0,accountId:a,videos:p,"client:component-hydration":"load","client:component-path":"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/Video","client:component-export":"VideoJs"})}
    </div>
    <div class="relative w-1/4 max-h-[95vh] overflow-y-auto">
      <div class="sticky top-0 bg-white z-20">
        ${Xi(D,"DownloadToggle",Ay,{"client:load":!0,"client:component-hydration":"load","client:component-path":"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/DownloadToggle","client:component-export":"DownloadToggle"})}
      </div>
      ${Xi(D,"Sidebar",ky,{videos:p,vidsByBook:_,"client:idle":!0,"client:component-hydration":"idle","client:component-path":"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/Sidebar","client:component-export":"Sidebar"})}
    </div>
  </div>`})}`},"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/pages/index.astro"),Pj="/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/pages/index.astro",Fj="",d1=Object.freeze(Object.defineProperty({__proto__:null,default:l1,file:Pj,url:Fj},Symbol.toStringTag,{value:"Module"})),c1=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),h1=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),f1=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Oj=Cc(),p1=Ec(async(n,e,t)=>{let i=n.createAstro(Oj,e,t);i.self=p1;let r="https://edge.api.brightcove.com/playback/v1",a="6314154063001",{playlist:s}=i.params,o="BCpkADawqM0bQiUyoSejARSlmKAaReqHw7sRy-4OFGmD8lb2ibVNF-d7H4wtYWIS8NMHOP-3IrfH1mVnUzhxQThtzvPBe-IUyk9EagJcJwWrbIBBCg1tsi8vJFv7_S6GGiTNhDwXFJfwF_W-",u=new Headers;u.append("Accept",`application/json;pk=${o}`);let l={method:"GET",headers:u},d=`${r}/accounts/${a}/playlists/ref:${s}?limit=300`,_=(await(await fetch(d,l)).json()).videos.sort((C,S)=>{let I=/^.*?(\d{2})-(?:\d)?[A-Z]{2,3}_(\d?.+?)_([0-9]{2,3})(?:\..+)?$/;if(!C||!S)return;let L=C.reference_id?.toUpperCase(),G=S.reference_id?.toUpperCase(),M=L.match(I),O=G.match(I);if(!M||!O)return-1;let K=Number(M[1]),z=M[2],V=Number(M[3]),J=Number(O[1]),Q=O[2],oe=Number(O[3]);C.book=C.book||z,S.book=S.book||Q;let ne;return K==J?ne=V<oe?-1:V==oe?0:1:ne=K<J?-1:K==J?0:1,ne});_.forEach((C,S)=>{C.originalIdx=S,C.slugName=s1(C.name)});let D=o1(_,"book");return Ba`${Xi(n,"Layout",Cy,{title:"Welcome to Astro."},{default:C=>Ba`${kc(C)}<div class="flex relative flex-col md:flex-row items-start p-4 gap-4">
    <div class="w-full md:w-3/4  top-0  aspect-video">
      ${Xi(C,"VideoJs",wy,{"client:load":!0,accountId:a,videos:_,"client:component-hydration":"load","client:component-path":"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/Video","client:component-export":"VideoJs"})}
    </div>
    <div class="relative w-full md:w-1/4 md:max-h-[95vh] overflow-y-auto z-0 mt-8 md:mt-0">
      <div class="top-0 bg-white z-20 sticky">
        ${Xi(C,"DownloadToggle",Ay,{"client:load":!0,"client:component-hydration":"load","client:component-path":"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/DownloadToggle","client:component-export":"DownloadToggle"})}
      </div>
      ${Xi(C,"Sidebar",ky,{videos:_,vidsByBook:D,"client:idle":!0,"client:component-hydration":"idle","client:component-path":"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/Sidebar","client:component-export":"Sidebar"})}
    </div>
  </div>`})}`},"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/pages/[playlist].astro"),Lj="/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/pages/[playlist].astro",Rj="/[playlist]",m1=Object.freeze(Object.defineProperty({__proto__:null,default:p1,file:Lj,url:Rj},Symbol.toStringTag,{value:"Module"}));var JV=Le(am(),1),ZV=Le(om(),1);var Mj=typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]";function Nj(){return new Proxy({},{get:(n,e)=>{console.warn(`Unable to access \`import.meta\0.env.${e.toString()}\` on initialization as the Cloudflare platform only provides the environment variables per request. Please move the environment variable access inside a function that's only called after a request has been received.`)}})}Mj||(process.env=Nj());function _1(n){let e=new Dc(n);return{onRequest:async({request:i,next:r,...a})=>{process.env=a.env;let{pathname:s}=new URL(i.url);if(n.assets.has(s))return r(i);let o=e.match(i,{matchNotFound:!0});if(o){Reflect.set(i,Symbol.for("astro.clientAddress"),i.headers.get("cf-connecting-ip")),Reflect.set(i,Symbol.for("runtime"),{...a,name:"cloudflare",next:r});let u=await e.render(i,o);if(e.setCookieHeaders)for(let l of e.setCookieHeaders(u))u.headers.append("Set-Cookie",l);return u}return new Response(null,{status:404,statusText:"Not found"})}}}var g1=Object.freeze(Object.defineProperty({__proto__:null,createExports:_1},Symbol.toStringTag,{value:"Module"})),Iy=new WeakMap;function Bj(n){if(Iy.has(n))return Iy.get(n);let e={c:0,get id(){return"s"+this.c.toString()}};return Iy.set(n,e),e}function Uj(n){let e=n.id;return n.c++,e}var jj=n=>n.trim().replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase());function Hj(n,e,t){if(typeof n!="function")return!1;let{html:i}=y1.call(this,n,e,t);return typeof i=="string"}function y1(n,e,{default:t,...i},r){let a=r?.hydrate?Uj(Bj(this.result)):"",s=a1(()=>{let o={};for(let[l,d]of Object.entries(i)){let h=jj(l);o[h]=Hi(`<astro-slot name="${h}">${d}</astro-slot>`)}let u={...e,...o,children:t!=null?Hi(`<astro-slot>${t}</astro-slot>`):t};return pa(n,u)},{renderId:a});return{attrs:{"data-solid-render-id":a},html:s}}var $j={check:Hj,renderToStaticMarkup:y1},Vj=new Map([["src/pages/index.astro",d1],["src/pages/api/download-node.ts",c1],["src/pages/api/download.json.ts",h1],["src/pages/api/download.ts",f1],["src/pages/[playlist].astro",m1]]),Wj=[Object.assign({name:"astro:jsx",serverEntrypoint:"astro/jsx/server.js",jsxImportSource:"astro"},{ssr:ax}),Object.assign({name:"@astrojs/solid-js",clientEntrypoint:"@astrojs/solid-js/client.js",serverEntrypoint:"@astrojs/solid-js/server.js",jsxImportSource:"solid-js"},{ssr:$j})],T1=Object.assign(ix({adapterName:"@astrojs/cloudflare",routes:[{file:"",links:["_astro/_playlist_.2666082c.css"],scripts:[{type:"external",value:"_astro/hoisted.049ba034.js"}],routeData:{route:"/",type:"page",pattern:"^\\/$",segments:[],params:[],component:"src/pages/index.astro",pathname:"/",prerender:!1,_meta:{trailingSlash:"ignore"}}},{file:"",links:[],scripts:[],routeData:{route:"/api/download-node",type:"endpoint",pattern:"^\\/api\\/download-node$",segments:[[{content:"api",dynamic:!1,spread:!1}],[{content:"download-node",dynamic:!1,spread:!1}]],params:[],component:"src/pages/api/download-node.ts",pathname:"/api/download-node",prerender:!1,_meta:{trailingSlash:"ignore"}}},{file:"",links:[],scripts:[],routeData:{route:"/api/download.json",type:"endpoint",pattern:"^\\/api\\/download\\.json$",segments:[[{content:"api",dynamic:!1,spread:!1}],[{content:"download.json",dynamic:!1,spread:!1}]],params:[],component:"src/pages/api/download.json.ts",pathname:"/api/download.json",prerender:!1,_meta:{trailingSlash:"ignore"}}},{file:"",links:[],scripts:[],routeData:{route:"/api/download",type:"endpoint",pattern:"^\\/api\\/download$",segments:[[{content:"api",dynamic:!1,spread:!1}],[{content:"download",dynamic:!1,spread:!1}]],params:[],component:"src/pages/api/download.ts",pathname:"/api/download",prerender:!1,_meta:{trailingSlash:"ignore"}}},{file:"",links:["_astro/_playlist_.2666082c.css"],scripts:[{type:"external",value:"_astro/hoisted.f893a698.js"}],routeData:{route:"/[playlist]",type:"page",pattern:"^\\/([^/]+?)\\/?$",segments:[[{content:"playlist",dynamic:!0,spread:!1}]],params:["playlist"],component:"src/pages/[playlist].astro",prerender:!1,_meta:{trailingSlash:"ignore"}}}],base:"/",markdown:{drafts:!1,syntaxHighlight:"shiki",shikiConfig:{langs:[],theme:"github-dark",wrap:!1},remarkPlugins:[],rehypePlugins:[],remarkRehype:{},gfm:!0,smartypants:!0,contentDir:"file:///Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/content/"},pageMap:null,propagation:[],renderers:[],entryModules:{"\0@astrojs-ssr-virtual-entry":"_@astrojs-ssr-virtual-entry.mjs","/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/DownloadToggle":"_astro/DownloadToggle.6302333f.js","/astro/hoisted.js?q=1":"_astro/hoisted.f893a698.js","@astrojs/solid-js/client.js":"_astro/client.b5c7ba51.js","/astro/hoisted.js?q=0":"_astro/hoisted.049ba034.js","/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/Sidebar":"_astro/Sidebar.d832be2f.js","/Users/willkelly/Documents/Work/Code/Misc/DOTvids/node_modules/.pnpm/workbox-window@6.5.4/node_modules/workbox-window/build/workbox-window.prod.es5.mjs":"_astro/workbox-window.prod.es5.295a6886.js","/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/Video":"_astro/Video.bc2c78e4.js","astro:scripts/before-hydration.js":""},assets:["/_astro/_playlist_.2666082c.css","/favicon.svg","/manifest.webmanifest","/sw.js","/$server_build/manifest.webmanifest","/$server_build/registerSW.js","/_astro/DownloadToggle.6302333f.js","/_astro/Sidebar.d832be2f.js","/_astro/Video.bc2c78e4.js","/_astro/client.b5c7ba51.js","/_astro/hoisted.049ba034.js","/_astro/hoisted.f893a698.js","/_astro/pwa.9c84ba72.js","/_astro/store.df2046fd.js","/_astro/web.a1f35999.js","/_astro/workbox-window.prod.es5.295a6886.js","/$server_build/_astro/_playlist_.2666082c.css","/$server_build/chunks/astro.47989863.mjs","/$server_build/chunks/pages/all.4da60cd5.mjs"]}),{pageMap:Vj,renderers:Wj}),qj=void 0,Gj=_1(T1),s7=Gj.onRequest,v1="start";v1 in g1&&g1[v1](T1,qj);export{s7 as onRequest,Vj as pageMap,Wj as renderers};
/*!
 * Programatically add the following
 */
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*! @name @brightcove/player-loader @version 1.8.0 @license Apache-2.0 */
/*! @name @brightcove/player-url @version 1.2.0 @license Apache-2.0 */
/*! @name @videojs/http-streaming @version 2.16.2 @license Apache-2.0 */
/*! @name @videojs/http-streaming @version 3.0.0 @license Apache-2.0 */
/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */
/*! @name aes-decrypter @version 4.0.1 @license Apache-2.0 */
/*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 */
/*! @name m3u8-parser @version 6.0.0 @license Apache-2.0 */
/*! @name mpd-parser @version 0.22.1 @license Apache-2.0 */
/*! @name mpd-parser @version 1.0.1 @license Apache-2.0 */
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
/*! @name videojs-contrib-quality-levels @version 3.0.0 @license Apache-2.0 */
/*! @name videojs-playlist @version 5.0.0 @license Apache-2.0 */
/**
 * @license
 * Video.js 7.21.3 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
/**
 * @license
 * Video.js 8.0.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */
/**
 * shortdash - https://github.com/bibig/node-shorthash
 *
 * @license
 *
 * (The MIT License)
 *
 * Copyright (c) 2013 Bibig <bibig@me.com>
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
