globalThis.process = {
	argv: [],
	env: {},
};
var sx=Object.create;var af=Object.defineProperty;var ox=Object.getOwnPropertyDescriptor;var ux=Object.getOwnPropertyNames;var lx=Object.getPrototypeOf,cx=Object.prototype.hasOwnProperty;var de=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var dx=(a,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of ux(e))!cx.call(a,t)&&t!==r&&af(a,t,{get:()=>e[t],enumerable:!(i=ox(e,t))||i.enumerable});return a};var Ae=(a,e,r)=>(r=a!=null?sx(lx(a)):{},dx(e||!a||!a.__esModule?af(r,"default",{value:a,enumerable:!0}):r,a));var lf=de((UF,uf)=>{"use strict";function Ga(){this._types=Object.create(null),this._extensions=Object.create(null);for(let a=0;a<arguments.length;a++)this.define(arguments[a]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}Ga.prototype.define=function(a,e){for(let r in a){let i=a[r].map(function(t){return t.toLowerCase()});r=r.toLowerCase();for(let t=0;t<i.length;t++){let n=i[t];if(n[0]!=="*"){if(!e&&n in this._types)throw new Error('Attempt to change mapping for "'+n+'" extension from "'+this._types[n]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+n+'" from the list of extensions for "'+r+'".');this._types[n]=r}}if(e||!this._extensions[r]){let t=i[0];this._extensions[r]=t[0]!=="*"?t:t.substr(1)}}};Ga.prototype.getType=function(a){a=String(a);let e=a.replace(/^.*[/\\]/,"").toLowerCase(),r=e.replace(/^.*\./,"").toLowerCase(),i=e.length<a.length;return(r.length<e.length-1||!i)&&this._types[r]||null};Ga.prototype.getExtension=function(a){return a=/^\s*([^;\s]*)/.test(a)&&RegExp.$1,a&&this._extensions[a.toLowerCase()]||null};uf.exports=Ga});var df=de((jF,cf)=>{cf.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}});var hf=de((HF,ff)=>{ff.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mapbox-vector-tile":["mvt"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-iwork-keynote-sffkey":["*key"],"application/x-iwork-numbers-sffnumbers":["*numbers"],"application/x-iwork-pages-sffpages":["*pages"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.sap.vds":["vds"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}});var Qo=de((VF,pf)=>{"use strict";var Dx=lf();pf.exports=new Dx(df(),hf())});var Zo=de(Jo=>{"use strict";Jo.parse=bx;Jo.serialize=Ex;var Tx=Object.prototype.toString,Ka=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function bx(a,e){if(typeof a!="string")throw new TypeError("argument str must be a string");for(var r={},i=e||{},t=i.decode||Sx,n=0;n<a.length;){var s=a.indexOf("=",n);if(s===-1)break;var o=a.indexOf(";",n);if(o===-1)o=a.length;else if(o<s){n=a.lastIndexOf(";",s-1)+1;continue}var u=a.slice(n,s).trim();if(r[u]===void 0){var l=a.slice(s+1,o).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1)),r[u]=Ax(l,t)}n=o+1}return r}function Ex(a,e,r){var i=r||{},t=i.encode||Cx;if(typeof t!="function")throw new TypeError("option encode is invalid");if(!Ka.test(a))throw new TypeError("argument name is invalid");var n=t(e);if(n&&!Ka.test(n))throw new TypeError("argument val is invalid");var s=a+"="+n;if(i.maxAge!=null){var o=i.maxAge-0;if(isNaN(o)||!isFinite(o))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(o)}if(i.domain){if(!Ka.test(i.domain))throw new TypeError("option domain is invalid");s+="; Domain="+i.domain}if(i.path){if(!Ka.test(i.path))throw new TypeError("option path is invalid");s+="; Path="+i.path}if(i.expires){var u=i.expires;if(!wx(u)||isNaN(u.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+u.toUTCString()}if(i.httpOnly&&(s+="; HttpOnly"),i.secure&&(s+="; Secure"),i.priority){var l=typeof i.priority=="string"?i.priority.toLowerCase():i.priority;switch(l){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(i.sameSite){var c=typeof i.sameSite=="string"?i.sameSite.toLowerCase():i.sameSite;switch(c){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return s}function Sx(a){return a.indexOf("%")!==-1?decodeURIComponent(a):a}function Cx(a){return encodeURIComponent(a)}function wx(a){return Tx.call(a)==="[object Date]"||a instanceof Date}function Ax(a,e){try{return e(a)}catch{return a}}});var Ef=de((mk,iu)=>{var vi={};typeof iu>"u"?window.eastasianwidth=vi:iu.exports=vi;vi.eastAsianWidth=function(a){var e=a.charCodeAt(0),r=a.length==2?a.charCodeAt(1):0,i=e;return 55296<=e&&e<=56319&&56320<=r&&r<=57343&&(e&=1023,r&=1023,i=e<<10|r,i+=65536),i==12288||65281<=i&&i<=65376||65504<=i&&i<=65510?"F":i==8361||65377<=i&&i<=65470||65474<=i&&i<=65479||65482<=i&&i<=65487||65490<=i&&i<=65495||65498<=i&&i<=65500||65512<=i&&i<=65518?"H":4352<=i&&i<=4447||4515<=i&&i<=4519||4602<=i&&i<=4607||9001<=i&&i<=9002||11904<=i&&i<=11929||11931<=i&&i<=12019||12032<=i&&i<=12245||12272<=i&&i<=12283||12289<=i&&i<=12350||12353<=i&&i<=12438||12441<=i&&i<=12543||12549<=i&&i<=12589||12593<=i&&i<=12686||12688<=i&&i<=12730||12736<=i&&i<=12771||12784<=i&&i<=12830||12832<=i&&i<=12871||12880<=i&&i<=13054||13056<=i&&i<=19903||19968<=i&&i<=42124||42128<=i&&i<=42182||43360<=i&&i<=43388||44032<=i&&i<=55203||55216<=i&&i<=55238||55243<=i&&i<=55291||63744<=i&&i<=64255||65040<=i&&i<=65049||65072<=i&&i<=65106||65108<=i&&i<=65126||65128<=i&&i<=65131||110592<=i&&i<=110593||127488<=i&&i<=127490||127504<=i&&i<=127546||127552<=i&&i<=127560||127568<=i&&i<=127569||131072<=i&&i<=194367||177984<=i&&i<=196605||196608<=i&&i<=262141?"W":32<=i&&i<=126||162<=i&&i<=163||165<=i&&i<=166||i==172||i==175||10214<=i&&i<=10221||10629<=i&&i<=10630?"Na":i==161||i==164||167<=i&&i<=168||i==170||173<=i&&i<=174||176<=i&&i<=180||182<=i&&i<=186||188<=i&&i<=191||i==198||i==208||215<=i&&i<=216||222<=i&&i<=225||i==230||232<=i&&i<=234||236<=i&&i<=237||i==240||242<=i&&i<=243||247<=i&&i<=250||i==252||i==254||i==257||i==273||i==275||i==283||294<=i&&i<=295||i==299||305<=i&&i<=307||i==312||319<=i&&i<=322||i==324||328<=i&&i<=331||i==333||338<=i&&i<=339||358<=i&&i<=359||i==363||i==462||i==464||i==466||i==468||i==470||i==472||i==474||i==476||i==593||i==609||i==708||i==711||713<=i&&i<=715||i==717||i==720||728<=i&&i<=731||i==733||i==735||768<=i&&i<=879||913<=i&&i<=929||931<=i&&i<=937||945<=i&&i<=961||963<=i&&i<=969||i==1025||1040<=i&&i<=1103||i==1105||i==8208||8211<=i&&i<=8214||8216<=i&&i<=8217||8220<=i&&i<=8221||8224<=i&&i<=8226||8228<=i&&i<=8231||i==8240||8242<=i&&i<=8243||i==8245||i==8251||i==8254||i==8308||i==8319||8321<=i&&i<=8324||i==8364||i==8451||i==8453||i==8457||i==8467||i==8470||8481<=i&&i<=8482||i==8486||i==8491||8531<=i&&i<=8532||8539<=i&&i<=8542||8544<=i&&i<=8555||8560<=i&&i<=8569||i==8585||8592<=i&&i<=8601||8632<=i&&i<=8633||i==8658||i==8660||i==8679||i==8704||8706<=i&&i<=8707||8711<=i&&i<=8712||i==8715||i==8719||i==8721||i==8725||i==8730||8733<=i&&i<=8736||i==8739||i==8741||8743<=i&&i<=8748||i==8750||8756<=i&&i<=8759||8764<=i&&i<=8765||i==8776||i==8780||i==8786||8800<=i&&i<=8801||8804<=i&&i<=8807||8810<=i&&i<=8811||8814<=i&&i<=8815||8834<=i&&i<=8835||8838<=i&&i<=8839||i==8853||i==8857||i==8869||i==8895||i==8978||9312<=i&&i<=9449||9451<=i&&i<=9547||9552<=i&&i<=9587||9600<=i&&i<=9615||9618<=i&&i<=9621||9632<=i&&i<=9633||9635<=i&&i<=9641||9650<=i&&i<=9651||9654<=i&&i<=9655||9660<=i&&i<=9661||9664<=i&&i<=9665||9670<=i&&i<=9672||i==9675||9678<=i&&i<=9681||9698<=i&&i<=9701||i==9711||9733<=i&&i<=9734||i==9737||9742<=i&&i<=9743||9748<=i&&i<=9749||i==9756||i==9758||i==9792||i==9794||9824<=i&&i<=9825||9827<=i&&i<=9829||9831<=i&&i<=9834||9836<=i&&i<=9837||i==9839||9886<=i&&i<=9887||9918<=i&&i<=9919||9924<=i&&i<=9933||9935<=i&&i<=9953||i==9955||9960<=i&&i<=9983||i==10045||i==10071||10102<=i&&i<=10111||11093<=i&&i<=11097||12872<=i&&i<=12879||57344<=i&&i<=63743||65024<=i&&i<=65039||i==65533||127232<=i&&i<=127242||127248<=i&&i<=127277||127280<=i&&i<=127337||127344<=i&&i<=127386||917760<=i&&i<=917999||983040<=i&&i<=1048573||1048576<=i&&i<=1114109?"A":"N"};vi.characterLength=function(a){var e=this.eastAsianWidth(a);return e=="F"||e=="W"||e=="A"?2:1};function bf(a){return a.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}vi.length=function(a){for(var e=bf(a),r=0,i=0;i<e.length;i++)r=r+this.characterLength(e[i]);return r};vi.slice=function(a,e,r){textLen=vi.length(a),e=e||0,r=r||1,e<0&&(e=textLen+e),r<0&&(r=textLen+r);for(var i="",t=0,n=bf(a),s=0;s<n.length;s++){var o=n[s],u=vi.length(o);if(t>=e-(u==2?1:0))if(t+u<=r)i+=o;else break;t+=u}return i}});var Cf=de((gk,Sf)=>{"use strict";Sf.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var wh=de(()=>{});var vs=de((kk,Fh)=>{var Ah=typeof global<"u"?global:typeof window<"u"?window:{},TT=wh(),bn;typeof document<"u"?bn=document:(bn=Ah["__GLOBAL_DOCUMENT_CACHE@4"],bn||(bn=Ah["__GLOBAL_DOCUMENT_CACHE@4"]=TT));Fh.exports=bn});var Et=de((Pk,kh)=>{var En;typeof window<"u"?En=window:typeof global<"u"?En=global:typeof self<"u"?En=self:En={};kh.exports=En});var qh=de((Hi,Wh)=>{function Vh(a){if(a&&typeof a=="object"){var e=a.which||a.keyCode||a.charCode;e&&(a=e)}if(typeof a=="number")return $h[a];var r=String(a),i=Qt[r.toLowerCase()];if(i)return i;var i=Ts[r.toLowerCase()];if(i)return i;if(r.length===1)return r.charCodeAt(0)}Vh.isEventKey=function(e,r){if(e&&typeof e=="object"){var i=e.which||e.keyCode||e.charCode;if(i==null)return!1;if(typeof r=="string"){var t=Qt[r.toLowerCase()];if(t)return t===i;var t=Ts[r.toLowerCase()];if(t)return t===i}else if(typeof r=="number")return r===i;return!1}};Hi=Wh.exports=Vh;var Qt=Hi.code=Hi.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},Ts=Hi.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(Fe=97;Fe<123;Fe++)Qt[String.fromCharCode(Fe)]=Fe-32;for(Fe=48;Fe<58;Fe++)Qt[Fe-48]=Fe;var Fe;for(Fe=1;Fe<13;Fe++)Qt["f"+Fe]=Fe+111;for(Fe=0;Fe<10;Fe++)Qt["numpad "+Fe]=Fe+96;var $h=Hi.names=Hi.title={};for(Fe in Qt)$h[Qt[Fe]]=Fe;for(qu in Ts)Qt[qu]=Ts[qu];var qu});var Gh=de((Bk,zh)=>{zh.exports=sb;function sb(a,e){var r,i=null;try{r=JSON.parse(a,e)}catch(t){i=t}return[i,r]}});var Kh=de((Uk,Jt)=>{function zu(){return Jt.exports=zu=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(a[i]=r[i])}return a},Jt.exports.__esModule=!0,Jt.exports.default=Jt.exports,zu.apply(this,arguments)}Jt.exports=zu,Jt.exports.__esModule=!0,Jt.exports.default=Jt.exports});var Yh=de((jk,Xh)=>{Xh.exports=ub;var ob=Object.prototype.toString;function ub(a){if(!a)return!1;var e=ob.call(a);return e==="[object Function]"||typeof a=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}});var Jh=de((Hk,Qh)=>{"use strict";var lb=Et(),cb=function(e,r){return r===void 0&&(r=!1),function(i,t,n){if(i){e(i);return}if(t.statusCode>=400&&t.statusCode<=599){var s=n;if(r)if(lb.TextDecoder){var o=db(t.headers&&t.headers["content-type"]);try{s=new TextDecoder(o).decode(n)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(n));e({cause:s});return}e(null,n)}};function db(a){return a===void 0&&(a=""),a.toLowerCase().split(";").reduce(function(e,r){var i=r.split("="),t=i[0],n=i[1];return t.trim()==="charset"?n.trim():e},"utf-8")}Qh.exports=cb});var ip=de((Vk,Gu)=>{"use strict";var Zh=Et(),fb=Kh(),hb=Yh();Bt.httpHandler=Jh();var pb=function(e){var r={};return e&&e.trim().split(`
`).forEach(function(i){var t=i.indexOf(":"),n=i.slice(0,t).trim().toLowerCase(),s=i.slice(t+1).trim();typeof r[n]>"u"?r[n]=s:Array.isArray(r[n])?r[n].push(s):r[n]=[r[n],s]}),r};Gu.exports=Bt;Gu.exports.default=Bt;Bt.XMLHttpRequest=Zh.XMLHttpRequest||yb;Bt.XDomainRequest="withCredentials"in new Bt.XMLHttpRequest?Bt.XMLHttpRequest:Zh.XDomainRequest;mb(["get","put","post","patch","head","delete"],function(a){Bt[a==="delete"?"del":a]=function(e,r,i){return r=ep(e,r,i),r.method=a.toUpperCase(),tp(r)}});function mb(a,e){for(var r=0;r<a.length;r++)e(a[r])}function gb(a){for(var e in a)if(a.hasOwnProperty(e))return!1;return!0}function ep(a,e,r){var i=a;return hb(e)?(r=e,typeof a=="string"&&(i={uri:a})):i=fb({},e,{uri:a}),i.callback=r,i}function Bt(a,e,r){return e=ep(a,e,r),tp(e)}function tp(a){if(typeof a.callback>"u")throw new Error("callback argument missing");var e=!1,r=function(j,L,R){e||(e=!0,a.callback(j,L,R))};function i(){o.readyState===4&&setTimeout(s,0)}function t(){var k=void 0;if(o.response?k=o.response:k=o.responseText||vb(o),b)try{k=JSON.parse(k)}catch{}return k}function n(k){return clearTimeout(T),k instanceof Error||(k=new Error(""+(k||"Unknown XMLHttpRequest Error"))),k.statusCode=0,r(k,C)}function s(){if(!l){var k;clearTimeout(T),a.useXDR&&o.status===void 0?k=200:k=o.status===1223?204:o.status;var j=C,L=null;return k!==0?(j={body:t(),statusCode:k,method:f,headers:{},url:c,rawRequest:o},o.getAllResponseHeaders&&(j.headers=pb(o.getAllResponseHeaders()))):L=new Error("Internal XMLHttpRequest Error"),r(L,j,j.body)}}var o=a.xhr||null;o||(a.cors||a.useXDR?o=new Bt.XDomainRequest:o=new Bt.XMLHttpRequest);var u,l,c=o.url=a.uri||a.url,f=o.method=a.method||"GET",m=a.body||a.data,_=o.headers=a.headers||{},x=!!a.sync,b=!1,T,C={body:void 0,headers:{},statusCode:0,method:f,url:c,rawRequest:o};if("json"in a&&a.json!==!1&&(b=!0,_.accept||_.Accept||(_.Accept="application/json"),f!=="GET"&&f!=="HEAD"&&(_["content-type"]||_["Content-Type"]||(_["Content-Type"]="application/json"),m=JSON.stringify(a.json===!0?m:a.json))),o.onreadystatechange=i,o.onload=s,o.onerror=n,o.onprogress=function(){},o.onabort=function(){l=!0},o.ontimeout=n,o.open(f,c,!x,a.username,a.password),x||(o.withCredentials=!!a.withCredentials),!x&&a.timeout>0&&(T=setTimeout(function(){if(!l){l=!0,o.abort("timeout");var k=new Error("XMLHttpRequest timeout");k.code="ETIMEDOUT",n(k)}},a.timeout)),o.setRequestHeader)for(u in _)_.hasOwnProperty(u)&&o.setRequestHeader(u,_[u]);else if(a.headers&&!gb(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(o.responseType=a.responseType),"beforeSend"in a&&typeof a.beforeSend=="function"&&a.beforeSend(o),o.send(m||null),o}function vb(a){try{if(a.responseType==="document")return a.responseXML;var e=a.responseXML&&a.responseXML.documentElement.nodeName==="parsererror";if(a.responseType===""&&!e)return a.responseXML}catch{}return null}function yb(){}});var lp=de(($k,up)=>{var rp=vs(),Xu=Object.create||function(){function a(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=e,new a}}();function pt(a,e){this.name="ParsingError",this.code=a.code,this.message=e||a.message}pt.prototype=Xu(Error.prototype);pt.prototype.constructor=pt;pt.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function Yu(a){function e(i,t,n,s){return(i|0)*3600+(t|0)*60+(n|0)+(s|0)/1e3}var r=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function Fn(){this.values=Xu(null)}Fn.prototype={set:function(a,e){!this.get(a)&&e!==""&&(this.values[a]=e)},get:function(a,e,r){return r?this.has(a)?this.values[a]:e[r]:this.has(a)?this.values[a]:e},has:function(a){return a in this.values},alt:function(a,e,r){for(var i=0;i<r.length;++i)if(e===r[i]){this.set(a,e);break}},integer:function(a,e){/^-?\d+$/.test(e)&&this.set(a,parseInt(e,10))},percent:function(a,e){var r;return(r=e.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(a,e),!0):!1}};function An(a,e,r,i){var t=i?a.split(i):[a];for(var n in t)if(typeof t[n]=="string"){var s=t[n].split(r);if(s.length===2){var o=s[0].trim(),u=s[1].trim();e(o,u)}}}function _b(a,e,r){var i=a;function t(){var o=Yu(a);if(o===null)throw new pt(pt.Errors.BadTimeStamp,"Malformed timestamp: "+i);return a=a.replace(/^[^\sa-zA-Z-]+/,""),o}function n(o,u){var l=new Fn;An(o,function(c,f){switch(c){case"region":for(var m=r.length-1;m>=0;m--)if(r[m].id===f){l.set(c,r[m].region);break}break;case"vertical":l.alt(c,f,["rl","lr"]);break;case"line":var _=f.split(","),x=_[0];l.integer(c,x),l.percent(c,x)&&l.set("snapToLines",!1),l.alt(c,x,["auto"]),_.length===2&&l.alt("lineAlign",_[1],["start","center","end"]);break;case"position":_=f.split(","),l.percent(c,_[0]),_.length===2&&l.alt("positionAlign",_[1],["start","center","end"]);break;case"size":l.percent(c,f);break;case"align":l.alt(c,f,["start","center","end","left","right"]);break}},/:/,/\s/),u.region=l.get("region",null),u.vertical=l.get("vertical","");try{u.line=l.get("line","auto")}catch{}u.lineAlign=l.get("lineAlign","start"),u.snapToLines=l.get("snapToLines",!0),u.size=l.get("size",100);try{u.align=l.get("align","center")}catch{u.align=l.get("align","middle")}try{u.position=l.get("position","auto")}catch{u.position=l.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},u.align)}u.positionAlign=l.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},u.align)}function s(){a=a.replace(/^\s+/,"")}if(s(),e.startTime=t(),s(),a.substr(0,3)!=="-->")throw new pt(pt.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+i);a=a.substr(3),s(),e.endTime=t(),s(),n(a,e)}var Ku=rp.createElement&&rp.createElement("textarea"),xb={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},np={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Db={v:"title",lang:"lang"},ap={rt:"ruby"};function op(a,e){function r(){if(!e)return null;function x(T){return e=e.substr(T.length),T}var b=e.match(/^([^<]*)(<[^>]*>?)?/);return x(b[1]?b[1]:b[2])}function i(x){return Ku.innerHTML=x,x=Ku.textContent,Ku.textContent="",x}function t(x,b){return!ap[b.localName]||ap[b.localName]===x.localName}function n(x,b){var T=xb[x];if(!T)return null;var C=a.document.createElement(T),k=Db[x];return k&&b&&(C[k]=b.trim()),C}for(var s=a.document.createElement("div"),o=s,u,l=[];(u=r())!==null;){if(u[0]==="<"){if(u[1]==="/"){l.length&&l[l.length-1]===u.substr(2).replace(">","")&&(l.pop(),o=o.parentNode);continue}var c=Yu(u.substr(1,u.length-2)),f;if(c){f=a.document.createProcessingInstruction("timestamp",c),o.appendChild(f);continue}var m=u.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!m||(f=n(m[1],m[3]),!f)||!t(o,f))continue;if(m[2]){var _=m[2].split(".");_.forEach(function(x){var b=/^bg_/.test(x),T=b?x.slice(3):x;if(np.hasOwnProperty(T)){var C=b?"background-color":"color",k=np[T];f.style[C]=k}}),f.className=_.join(" ")}l.push(m[1]),o.appendChild(f),o=f;continue}o.appendChild(a.document.createTextNode(i(u)))}return s}var sp=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Tb(a){for(var e=0;e<sp.length;e++){var r=sp[e];if(a>=r[0]&&a<=r[1])return!0}return!1}function bb(a){var e=[],r="",i;if(!a||!a.childNodes)return"ltr";function t(o,u){for(var l=u.childNodes.length-1;l>=0;l--)o.push(u.childNodes[l])}function n(o){if(!o||!o.length)return null;var u=o.pop(),l=u.textContent||u.innerText;if(l){var c=l.match(/^.*(\n|\r)/);return c?(o.length=0,c[0]):l}if(u.tagName==="ruby")return n(o);if(u.childNodes)return t(o,u),n(o)}for(t(e,a);r=n(e);)for(var s=0;s<r.length;s++)if(i=r.charCodeAt(s),Tb(i))return"rtl";return"ltr"}function Eb(a){if(typeof a.line=="number"&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var e=a.track,r=e.textTrackList,i=0,t=0;t<r.length&&r[t]!==e;t++)r[t].mode==="showing"&&i++;return++i*-1}function Es(){}Es.prototype.applyStyles=function(a,e){e=e||this.div;for(var r in a)a.hasOwnProperty(r)&&(e.style[r]=a[r])};Es.prototype.formatStyle=function(a,e){return a===0?0:a+e};function bs(a,e,r){Es.call(this),this.cue=e,this.cueDiv=op(a,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=a.document.createElement("div"),i={direction:bb(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var t=0;switch(e.positionAlign){case"start":t=e.position;break;case"center":t=e.position-e.size/2;break;case"end":t=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(t,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(t,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(n){this.applyStyles({top:this.formatStyle(n.top,"px"),bottom:this.formatStyle(n.bottom,"px"),left:this.formatStyle(n.left,"px"),right:this.formatStyle(n.right,"px"),height:this.formatStyle(n.height,"px"),width:this.formatStyle(n.width,"px")})}}bs.prototype=Xu(Es.prototype);bs.prototype.constructor=bs;function Qe(a){var e,r,i,t;if(a.div){r=a.div.offsetHeight,i=a.div.offsetWidth,t=a.div.offsetTop;var n=(n=a.div.childNodes)&&(n=n[0])&&n.getClientRects&&n.getClientRects();a=a.div.getBoundingClientRect(),e=n?Math.max(n[0]&&n[0].height||0,a.height/n.length):0}this.left=a.left,this.right=a.right,this.top=a.top||t,this.height=a.height||r,this.bottom=a.bottom||t+(a.height||r),this.width=a.width||i,this.lineHeight=e!==void 0?e:a.lineHeight}Qe.prototype.move=function(a,e){switch(e=e!==void 0?e:this.lineHeight,a){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Qe.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top};Qe.prototype.overlapsAny=function(a){for(var e=0;e<a.length;e++)if(this.overlaps(a[e]))return!0;return!1};Qe.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right};Qe.prototype.overlapsOppositeAxis=function(a,e){switch(e){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}};Qe.prototype.intersectPercentage=function(a){var e=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),r=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),i=e*r;return i/(this.height*this.width)};Qe.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}};Qe.getSimpleBoxPosition=function(a){var e=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,r=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,i=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var t={left:a.left,right:a.right,top:a.top||i,height:a.height||e,bottom:a.bottom||i+(a.height||e),width:a.width||r};return t};function Sb(a,e,r,i){function t(T,C){for(var k,j=new Qe(T),L=1,R=0;R<C.length;R++){for(;T.overlapsOppositeAxis(r,C[R])||T.within(r)&&T.overlapsAny(i);)T.move(C[R]);if(T.within(r))return T;var H=T.intersectPercentage(r);L>H&&(k=new Qe(T),L=H),T=new Qe(j)}return k||j}var n=new Qe(e),s=e.cue,o=Eb(s),u=[];if(s.snapToLines){var l;switch(s.vertical){case"":u=["+y","-y"],l="height";break;case"rl":u=["+x","-x"],l="width";break;case"lr":u=["-x","+x"],l="width";break}var c=n.lineHeight,f=c*Math.round(o),m=r[l]+c,_=u[0];Math.abs(f)>m&&(f=f<0?-1:1,f*=Math.ceil(m/c)*c),o<0&&(f+=s.vertical===""?r.height:r.width,u=u.reverse()),n.move(_,f)}else{var x=n.lineHeight/r.height*100;switch(s.lineAlign){case"center":o-=x/2;break;case"end":o-=x;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}u=["+y","-x","+x","-y"],n=new Qe(e)}var b=t(n,u);e.move(b.toCSSCompatValues(r))}function vr(){}vr.StringDecoder=function(){return{decode:function(a){if(!a)return"";if(typeof a!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}};vr.convertCueToDOMTree=function(a,e){return!a||!e?null:op(a,e)};var Cb=.05,wb="sans-serif",Ab="1.5%";vr.processCues=function(a,e,r){if(!a||!e||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=a.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=Ab,r.appendChild(i);function t(c){for(var f=0;f<c.length;f++)if(c[f].hasBeenReset||!c[f].displayState)return!0;return!1}if(!t(e)){for(var n=0;n<e.length;n++)i.appendChild(e[n].displayState);return}var s=[],o=Qe.getSimpleBoxPosition(i),u=Math.round(o.height*Cb*100)/100,l={font:u+"px "+wb};(function(){for(var c,f,m=0;m<e.length;m++)f=e[m],c=new bs(a,f,l),i.appendChild(c.div),Sb(a,c,o,s),f.displayState=c.div,s.push(Qe.getSimpleBoxPosition(c))})()};vr.Parser=function(a,e,r){r||(r=e,e={}),e||(e={}),this.window=a,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]};vr.Parser.prototype={reportOrThrowError:function(a){if(a instanceof pt)this.onparsingerror&&this.onparsingerror(a);else throw a},parse:function(a){var e=this;a&&(e.buffer+=e.decoder.decode(a,{stream:!0}));function r(){for(var c=e.buffer,f=0;f<c.length&&c[f]!=="\r"&&c[f]!==`
`;)++f;var m=c.substr(0,f);return c[f]==="\r"&&++f,c[f]===`
`&&++f,e.buffer=c.substr(f),m}function i(c){var f=new Fn;if(An(c,function(_,x){switch(_){case"id":f.set(_,x);break;case"width":f.percent(_,x);break;case"lines":f.integer(_,x);break;case"regionanchor":case"viewportanchor":var b=x.split(",");if(b.length!==2)break;var T=new Fn;if(T.percent("x",b[0]),T.percent("y",b[1]),!T.has("x")||!T.has("y"))break;f.set(_+"X",T.get("x")),f.set(_+"Y",T.get("y"));break;case"scroll":f.alt(_,x,["up"]);break}},/=/,/\s/),f.has("id")){var m=new(e.vttjs.VTTRegion||e.window.VTTRegion);m.width=f.get("width",100),m.lines=f.get("lines",3),m.regionAnchorX=f.get("regionanchorX",0),m.regionAnchorY=f.get("regionanchorY",100),m.viewportAnchorX=f.get("viewportanchorX",0),m.viewportAnchorY=f.get("viewportanchorY",100),m.scroll=f.get("scroll",""),e.onregion&&e.onregion(m),e.regionList.push({id:f.get("id"),region:m})}}function t(c){var f=new Fn;An(c,function(m,_){switch(m){case"MPEGT":f.integer(m+"S",_);break;case"LOCA":f.set(m+"L",Yu(_));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:f.get("MPEGTS"),LOCAL:f.get("LOCAL")})}function n(c){c.match(/X-TIMESTAMP-MAP/)?An(c,function(f,m){switch(f){case"X-TIMESTAMP-MAP":t(m);break}},/=/):An(c,function(f,m){switch(f){case"Region":i(m);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=r();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new pt(pt.Errors.BadSignature);e.state="HEADER"}for(var u=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(u?u=!1:s=r(),e.state){case"HEADER":/:/.test(s)?n(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{_b(s,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var l=s.indexOf("-->")!==-1;if(!s||l&&(u=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||a.state==="HEADER")&&(a.buffer+=`

`,a.parse()),a.state==="INITIAL")throw new pt(pt.Errors.BadSignature)}catch(e){a.reportOrThrowError(e)}return a.onflush&&a.onflush(),this}};up.exports=vr});var fp=de((Wk,dp)=>{var Fb="auto",kb={"":1,lr:1,rl:1},Pb={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Ib(a){if(typeof a!="string")return!1;var e=kb[a.toLowerCase()];return e?a.toLowerCase():!1}function Qu(a){if(typeof a!="string")return!1;var e=Pb[a.toLowerCase()];return e?a.toLowerCase():!1}function cp(a,e,r){this.hasBeenReset=!1;var i="",t=!1,n=a,s=e,o=r,u=null,l="",c=!0,f="auto",m="start",_="auto",x="auto",b=100,T="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(C){i=""+C}},pauseOnExit:{enumerable:!0,get:function(){return t},set:function(C){t=!!C}},startTime:{enumerable:!0,get:function(){return n},set:function(C){if(typeof C!="number")throw new TypeError("Start time must be set to a number.");n=C,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(C){if(typeof C!="number")throw new TypeError("End time must be set to a number.");s=C,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(C){o=""+C,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(C){u=C,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(C){var k=Ib(C);if(k===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=k,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(C){c=!!C,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(C){if(typeof C!="number"&&C!==Fb)throw new SyntaxError("Line: an invalid number or illegal string was specified.");f=C,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return m},set:function(C){var k=Qu(C);k?(m=k,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return _},set:function(C){if(C<0||C>100)throw new Error("Position must be between 0 and 100.");_=C,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return x},set:function(C){var k=Qu(C);k?(x=k,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return b},set:function(C){if(C<0||C>100)throw new Error("Size must be between 0 and 100.");b=C,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return T},set:function(C){var k=Qu(C);if(!k)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");T=k,this.hasBeenReset=!0}}}),this.displayState=void 0}cp.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};dp.exports=cp});var pp=de((qk,hp)=>{var Ob={"":!0,up:!0};function Lb(a){if(typeof a!="string")return!1;var e=Ob[a.toLowerCase()];return e?a.toLowerCase():!1}function kn(a){return typeof a=="number"&&a>=0&&a<=100}function Rb(){var a=100,e=3,r=0,i=100,t=0,n=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(o){if(!kn(o))throw new Error("Width must be between 0 and 100.");a=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(o){if(!kn(o))throw new Error("RegionAnchorX must be between 0 and 100.");i=o}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!kn(o))throw new Error("RegionAnchorY must be between 0 and 100.");r=o}},viewportAnchorY:{enumerable:!0,get:function(){return n},set:function(o){if(!kn(o))throw new Error("ViewportAnchorY must be between 0 and 100.");n=o}},viewportAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!kn(o))throw new Error("ViewportAnchorX must be between 0 and 100.");t=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var u=Lb(o);u===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=u}}})}hp.exports=Rb});var gp=de((zk,mp)=>{var Zt=Et(),Vi=mp.exports={WebVTT:lp(),VTTCue:fp(),VTTRegion:pp()};Zt.vttjs=Vi;Zt.WebVTT=Vi.WebVTT;var Mb=Vi.VTTCue,Nb=Vi.VTTRegion,Bb=Zt.VTTCue,Ub=Zt.VTTRegion;Vi.shim=function(){Zt.VTTCue=Mb,Zt.VTTRegion=Nb};Vi.restore=function(){Zt.VTTCue=Bb,Zt.VTTRegion=Ub};Zt.VTTCue||Vi.shim()});var vp=de((Pn,el)=>{(function(a){var e=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,t=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,n={buildAbsoluteURL:function(s,o,u){if(u=u||{},s=s.trim(),o=o.trim(),!o){if(!u.alwaysNormalize)return s;var l=n.parseURL(s);if(!l)throw new Error("Error trying to parse base URL.");return l.path=n.normalizePath(l.path),n.buildURLFromParts(l)}var c=n.parseURL(o);if(!c)throw new Error("Error trying to parse relative URL.");if(c.scheme)return u.alwaysNormalize?(c.path=n.normalizePath(c.path),n.buildURLFromParts(c)):o;var f=n.parseURL(s);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var m=r.exec(f.path);f.netLoc=m[1],f.path=m[2]}f.netLoc&&!f.path&&(f.path="/");var _={scheme:f.scheme,netLoc:c.netLoc,path:null,params:c.params,query:c.query,fragment:c.fragment};if(!c.netLoc&&(_.netLoc=f.netLoc,c.path[0]!=="/"))if(!c.path)_.path=f.path,c.params||(_.params=f.params,c.query||(_.query=f.query));else{var x=f.path,b=x.substring(0,x.lastIndexOf("/")+1)+c.path;_.path=n.normalizePath(b)}return _.path===null&&(_.path=u.alwaysNormalize?n.normalizePath(c.path):c.path),n.buildURLFromParts(_)},parseURL:function(s){var o=e.exec(s);return o?{scheme:o[1]||"",netLoc:o[2]||"",path:o[3]||"",params:o[4]||"",query:o[5]||"",fragment:o[6]||""}:null},normalizePath:function(s){for(s=s.split("").reverse().join("").replace(i,"");s.length!==(s=s.replace(t,"")).length;);return s.split("").reverse().join("")},buildURLFromParts:function(s){return s.scheme+s.netLoc+s.path+s.params+s.query+s.fragment}};typeof Pn=="object"&&typeof el=="object"?el.exports=n:typeof define=="function"&&define.amd?define([],function(){return n}):typeof Pn=="object"?Pn.URLToolkit=n:a.URLToolkit=n})(Pn)});var Ln=de(Dr=>{"use strict";function eE(a,e,r){if(r===void 0&&(r=Array.prototype),a&&typeof r.find=="function")return r.find.call(a,e);for(var i=0;i<a.length;i++)if(Object.prototype.hasOwnProperty.call(a,i)){var t=a[i];if(e.call(void 0,t,i,a))return t}}function hl(a,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(a):a}function tE(a,e){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}var wp=hl({HTML:"text/html",isHTML:function(a){return a===wp.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Ap=hl({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===Ap.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Dr.assign=tE;Dr.find=eE;Dr.freeze=hl;Dr.MIME_TYPE=wp;Dr.NAMESPACE=Ap});var El=de(Ei=>{var Mp=Ln(),Ut=Mp.find,Rn=Mp.NAMESPACE;function iE(a){return a!==""}function rE(a){return a?a.split(/[\t\n\f\r ]+/).filter(iE):[]}function nE(a,e){return a.hasOwnProperty(e)||(a[e]=!0),a}function Fp(a){if(!a)return[];var e=rE(a);return Object.keys(e.reduce(nE,{}))}function aE(a){return function(e){return a&&a.indexOf(e)!==-1}}function Nn(a,e){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}function lt(a,e){var r=a.prototype;if(!(r instanceof e)){let t=function(){};var i=t;t.prototype=e.prototype,t=new t,Nn(r,t),a.prototype=r=t}r.constructor!=a&&(typeof a!="function"&&console.error("unknown Class:"+a),r.constructor=a)}var ct={},Ft=ct.ELEMENT_NODE=1,br=ct.ATTRIBUTE_NODE=2,Fs=ct.TEXT_NODE=3,Np=ct.CDATA_SECTION_NODE=4,Bp=ct.ENTITY_REFERENCE_NODE=5,sE=ct.ENTITY_NODE=6,Up=ct.PROCESSING_INSTRUCTION_NODE=7,jp=ct.COMMENT_NODE=8,Hp=ct.DOCUMENT_NODE=9,Vp=ct.DOCUMENT_TYPE_NODE=10,ii=ct.DOCUMENT_FRAGMENT_NODE=11,oE=ct.NOTATION_NODE=12,ze={},Be={},pP=ze.INDEX_SIZE_ERR=(Be[1]="Index size error",1),mP=ze.DOMSTRING_SIZE_ERR=(Be[2]="DOMString size error",2),ut=ze.HIERARCHY_REQUEST_ERR=(Be[3]="Hierarchy request error",3),gP=ze.WRONG_DOCUMENT_ERR=(Be[4]="Wrong document",4),vP=ze.INVALID_CHARACTER_ERR=(Be[5]="Invalid character",5),yP=ze.NO_DATA_ALLOWED_ERR=(Be[6]="No data allowed",6),_P=ze.NO_MODIFICATION_ALLOWED_ERR=(Be[7]="No modification allowed",7),$p=ze.NOT_FOUND_ERR=(Be[8]="Not found",8),xP=ze.NOT_SUPPORTED_ERR=(Be[9]="Not supported",9),kp=ze.INUSE_ATTRIBUTE_ERR=(Be[10]="Attribute in use",10),DP=ze.INVALID_STATE_ERR=(Be[11]="Invalid state",11),TP=ze.SYNTAX_ERR=(Be[12]="Syntax error",12),bP=ze.INVALID_MODIFICATION_ERR=(Be[13]="Invalid modification",13),EP=ze.NAMESPACE_ERR=(Be[14]="Invalid namespace",14),SP=ze.INVALID_ACCESS_ERR=(Be[15]="Invalid access",15);function Ie(a,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,Be[a]),this.message=Be[a],Error.captureStackTrace&&Error.captureStackTrace(this,Ie);return r.code=a,e&&(this.message=this.message+": "+e),r}Ie.prototype=Error.prototype;Nn(ze,Ie);function ti(){}ti.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,e){for(var r=[],i=0;i<this.length;i++)Tr(this[i],r,a,e);return r.join("")},filter:function(a){return Array.prototype.filter.call(this,a)},indexOf:function(a){return Array.prototype.indexOf.call(this,a)}};function Er(a,e){this._node=a,this._refresh=e,gl(this)}function gl(a){var e=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=e){var r=a._refresh(a._node);tm(a,"length",r.length),Nn(r,a),a._inc=e}}Er.prototype.item=function(a){return gl(this),this[a]};lt(Er,ti);function ks(){}function Wp(a,e){for(var r=a.length;r--;)if(a[r]===e)return r}function Pp(a,e,r,i){if(i?e[Wp(e,i)]=r:e[e.length++]=r,a){r.ownerElement=a;var t=a.ownerDocument;t&&(i&&Gp(t,a,i),uE(t,a,r))}}function Ip(a,e,r){var i=Wp(e,r);if(i>=0){for(var t=e.length-1;i<t;)e[i]=e[++i];if(e.length=t,a){var n=a.ownerDocument;n&&(Gp(n,a,r),r.ownerElement=null)}}else throw new Ie($p,new Error(a.tagName+"@"+r))}ks.prototype={length:0,item:ti.prototype.item,getNamedItem:function(a){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==a)return r}},setNamedItem:function(a){var e=a.ownerElement;if(e&&e!=this._ownerElement)throw new Ie(kp);var r=this.getNamedItem(a.nodeName);return Pp(this._ownerElement,this,a,r),r},setNamedItemNS:function(a){var e=a.ownerElement,r;if(e&&e!=this._ownerElement)throw new Ie(kp);return r=this.getNamedItemNS(a.namespaceURI,a.localName),Pp(this._ownerElement,this,a,r),r},removeNamedItem:function(a){var e=this.getNamedItem(a);return Ip(this._ownerElement,this,e),e},removeNamedItemNS:function(a,e){var r=this.getNamedItemNS(a,e);return Ip(this._ownerElement,this,r),r},getNamedItemNS:function(a,e){for(var r=this.length;r--;){var i=this[r];if(i.localName==e&&i.namespaceURI==a)return i}return null}};function qp(){}qp.prototype={hasFeature:function(a,e){return!0},createDocument:function(a,e,r){var i=new Bn;if(i.implementation=this,i.childNodes=new ti,i.doctype=r||null,r&&i.appendChild(r),e){var t=i.createElementNS(a,e);i.appendChild(t)}return i},createDocumentType:function(a,e,r){var i=new Os;return i.name=a,i.nodeName=a,i.publicId=e||"",i.systemId=r||"",i}};function ge(){}ge.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,e){return Ps(this,a,e)},replaceChild:function(a,e){Ps(this,a,e,Xp),e&&this.removeChild(e)},removeChild:function(a){return Kp(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(a){return ml(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var e=a.nextSibling;e&&e.nodeType==Fs&&a.nodeType==Fs?(this.removeChild(e),a.appendData(e.data)):(a.normalize(),a=e)}},isSupported:function(a,e){return this.ownerDocument.implementation.hasFeature(a,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var e=this;e;){var r=e._nsMap;if(r){for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&r[i]===a)return i}e=e.nodeType==br?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(a){for(var e=this;e;){var r=e._nsMap;if(r&&Object.prototype.hasOwnProperty.call(r,a))return r[a];e=e.nodeType==br?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(a){var e=this.lookupPrefix(a);return e==null}};function zp(a){return a=="<"&&"&lt;"||a==">"&&"&gt;"||a=="&"&&"&amp;"||a=='"'&&"&quot;"||"&#"+a.charCodeAt()+";"}Nn(ct,ge);Nn(ct,ge.prototype);function Mn(a,e){if(e(a))return!0;if(a=a.firstChild)do if(Mn(a,e))return!0;while(a=a.nextSibling)}function Bn(){this.ownerDocument=this}function uE(a,e,r){a&&a._inc++;var i=r.namespaceURI;i===Rn.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function Gp(a,e,r,i){a&&a._inc++;var t=r.namespaceURI;t===Rn.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function vl(a,e,r){if(a&&a._inc){a._inc++;var i=e.childNodes;if(r)i[i.length++]=r;else{for(var t=e.firstChild,n=0;t;)i[n++]=t,t=t.nextSibling;i.length=n,delete i[i.length]}}}function Kp(a,e){var r=e.previousSibling,i=e.nextSibling;return r?r.nextSibling=i:a.firstChild=i,i?i.previousSibling=r:a.lastChild=r,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,vl(a.ownerDocument,a),e}function lE(a){return a&&(a.nodeType===ge.DOCUMENT_NODE||a.nodeType===ge.DOCUMENT_FRAGMENT_NODE||a.nodeType===ge.ELEMENT_NODE)}function cE(a){return a&&(jt(a)||yl(a)||ri(a)||a.nodeType===ge.DOCUMENT_FRAGMENT_NODE||a.nodeType===ge.COMMENT_NODE||a.nodeType===ge.PROCESSING_INSTRUCTION_NODE)}function ri(a){return a&&a.nodeType===ge.DOCUMENT_TYPE_NODE}function jt(a){return a&&a.nodeType===ge.ELEMENT_NODE}function yl(a){return a&&a.nodeType===ge.TEXT_NODE}function Op(a,e){var r=a.childNodes||[];if(Ut(r,jt)||ri(e))return!1;var i=Ut(r,ri);return!(e&&i&&r.indexOf(i)>r.indexOf(e))}function Lp(a,e){var r=a.childNodes||[];function i(n){return jt(n)&&n!==e}if(Ut(r,i))return!1;var t=Ut(r,ri);return!(e&&t&&r.indexOf(t)>r.indexOf(e))}function dE(a,e,r){if(!lE(a))throw new Ie(ut,"Unexpected parent node type "+a.nodeType);if(r&&r.parentNode!==a)throw new Ie($p,"child not in parent");if(!cE(e)||ri(e)&&a.nodeType!==ge.DOCUMENT_NODE)throw new Ie(ut,"Unexpected node type "+e.nodeType+" for parent node type "+a.nodeType)}function fE(a,e,r){var i=a.childNodes||[],t=e.childNodes||[];if(e.nodeType===ge.DOCUMENT_FRAGMENT_NODE){var n=t.filter(jt);if(n.length>1||Ut(t,yl))throw new Ie(ut,"More than one element or text in fragment");if(n.length===1&&!Op(a,r))throw new Ie(ut,"Element in fragment can not be inserted before doctype")}if(jt(e)&&!Op(a,r))throw new Ie(ut,"Only one element can be added and only after doctype");if(ri(e)){if(Ut(i,ri))throw new Ie(ut,"Only one doctype is allowed");var s=Ut(i,jt);if(r&&i.indexOf(s)<i.indexOf(r))throw new Ie(ut,"Doctype can only be inserted before an element");if(!r&&s)throw new Ie(ut,"Doctype can not be appended since element is present")}}function Xp(a,e,r){var i=a.childNodes||[],t=e.childNodes||[];if(e.nodeType===ge.DOCUMENT_FRAGMENT_NODE){var n=t.filter(jt);if(n.length>1||Ut(t,yl))throw new Ie(ut,"More than one element or text in fragment");if(n.length===1&&!Lp(a,r))throw new Ie(ut,"Element in fragment can not be inserted before doctype")}if(jt(e)&&!Lp(a,r))throw new Ie(ut,"Only one element can be added and only after doctype");if(ri(e)){let u=function(l){return ri(l)&&l!==r};var o=u;if(Ut(i,u))throw new Ie(ut,"Only one doctype is allowed");var s=Ut(i,jt);if(r&&i.indexOf(s)<i.indexOf(r))throw new Ie(ut,"Doctype can only be inserted before an element")}}function Ps(a,e,r,i){dE(a,e,r),a.nodeType===ge.DOCUMENT_NODE&&(i||fE)(a,e,r);var t=e.parentNode;if(t&&t.removeChild(e),e.nodeType===ii){var n=e.firstChild;if(n==null)return e;var s=e.lastChild}else n=s=e;var o=r?r.previousSibling:a.lastChild;n.previousSibling=o,s.nextSibling=r,o?o.nextSibling=n:a.firstChild=n,r==null?a.lastChild=s:r.previousSibling=s;do n.parentNode=a;while(n!==s&&(n=n.nextSibling));return vl(a.ownerDocument||a,a),e.nodeType==ii&&(e.firstChild=e.lastChild=null),e}function hE(a,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=a,e.previousSibling=a.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:a.firstChild=e,a.lastChild=e,vl(a.ownerDocument,a,e),e}Bn.prototype={nodeName:"#document",nodeType:Hp,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,e){if(a.nodeType==ii){for(var r=a.firstChild;r;){var i=r.nextSibling;this.insertBefore(r,e),r=i}return a}return Ps(this,a,e),a.ownerDocument=this,this.documentElement===null&&a.nodeType===Ft&&(this.documentElement=a),a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),Kp(this,a)},replaceChild:function(a,e){Ps(this,a,e,Xp),a.ownerDocument=this,e&&this.removeChild(e),jt(a)&&(this.documentElement=a)},importNode:function(a,e){return em(this,a,e)},getElementById:function(a){var e=null;return Mn(this.documentElement,function(r){if(r.nodeType==Ft&&r.getAttribute("id")==a)return e=r,!0}),e},getElementsByClassName:function(a){var e=Fp(a);return new Er(this,function(r){var i=[];return e.length>0&&Mn(r.documentElement,function(t){if(t!==r&&t.nodeType===Ft){var n=t.getAttribute("class");if(n){var s=a===n;if(!s){var o=Fp(n);s=e.every(aE(o))}s&&i.push(t)}}}),i})},createElement:function(a){var e=new Wi;e.ownerDocument=this,e.nodeName=a,e.tagName=a,e.localName=a,e.childNodes=new ti;var r=e.attributes=new ks;return r._ownerElement=e,e},createDocumentFragment:function(){var a=new Ls;return a.ownerDocument=this,a.childNodes=new ti,a},createTextNode:function(a){var e=new _l;return e.ownerDocument=this,e.appendData(a),e},createComment:function(a){var e=new xl;return e.ownerDocument=this,e.appendData(a),e},createCDATASection:function(a){var e=new Dl;return e.ownerDocument=this,e.appendData(a),e},createProcessingInstruction:function(a,e){var r=new bl;return r.ownerDocument=this,r.tagName=r.target=a,r.nodeValue=r.data=e,r},createAttribute:function(a){var e=new Is;return e.ownerDocument=this,e.name=a,e.nodeName=a,e.localName=a,e.specified=!0,e},createEntityReference:function(a){var e=new Tl;return e.ownerDocument=this,e.nodeName=a,e},createElementNS:function(a,e){var r=new Wi,i=e.split(":"),t=r.attributes=new ks;return r.childNodes=new ti,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=a,i.length==2?(r.prefix=i[0],r.localName=i[1]):r.localName=e,t._ownerElement=r,r},createAttributeNS:function(a,e){var r=new Is,i=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=a,r.specified=!0,i.length==2?(r.prefix=i[0],r.localName=i[1]):r.localName=e,r}};lt(Bn,ge);function Wi(){this._nsMap={}}Wi.prototype={nodeType:Ft,hasAttribute:function(a){return this.getAttributeNode(a)!=null},getAttribute:function(a){var e=this.getAttributeNode(a);return e&&e.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,e){var r=this.ownerDocument.createAttribute(a);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(a){var e=this.getAttributeNode(a);e&&this.removeAttributeNode(e)},appendChild:function(a){return a.nodeType===ii?this.insertBefore(a,null):hE(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,e){var r=this.getAttributeNodeNS(a,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(a,e){return this.getAttributeNodeNS(a,e)!=null},getAttributeNS:function(a,e){var r=this.getAttributeNodeNS(a,e);return r&&r.value||""},setAttributeNS:function(a,e,r){var i=this.ownerDocument.createAttributeNS(a,e);i.value=i.nodeValue=""+r,this.setAttributeNode(i)},getAttributeNodeNS:function(a,e){return this.attributes.getNamedItemNS(a,e)},getElementsByTagName:function(a){return new Er(this,function(e){var r=[];return Mn(e,function(i){i!==e&&i.nodeType==Ft&&(a==="*"||i.tagName==a)&&r.push(i)}),r})},getElementsByTagNameNS:function(a,e){return new Er(this,function(r){var i=[];return Mn(r,function(t){t!==r&&t.nodeType===Ft&&(a==="*"||t.namespaceURI===a)&&(e==="*"||t.localName==e)&&i.push(t)}),i})}};Bn.prototype.getElementsByTagName=Wi.prototype.getElementsByTagName;Bn.prototype.getElementsByTagNameNS=Wi.prototype.getElementsByTagNameNS;lt(Wi,ge);function Is(){}Is.prototype.nodeType=br;lt(Is,ge);function Un(){}Un.prototype={data:"",substringData:function(a,e){return this.data.substring(a,a+e)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,e){this.replaceData(a,0,e)},appendChild:function(a){throw new Error(Be[ut])},deleteData:function(a,e){this.replaceData(a,e,"")},replaceData:function(a,e,r){var i=this.data.substring(0,a),t=this.data.substring(a+e);r=i+r+t,this.nodeValue=this.data=r,this.length=r.length}};lt(Un,ge);function _l(){}_l.prototype={nodeName:"#text",nodeType:Fs,splitText:function(a){var e=this.data,r=e.substring(a);e=e.substring(0,a),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};lt(_l,Un);function xl(){}xl.prototype={nodeName:"#comment",nodeType:jp};lt(xl,Un);function Dl(){}Dl.prototype={nodeName:"#cdata-section",nodeType:Np};lt(Dl,Un);function Os(){}Os.prototype.nodeType=Vp;lt(Os,ge);function Yp(){}Yp.prototype.nodeType=oE;lt(Yp,ge);function Qp(){}Qp.prototype.nodeType=sE;lt(Qp,ge);function Tl(){}Tl.prototype.nodeType=Bp;lt(Tl,ge);function Ls(){}Ls.prototype.nodeName="#document-fragment";Ls.prototype.nodeType=ii;lt(Ls,ge);function bl(){}bl.prototype.nodeType=Up;lt(bl,ge);function Jp(){}Jp.prototype.serializeToString=function(a,e,r){return Zp.call(a,e,r)};ge.prototype.toString=Zp;function Zp(a,e){var r=[],i=this.nodeType==9&&this.documentElement||this,t=i.prefix,n=i.namespaceURI;if(n&&t==null){var t=i.lookupPrefix(n);if(t==null)var s=[{namespace:n,prefix:null}]}return Tr(this,r,a,e,s),r.join("")}function Rp(a,e,r){var i=a.prefix||"",t=a.namespaceURI;if(!t||i==="xml"&&t===Rn.XML||t===Rn.XMLNS)return!1;for(var n=r.length;n--;){var s=r[n];if(s.prefix===i)return s.namespace!==t}return!0}function pl(a,e,r){a.push(" ",e,'="',r.replace(/[<>&"\t\n\r]/g,zp),'"')}function Tr(a,e,r,i,t){if(t||(t=[]),i)if(a=i(a),a){if(typeof a=="string"){e.push(a);return}}else return;switch(a.nodeType){case Ft:var n=a.attributes,s=n.length,C=a.firstChild,o=a.tagName;r=Rn.isHTML(a.namespaceURI)||r;var u=o;if(!r&&!a.prefix&&a.namespaceURI){for(var l,c=0;c<n.length;c++)if(n.item(c).name==="xmlns"){l=n.item(c).value;break}if(!l)for(var f=t.length-1;f>=0;f--){var m=t[f];if(m.prefix===""&&m.namespace===a.namespaceURI){l=m.namespace;break}}if(l!==a.namespaceURI)for(var f=t.length-1;f>=0;f--){var m=t[f];if(m.namespace===a.namespaceURI){m.prefix&&(u=m.prefix+":"+o);break}}}e.push("<",u);for(var _=0;_<s;_++){var x=n.item(_);x.prefix=="xmlns"?t.push({prefix:x.localName,namespace:x.value}):x.nodeName=="xmlns"&&t.push({prefix:"",namespace:x.value})}for(var _=0;_<s;_++){var x=n.item(_);if(Rp(x,r,t)){var b=x.prefix||"",T=x.namespaceURI;pl(e,b?"xmlns:"+b:"xmlns",T),t.push({prefix:b,namespace:T})}Tr(x,e,r,i,t)}if(o===u&&Rp(a,r,t)){var b=a.prefix||"",T=a.namespaceURI;pl(e,b?"xmlns:"+b:"xmlns",T),t.push({prefix:b,namespace:T})}if(C||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),r&&/^script$/i.test(o))for(;C;)C.data?e.push(C.data):Tr(C,e,r,i,t.slice()),C=C.nextSibling;else for(;C;)Tr(C,e,r,i,t.slice()),C=C.nextSibling;e.push("</",u,">")}else e.push("/>");return;case Hp:case ii:for(var C=a.firstChild;C;)Tr(C,e,r,i,t.slice()),C=C.nextSibling;return;case br:return pl(e,a.name,a.value);case Fs:return e.push(a.data.replace(/[<&>]/g,zp));case Np:return e.push("<![CDATA[",a.data,"]]>");case jp:return e.push("<!--",a.data,"-->");case Vp:var k=a.publicId,j=a.systemId;if(e.push("<!DOCTYPE ",a.name),k)e.push(" PUBLIC ",k),j&&j!="."&&e.push(" ",j),e.push(">");else if(j&&j!=".")e.push(" SYSTEM ",j,">");else{var L=a.internalSubset;L&&e.push(" [",L,"]"),e.push(">")}return;case Up:return e.push("<?",a.target," ",a.data,"?>");case Bp:return e.push("&",a.nodeName,";");default:e.push("??",a.nodeName)}}function em(a,e,r){var i;switch(e.nodeType){case Ft:i=e.cloneNode(!1),i.ownerDocument=a;case ii:break;case br:r=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=a,i.parentNode=null,r)for(var t=e.firstChild;t;)i.appendChild(em(a,t,r)),t=t.nextSibling;return i}function ml(a,e,r){var i=new e.constructor;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];typeof n!="object"&&n!=i[t]&&(i[t]=n)}switch(e.childNodes&&(i.childNodes=new ti),i.ownerDocument=a,i.nodeType){case Ft:var s=e.attributes,o=i.attributes=new ks,u=s.length;o._ownerElement=i;for(var l=0;l<u;l++)i.setAttributeNode(ml(a,s.item(l),!0));break;case br:r=!0}if(r)for(var c=e.firstChild;c;)i.appendChild(ml(a,c,r)),c=c.nextSibling;return i}function tm(a,e,r){a[e]=r}try{if(Object.defineProperty){let a=function(e){switch(e.nodeType){case Ft:case ii:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(a(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};CP=a,Object.defineProperty(Er.prototype,"length",{get:function(){return gl(this),this.$$length}}),Object.defineProperty(ge.prototype,"textContent",{get:function(){return a(this)},set:function(e){switch(this.nodeType){case Ft:case ii:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),tm=function(e,r,i){e["$$"+r]=i}}}catch{}var CP;Ei.DocumentType=Os;Ei.DOMException=Ie;Ei.DOMImplementation=qp;Ei.Element=Wi;Ei.Node=ge;Ei.NodeList=ti;Ei.XMLSerializer=Jp});var rm=de(jn=>{var im=Ln().freeze;jn.XML_ENTITIES=im({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'});jn.HTML_ENTITIES=im({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"});jn.entityMap=jn.HTML_ENTITIES});var dm=de(Cl=>{var Wn=Ln().NAMESPACE,Sl=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nm=new RegExp("[\\-\\.0-9"+Sl.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),am=new RegExp("^"+Sl.source+nm.source+"*(?::"+Sl.source+nm.source+"*)?$"),Hn=0,Si=1,Sr=2,Vn=3,Cr=4,wr=5,$n=6,Rs=7;function Ar(a,e){this.message=a,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Ar)}Ar.prototype=new Error;Ar.prototype.name=Ar.name;function um(){}um.prototype={parse:function(a,e,r){var i=this.domBuilder;i.startDocument(),lm(e,e={}),pE(a,e,r,i,this.errorHandler),i.endDocument()}};function pE(a,e,r,i,t){function n(ie){if(ie>65535){ie-=65536;var oe=55296+(ie>>10),xe=56320+(ie&1023);return String.fromCharCode(oe,xe)}else return String.fromCharCode(ie)}function s(ie){var oe=ie.slice(1,-1);return Object.hasOwnProperty.call(r,oe)?r[oe]:oe.charAt(0)==="#"?n(parseInt(oe.substr(1).replace("x","0x"))):(t.error("entity not found:"+ie),ie)}function o(ie){if(ie>b){var oe=a.substring(b,ie).replace(/&#?\w+;/g,s);m&&u(b),i.characters(oe,0,ie-b),b=ie}}function u(ie,oe){for(;ie>=c&&(oe=f.exec(a));)l=oe.index,c=l+oe[0].length,m.lineNumber++;m.columnNumber=ie-l+1}for(var l=0,c=0,f=/.*(?:\r\n?|\n)|.*$/g,m=i.locator,_=[{currentNSMap:e}],x={},b=0;;){try{var T=a.indexOf("<",b);if(T<0){if(!a.substr(b).match(/^\s*$/)){var C=i.doc,k=C.createTextNode(a.substr(b));C.appendChild(k),i.currentElement=k}return}switch(T>b&&o(T),a.charAt(T+1)){case"/":var G=a.indexOf(">",T+3),j=a.substring(T+2,G).replace(/[ \t\n\r]+$/g,""),L=_.pop();G<0?(j=a.substring(T+2).replace(/[\s<].*/,""),t.error("end tag name: "+j+" is not complete:"+L.tagName),G=T+1+j.length):j.match(/\s</)&&(j=j.replace(/[\s<].*/,""),t.error("end tag name: "+j+" maybe not complete"),G=T+1+j.length);var R=L.localNSMap,H=L.tagName==j,B=H||L.tagName&&L.tagName.toLowerCase()==j.toLowerCase();if(B){if(i.endElement(L.uri,L.localName,j),R)for(var O in R)Object.prototype.hasOwnProperty.call(R,O)&&i.endPrefixMapping(O);H||t.fatalError("end tag name: "+j+" is not match the current start tagName:"+L.tagName)}else _.push(L);G++;break;case"?":m&&u(T),G=_E(a,T,i);break;case"!":m&&u(T),G=yE(a,T,i,t);break;default:m&&u(T);var N=new cm,M=_[_.length-1].currentNSMap,G=mE(a,T,N,M,s,t),K=N.length;if(!N.closed&&vE(a,G,N.tagName,x)&&(N.closed=!0,r.nbsp||t.warning("unclosed xml attribute")),m&&K){for(var J=sm(m,{}),ce=0;ce<K;ce++){var ye=N[ce];u(ye.offset),ye.locator=sm(m,{})}i.locator=J,om(N,i,M)&&_.push(N),i.locator=m}else om(N,i,M)&&_.push(N);Wn.isHTML(N.uri)&&!N.closed?G=gE(a,G,N.tagName,s,i):G++}}catch(ie){if(ie instanceof Ar)throw ie;t.error("element parse error: "+ie),G=-1}G>b?b=G:o(Math.max(T,b)+1)}}function sm(a,e){return e.lineNumber=a.lineNumber,e.columnNumber=a.columnNumber,e}function mE(a,e,r,i,t,n){function s(_,x,b){r.attributeNames.hasOwnProperty(_)&&n.fatalError("Attribute "+_+" redefined"),r.addValue(_,x.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,t),b)}for(var o,u,l=++e,c=Hn;;){var f=a.charAt(l);switch(f){case"=":if(c===Si)o=a.slice(e,l),c=Vn;else if(c===Sr)c=Vn;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===Vn||c===Si)if(c===Si&&(n.warning('attribute value must after "="'),o=a.slice(e,l)),e=l+1,l=a.indexOf(f,e),l>0)u=a.slice(e,l),s(o,u,e-1),c=wr;else throw new Error("attribute value no end '"+f+"' match");else if(c==Cr)u=a.slice(e,l),s(o,u,e),n.warning('attribute "'+o+'" missed start quot('+f+")!!"),e=l+1,c=wr;else throw new Error('attribute value must after "="');break;case"/":switch(c){case Hn:r.setTagName(a.slice(e,l));case wr:case $n:case Rs:c=Rs,r.closed=!0;case Cr:case Si:case Sr:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return n.error("unexpected end of input"),c==Hn&&r.setTagName(a.slice(e,l)),l;case">":switch(c){case Hn:r.setTagName(a.slice(e,l));case wr:case $n:case Rs:break;case Cr:case Si:u=a.slice(e,l),u.slice(-1)==="/"&&(r.closed=!0,u=u.slice(0,-1));case Sr:c===Sr&&(u=o),c==Cr?(n.warning('attribute "'+u+'" missed quot(")!'),s(o,u,e)):((!Wn.isHTML(i[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&n.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),s(u,u,e));break;case Vn:throw new Error("attribute value missed!!")}return l;case"\x80":f=" ";default:if(f<=" ")switch(c){case Hn:r.setTagName(a.slice(e,l)),c=$n;break;case Si:o=a.slice(e,l),c=Sr;break;case Cr:var u=a.slice(e,l);n.warning('attribute "'+u+'" missed quot(")!!'),s(o,u,e);case wr:c=$n;break}else switch(c){case Sr:var m=r.tagName;(!Wn.isHTML(i[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&n.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,e),e=l,c=Si;break;case wr:n.warning('attribute space is required"'+o+'"!!');case $n:c=Si,e=l;break;case Vn:c=Cr,e=l;break;case Rs:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function om(a,e,r){for(var i=a.tagName,t=null,f=a.length;f--;){var n=a[f],s=n.qName,o=n.value,m=s.indexOf(":");if(m>0)var u=n.prefix=s.slice(0,m),l=s.slice(m+1),c=u==="xmlns"&&l;else l=s,u=null,c=s==="xmlns"&&"";n.localName=l,c!==!1&&(t==null&&(t={},lm(r,r={})),r[c]=t[c]=o,n.uri=Wn.XMLNS,e.startPrefixMapping(c,o))}for(var f=a.length;f--;){n=a[f];var u=n.prefix;u&&(u==="xml"&&(n.uri=Wn.XML),u!=="xmlns"&&(n.uri=r[u||""]))}var m=i.indexOf(":");m>0?(u=a.prefix=i.slice(0,m),l=a.localName=i.slice(m+1)):(u=null,l=a.localName=i);var _=a.uri=r[u||""];if(e.startElement(_,l,i,a),a.closed){if(e.endElement(_,l,i),t)for(u in t)Object.prototype.hasOwnProperty.call(t,u)&&e.endPrefixMapping(u)}else return a.currentNSMap=r,a.localNSMap=t,!0}function gE(a,e,r,i,t){if(/^(?:script|textarea)$/i.test(r)){var n=a.indexOf("</"+r+">",e),s=a.substring(e+1,n);if(/[&<]/.test(s))return/^script$/i.test(r)?(t.characters(s,0,s.length),n):(s=s.replace(/&#?\w+;/g,i),t.characters(s,0,s.length),n)}return e+1}function vE(a,e,r,i){var t=i[r];return t==null&&(t=a.lastIndexOf("</"+r+">"),t<e&&(t=a.lastIndexOf("</"+r)),i[r]=t),t<e}function lm(a,e){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}function yE(a,e,r,i){var t=a.charAt(e+2);switch(t){case"-":if(a.charAt(e+3)==="-"){var n=a.indexOf("-->",e+4);return n>e?(r.comment(a,e+4,n-e-4),n+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(a.substr(e+3,6)=="CDATA["){var n=a.indexOf("]]>",e+9);return r.startCDATA(),r.characters(a,e+9,n-e-9),r.endCDATA(),n+3}var s=xE(a,e),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var u=s[1][0],l=!1,c=!1;o>3&&(/^public$/i.test(s[2][0])?(l=s[3][0],c=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(c=s[3][0]));var f=s[o-1];return r.startDTD(u,l,c),r.endDTD(),f.index+f[0].length}}return-1}function _E(a,e,r){var i=a.indexOf("?>",e);if(i){var t=a.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(t){var n=t[0].length;return r.processingInstruction(t[1],t[2]),i+2}else return-1}return-1}function cm(){this.attributeNames={}}cm.prototype={setTagName:function(a){if(!am.test(a))throw new Error("invalid tagName:"+a);this.tagName=a},addValue:function(a,e,r){if(!am.test(a))throw new Error("invalid attribute:"+a);this.attributeNames[a]=this.length,this[this.length++]={qName:a,value:e,offset:r}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}};function xE(a,e){var r,i=[],t=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(t.lastIndex=e,t.exec(a);r=t.exec(a);)if(i.push(r),r[1])return i}Cl.XMLReader=um;Cl.ParseError=Ar});var ym=de(Ns=>{var DE=Ln(),TE=El(),fm=rm(),mm=dm(),bE=TE.DOMImplementation,hm=DE.NAMESPACE,EE=mm.ParseError,SE=mm.XMLReader;function gm(a){return a.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function vm(a){this.options=a||{locator:{}}}vm.prototype.parseFromString=function(a,e){var r=this.options,i=new SE,t=r.domBuilder||new qn,n=r.errorHandler,s=r.locator,o=r.xmlns||{},u=/\/x?html?$/.test(e),l=u?fm.HTML_ENTITIES:fm.XML_ENTITIES;s&&t.setDocumentLocator(s),i.errorHandler=CE(n,t,s),i.domBuilder=r.domBuilder||t,u&&(o[""]=hm.HTML),o.xml=o.xml||hm.XML;var c=r.normalizeLineEndings||gm;return a&&typeof a=="string"?i.parse(c(a),o,l):i.errorHandler.error("invalid doc source"),t.doc};function CE(a,e,r){if(!a){if(e instanceof qn)return e;a=e}var i={},t=a instanceof Function;r=r||{};function n(s){var o=a[s];!o&&t&&(o=a.length==2?function(u){a(s,u)}:a),i[s]=o&&function(u){o("[xmldom "+s+"]	"+u+wl(r))}||function(){}}return n("warning"),n("error"),n("fatalError"),i}function qn(){this.cdata=!1}function Fr(a,e){e.lineNumber=a.lineNumber,e.columnNumber=a.columnNumber}qn.prototype={startDocument:function(){this.doc=new bE().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,e,r,i){var t=this.doc,n=t.createElementNS(a,r||e),s=i.length;Ms(this,n),this.currentElement=n,this.locator&&Fr(this.locator,n);for(var o=0;o<s;o++){var a=i.getURI(o),u=i.getValue(o),r=i.getQName(o),l=t.createAttributeNS(a,r);this.locator&&Fr(i.getLocator(o),l),l.value=l.nodeValue=u,n.setAttributeNode(l)}},endElement:function(a,e,r){var i=this.currentElement,t=i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(a,e){},endPrefixMapping:function(a){},processingInstruction:function(a,e){var r=this.doc.createProcessingInstruction(a,e);this.locator&&Fr(this.locator,r),Ms(this,r)},ignorableWhitespace:function(a,e,r){},characters:function(a,e,r){if(a=pm.apply(this,arguments),a){if(this.cdata)var i=this.doc.createCDATASection(a);else var i=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(a)&&this.doc.appendChild(i),this.locator&&Fr(this.locator,i)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,e,r){a=pm.apply(this,arguments);var i=this.doc.createComment(a);this.locator&&Fr(this.locator,i),Ms(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,e,r){var i=this.doc.implementation;if(i&&i.createDocumentType){var t=i.createDocumentType(a,e,r);this.locator&&Fr(this.locator,t),Ms(this,t),this.doc.doctype=t}},warning:function(a){console.warn("[xmldom warning]	"+a,wl(this.locator))},error:function(a){console.error("[xmldom error]	"+a,wl(this.locator))},fatalError:function(a){throw new EE(a,this.locator)}};function wl(a){if(a)return`
@`+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function pm(a,e,r){return typeof a=="string"?a.substr(e,r):a.length>=e+r||e?new java.lang.String(a,e,r)+"":a}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){qn.prototype[a]=function(){return null}});function Ms(a,e){a.currentElement?a.currentElement.appendChild(e):a.doc.appendChild(e)}Ns.__DOMHandler=qn;Ns.normalizeLineEndings=gm;Ns.DOMParser=vm});var xm=de(Bs=>{var _m=El();Bs.DOMImplementation=_m.DOMImplementation;Bs.XMLSerializer=_m.XMLSerializer;Bs.DOMParser=ym().DOMParser});var Um=de((MP,Bm)=>{var Nm=Math.pow(2,32),gS=function(a){var e=new DataView(a.buffer,a.byteOffset,a.byteLength),r;return e.getBigUint64?(r=e.getBigUint64(0),r<Number.MAX_SAFE_INTEGER?Number(r):r):e.getUint32(0)*Nm+e.getUint32(4)};Bm.exports={getUint64:gS,MAX_UINT32:Nm}});var Vm=de((NP,Hm)=>{var jm=Um().getUint64,vS=function(a){var e=new DataView(a.buffer,a.byteOffset,a.byteLength),r={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;r.version===0?(r.earliestPresentationTime=e.getUint32(i),r.firstOffset=e.getUint32(i+4),i+=8):(r.earliestPresentationTime=jm(a.subarray(i)),r.firstOffset=jm(a.subarray(i+8)),i+=16),i+=2;var t=e.getUint16(i);for(i+=2;t>0;i+=12,t--)r.references.push({referenceType:(a[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(a[i+8]&128),sapType:(a[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return r};Hm.exports=vS});var ig=de((oI,tg)=>{var Bl=9e4,Ul,jl,Ws,Hl,Jm,Zm,eg;Ul=function(a){return a*Bl};jl=function(a,e){return a*e};Ws=function(a){return a/Bl};Hl=function(a,e){return a/e};Jm=function(a,e){return Ul(Hl(a,e))};Zm=function(a,e){return jl(Ws(a),e)};eg=function(a,e,r){return Ws(r?a:a-e)};tg.exports={ONE_SECOND_IN_TS:Bl,secondsToVideoTs:Ul,secondsToAudioTs:jl,videoTsToSeconds:Ws,audioTsToSeconds:Hl,audioTsToVideoTs:Jm,videoTsToAudioTs:Zm,metadataTsToSeconds:eg}});var{replace:fx}="";var hx=/[&<>'"]/g,px={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},mx=a=>px[a],sf=a=>fx.call(a,hx,mx);function gx(a){for(var e=[],r=0;r<a.length;){var i=a[r];if(i==="*"||i==="+"||i==="?"){e.push({type:"MODIFIER",index:r,value:a[r++]});continue}if(i==="\\"){e.push({type:"ESCAPED_CHAR",index:r++,value:a[r++]});continue}if(i==="{"){e.push({type:"OPEN",index:r,value:a[r++]});continue}if(i==="}"){e.push({type:"CLOSE",index:r,value:a[r++]});continue}if(i===":"){for(var t="",n=r+1;n<a.length;){var s=a.charCodeAt(n);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){t+=a[n++];continue}break}if(!t)throw new TypeError("Missing parameter name at ".concat(r));e.push({type:"NAME",index:r,value:t}),r=n;continue}if(i==="("){var o=1,u="",n=r+1;if(a[n]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(n));for(;n<a.length;){if(a[n]==="\\"){u+=a[n++]+a[n++];continue}if(a[n]===")"){if(o--,o===0){n++;break}}else if(a[n]==="("&&(o++,a[n+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(n));u+=a[n++]}if(o)throw new TypeError("Unbalanced pattern at ".concat(r));if(!u)throw new TypeError("Missing pattern at ".concat(r));e.push({type:"PATTERN",index:r,value:u}),r=n;continue}e.push({type:"CHAR",index:r,value:a[r++]})}return e.push({type:"END",index:r,value:""}),e}function vx(a,e){e===void 0&&(e={});for(var r=gx(a),i=e.prefixes,t=i===void 0?"./":i,n="[^".concat(_x(e.delimiter||"/#?"),"]+?"),s=[],o=0,u=0,l="",c=function(H){if(u<r.length&&r[u].type===H)return r[u++].value},f=function(H){var B=c(H);if(B!==void 0)return B;var O=r[u],N=O.type,M=O.index;throw new TypeError("Unexpected ".concat(N," at ").concat(M,", expected ").concat(H))},m=function(){for(var H="",B;B=c("CHAR")||c("ESCAPED_CHAR");)H+=B;return H};u<r.length;){var _=c("CHAR"),x=c("NAME"),b=c("PATTERN");if(x||b){var T=_||"";t.indexOf(T)===-1&&(l+=T,T=""),l&&(s.push(l),l=""),s.push({name:x||o++,prefix:T,suffix:"",pattern:b||n,modifier:c("MODIFIER")||""});continue}var C=_||c("ESCAPED_CHAR");if(C){l+=C;continue}l&&(s.push(l),l="");var k=c("OPEN");if(k){var T=m(),j=c("NAME")||"",L=c("PATTERN")||"",R=m();f("CLOSE"),s.push({name:j||(L?o++:""),pattern:j&&!L?n:L,prefix:T,suffix:R,modifier:c("MODIFIER")||""});continue}f("END")}return s}function of(a,e){return yx(vx(a,e),e)}function yx(a,e){e===void 0&&(e={});var r=xx(e),i=e.encode,t=i===void 0?function(u){return u}:i,n=e.validate,s=n===void 0?!0:n,o=a.map(function(u){if(typeof u=="object")return new RegExp("^(?:".concat(u.pattern,")$"),r)});return function(u){for(var l="",c=0;c<a.length;c++){var f=a[c];if(typeof f=="string"){l+=f;continue}var m=u?u[f.name]:void 0,_=f.modifier==="?"||f.modifier==="*",x=f.modifier==="*"||f.modifier==="+";if(Array.isArray(m)){if(!x)throw new TypeError('Expected "'.concat(f.name,'" to not repeat, but got an array'));if(m.length===0){if(_)continue;throw new TypeError('Expected "'.concat(f.name,'" to not be empty'))}for(var b=0;b<m.length;b++){var T=t(m[b],f);if(s&&!o[c].test(T))throw new TypeError('Expected all "'.concat(f.name,'" to match "').concat(f.pattern,'", but got "').concat(T,'"'));l+=f.prefix+T+f.suffix}continue}if(typeof m=="string"||typeof m=="number"){var T=t(String(m),f);if(s&&!o[c].test(T))throw new TypeError('Expected "'.concat(f.name,'" to match "').concat(f.pattern,'", but got "').concat(T,'"'));l+=f.prefix+T+f.suffix;continue}if(!_){var C=x?"an array":"a string";throw new TypeError('Expected "'.concat(f.name,'" to be ').concat(C))}}return l}}function _x(a){return a.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function xx(a){return a&&a.sensitive?"":"i"}var Gf=Ae(Qo(),1),_n=Ae(Zo(),1);var eu,mf,gf,vf,yf=!0;typeof process<"u"&&({FORCE_COLOR:eu,NODE_DISABLE_COLORS:mf,NO_COLOR:gf,TERM:vf}=process.env||{},yf=process.stdout&&process.stdout.isTTY);var Fx={enabled:!mf&&gf==null&&vf!=="dumb"&&(eu!=null&&eu!=="0"||yf)};function Te(a,e){let r=new RegExp(`\\x1b\\[${e}m`,"g"),i=`\x1B[${a}m`,t=`\x1B[${e}m`;return function(n){return!Fx.enabled||n==null?n:i+(~(""+n).indexOf(t)?n.replace(r,t+i):n)+t}}var _f=Te(0,0),Xa=Te(1,22),xf=Te(2,22),WF=Te(3,23),qF=Te(4,24),zF=Te(7,27),GF=Te(8,28),KF=Te(9,29),XF=Te(30,39),Df=Te(31,39),YF=Te(32,39),tu=Te(33,39),QF=Te(34,39),JF=Te(35,39),Tf=Te(36,39),ZF=Te(37,39),ek=Te(90,39),tk=Te(90,39),ik=Te(40,49),rk=Te(41,49),nk=Te(42,49),ak=Te(43,49),sk=Te(44,49),ok=Te(45,49),uk=Te(46,49),lk=Te(47,49);var kx=Ae(Ef(),1),Px=Ae(Cf(),1);function ru(a){let e=/^\\\\\?\\/.test(a),r=/[^\u0000-\u0080]+/.test(a);return e||r?a:a.replace(/\\/g,"/")}var Au=(a,e,r)=>{if(!e.has(a))throw TypeError("Cannot "+r)},st=(a,e,r)=>(Au(a,e,"read from private field"),r?r.call(a):e.get(a)),ur=(a,e,r)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,r)},dr=(a,e,r,i)=>(Au(a,e,"write to private field"),i?i.call(a,r):e.set(a,r),r),hn=(a,e,r)=>(Au(a,e,"access private method"),r),rs,_i,at,Ya,mu,Qa,gu,Fu,Kf,Ix=new Date(0),wf="deleted",gn=class{constructor(e){this.value=e}json(){if(this.value===void 0)throw new Error("Cannot convert undefined to an object.");return JSON.parse(this.value)}number(){return Number(this.value)}boolean(){return this.value==="false"||this.value==="0"?!1:Boolean(this.value)}},ns=class{constructor(e){ur(this,Ya),ur(this,Qa),ur(this,Fu),ur(this,rs,void 0),ur(this,_i,void 0),ur(this,at,void 0),dr(this,rs,e),dr(this,_i,null),dr(this,at,null)}delete(e,r){let i={expires:Ix};r?.domain&&(i.domain=r.domain),r?.path&&(i.path=r.path),hn(this,Qa,gu).call(this).set(e,[wf,(0,_n.serialize)(e,wf,i),!1])}get(e){if(st(this,at)!==null&&st(this,at).has(e)){let[t,,n]=st(this,at).get(e);return n?new gn(t):new gn(void 0)}let i=hn(this,Ya,mu).call(this)[e];return new gn(i)}has(e){if(st(this,at)!==null&&st(this,at).has(e)){let[,,i]=st(this,at).get(e);return i}return!!hn(this,Ya,mu).call(this)[e]}set(e,r,i){let t;if(typeof r=="string")t=r;else{let s=r.toString();s===Object.prototype.toString.call(r)?t=JSON.stringify(r):t=s}let n={};i&&Object.assign(n,i),hn(this,Qa,gu).call(this).set(e,[t,(0,_n.serialize)(e,t,n),!0])}*headers(){if(st(this,at)!=null)for(let[,e]of st(this,at))yield e[1]}};rs=new WeakMap;_i=new WeakMap;at=new WeakMap;Ya=new WeakSet;mu=function(){return st(this,_i)||hn(this,Fu,Kf).call(this),st(this,_i)||dr(this,_i,{}),st(this,_i)};Qa=new WeakSet;gu=function(){return st(this,at)||dr(this,at,new Map),st(this,at)};Fu=new WeakSet;Kf=function(){let a=st(this,rs).headers.get("cookie");!a||dr(this,_i,(0,_n.parse)(a))};var Xf=Symbol.for("astro.cookies");function ku(a,e){Reflect.set(a,Xf,e)}function Ox(a){let e=Reflect.get(a,Xf);if(e!=null)return e}function*Lx(a){let e=Ox(a);if(!e)return[];for(let r of e.headers())yield r;return[]}var Rx=a=>a,re=Rx({UnknownCompilerError:{title:"Unknown compiler error.",code:1e3,hint:"This is almost always a problem with the Astro compiler, not your code. Please open an issue at https://astro.build/issues/compiler."},StaticRedirectNotAvailable:{title:"`Astro.redirect` is not available in static mode.",code:3001,message:"Redirects are only available when using `output: 'server'`. Update your Astro config if you need SSR features.",hint:"See https://docs.astro.build/en/guides/server-side-rendering/#enabling-ssr-in-your-project for more information on how to enable SSR."},ClientAddressNotAvailable:{title:"`Astro.clientAddress` is not available in current adapter.",code:3002,message:a=>`\`Astro.clientAddress\` is not available in the \`${a}\` adapter. File an issue with the adapter to add support.`},StaticClientAddressNotAvailable:{title:"`Astro.clientAddress` is not available in static mode.",code:3003,message:"`Astro.clientAddress` is only available when using `output: 'server'`. Update your Astro config if you need SSR features.",hint:"See https://docs.astro.build/en/guides/server-side-rendering/#enabling-ssr-in-your-project for more information on how to enable SSR."},NoMatchingStaticPathFound:{title:"No static path found for requested path.",code:3004,message:a=>`A \`getStaticPaths()\` route pattern was matched, but no matching static path was found for requested path \`${a}\`.`,hint:a=>`Possible dynamic routes being matched: ${a.join(", ")}.`},OnlyResponseCanBeReturned:{title:"Invalid type returned by Astro page.",code:3005,message:(a,e)=>`Route \`${a||""}\` returned a \`${e}\`. Only a [Response](https://developer.mozilla.org/en-US/docs/Web/API/Response) can be returned from Astro files.`,hint:"See https://docs.astro.build/en/guides/server-side-rendering/#response for more information."},MissingMediaQueryDirective:{title:"Missing value for `client:media` directive.",code:3006,message:'Media query not provided for `client:media` directive. A media query similar to `client:media="(max-width: 600px)"` must be provided'},NoMatchingRenderer:{title:"No matching renderer found.",code:3007,message:(a,e,r,i)=>`Unable to render \`${a}\`.

${i>0?`There ${r?"are.":"is."} ${i} renderer${r?"s.":""} configured in your \`astro.config.mjs\` file,
but ${r?"none were.":"it was not."} able to server-side render \`${a}\`.`:`No valid renderer was found ${e?`for the \`.${e}\` file extension.`:"for this file extension."}`}`,hint:a=>`Did you mean to enable the ${a} integration?

See https://docs.astro.build/en/core-concepts/framework-components/ for more information on how to install and configure integrations.`},NoClientEntrypoint:{title:"No client entrypoint specified in renderer.",code:3008,message:(a,e,r)=>`\`${a}\` component has a \`client:${e}\` directive, but no client entrypoint was provided by \`${r}\`.`,hint:"See https://docs.astro.build/en/reference/integrations-reference/#addrenderer-option for more information on how to configure your renderer."},NoClientOnlyHint:{title:"Missing hint on client:only directive.",code:3009,message:a=>`Unable to render \`${a}\`. When using the \`client:only\` hydration strategy, Astro needs a hint to use the correct renderer.`,hint:a=>`Did you mean to pass \`client:only="${a}"\`? See https://docs.astro.build/en/reference/directives-reference/#clientonly for more information on client:only`},InvalidGetStaticPathParam:{title:"Invalid value returned by a `getStaticPaths` path.",code:3010,message:a=>`Invalid params given to \`getStaticPaths\` path. Expected an \`object\`, got \`${a}\``,hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},InvalidGetStaticPathsReturn:{title:"Invalid value returned by getStaticPaths.",code:3011,message:a=>`Invalid type returned by \`getStaticPaths\`. Expected an \`array\`, got \`${a}\``,hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},GetStaticPathsRemovedRSSHelper:{title:"getStaticPaths RSS helper is not available anymore.",code:3012,message:"The RSS helper has been removed from `getStaticPaths`. Try the new @astrojs/rss package instead.",hint:"See https://docs.astro.build/en/guides/rss/ for more information."},GetStaticPathsExpectedParams:{title:"Missing params property on `getStaticPaths` route.",code:3013,message:"Missing or empty required `params` property on `getStaticPaths` route.",hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},GetStaticPathsInvalidRouteParam:{title:"Invalid value for `getStaticPaths` route parameter.",code:3014,message:(a,e,r)=>`Invalid getStaticPaths route parameter for \`${a}\`. Expected undefined, a string or a number, received \`${r}\` (\`${e}\`)`,hint:"See https://docs.astro.build/en/reference/api-reference/#getstaticpaths for more information on getStaticPaths."},GetStaticPathsRequired:{title:"`getStaticPaths()` function required for dynamic routes.",code:3015,message:"`getStaticPaths()` function is required for dynamic routes. Make sure that you `export` a `getStaticPaths` function from your dynamic route.",hint:'See https://docs.astro.build/en/core-concepts/routing/#dynamic-routes for more information on dynamic routes.\n\nAlternatively, set `output: "server"` in your Astro config file to switch to a non-static server build. This error can also occur if using `export const prerender = true;`.\nSee https://docs.astro.build/en/guides/server-side-rendering/ for more information on non-static rendering.'},ReservedSlotName:{title:"Invalid slot name.",code:3016,message:a=>`Unable to create a slot named \`${a}\`. \`${a}\` is a reserved slot name. Please update the name of this slot.`},NoAdapterInstalled:{title:"Cannot use Server-side Rendering without an adapter.",code:3017,message:"Cannot use `output: 'server'` without an adapter. Please install and configure the appropriate server adapter for your final deployment.",hint:"See https://docs.astro.build/en/guides/server-side-rendering/ for more information."},NoMatchingImport:{title:"No import found for component.",code:3018,message:a=>`Could not render \`${a}\`. No matching import has been found for \`${a}\`.`,hint:"Please make sure the component is properly imported."},InvalidPrerenderExport:{title:"Invalid prerender export.",code:3019,message:(a,e)=>{let r="A `prerender` export has been detected, but its value cannot be statically analyzed.";return a!=="const"&&(r+=`
Expected \`const\` declaration but got \`${a}\`.`),e!=="true"&&(r+=`
Expected \`true\` value but got \`${e}\`.`),r},hint:"Mutable values declared at runtime are not supported. Please make sure to use exactly `export const prerender = true`."},InvalidComponentArgs:{title:"Invalid component arguments.",code:3020,message:a=>`Invalid arguments passed to${a?` <${a}>`:""} component.`,hint:"Astro components cannot be rendered directly via function call, such as `Component()` or `{items.map(Component)}`."},PageNumberParamNotFound:{title:"Page number param not found.",code:3021,message:a=>`[paginate()] page number param \`${a}\` not found in your filepath.`,hint:"Rename your file to `[page].astro` or `[...page].astro`."},UnknownViteError:{title:"Unknown Vite Error.",code:4e3},FailedToLoadModuleSSR:{title:"Could not import file.",code:4001,message:a=>`Could not import \`${a}\`.`,hint:"This is often caused by a typo in the import path. Please make sure the file exists."},InvalidGlob:{title:"Invalid glob pattern.",code:4002,message:a=>`Invalid glob pattern: \`${a}\`. Glob patterns must start with './', '../' or '/'.`,hint:"See https://docs.astro.build/en/guides/imports/#glob-patterns for more information on supported glob patterns."},UnknownCSSError:{title:"Unknown CSS Error.",code:5e3},CSSSyntaxError:{title:"CSS Syntax Error.",code:5001},UnknownMarkdownError:{title:"Unknown Markdown Error.",code:6e3},MarkdownFrontmatterParseError:{title:"Failed to parse Markdown frontmatter.",code:6001},InvalidFrontmatterInjectionError:{title:"Invalid frontmatter injection.",code:6003,message:'A remark or rehype plugin attempted to inject invalid frontmatter. Ensure "astro.frontmatter" is set to a valid JSON object that is not `null` or `undefined`.',hint:"See the frontmatter injection docs https://docs.astro.build/en/guides/markdown-content/#modifying-frontmatter-programmatically for more information."},MdxIntegrationMissingError:{title:"MDX integration missing.",code:6004,message:a=>`Unable to render ${a}. Ensure that the \`@astrojs/mdx\` integration is installed.`,hint:"See the MDX integration docs for installation and usage instructions: https://docs.astro.build/en/guides/integrations-guide/mdx/"},UnknownConfigError:{title:"Unknown configuration error.",code:7e3},ConfigNotFound:{title:"Specified configuration file not found.",code:7001,message:a=>`Unable to resolve \`--config "${a}"\`. Does the file exist?`},ConfigLegacyKey:{title:"Legacy configuration detected.",code:7002,message:a=>`Legacy configuration detected: \`${a}\`.`,hint:`Please update your configuration to the new format.
See https://astro.build/config for more information.`},UnknownCLIError:{title:"Unknown CLI Error.",code:8e3},GenerateContentTypesError:{title:"Failed to generate content types.",code:8001,message:"`astro sync` command failed to generate content collection types.",hint:"Check your `src/content/config.*` file for typos."},UnknownContentCollectionError:{title:"Unknown Content Collection Error.",code:9e3},InvalidContentEntryFrontmatterError:{title:"Content entry frontmatter does not match schema.",code:9001,message:(a,e,r)=>[`${String(a)} \u2192 ${String(e)} frontmatter does not match collection schema.`,...r.errors.map(i=>i.message)].join(`
`),hint:"See https://docs.astro.build/en/guides/content-collections/ for more information on content schemas."},InvalidContentEntrySlugError:{title:"Invalid content entry slug.",code:9002,message:(a,e)=>`${String(a)} \u2192 ${String(e)} has an invalid slug. \`slug\` must be a string.`,hint:"See https://docs.astro.build/en/guides/content-collections/ for more on the `slug` field."},ContentSchemaContainsSlugError:{title:"Content Schema should not contain `slug`.",code:9003,message:a=>`A content collection schema should not contain \`slug\` since it is reserved for slug generation. Remove this from your ${a} collection schema.`,hint:"See https://docs.astro.build/en/guides/content-collections/ for more on the `slug` field."},UnknownError:{title:"Unknown Error.",code:99999}});function Mx(a){return a.replace(/\r\n|\r(?!\n)|\n/g,`
`)}function Nx(a){let e=Object.entries(re).find(r=>r[1].code===a);if(e)return{name:e[0],data:e[1]}}function Bx(a,e){if(!e||e.line===void 0||e.column===void 0)return"";let r=Mx(a).split(`
`).map(s=>s.replace(/\t/g,"  ")),i=[];for(let s=-2;s<=2;s++)r[e.line+s]&&i.push(e.line+s);let t=0;for(let s of i){let o=`> ${s}`;o.length>t&&(t=o.length)}let n="";for(let s of i){let o=s===e.line-1;n+=o?"> ":"  ",n+=`${s+1} | ${r[s]}
`,o&&(n+=`${Array.from({length:t}).join(" ")}  | ${Array.from({length:e.column}).join(" ")}^
`)}return n}var Ee=class extends Error{constructor(e,...r){var i;super(...r),this.type="AstroError";let{code:t,name:n,title:s,message:o,stack:u,location:l,hint:c,frame:f}=e;this.errorCode=t,n&&n!=="Error"?this.name=n:this.name=((i=Nx(this.errorCode))==null?void 0:i.name)??"UnknownError",this.title=s,o&&(this.message=o),this.stack=u||this.stack,this.loc=l,this.hint=c,this.frame=f}setErrorCode(e){this.errorCode=e}setLocation(e){this.loc=e}setName(e){this.name=e}setMessage(e){this.message=e}setHint(e){this.hint=e}setFrame(e,r){this.frame=Bx(e,r)}static is(e){return e.type==="AstroError"}};function Ux(a){return!(a.length!==3||!a[0]||typeof a[0]!="object")}function Yf(a,e){var r;let i=((r=e?.split("/").pop())==null?void 0:r.replace(".astro",""))??"",t=(...n)=>{if(!Ux(n))throw new Ee({...re.InvalidComponentArgs,message:re.InvalidComponentArgs.message(i)});return a(...n)};return Object.defineProperty(t,"name",{value:i,writable:!1}),t.isAstroComponentFactory=!0,t.moduleId=e,t}function jx(a){let e=Yf(a.factory,a.moduleId);return e.propagation=a.propagation,e}function ds(a,e){return typeof a=="function"?Yf(a,e):jx(a)}var Qf="2.0.17";function Hx(){return(e,r)=>{let i=[...Object.values(e)];if(i.length===0)throw new Error(`Astro.glob(${JSON.stringify(r())}) - no matches found.`);return Promise.all(i.map(t=>t()))}}function fs(a){return{site:a?new URL(a):void 0,generator:`Astro v${Qf}`,glob:Hx()}}function Vx(a,e){if(a[e])return a[e];if(e==="delete"&&a.del)return a.del;if(a.all)return a.all}async function $x(a,e,r){var i;let{request:t,params:n}=e,s=(i=t.method)==null?void 0:i.toLowerCase(),o=Vx(a,s);if(!r&&r===!1&&s&&s!=="get"&&console.warn(`
${s} requests are not available when building a static site. Update your config to output: 'server' to handle ${s} requests.`),!o||typeof o!="function")return new Response(null,{status:404,headers:{"X-Astro-Response":"Not-Found"}});o.length>1&&console.warn(`
API routes with 2 arguments have been deprecated. Instead they take a single argument in the form of:

export function get({ params, request }) {
	//...
}

Update your code to remove this warning.`);let u=new Proxy(e,{get(l,c){return c in l?Reflect.get(l,c):c in n?(console.warn(`
API routes no longer pass params as the first argument. Instead an object containing a params property is provided in the form of:

export function get({ params }) {
	// ...
}

Update your code to remove this warning.`),Reflect.get(n,c)):void 0}});return o.call(a,u,t)}function Jf(a){let e={};return r(a),Object.keys(e).join(" ");function r(i){i&&typeof i.forEach=="function"?i.forEach(r):i===Object(i)?Object.keys(i).forEach(t=>{i[t]&&r(t)}):(i=i===!1||i==null?"":String(i).trim(),i&&i.split(/\s+/).forEach(t=>{e[t]=!0}))}}function Pu(a){return!!a&&typeof a=="object"&&typeof a.then=="function"}async function*Af(a){let e=a.getReader();try{for(;;){let{done:r,value:i}=await e.read();if(r)return;yield i}}finally{e.releaseLock()}}var vn=sf,Ni=class extends String{get[Symbol.toStringTag](){return"HTMLString"}},ue=a=>a instanceof Ni?a:typeof a=="string"?new Ni(a):a;function Iu(a){return Object.prototype.toString.call(a)==="[object HTMLString]"}var hs="astro:jsx",Ff=Symbol("empty"),kf=a=>a;function yn(a){return a&&typeof a=="object"&&a[hs]}function Wx(a){if(typeof a.type=="string")return a;let e={};if(yn(a.props.children)){let r=a.props.children;if(!yn(r)||!("slot"in r.props))return;let i=kf(r.props.slot);e[i]=[r],e[i].$$slot=!0,delete r.props.slot,delete a.props.children}Array.isArray(a.props.children)&&(a.props.children=a.props.children.map(r=>{if(!yn(r)||!("slot"in r.props))return r;let i=kf(r.props.slot);return Array.isArray(e[i])?e[i].push(r):(e[i]=[r],e[i].$$slot=!0),delete r.props.slot,Ff}).filter(r=>r!==Ff)),Object.assign(a.props,e)}function Zf(a){return typeof a=="string"?ue(a):Array.isArray(a)?a.map(e=>Zf(e)):a}function qx(a){if("set:html"in a.props||"set:text"in a.props){if("set:html"in a.props){let e=Zf(a.props["set:html"]);delete a.props["set:html"],Object.assign(a.props,{children:e});return}if("set:text"in a.props){let e=a.props["set:text"];delete a.props["set:text"],Object.assign(a.props,{children:e});return}}}function zx(a,e){let r={[ss]:"astro:jsx",[hs]:!0,type:a,props:e??{}};return qx(r),Wx(r),r}var Gx='(self.Astro=self.Astro||{}).idle=t=>{const e=async()=>{await(await t())()};"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,200)},window.dispatchEvent(new Event("astro:idle"));',Kx='(self.Astro=self.Astro||{}).load=a=>{(async()=>await(await a())())()},window.dispatchEvent(new Event("astro:load"));',Xx='(self.Astro=self.Astro||{}).media=(s,a)=>{const t=async()=>{await(await s())()};if(a.value){const e=matchMedia(a.value);e.matches?t():e.addEventListener("change",t,{once:!0})}},window.dispatchEvent(new Event("astro:media"));',Yx='(self.Astro=self.Astro||{}).only=t=>{(async()=>await(await t())())()},window.dispatchEvent(new Event("astro:only"));',Qx='(self.Astro=self.Astro||{}).visible=(s,c,n)=>{const r=async()=>{await(await s())()};let i=new IntersectionObserver(e=>{for(const t of e)if(!!t.isIntersecting){i.disconnect(),r();break}});for(let e=0;e<n.children.length;e++){const t=n.children[e];i.observe(t)}},window.dispatchEvent(new Event("astro:visible"));',Jx='var l;{const c={0:t=>t,1:t=>JSON.parse(t,o),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(JSON.parse(t,o)),5:t=>new Set(JSON.parse(t,o)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(JSON.parse(t)),9:t=>new Uint16Array(JSON.parse(t)),10:t=>new Uint32Array(JSON.parse(t))},o=(t,s)=>{if(t===""||!Array.isArray(s))return s;const[e,n]=s;return e in c?c[e](n):void 0};customElements.get("astro-island")||customElements.define("astro-island",(l=class extends HTMLElement{constructor(){super(...arguments);this.hydrate=()=>{if(!this.hydrator||this.parentElement&&this.parentElement.closest("astro-island[ssr]"))return;const s=this.querySelectorAll("astro-slot"),e={},n=this.querySelectorAll("template[data-astro-template]");for(const r of n){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(const r of s){const i=r.closest(this.tagName);!i||!i.isSameNode(this)||(e[r.getAttribute("name")||"default"]=r.innerHTML)}const a=this.hasAttribute("props")?JSON.parse(this.getAttribute("props"),o):{};this.hydrator(this)(this.Component,a,e,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),window.removeEventListener("astro:hydrate",this.hydrate),window.dispatchEvent(new CustomEvent("astro:hydrate"))}}connectedCallback(){!this.hasAttribute("await-children")||this.firstChild?this.childrenConnectedCallback():new MutationObserver((s,e)=>{e.disconnect(),this.childrenConnectedCallback()}).observe(this,{childList:!0})}async childrenConnectedCallback(){window.addEventListener("astro:hydrate",this.hydrate);let s=this.getAttribute("before-hydration-url");s&&await import(s),this.start()}start(){const s=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(Astro[e]===void 0){window.addEventListener(`astro:${e}`,()=>this.start(),{once:!0});return}Astro[e](async()=>{const n=this.getAttribute("renderer-url"),[a,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),i=this.getAttribute("component-export")||"default";if(!i.includes("."))this.Component=a[i];else{this.Component=a;for(const d of i.split("."))this.Component=this.Component[d]}return this.hydrator=r,this.hydrate},s,this)}attributeChangedCallback(){this.hydrator&&this.hydrate()}},l.observedAttributes=["props"],l))}';function Zx(a){return a._metadata.hasHydrationScript?!1:a._metadata.hasHydrationScript=!0}var Pf={idle:Gx,load:Kx,only:Yx,media:Xx,visible:Qx};function eD(a,e){return a._metadata.hasDirectives.has(e)?!1:(a._metadata.hasDirectives.add(e),!0)}function If(a){if(!(a in Pf))throw new Error(`Unknown directive: ${a}`);return Pf[a]}function tD(a,e){switch(a){case"both":return`<style>astro-island,astro-slot{display:contents}</style><script>${If(e)+Jx}<\/script>`;case"directive":return`<script>${If(e)}<\/script>`}return""}var Ou=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,iD=/^(allowfullscreen|async|autofocus|autoplay|controls|default|defer|disabled|disablepictureinpicture|disableremoteplayback|formnovalidate|hidden|loop|nomodule|novalidate|open|playsinline|readonly|required|reversed|scoped|seamless|itemscope)$/i,rD=/^(contenteditable|draggable|spellcheck|value)$/i,nD=/^(autoReverse|externalResourcesRequired|focusable|preserveAlpha)$/i,aD=new Set(["set:html","set:text"]),sD=a=>a.trim().replace(/(?:(?!^)\b\w|\s+|[^\w]+)/g,(e,r)=>/[^\w]|\s/.test(e)?"":r===0?e:e.toUpperCase()),pn=(a,e=!0)=>e?String(a).replace(/&/g,"&#38;").replace(/"/g,"&#34;"):a,nu=a=>a.toLowerCase()===a?a:a.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),oD=a=>Object.entries(a).map(([e,r])=>e[0]!=="-"&&e[1]!=="-"?`${nu(e)}:${r}`:nu(e)!==e?`${nu(e)}:var(${e});${e}:${r}`:`${e}:${r}`).join(";");function uD(a){let e="";for(let[r,i]of Object.entries(a))e+=`const ${sD(r)} = ${JSON.stringify(i)};
`;return ue(e)}function Of(a){return a.length===1?a[0]:`${a.slice(0,-1).join(", ")} or ${a[a.length-1]}`}function ps(a,e,r=!0){if(a==null)return"";if(a===!1)return rD.test(e)||nD.test(e)?ue(` ${e}="false"`):"";if(aD.has(e))return console.warn(`[astro] The "${e}" directive cannot be applied dynamically at runtime. It will not be rendered as an attribute.

Make sure to use the static attribute syntax (\`${e}={value}\`) instead of the dynamic spread syntax (\`{...{ "${e}": value }}\`).`),"";if(e==="class:list"){let i=pn(Jf(a),r);return i===""?"":ue(` ${e.slice(0,-5)}="${i}"`)}return e==="style"&&!(a instanceof Ni)&&typeof a=="object"?ue(` ${e}="${pn(oD(a),r)}"`):e==="className"?ue(` class="${pn(a,r)}"`):a===!0&&(e.startsWith("data-")||iD.test(e))?ue(` ${e}`):ue(` ${e}="${pn(a,r)}"`)}function vu(a,e=!0){let r="";for(let[i,t]of Object.entries(a))r+=ps(t,i,e);return ue(r)}function Ja(a,{props:e,children:r=""},i=!0){let{lang:t,"data-astro-id":n,"define:vars":s,...o}=e;return s&&(a==="style"&&(delete o["is:global"],delete o["is:scoped"]),a==="script"&&(delete o.hoist,r=uD(s)+`
`+r)),(r==null||r=="")&&Ou.test(a)?`<${a}${vu(o,i)} />`:`<${a}${vu(o,i)}>${r}</${a}>`}var au=(a,e,r)=>{let i=JSON.stringify(a.props),t=a.children;return e===r.findIndex(n=>JSON.stringify(n.props)===i&&n.children==t)};function Lf(a){a._metadata.hasRenderedHead=!0;let e=Array.from(a.styles).filter(au).map(n=>Ja("style",n));a.styles.clear();let r=Array.from(a.scripts).filter(au).map((n,s)=>Ja("script",n,!1)),t=Array.from(a.links).filter(au).map(n=>Ja("link",n,!1)).join(`
`)+e.join(`
`)+r.join(`
`);if(a.extraHead.length>0)for(let n of a.extraHead)t+=n;return ue(t)}function*eh(a){yield{type:"head",result:a}}function*Lu(a){a._metadata.hasRenderedHead||(yield{type:"maybe-head",result:a,scope:a.scope})}var ae={Astro:1<<0,JSX:1<<1,Slot:1<<2,HeadBuffer:1<<3,RenderSlot:1<<4};function lD(a,e){a.scope|=e}function su(a,e){return(a.scope&e)===e}function pr(a,e){let r=Object.create(a,{scope:{writable:!0,value:a.scope}});return e!=null&&lD(r,e),r}var cD=Symbol.for("astro.headAndContent");function ms(a){return typeof a=="object"&&!!a[cD]}var Rf,th=Symbol.for("astro.renderTemplateResult"),yu=class{constructor(e,r){this[Rf]=!0,this.htmlParts=e,this.error=void 0,this.expressions=r.map(i=>Pu(i)?Promise.resolve(i).catch(t=>{if(!this.error)throw this.error=t,t}):i)}async*[(Rf=th,Symbol.asyncIterator)](){let{htmlParts:e,expressions:r}=this;for(let i=0;i<e.length;i++){let t=e[i],n=r[i];yield ue(t),yield*hr(n)}}};function ih(a){return typeof a=="object"&&!!a[th]}async function*gs(a){for await(let e of a)if(e||e===0)for await(let r of hr(e))switch(r.type){case"directive":{yield r;break}default:{yield ue(r);break}}}function Ui(a,...e){return new yu(a,e)}function rh(a){return a==null?!1:a.isAstroComponentFactory===!0}async function dD(a,e,r,i){let t=pr(a,ae.Astro),n=await e(t,r,i);if(n instanceof Response)throw n;let s=new xn,o=ms(n)?n.content:n;for await(let u of gs(o))s.append(u,a);return s.toString()}function fD(a,e){let r=e.propagation||"none";return e.moduleId&&a.propagation.has(e.moduleId)&&r==="none"&&(r=a.propagation.get(e.moduleId)),r==="in-tree"||r==="self"}var xt={Value:0,JSON:1,RegExp:2,Date:3,Map:4,Set:5,BigInt:6,URL:7,Uint8Array:8,Uint16Array:9,Uint32Array:10};function ou(a,e={},r=new WeakSet){if(r.has(a))throw new Error(`Cyclic reference detected while serializing props for <${e.displayName} client:${e.hydrate}>!

Cyclic references cannot be safely serialized for client-side usage. Please remove the cyclic reference.`);r.add(a);let i=a.map(t=>ah(t,e,r));return r.delete(a),i}function nh(a,e={},r=new WeakSet){if(r.has(a))throw new Error(`Cyclic reference detected while serializing props for <${e.displayName} client:${e.hydrate}>!

Cyclic references cannot be safely serialized for client-side usage. Please remove the cyclic reference.`);r.add(a);let i=Object.fromEntries(Object.entries(a).map(([t,n])=>[t,ah(n,e,r)]));return r.delete(a),i}function ah(a,e={},r=new WeakSet){switch(Object.prototype.toString.call(a)){case"[object Date]":return[xt.Date,a.toISOString()];case"[object RegExp]":return[xt.RegExp,a.source];case"[object Map]":return[xt.Map,JSON.stringify(ou(Array.from(a),e,r))];case"[object Set]":return[xt.Set,JSON.stringify(ou(Array.from(a),e,r))];case"[object BigInt]":return[xt.BigInt,a.toString()];case"[object URL]":return[xt.URL,a.toString()];case"[object Array]":return[xt.JSON,JSON.stringify(ou(a,e,r))];case"[object Uint8Array]":return[xt.Uint8Array,JSON.stringify(Array.from(a))];case"[object Uint16Array]":return[xt.Uint16Array,JSON.stringify(Array.from(a))];case"[object Uint32Array]":return[xt.Uint32Array,JSON.stringify(Array.from(a))];default:return a!==null&&typeof a=="object"?[xt.Value,nh(a,e,r)]:[xt.Value,a]}}function sh(a,e){return JSON.stringify(nh(a,e))}var oh=["load","idle","media","visible","only"],hD=new Set(oh),uh=new Set(oh.map(a=>`client:${a}`));function pD(a,e){let r={isPage:!1,hydration:null,props:{}};for(let[i,t]of Object.entries(e))if(i.startsWith("server:")&&i==="server:root"&&(r.isPage=!0),i.startsWith("client:"))switch(r.hydration||(r.hydration={directive:"",value:"",componentUrl:"",componentExport:{value:""}}),i){case"client:component-path":{r.hydration.componentUrl=t;break}case"client:component-export":{r.hydration.componentExport.value=t;break}case"client:component-hydration":break;case"client:display-name":break;default:{if(r.hydration.directive=i.split(":")[1],r.hydration.value=t,!hD.has(r.hydration.directive))throw new Error(`Error: invalid hydration directive "${i}". Supported hydration methods: ${Array.from(uh).join(", ")}`);if(r.hydration.directive==="media"&&typeof r.hydration.value!="string")throw new Ee(re.MissingMediaQueryDirective);break}}else i==="class:list"?t&&(r.props[i.slice(0,-5)]=Jf(t)):r.props[i]=t;for(let i of Object.getOwnPropertySymbols(e))r.props[i]=e[i];return r}async function mD(a,e){let{renderer:r,result:i,astroId:t,props:n,attrs:s}=a,{hydrate:o,componentUrl:u,componentExport:l}=e;if(!l.value)throw new Error(`Unable to resolve a valid export for "${e.displayName}"! Please open an issue at https://astro.build/issues!`);let c={children:"",props:{uid:t}};if(s)for(let[m,_]of Object.entries(s))c.props[m]=vn(_);c.props["component-url"]=await i.resolve(decodeURI(u)),r.clientEntrypoint&&(c.props["component-export"]=l.value,c.props["renderer-url"]=await i.resolve(decodeURI(r.clientEntrypoint)),c.props.props=vn(sh(n,e))),c.props.ssr="",c.props.client=o;let f=await i.resolve("astro:scripts/before-hydration.js");return f.length&&(c.props["before-hydration-url"]=f),c.props.opts=vn(JSON.stringify({name:e.displayName,value:e.hydrateArgs||""})),c}var lh,ch=Symbol.for("astro.componentInstance"),_u=class{constructor(e,r,i,t){this[lh]=!0,this.result=e,this.props=r,this.factory=t,this.slotValues={};let n=pr(e,ae.Slot);for(let s in i){let o=i[s](n);this.slotValues[s]=()=>o}}async init(e){return this.returnValue=this.factory(e,this.props,this.slotValues),this.returnValue}async*render(){this.returnValue===void 0&&await this.init(this.result);let e=this.returnValue;Pu(e)&&(e=await e),ms(e)?yield*e.content:yield*hr(e)}};lh=ch;function gD(a,e){if(a!=null)for(let r of Object.keys(a))uh.has(r)&&console.warn(`You are attempting to render <${e} ${r} />, but ${e} is an Astro component. Astro components do not render in the client and should not have a hydration directive. Please use a framework component for client rendering.`)}function vD(a,e,r,i,t={}){gD(i,e);let n=new _u(a,i,t,r);return fD(a,r)&&!a.propagators.has(r)&&a.propagators.set(r,n),n}function Ru(a){return typeof a=="object"&&!!a[ch]}async function*hr(a){if(a=await a,a instanceof as)a.instructions&&(yield*a.instructions),yield a;else if(Iu(a))yield a;else if(Array.isArray(a))for(let e of a)yield ue(await hr(e));else typeof a=="function"?yield*hr(a()):typeof a=="string"?yield ue(vn(a)):!a&&a!==0||(ih(a)?yield*gs(a):Ru(a)?yield*a.render():ArrayBuffer.isView(a)?yield a:typeof a=="object"&&(Symbol.asyncIterator in a||Symbol.iterator in a)?yield*a:yield a)}var dh=Symbol.for("astro:slot-string"),as=class extends Ni{constructor(e,r){super(e),this.instructions=r,this[dh]=!0}};function yD(a){return!!a[dh]}async function Yt(a,e,r){if(e){let i=pr(a,ae.Slot),t=hr(typeof e=="function"?e(i):e),n="",s=null;for await(let o of t)typeof o.type=="string"?(s===null&&(s=[]),s.push(o)):n+=o;return ue(new as(n,s))}return r?Yt(a,r):""}async function fh(a,e={}){let r=null,i={};return e&&await Promise.all(Object.entries(e).map(([t,n])=>Yt(a,n).then(s=>{s.instructions&&(r===null&&(r=[]),r.push(...s.instructions)),i[t]=s}))),{slotInstructions:r,children:i}}var _D=Symbol.for("astro:fragment"),ss=Symbol.for("astro:renderer"),Mu=new TextEncoder,xD=new TextDecoder;function Tn(a,e){if(typeof e.type=="string"){let r=e;switch(r.type){case"directive":{let{hydration:i}=r,t=i&&Zx(a),n=i&&eD(a,i.directive),s=t?"both":n?"directive":null;if(s){let o=tD(s,i.directive);return ue(o)}else return""}case"head":return a._metadata.hasRenderedHead?"":Lf(a);case"maybe-head":{if(a._metadata.hasRenderedHead)return"";switch(r.scope){case ae.JSX|ae.Slot|ae.Astro:case ae.JSX|ae.Astro|ae.HeadBuffer:case ae.JSX|ae.Slot|ae.Astro|ae.HeadBuffer:return"";case ae.JSX|ae.Astro:{if(su(a,ae.JSX))return"";break}case ae.Slot:case ae.Slot|ae.HeadBuffer:{if(su(a,ae.RenderSlot))return"";break}case ae.HeadBuffer:{if(su(a,ae.JSX|ae.HeadBuffer))return"";break}case ae.RenderSlot|ae.Astro:case ae.RenderSlot|ae.Astro|ae.JSX:case ae.RenderSlot|ae.Astro|ae.JSX|ae.HeadBuffer:return""}return Lf(a)}}}else{if(yD(e)){let r="",i=e;if(i.instructions)for(let t of i.instructions)r+=Tn(a,t);return r+=e.toString(),r}return e.toString()}}var xn=class{constructor(){this.parts=""}append(e,r){ArrayBuffer.isView(e)?this.parts+=xD.decode(e):this.parts+=Tn(r,e)}toString(){return this.parts}toArrayBuffer(){return Mu.encode(this.parts)}};function DD(a,e){if(e instanceof Uint8Array)return e;let r=Tn(a,e);return Mu.encode(r.toString())}var Mf="astro-client-only",xi=class{constructor(e){this.vnode=e,this.count=0}increment(){this.count++}haveNoTried(){return this.count===0}isCompleted(){return this.count>2}};xi.symbol=Symbol("astro:jsx:skip");var xu,Nu=0;async function Di(a,e){switch(!0){case e instanceof Ni:return e.toString().trim()===""?"":e;case typeof e=="string":return ue(vn(e));case typeof e=="function":return e;case(!e&&e!==0):return"";case Array.isArray(e):return ue((await Promise.all(e.map(i=>Di(a,i)))).join(""))}let r;return e.props?e.props[xi.symbol]?r=e.props[xi.symbol]:r=new xi(e):r=new xi(e),Du(a,e,r)}async function Du(a,e,r){if(yn(e)){switch(!0){case!e.type:throw new Error(`Unable to render ${a._metadata.pathname} because it contains an undefined Component!
Did you forget to import the component or is it possible there is a typo?`);case e.type===Symbol.for("astro:fragment"):return Di(a,e.props.children);case e.type.isAstroComponentFactory:{let i={},t={};for(let[o,u]of Object.entries(e.props??{}))o==="children"||u&&typeof u=="object"&&u.$$slot?t[o==="children"?"default":o]=()=>Di(a,u):i[o]=u;let n=pr(a,ae.JSX);return ue(await dD(n,e.type,i,t))}case(!e.type&&e.type!==0):return"";case(typeof e.type=="string"&&e.type!==Mf):return ue(await TD(a,e.type,e.props??{}))}if(e.type){let i=function(c){if(Array.isArray(c))return c.map(f=>i(f));if(!yn(c)){s.default.push(c);return}if("slot"in c.props){s[c.props.slot]=[...s[c.props.slot]??[],c],delete c.props.slot;return}s.default.push(c)};if(typeof e.type=="function"&&e.type["astro:renderer"]&&r.increment(),typeof e.type=="function"&&e.props["server:root"]){let c=await e.type(e.props??{});return await Di(a,c)}if(typeof e.type=="function")if(r.haveNoTried()||r.isCompleted()){bD();try{let c=await e.type(e.props??{}),f;if(c&&c[hs])return f=await Du(a,c,r),f;if(!c)return f=await Du(a,c,r),f}catch(c){if(r.isCompleted())throw c;r.increment()}finally{ED()}}else r.increment();let{children:t=null,...n}=e.props??{},s={default:[]};i(t);for(let[c,f]of Object.entries(n))f.$$slot&&(s[c]=f,delete n[c]);let o=[],u={};for(let[c,f]of Object.entries(s))o.push(Di(a,f).then(m=>{m.toString().trim().length!==0&&(u[c]=()=>m)}));await Promise.all(o),n[xi.symbol]=r;let l;if(e.type===Mf&&e.props["client:only"]?l=await Bf(a,e.props["client:display-name"]??"",null,n,u):l=await Bf(a,typeof e.type=="function"?e.type.name:e.type,e.type,n,u),typeof l!="string"&&Symbol.asyncIterator in l){let c=new xn;for await(let f of l)c.append(f,a);return ue(c.toString())}else return ue(l)}}return ue(`${e}`)}async function TD(a,e,{children:r,...i}){return ue(`<${e}${$D(i)}${ue((r==null||r=="")&&Ou.test(e)?"/>":`>${r==null?"":await Di(a,r)}</${e}>`)}`)}function bD(){if(Nu++,!xu){xu=console.error;try{console.error=SD}catch{}}}function ED(){Nu--}function SD(a,...e){Nu>0&&typeof a=="string"&&a.includes("Warning: Invalid hook call.")&&a.includes("https://reactjs.org/link/invalid-hook-call")||xu(a,...e)}var Tu="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXY",uu=Tu.length;function CD(a){let e=0;if(a.length===0)return e;for(let r=0;r<a.length;r++){let i=a.charCodeAt(r);e=(e<<5)-e+i,e=e&e}return e}function wD(a){let e,r="",i=CD(a),t=i<0?"Z":"";for(i=Math.abs(i);i>=uu;)e=i%uu,i=Math.floor(i/uu),r=Tu[e]+r;return i>0&&(r=Tu[i]+r),t+r}function AD(a){return typeof HTMLElement<"u"&&HTMLElement.isPrototypeOf(a)}async function FD(a,e,r,i){let t=kD(e),n="";for(let s in r)n+=` ${s}="${pn(await r[s])}"`;return ue(`<${t}${n}>${await Yt(a,i?.default)}</${t}>`)}function kD(a){let e=customElements.getName(a);return e||a.name.replace(/^HTML|Element$/g,"").replace(/[A-Z]/g,"-$&").toLowerCase().replace(/^-/,"html-")}var Nf=new Map([["solid","solid-js"]]);function PD(a){switch(a?.split(".").pop()){case"svelte":return["@astrojs/svelte"];case"vue":return["@astrojs/vue"];case"jsx":case"tsx":return["@astrojs/react","@astrojs/preact","@astrojs/solid-js","@astrojs/vue (jsx)"];default:return["@astrojs/react","@astrojs/preact","@astrojs/solid-js","@astrojs/vue","@astrojs/svelte","@astrojs/lit"]}}function ID(a){return a===_D}function OD(a){return a&&typeof a=="object"&&a["astro:html"]}async function LD(a,e,r,i,t={}){var n,s;if(!r&&!i["client:only"])throw new Error(`Unable to render ${e} because it is ${r}!
Did you forget to import the component or is it possible there is a typo?`);let{renderers:o}=a._metadata,u={displayName:e},{hydration:l,isPage:c,props:f}=pD(e,i),m="",_;l&&(u.hydrate=l.directive,u.hydrateArgs=l.value,u.componentExport=l.componentExport,u.componentUrl=l.componentUrl);let x=PD(u.componentUrl),b=o.filter(O=>O.name!=="astro:jsx"),{children:T,slotInstructions:C}=await fh(a,t),k;if(u.hydrate!=="only"){let O=!1;try{O=r&&r[ss]}catch{}if(O){let N=r[ss];k=o.find(({name:M})=>M===N)}if(!k){let N;for(let M of o)try{if(await M.ssr.check.call({result:a},r,f,T)){k=M;break}}catch(G){N??(N=G)}if(!k&&N)throw N}if(!k&&typeof HTMLElement=="function"&&AD(r))return FD(a,r,i,t)}else{if(u.hydrateArgs){let O=u.hydrateArgs,N=Nf.has(O)?Nf.get(O):O;k=o.find(({name:M})=>M===`@astrojs/${N}`||M===N)}if(!k&&b.length===1&&(k=b[0]),!k){let O=(n=u.componentUrl)==null?void 0:n.split(".").pop();k=o.filter(({name:N})=>N===`@astrojs/${O}`||N===O)[0]}}if(k)u.hydrate==="only"?m=await Yt(a,t?.fallback):{html:m,attrs:_}=await k.ssr.renderToStaticMarkup.call({result:a},r,f,T,u);else{if(u.hydrate==="only")throw new Ee({...re.NoClientOnlyHint,message:re.NoClientOnlyHint.message(u.displayName),hint:re.NoClientOnlyHint.hint(x.map(O=>O.replace("@astrojs/","")).join("|"))});if(typeof r!="string"){let O=b.filter(M=>x.includes(M.name)),N=b.length>1;if(O.length===0)throw new Ee({...re.NoMatchingRenderer,message:re.NoMatchingRenderer.message(u.displayName,(s=u?.componentUrl)==null?void 0:s.split(".").pop(),N,b.length),hint:re.NoMatchingRenderer.hint(Of(x.map(M=>"`"+M+"`")))});if(O.length===1)k=O[0],{html:m,attrs:_}=await k.ssr.renderToStaticMarkup.call({result:a},r,f,T,u);else throw new Error(`Unable to render ${u.displayName}!

This component likely uses ${Of(x)},
but Astro encountered an error during server-side rendering.

Please ensure that ${u.displayName}:
1. Does not unconditionally access browser-specific globals like \`window\` or \`document\`.
   If this is unavoidable, use the \`client:only\` hydration directive.
2. Does not conditionally return \`null\` or \`undefined\` when rendered on the server.

If you're still stuck, please open an issue on GitHub or join us at https://astro.build/chat.`)}}if(k&&!k.clientEntrypoint&&k.name!=="@astrojs/lit"&&u.hydrate)throw new Ee({...re.NoClientEntrypoint,message:re.NoClientEntrypoint.message(e,u.hydrate,k.name)});if(!m&&typeof r=="string"){let O=RD(r),N=Object.values(T).join(""),M=gs(await Ui`<${O}${vu(f)}${ue(N===""&&Ou.test(O)?"/>":`>${N}</${O}>`)}`);m="";for await(let G of M)m+=G}if(!l)return async function*(){C&&(yield*C),c||k?.name==="astro:jsx"?yield m:m&&m.length>0?yield ue(m.replace(/\<\/?astro-slot\>/g,"")):yield""}();let j=wD(`<!--${u.componentExport.value}:${u.componentUrl}-->
${m}
${sh(f,u)}`),L=await mD({renderer:k,result:a,astroId:j,props:f,attrs:_},u),R=[];if(m){if(Object.keys(T).length>0)for(let O of Object.keys(T))m.includes(O==="default"?"<astro-slot>":`<astro-slot name="${O}">`)||R.push(O)}else R=Object.keys(T);let H=R.length>0?R.map(O=>`<template data-astro-template${O!=="default"?`="${O}"`:""}>${T[O]}</template>`).join(""):"";L.children=`${m??""}${H}`,L.children&&(L.props["await-children"]="");async function*B(){C&&(yield*C),yield{type:"directive",hydration:l,result:a},yield ue(Ja("astro-island",L,!1))}return B()}function RD(a){let e=/[&<>'"\s]+/g;return e.test(a)?a.trim().split(e)[0].trim():a}async function MD(a,e={}){let r=await Yt(a,e?.default);return r==null?r:ue(r)}async function ND(a,e,r,i={}){let{slotInstructions:t,children:n}=await fh(a,i),s=e.render({slots:n}),o=t?t.map(u=>Tn(a,u)).join(""):"";return ue(o+s)}function ji(a,e,r,i,t={}){return Pu(r)?Promise.resolve(r).then(n=>ji(a,e,n,i,t)):ID(r)?MD(a,t):OD(r)?ND(a,r,i,t):rh(r)?vD(a,e,r,i,t):LD(a,e,r,i,t)}function Bf(a,e,r,i,t={}){let n=ji(a,e,r,i,t);return Ru(n)?n.render():n}var hh=(a,e,r)=>{if(!e.has(a))throw TypeError("Cannot "+r)},fn=(a,e,r)=>(hh(a,e,"read from private field"),r?r.call(a):e.get(a)),Uf=(a,e,r)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,r)},jf=(a,e,r,i)=>(hh(a,e,"write to private field"),i?i.call(a,r):e.set(a,r),r),bu=typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]",os;function BD(){var a,e,r;return os=(r=class extends Response{constructor(i,t){let n=i instanceof ReadableStream;super(n?null:i,t),Uf(this,a,void 0),Uf(this,e,void 0),jf(this,a,n),jf(this,e,i)}get body(){return fn(this,e)}async text(){if(fn(this,a)&&bu){let i=new TextDecoder,t=fn(this,e),n="";for await(let s of Af(t))n+=i.decode(s);return n}return super.text()}async arrayBuffer(){if(fn(this,a)&&bu){let i=fn(this,e),t=[],n=0;for await(let u of Af(i))t.push(u),n+=u.length;let s=new Uint8Array(n),o=0;for(let u of t)s.set(u,o),o+=u.length;return s}return super.arrayBuffer()}},a=new WeakMap,e=new WeakMap,r),os}var UD=bu?(a,e)=>typeof a=="string"||ArrayBuffer.isView(a)?new Response(a,e):typeof os>"u"?new(BD())(a,e):new os(a,e):(a,e)=>new Response(a,e),Hf=Symbol.for("astro.needsHeadRendering");function jD(a){return Hf in a&&!!a[Hf]}async function Vf(a,e,r){let i=new xn,t=0;for await(let n of e)Iu(n)&&t===0&&(t++,/<!doctype html/i.test(String(n))||(i.append(`<!DOCTYPE html>
`,a),r&&await r(i))),i.append(n,a);return i.toArrayBuffer()}async function HD(a){let e=a.propagators.values(),r=pr(a,ae.HeadBuffer);for(;;){let{value:i,done:t}=e.next();if(t)break;let n=await i.init(r);ms(n)&&a.extraHead.push(n.head)}}async function VD(a,e,r,i,t,n){if(!rh(e)){let u={...r??{},"server:root":!0},l;try{let f=await ji(a,e.name,e,u,null);Ru(f)?l=f.render():l=f}catch(f){throw Ee.is(f)&&!f.loc&&f.setLocation({file:n?.component}),f}let c=await Vf(a,l,async f=>{if(jD(e))for await(let m of Lu(a))f.append(m,a)});return new Response(c,{headers:new Headers([["Content-Type","text/html; charset=utf-8"],["Content-Length",c.byteLength.toString()]])})}let s=await e(a,r,i),o=ms(s);if(ih(s)||o){await HD(a);let u=o?s.content:s,l=gs(u),c=a.response,f=new Headers(c.headers),m;return t?m=new ReadableStream({start(x){async function b(){let T=0;try{for await(let C of l){Iu(C)&&T===0&&(/<!doctype html/i.test(String(C))||x.enqueue(Mu.encode(`<!DOCTYPE html>
`)));let k=DD(a,C);x.enqueue(k),T++}x.close()}catch(C){Ee.is(C)&&!C.loc&&C.setLocation({file:n?.component}),x.error(C)}}b()}}):(m=await Vf(a,l),f.set("Content-Length",m.byteLength.toString())),UD(m,{...c,headers:f})}if(!(s instanceof Response))throw new Ee({...re.OnlyResponseCanBeReturned,message:re.OnlyResponseCanBeReturned.message(n?.route,typeof s),location:{file:n?.component}});return s}function ph(a,e){!a||typeof a=="function"&&Object.defineProperty(a,ss,{value:e,enumerable:!1,writable:!1})}function $D(a,e,{class:r}={}){let i="";r&&(typeof a.class<"u"?a.class+=` ${r}`:typeof a["class:list"]<"u"?a["class:list"]=[a["class:list"],r]:a.class=r);for(let[t,n]of Object.entries(a))i+=ps(n,t,!0);return ue(i)}var WD=new Intl.DateTimeFormat([],{hour:"2-digit",minute:"2-digit",second:"2-digit"}),us={debug:20,info:30,warn:40,error:50,silent:90};function mh(a,e,r,i){let t=a.level,n=a.dest,s={type:r,level:e,message:i};us[t]>us[e]||n.write(s)}function Bi(a,e,r){return mh(a,"warn",e,r)}function qD(a,e,r){return mh(a,"error",e,r)}function zD(...a){"_astroGlobalDebug"in globalThis&&globalThis._astroGlobalDebug(...a)}if(typeof process<"u"){let a=process;"argv"in a&&Array.isArray(a.argv)&&(a.argv.includes("--verbose")||a.argv.includes("--silent"))}var GD=["string","number","undefined"];function KD([a,e],r){if(!GD.includes(typeof e))throw new Ee({...re.GetStaticPathsInvalidRouteParam,message:re.GetStaticPathsInvalidRouteParam.message(a,e,typeof e),location:{file:r}})}function XD(a,{ssr:e,logging:r,route:i}){if(e&&a.getStaticPaths&&!a.prerender&&Bi(r,"getStaticPaths",'getStaticPaths() is ignored when "output: server" is set.'),(!e||a.prerender)&&!a.getStaticPaths)throw new Ee({...re.GetStaticPathsRequired,location:{file:i.component}})}function YD(a,e,r){if(!Array.isArray(a))throw new Ee({...re.InvalidGetStaticPathsReturn,message:re.InvalidGetStaticPathsReturn.message(typeof a),location:{file:r.component}});a.forEach(i=>{if(i.params===void 0||i.params===null||i.params&&Object.keys(i.params).length===0)throw new Ee({...re.GetStaticPathsExpectedParams,location:{file:r.component}});if(typeof i.params!="object")throw new Ee({...re.InvalidGetStaticPathParam,message:re.InvalidGetStaticPathParam.message(typeof i.params),location:{file:r.component}});for(let[t,n]of Object.entries(i.params))typeof n>"u"||typeof n=="string"||typeof n=="number"||Bi(e,"getStaticPaths",`invalid path param: ${t}. A string, number or undefined value was expected, but got \`${JSON.stringify(n)}\`.`),typeof n=="string"&&n===""&&Bi(e,"getStaticPaths",`invalid path param: ${t}. \`undefined\` expected for an optional param, but got empty string.`)})}function QD(a){return r=>{let i={};return a.forEach((t,n)=>{t.startsWith("...")?i[t.slice(3)]=r[n+1]?decodeURIComponent(r[n+1]):void 0:i[t]=decodeURIComponent(r[n+1])}),i}}function gh(a,e){let r=Object.entries(a).reduce((i,t)=>{KD(t,e);let[n,s]=t;return i[n]=s?.toString(),i},{});return JSON.stringify(r,Object.keys(a).sort())}var vh=(a,e,r)=>{if(!e.has(a))throw TypeError("Cannot "+r)},Mi=(a,e,r)=>(vh(a,e,"read from private field"),r?r.call(a):e.get(a)),lu=(a,e,r)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,r)},cu=(a,e,r,i)=>(vh(a,e,"write to private field"),i?i.call(a,r):e.set(a,r),r),Za,yi,es,$f=Symbol.for("astro.clientAddress");function JD(a){return function(){switch(a){case"Astro.redirect":throw new Ee(re.StaticRedirectNotAvailable)}}}function ZD(a){var e;if(!!a&&((e=a.expressions)==null?void 0:e.length)===1)return a.expressions[0]}var Eu=class{constructor(e,r,i){if(lu(this,Za,void 0),lu(this,yi,void 0),lu(this,es,void 0),cu(this,Za,e),cu(this,yi,r),cu(this,es,i),r)for(let t of Object.keys(r)){if(this[t]!==void 0)throw new Ee({...re.ReservedSlotName,message:re.ReservedSlotName.message(t)});Object.defineProperty(this,t,{get(){return!0},enumerable:!0})}}has(e){return Mi(this,yi)?Boolean(Mi(this,yi)[e]):!1}async render(e,r=[]){if(!Mi(this,yi)||!this.has(e))return;let i=pr(Mi(this,Za),ae.RenderSlot);if(!Array.isArray(r))Bi(Mi(this,es),"Astro.slots.render",`Expected second parameter to be an array, received a ${typeof r}. If you're trying to pass an array as a single argument and getting unexpected results, make sure you're passing your array as a item of an array. Ex: Astro.slots.render('default', [["Hello", "World"]])`);else if(r.length>0){let s=Mi(this,yi)[e],o=typeof s=="function"?await s(i):await s,u=ZD(o);if(u)return await Yt(i,()=>u(...r)).then(c=>c!=null?String(c):c);if(typeof o=="function")return await Di(i,o(...r)).then(l=>l!=null?String(l):l)}let t=await Yt(i,Mi(this,yi)[e]);return Tn(i,t)}};Za=new WeakMap;yi=new WeakMap;es=new WeakMap;var du=null;function eT(a){let{markdown:e,params:r,pathname:i,renderers:t,request:n,resolve:s}=a,o=new URL(n.url),u=new Headers;u.set("Content-Type","text/html");let l={status:a.status,statusText:"OK",headers:u};Object.defineProperty(l,"headers",{value:l.headers,enumerable:!0,writable:!1});let c,f={styles:a.styles??new Set,scripts:a.scripts??new Set,links:a.links??new Set,propagation:a.propagation??new Map,propagators:new Map,extraHead:[],scope:0,cookies:c,createAstro(m,_,x){let b=new Eu(f,x,a.logging),T={__proto__:m,get clientAddress(){if(!($f in n))throw a.adapterName?new Ee({...re.ClientAddressNotAvailable,message:re.ClientAddressNotAvailable.message(a.adapterName)}):new Ee(re.StaticClientAddressNotAvailable);return Reflect.get(n,$f)},get cookies(){return c||(c=new ns(n),f.cookies=c,c)},params:r,props:_,request:n,url:o,redirect:a.ssr?(C,k)=>new Response(null,{status:k||302,headers:{Location:C}}):JD("Astro.redirect"),response:l,slots:b};return Object.defineProperty(T,"__renderMarkdown",{enumerable:!1,writable:!1,value:async function(C,k){if(typeof Deno<"u")throw new Error("Markdown is not supported in Deno SSR");if(!du){let L="@astrojs/";L+="markdown-remark",du=(await import(L)).renderMarkdown}let{code:j}=await du(C,{...e,...k??{}});return j}}),T},resolve:s,_metadata:{renderers:t,pathname:i,hasHydrationScript:!1,hasRenderedHead:!1,hasDirectives:new Set},response:l};return f}function tT(a){return function(r,i={}){let{pageSize:t,params:n,props:s}=i,o=t||10,u="page",l=n||{},c=s||{},f;if(a.params.includes(`...${u}`))f=!1;else if(a.params.includes(`${u}`))f=!0;else throw new Ee({...re.PageNumberParamNotFound,message:re.PageNumberParamNotFound.message(u)});let m=Math.max(1,Math.ceil(r.length/o));return[...Array(m).keys()].map(x=>{let b=x+1,T=o===1/0?0:(b-1)*o,C=Math.min(T+o,r.length),k={...l,[u]:f||b>1?String(b):void 0};return{params:k,props:{...c,page:{data:r.slice(T,C),start:T,end:C-1,size:o,total:r.length,currentPage:b,lastPage:m,url:{current:a.generate({...k}),next:b===m?void 0:a.generate({...k,page:String(b+1)}),prev:b===1?void 0:a.generate({...k,page:!f&&b-1===1?"":String(b-1)})}}}}})}}async function iT({isValidate:a,logging:e,mod:r,route:i,ssr:t}){if(XD(r,{ssr:t,logging:e,route:i}),t&&!r.prerender)return{staticPaths:Object.assign([],{keyed:new Map})};if(!r.getStaticPaths)throw new Error("Unexpected Error.");let n=[];n=await r.getStaticPaths({paginate:tT(i),rss(){throw new Ee(re.GetStaticPathsRemovedRSSHelper)}}),Array.isArray(n)&&(n=n.flat()),a&&YD(n,e,i);let s=n;s.keyed=new Map;for(let o of s){let u=gh(o.params,i.component);s.keyed.set(u,o)}return{staticPaths:s}}var Su=class{constructor(e,r="production"){this.cache={},this.logging=e,this.mode=r}clearAll(){this.cache={}}set(e,r){this.mode==="production"&&this.cache[e.component]&&Bi(this.logging,"routeCache",`Internal Warning: route cache overwritten. (${e.component})`),this.cache[e.component]=r}get(e){return this.cache[e.component]}};function rT(a,e,r){let i=gh(e,r.component),t=a.keyed.get(i);if(t)return t;zD("findPathItemByKey",`Unexpected cache miss looking for ${i}`)}var yh=(a=>(a[a.NoMatchingStaticPath=0]="NoMatchingStaticPath",a))(yh||{});async function _h(a){let{logging:e,mod:r,route:i,routeCache:t,pathname:n,ssr:s}=a,o={},u;if(i&&!i.pathname){if(i.params.length){let f=i.pattern.exec(n);f&&(o=QD(i.params)(f))}let l=t.get(i);l||(l=await iT({mod:r,route:i,isValidate:!0,logging:e,ssr:s}),t.set(i,l));let c=rT(l.staticPaths,o,i);if(!c&&(s?r.prerender:!0))return 0;u=c?.props?{...c.props}:{}}else u={};return[o,u]}async function nT(a,e,r){var i,t;let n=await _h({logging:r.logging,mod:a,route:e.route,routeCache:r.routeCache,pathname:e.pathname,ssr:r.ssr});if(n===0)throw new Ee({...re.NoMatchingStaticPathFound,message:re.NoMatchingStaticPathFound.message(e.pathname),hint:(i=e.route)!=null&&i.component?re.NoMatchingStaticPathFound.hint([(t=e.route)==null?void 0:t.component]):""});let[s,o]=n,u=a.default;if(!u)throw new Error(`Expected an exported Astro component but received typeof ${typeof u}`);let l=eT({adapterName:r.adapterName,links:e.links,styles:e.styles,logging:r.logging,markdown:r.markdown,mode:r.mode,origin:e.origin,params:s,props:o,pathname:e.pathname,propagation:e.propagation,resolve:r.resolve,renderers:r.renderers,request:e.request,site:r.site,scripts:e.scripts,ssr:r.ssr,status:e.status??200});typeof a.components=="object"&&Object.assign(o,{components:a.components});let c=await VD(l,u,o,null,r.streaming,e.route);return l.cookies&&ku(c,l.cookies),c}var Wf=Symbol.for("astro.clientAddress");function aT({request:a,params:e,site:r,props:i,adapterName:t}){return{cookies:new ns(a),request:a,params:e,site:r?new URL(r):void 0,generator:`Astro v${Qf}`,props:i,redirect(n,s){return new Response(null,{status:s||302,headers:{Location:n}})},url:new URL(a.url),get clientAddress(){if(!(Wf in a))throw t?new Ee({...re.ClientAddressNotAvailable,message:re.ClientAddressNotAvailable.message(t)}):new Ee(re.StaticClientAddressNotAvailable);return Reflect.get(a,Wf)}}}async function sT(a,e,r,i){var t,n;let s=await _h({mod:a,route:r.route,routeCache:e.routeCache,pathname:r.pathname,logging:e.logging,ssr:e.ssr});if(s===yh.NoMatchingStaticPath)throw new Ee({...re.NoMatchingStaticPathFound,message:re.NoMatchingStaticPathFound.message(r.pathname),hint:(t=r.route)!=null&&t.component?re.NoMatchingStaticPathFound.hint([(n=r.route)==null?void 0:n.component]):""});let[o,u]=s,l=aT({request:r.request,params:o,props:u,site:e.site,adapterName:e.adapterName}),c=await $x(a,l,e.ssr);return c instanceof Response?(ku(c,l.cookies),{type:"response",response:c}):(e.ssr&&!a.prerender&&(c.hasOwnProperty("headers")&&Bi(i,"ssr","Setting headers is not supported when returning an object. Please return an instance of Response. See https://docs.astro.build/en/core-concepts/endpoints/#server-endpoints-api-routes for more information."),c.encoding&&Bi(i,"ssr","`encoding` is ignored in SSR. To return a charset other than UTF-8, please return an instance of Response. See https://docs.astro.build/en/core-concepts/endpoints/#server-endpoints-api-routes for more information.")),{type:"simple",body:c.body,encoding:c.encoding,cookies:l.cookies})}var qf,fu=1,oT={write(a){let e=console.error;us[a.level]<us.error&&(e=console.log);function r(){let n="",s=a.type;return s&&(n+=xf(WD.format(new Date)+" "),a.level==="info"?s=Xa(Tf(`[${s}]`)):a.level==="warn"?s=Xa(tu(`[${s}]`)):a.level==="error"&&(s=Xa(Df(`[${s}]`))),n+=`${s} `),_f(n)}let i=a.message;i===qf?(fu++,i=`${i} ${tu(`(x${fu})`)}`):(qf=i,fu=1);let t=r()+i;return e(t),!0}};function xh(a){return a.endsWith("/")?a:a+"/"}function uT(a){return a[0]==="/"?a:"/"+a}function lT(a){return a.endsWith("/")?a.slice(0,a.length-1):a}function cT(a){return a.startsWith("/")?a.substring(1):a}function dT(a){return a.replace(/^\/|\/$/g,"")}function fT(a){return typeof a=="string"||a instanceof String}function hT(...a){return a.filter(fT).map(dT).join("/")}function Dh(a){let e=a.request,r=new URL(e.url),i=a.origin??r.origin,t=a.pathname??r.pathname;return{...a,origin:i,pathname:t,url:r}}function pT(a){return xh(new URL(a||"/","http://localhost/").pathname)}function Th(a,e){let r=pT(e),i=ru(a);return xh(r)+cT(i)}function mT(a,e){return{props:{rel:"stylesheet",href:Th(a,e)},children:""}}function gT(a,e){return new Set(a.map(r=>mT(r,e)))}function vT(a,e){return a.type==="external"?yT(a.value,e):{props:{type:"module"},children:a.value}}function yT(a,e){return{props:{type:"module",src:Th(a,e)},children:""}}function hu(a,e){return e.routes.find(r=>r.pattern.test(decodeURI(a)))}function _T(a,e){let r=a.map(n=>"/"+n.map(s=>s.spread?`:${s.content.slice(3)}(.*)?`:s.dynamic?`:${s.content}`:s.content.normalize().replace(/\?/g,"%3F").replace(/#/g,"%23").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("")).join(""),i="";return e==="always"&&a.length&&(i="/"),of(r+i)}function zf(a){return{route:a.route,type:a.type,pattern:new RegExp(a.pattern),params:a.params,component:a.component,generate:_T(a.segments,a._meta.trailingSlash),pathname:a.pathname||void 0,segments:a.segments,prerender:a.prerender}}function bh(a){let e=[];for(let t of a.routes){e.push({...t,routeData:zf(t.routeData)});let n=t;n.routeData=zf(t.routeData)}let r=new Set(a.assets),i=new Map(a.propagation);return{...a,assets:r,propagation:i,routes:e}}var Bu=(a,e,r)=>{if(!e.has(a))throw TypeError("Cannot "+r)},Re=(a,e,r)=>(Bu(a,e,"read from private field"),r?r.call(a):e.get(a)),Mt=(a,e,r)=>{if(e.has(a))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(a):e.set(a,r)},lr=(a,e,r,i)=>(Bu(a,e,"write to private field"),i?i.call(a,r):e.set(a,r),r),pu=(a,e,r)=>(Bu(a,e,"access private method"),r),Dn,Xt,cr,ls,Uu,fr,mn,ts,is,Cu,wu,Eh,cs=class{constructor(e,r=!0){Mt(this,is),Mt(this,wu),Mt(this,Dn,void 0),Mt(this,Xt,void 0),Mt(this,cr,void 0),Mt(this,ls,void 0),Mt(this,Uu,new TextEncoder),Mt(this,fr,{dest:oT,level:"info"}),Mt(this,mn,void 0),Mt(this,ts,void 0),lr(this,Xt,e),lr(this,cr,{routes:e.routes.map(i=>i.routeData)}),lr(this,ls,new Map(e.routes.map(i=>[i.routeData,i]))),lr(this,Dn,{adapterName:e.adapterName,logging:Re(this,fr),markdown:e.markdown,mode:"production",renderers:e.renderers,async resolve(i){if(!(i in e.entryModules))throw new Error(`Unable to resolve [${i}]`);let t=e.entryModules[i];switch(!0){case t.startsWith("data:"):case t.length===0:return t;default:return uT(hT(e.base,t))}},routeCache:new Su(Re(this,fr)),site:Re(this,Xt).site,ssr:!0,streaming:r}),lr(this,mn,Re(this,Xt).base||"/"),lr(this,ts,lT(Re(this,mn)))}removeBase(e){return e.startsWith(Re(this,mn))?e.slice(Re(this,ts).length+1):e}match(e,{matchNotFound:r=!1}={}){let i=new URL(e.url);if(Re(this,Xt).assets.has(i.pathname))return;let t="/"+this.removeBase(i.pathname),n=hu(t,Re(this,cr));return n?n.prerender?void 0:n:r?hu("/404",Re(this,cr)):void 0}async render(e,r){let i=200;if(!r&&(r=this.match(e),r||(i=404,r=this.match(e,{matchNotFound:!0})),!r))return new Response(null,{status:404,statusText:"Not found"});r.route==="/404"&&(i=404);let t=Re(this,Xt).pageMap.get(r.component);if(r.type==="page"){let n=await pu(this,is,Cu).call(this,e,r,t,i);if(n.status===500){let s=hu("/500",Re(this,cr));if(s){t=Re(this,Xt).pageMap.get(s.component);try{return await pu(this,is,Cu).call(this,e,s,t,500)}catch{}}}return n}else{if(r.type==="endpoint")return pu(this,wu,Eh).call(this,e,r,t,i);throw new Error(`Unsupported route type [${r.type}].`)}}setCookieHeaders(e){return Lx(e)}};Dn=new WeakMap;Xt=new WeakMap;cr=new WeakMap;ls=new WeakMap;Uu=new WeakMap;fr=new WeakMap;mn=new WeakMap;ts=new WeakMap;is=new WeakSet;Cu=async function(a,e,r,i=200){let t=new URL(a.url),n="/"+this.removeBase(t.pathname),s=Re(this,ls).get(e),o=gT(s.links),u=new Set;for(let l of s.scripts)"stage"in l?l.stage==="head-inline"&&u.add({props:{},children:l.children}):u.add(vT(l));try{let l=Dh({request:a,origin:t.origin,pathname:n,propagation:Re(this,Xt).propagation,scripts:u,links:o,route:e,status:i});return await nT(r,l,Re(this,Dn))}catch(l){return qD(Re(this,fr),"ssr",l.stack||l.message||String(l)),new Response(null,{status:500,statusText:"Internal server error"})}};wu=new WeakSet;Eh=async function(a,e,r,i=200){let t=new URL(a.url),n="/"+this.removeBase(t.pathname),s=r,o=Dh({request:a,origin:t.origin,pathname:n,route:e,status:i}),u=await sT(s,Re(this,Dn),o,Re(this,fr));if(u.type==="response"){if(u.response.headers.get("X-Astro-Response")==="Not-Found"){let l=new Request(new URL("/404",a.url)),c=this.match(l);if(c)return this.render(l,c)}return u.response}else{let l=u.body,c=new Headers,f=Gf.default.getType(t.pathname);f?c.set("Content-Type",`${f};charset=utf-8`):c.set("Content-Type","text/plain;charset=utf-8");let m=Re(this,Uu).encode(l);c.set("Content-Length",m.byteLength.toString());let _=new Response(m,{status:200,headers:c});return ku(_,u.cookies),_}};var Sh=a=>a.trim().replace(/[-_]([a-z])/g,(e,r)=>r.toUpperCase());async function xT(a,e,{default:r=null,...i}={}){if(typeof a!="function")return!1;let t={};for(let[n,s]of Object.entries(i)){let o=Sh(n);t[o]=s}try{return(await a({...e,...t,children:r}))[hs]}catch{}return!1}async function DT(a,e={},{default:r=null,...i}={}){let t={};for(let[o,u]of Object.entries(i)){let l=Sh(o);t[l]=u}let{result:n}=this;return{html:await Di(n,zx(a,{...e,...t,children:r}))}}var Ch={check:xT,renderToStaticMarkup:DT};var Nt=Ae(vs()),St=Ae(Et());function ys(){return ys=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(a[i]=r[i])}return a},ys.apply(this,arguments)}var bT="1.8.0";var ET="1.2.0",ST=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},CT=["catalogSearch","catalogSequence"],wT=["adConfigId","applicationId","catalogSearch","catalogSequence","playlistId","playlistVideoId","videoId"],AT=function(e,r){if(!(!e||e[r]===void 0)){if(typeof e[r]!="string"&&CT.indexOf(r)!==-1)try{return encodeURIComponent(JSON.stringify(e[r]))}catch{return}return encodeURIComponent(String(e[r]).trim())||void 0}},FT=function(e){return Object.keys(e).filter(function(r){return wT.indexOf(r)!==-1}).reduce(function(r,i){var t=AT(e,i);return t!==void 0&&(r+=r?"&":"?",r+=encodeURIComponent(i)+"="+t),r},"")},Lh=function(e){var r=e.accountId,i=e.base,t=i===void 0?"https://players.brightcove.net":i,n=e.playerId,s=n===void 0?"default":n,o=e.embedId,u=o===void 0?"default":o,l=e.iframe,c=l===void 0?!1:l,f=e.minified,m=f===void 0?!0:f,_=e.queryParams,x=_===void 0?null:_,b="";c?b+="html":(m&&(b+="min."),b+="js"),t.charAt(t.length-1)==="/"&&(t=t.substring(0,t.length-1));var T="";return c&&x&&(typeof x>"u"?"undefined":ST(x))==="object"&&(T=FT(x)),r=encodeURIComponent(r),s=encodeURIComponent(s),u=encodeURIComponent(u),t+"/"+r+"/"+s+"_"+u+"/index."+b+T};Lh.VERSION=ET;var kT={embedId:"default",embedType:"in-page",playerId:"default",Promise:St.default.Promise,refNodeInsert:"append"},PT="16:9",IT=!1,OT="100%",Rh="video",_s="video-js",ju="in-page",Ti="iframe",Mh="append",Hu="prepend",Vu="before",$u="after",xs="replace",LT=["catalogSearch","catalogSequence"],Wu="https://players.brightcove.net/",RT=function(e){if(e.playerUrl)return e.playerUrl;var r=e.accountId,i=e.playerId,t=e.embedId,n=e.embedOptions,s=e.embedType===Ti;return Lh({accountId:r,playerId:i,embedId:t,iframe:s,base:Wu,minified:n?!n.unminified:!0,queryParams:e})},MT=function(){return Wu},NT=function(e){Wu=e},gr={getUrl:RT,getBaseUrl:MT,setBaseUrl:NT},Nh=function(e){return Boolean(e&&e.nodeType===1)},Bh=function(e){return Boolean(Nh(e)&&e.parentNode)},BT=function(e){var r=Nt.default.createElement("iframe");return r.setAttribute("allow","autoplay;encrypted-media;fullscreen"),r.setAttribute("allowfullscreen","allowfullscreen"),r.src=gr.getUrl(e),r},UT=function(e){var r=e.embedOptions,i={adConfigId:"data-ad-config-id",applicationId:"data-application-id",catalogSearch:"data-catalog-search",catalogSequence:"data-catalog-sequence",deliveryConfigId:"data-delivery-config-id",playlistId:"data-playlist-id",playlistVideoId:"data-playlist-video-id",poster:"poster",videoId:"data-video-id"},t=r&&r.tagName||_s,n=Nt.default.createElement(t);return Object.keys(i).filter(function(s){return e[s]}).forEach(function(s){var o;if(typeof e[s]!="string"&&LT.indexOf(s)!==-1)try{o=JSON.stringify(e[s])}catch{return}else o=String(e[s]).trim();n.setAttribute(i[s],o)}),n.setAttribute("controls","controls"),n.classList.add("video-js"),n},jT=function(e,r,i){if(!r.responsive)return i;i.style.position="absolute",i.style.top="0px",i.style.right="0px",i.style.bottom="0px",i.style.left="0px",i.style.width="100%",i.style.height="100%";var t=ys({aspectRatio:PT,iframeHorizontalPlaylist:IT,maxWidth:OT},r.responsive),n=t.aspectRatio.split(":").map(Number),s=Nt.default.createElement("div"),o=n[1]/n[0]*100;e===Ti&&t.iframeHorizontalPlaylist&&(o*=1.25),s.style.paddingTop=o+"%",s.appendChild(i);var u=Nt.default.createElement("div");return u.style.position="relative",u.style.display="block",u.style.maxWidth=t.maxWidth,u.appendChild(s),u},HT=function(e,r){if(!e.pip)return r;var i=Nt.default.createElement("div");return i.classList.add("vjs-pip-container"),i.appendChild(r),i},VT=function(e,r,i){return r?HT(r,jT(e,r,i)):i},$T=function(e,r){var i=e.refNode,t=e.refNodeInsert,n=i.parentNode,s=VT(e.embedType,e.embedOptions,r);if(t===Vu?n.insertBefore(s,i):t===$u?n.insertBefore(s,i.nextElementSibling||null):t===xs?n.replaceChild(s,i):t===Hu?i.insertBefore(s,i.firstChild||null):i.appendChild(s),e.embedOptions&&e.embedOptions.playlist){var o=e.embedOptions.playlist.legacy?"ul":"div",u=Nt.default.createElement(o);u.classList.add("vjs-playlist"),r.parentNode.insertBefore(u,r.nextElementSibling||null)}return e.refNode=null,r},WT=function(e,r){if(typeof e.onEmbedCreated!="function")return r;var i=e.onEmbedCreated(r);return Nh(i)?i:r},qT=function(e){var r=e.embedType===Ti?BT(e):UT(e);return $T(e,WT(e,r))},Cn=new St.default.Map,Ds=function(e){var r=e.accountId,i=e.playerId,t=e.embedId;return(r||"*")+"_"+i+"_"+t},zT=function(e){Cn.set(Ds(e),e.accountId?gr.getUrl(e):"")},GT=function(e){return Cn.has(Ds(e))},KT=function(e){return Cn.get(Ds(e))},XT=function(){Cn.clear()},YT=function(e){Cn.forEach(e)},mr={clear:XT,forEach:YT,get:KT,has:GT,key:Ds,store:zT},Uh=/^([A-Za-z0-9]+)_([A-Za-z0-9]+)$/,jh=function(){return St.default.bc?Object.keys(St.default.bc).filter(function(e){return Uh.test(e)}):[]},QT=function(){return Object.keys(St.default).filter(function(e){return/^videojs/i.test(e)||/^(bc)$/.test(e)})},Ph=function(e){!e||Object.keys(e.players).forEach(function(r){var i=e.players[r];i&&i.dispose()})},JT=function(){mr.forEach(function(e,r){!e||Array.prototype.slice.call(Nt.default.querySelectorAll('script[src="'+e+'"]')).forEach(function(i){return i.parentNode.removeChild(i)})}),mr.clear(),Ph(St.default.videojs),jh().forEach(function(e){return Ph(St.default.bc[e].videojs)}),QT().forEach(function(e){delete St.default[e]})},ZT=function(){jh().forEach(function(e){var r=e.match(Uh),i={playerId:r[1],embedId:r[2]};mr.has(i)||mr.store(i)})},Hh={detectPlayers:ZT,reset:JT};Hh.detectPlayers();var Sn=function(e){return typeof e=="function"},eb=function(e){return e===ju||e===Ti},tb=function(e){return e===_s||e===Rh},ib=function(e){return e===Mh||e===Hu||e===Vu||e===$u||e===xs},rb=function(e){var r=e.accountId,i=e.embedOptions,t=e.embedType,n=e.options,s=e.refNode,o=e.refNodeInsert;if(r)if(Bh(s))if(eb(t)){if(t===Ti&&n)throw new Error("cannot use options with an iframe embed");if(i&&i.tagName!==void 0&&!tb(i.tagName))throw new Error('embedOptions.tagName is invalid (value: "'+i.tagName+'")');if(i&&i.responsive&&i.responsive.aspectRatio&&!/^\d+\:\d+$/.test(i.responsive.aspectRatio))throw new Error('embedOptions.responsive.aspectRatio must be in the "n:n" format (value: "'+i.responsive.aspectRatio+'")');if(!ib(o))throw new Error("refNodeInsert is missing or invalid")}else throw new Error("embedType is missing or invalid");else throw new Error("refNode must resolve to a node attached to the DOM");else throw new Error("accountId is required")},nb=function(e){return Bh(e)?e:typeof e=="string"?Nt.default.querySelector(e):null},Ih=function(e,r,i,t){var n=e.embedId,s=e.playerId,o=St.default.bc[s+"_"+n]||St.default.bc;if(!o)return t(new Error("missing bc function for "+s));mr.store(e);var u;try{u=o(r,e.options),u.bcinfo&&(u.bcinfo.PLAYER_LOADER=!0)}catch{var l="Could not initialize the Brightcove Player.";return e.embedOptions.tagName===_s&&(l+=' You are attempting to embed using a "video-js" element. Please ensure that your Player is v6.11.0 or newer in order to support this embed type. Alternatively, pass `"video"` for `embedOptions.tagName`.'),t(new Error(l))}i({type:ju,ref:u})},Oh=function(e,r,i){e.refNode=nb(e.refNode),rb(e);var t=e.refNode,n=e.refNodeInsert,s=t.parentNode,o=qT(e);if(e.embedType===Ti){r({type:Ti,ref:o});return}if(mr.has(e))return Ih(e,o,r,i);var u=Nt.default.createElement("script");u.onload=function(){return Ih(e,o,r,i)},u.onerror=function(){i(new Error("player script could not be downloaded"))},u.async=!0,u.charset="utf-8",u.src=gr.getUrl(e),n===xs?s.appendChild(u):t.appendChild(u)},ab=function(e){var r=ys({},kT,e),i=r.Promise,t=r.onSuccess,n=r.onFailure;return!Sn(i)||Sn(t)||Sn(n)?Oh(r,Sn(t)?t:function(){},Sn(n)?n:function(s){throw s}):new i(function(s,o){return Oh(r,s,o)})},wn=function(e,r){Object.defineProperty(ab,e,{configurable:!1,enumerable:!0,value:r,writable:!1})};wn("getBaseUrl",function(){return gr.getBaseUrl()});wn("setBaseUrl",function(a){gr.setBaseUrl(a)});wn("getUrl",function(a){return gr.getUrl(a)});wn("reset",function(){return Hh.reset()});[["EMBED_TAG_NAME_VIDEO",Rh],["EMBED_TAG_NAME_VIDEOJS",_s],["EMBED_TYPE_IN_PAGE",ju],["EMBED_TYPE_IFRAME",Ti],["REF_NODE_INSERT_APPEND",Mh],["REF_NODE_INSERT_PREPEND",Hu],["REF_NODE_INSERT_BEFORE",Vu],["REF_NODE_INSERT_AFTER",$u],["REF_NODE_INSERT_REPLACE",xs],["VERSION",bT]].forEach(function(a){wn(a[0],a[1])});var A=Ae(Et()),W=Ae(vs());function ot(){return ot=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(a[i]=r[i])}return a},ot.apply(this,arguments)}var te=Ae(qh());function ee(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ct(a,e){return Ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,t){return i.__proto__=t,i},Ct(a,e)}function q(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a,Ct(a,e)}var Jg=Ae(Gh()),Sc=Ae(ip()),nc=Ae(gp());function Ju(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bi(a,e,r){return Ju()?bi=Reflect.construct.bind():bi=function(t,n,s){var o=[null];o.push.apply(o,n);var u=Function.bind.apply(t,o),l=new u;return s&&Ct(l,s.prototype),l},bi.apply(null,arguments)}function Zu(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),e&&Ct(a,e)}var tl=Ae(vp()),ei=Ae(Et()),yp="http://example.com",jb=function(e,r){if(/^[a-z]+:/i.test(r))return r;/^data:/.test(e)&&(e=ei.default.location&&ei.default.location.href||"");var i=typeof ei.default.URL=="function",t=/^\/\//.test(e),n=!ei.default.location&&!/\/\//i.test(e);if(i?e=new ei.default.URL(e,ei.default.location||yp):/\/\//i.test(e)||(e=tl.default.buildAbsoluteURL(ei.default.location&&ei.default.location.href||"",e)),i){var s=new URL(r,e);return n?s.href.slice(yp.length):t?s.href.slice(s.protocol.length):s.href}return tl.default.buildAbsoluteURL(e,r)},yr=jb;var Ss=function(){function a(){this.listeners={}}var e=a.prototype;return e.on=function(i,t){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(t)},e.off=function(i,t){if(!this.listeners[i])return!1;var n=this.listeners[i].indexOf(t);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(n,1),n>-1},e.trigger=function(i){var t=this.listeners[i];if(!!t)if(arguments.length===2)for(var n=t.length,s=0;s<n;++s)t[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),u=t.length,l=0;l<u;++l)t[l].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(t){i.push(t)})},a}();var il=Ae(Et()),Hb=function(e){return il.default.atob?il.default.atob(e):Buffer.from(e,"base64").toString("binary")};function In(a){for(var e=Hb(a),r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}var Vb=function(a){q(e,a);function e(){var i;return i=a.call(this)||this,i.buffer="",i}var r=e.prototype;return r.push=function(t){var n;for(this.buffer+=t,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)},e}(Ss),$b=String.fromCharCode(9),rl=function(e){var r=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),i={};return r[1]&&(i.length=parseInt(r[1],10)),r[2]&&(i.offset=parseInt(r[2],10)),i},Wb=function(){var e="[^=]*",r='"[^"]*"|[^,]*',i="(?:"+e+")=(?:"+r+")";return new RegExp("(?:^|,)("+i+")")},wt=function(e){for(var r=e.split(Wb()),i={},t=r.length,n;t--;)r[t]!==""&&(n=/([^=]*)=(.*)/.exec(r[t]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),i[n[0]]=n[1]);return i},qb=function(a){q(e,a);function e(){var i;return i=a.call(this)||this,i.customParsers=[],i.tagMappers=[],i}var r=e.prototype;return r.push=function(t){var n=this,s,o;if(t=t.trim(),t.length!==0){if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}var u=this.tagMappers.reduce(function(l,c){var f=c(t);return f===t?l:l.concat([f])},[t]);u.forEach(function(l){for(var c=0;c<n.customParsers.length;c++)if(n.customParsers[c].call(n,l))return;if(l.indexOf("#EXT")!==0){n.trigger("data",{type:"comment",text:l.slice(1)});return}if(l=l.replace("\r",""),s=/^#EXTM3U/.exec(l),s){n.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(l),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),n.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(l),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),n.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(l),s){o=ot(rl(s[1]),{type:"tag",tagType:"byterange"}),n.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(l),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),n.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(l),s){if(o={type:"tag",tagType:"map"},s[1]){var f=wt(s[1]);f.URI&&(o.uri=f.URI),f.BYTERANGE&&(o.byterange=rl(f.BYTERANGE))}n.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(l),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=wt(s[1]),o.attributes.RESOLUTION){var m=o.attributes.RESOLUTION.split("x"),_={};m[0]&&(_.width=parseInt(m[0],10)),m[1]&&(_.height=parseInt(m[1],10)),o.attributes.RESOLUTION=_}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}n.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(l),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=wt(s[1])),n.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(l),s){n.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(l),s){n.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(l),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),n.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(l),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=wt(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),n.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(l),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=wt(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),n.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",n.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",n.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(l),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",n.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=wt(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split($b)),n.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=wt(s[1]),["DURATION"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=parseFloat(o.attributes[x]))}),["INDEPENDENT","GAP"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=/YES/.test(o.attributes[x]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=rl(o.attributes.BYTERANGE)),n.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=wt(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=parseFloat(o.attributes[x]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=/YES/.test(o.attributes[x]))}),n.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=wt(s[1]),["PART-TARGET"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=parseFloat(o.attributes[x]))}),n.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=wt(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(x){if(o.attributes.hasOwnProperty(x)){o.attributes[x]=parseInt(o.attributes[x],10);var b=x==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[b]=o.attributes[x],delete o.attributes[x]}}),n.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(l),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=wt(s[1]),["LAST-MSN","LAST-PART"].forEach(function(x){o.attributes.hasOwnProperty(x)&&(o.attributes[x]=parseInt(o.attributes[x],10))}),n.trigger("data",o);return}n.trigger("data",{type:"tag",data:l.slice(4)})})}},r.addParser=function(t){var n=this,s=t.expression,o=t.customType,u=t.dataParser,l=t.segment;typeof u!="function"&&(u=function(f){return f}),this.customParsers.push(function(c){var f=s.exec(c);if(f)return n.trigger("data",{type:"custom",data:u(c),customType:o,segment:l}),!0})},r.addTagMapper=function(t){var n=t.expression,s=t.map,o=function(l){return n.test(l)?s(l):l};this.tagMappers.push(o)},e}(Ss),zb=function(e){return e.toLowerCase().replace(/-(\w)/g,function(r){return r[1].toUpperCase()})},_r=function(e){var r={};return Object.keys(e).forEach(function(i){r[zb(i)]=e[i]}),r},nl=function(e){var r=e.serverControl,i=e.targetDuration,t=e.partTargetDuration;if(!!r){var n="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",u=i&&i*3,l=t&&t*2;i&&!r.hasOwnProperty(s)&&(r[s]=u,this.trigger("info",{message:n+" defaulting HOLD-BACK to targetDuration * 3 ("+u+")."})),u&&r[s]<u&&(this.trigger("warn",{message:n+" clamping HOLD-BACK ("+r[s]+") to targetDuration * 3 ("+u+")"}),r[s]=u),t&&!r.hasOwnProperty(o)&&(r[o]=t*3,this.trigger("info",{message:n+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+r[o]+")."})),t&&r[o]<l&&(this.trigger("warn",{message:n+" clamping PART-HOLD-BACK ("+r[o]+") to partTargetDuration * 2 ("+l+")."}),r[o]=l)}},_p=function(a){q(e,a);function e(){var i;i=a.call(this)||this,i.lineStream=new Vb,i.parseStream=new qb,i.lineStream.pipe(i.parseStream);var t=ee(i),n=[],s={},o,u,l=!1,c=function(){},f={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},m="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",_=0;i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var x=0,b=0;return i.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&u&&(s.key=u),!s.timeline&&typeof _=="number"&&(s.timeline=_),i.manifest.preloadSegment=s)}),i.parseStream.on("data",function(T){var C,k;({tag:function(){({version:function(){T.version&&(this.manifest.version=T.version)},"allow-cache":function(){this.manifest.allowCache=T.allowed,"allowed"in T||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var R={};"length"in T&&(s.byterange=R,R.length=T.length,"offset"in T||(T.offset=x)),"offset"in T&&(s.byterange=R,R.offset=T.offset),x=R.offset+R.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),T.duration>0&&(s.duration=T.duration),T.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key:function(){if(!T.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(T.attributes.METHOD==="NONE"){u=null;return}if(!T.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(T.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:T.attributes};return}if(T.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:T.attributes.URI};return}if(T.attributes.KEYFORMAT===m){var R=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(R.indexOf(T.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(T.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),T.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(T.attributes.KEYID&&T.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:T.attributes.KEYFORMAT,keyId:T.attributes.KEYID.substring(2)},pssh:In(T.attributes.URI.split(",")[1])};return}T.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:T.attributes.METHOD||"AES-128",uri:T.attributes.URI},typeof T.attributes.IV<"u"&&(u.iv=T.attributes.IV)},"media-sequence":function(){if(!isFinite(T.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+T.number});return}this.manifest.mediaSequence=T.number},"discontinuity-sequence":function(){if(!isFinite(T.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+T.number});return}this.manifest.discontinuitySequence=T.number,_=T.number},"playlist-type":function(){if(!/VOD|EVENT/.test(T.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+T.playlist});return}this.manifest.playlistType=T.playlistType},map:function(){o={},T.uri&&(o.uri=T.uri),T.byterange&&(o.byterange=T.byterange),u&&(o.key=u)},"stream-inf":function(){if(this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||f,!T.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),ot(s.attributes,T.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||f,!(T.attributes&&T.attributes.TYPE&&T.attributes["GROUP-ID"]&&T.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var R=this.manifest.mediaGroups[T.attributes.TYPE];R[T.attributes["GROUP-ID"]]=R[T.attributes["GROUP-ID"]]||{},C=R[T.attributes["GROUP-ID"]],k={default:/yes/i.test(T.attributes.DEFAULT)},k.default?k.autoselect=!0:k.autoselect=/yes/i.test(T.attributes.AUTOSELECT),T.attributes.LANGUAGE&&(k.language=T.attributes.LANGUAGE),T.attributes.URI&&(k.uri=T.attributes.URI),T.attributes["INSTREAM-ID"]&&(k.instreamId=T.attributes["INSTREAM-ID"]),T.attributes.CHARACTERISTICS&&(k.characteristics=T.attributes.CHARACTERISTICS),T.attributes.FORCED&&(k.forced=/yes/i.test(T.attributes.FORCED)),C[T.attributes.NAME]=k},discontinuity:function(){_+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=T.dateTimeString,this.manifest.dateTimeObject=T.dateTimeObject),s.dateTimeString=T.dateTimeString,s.dateTimeObject=T.dateTimeObject},targetduration:function(){if(!isFinite(T.duration)||T.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+T.duration});return}this.manifest.targetDuration=T.duration,nl.call(this,this.manifest)},start:function(){if(!T.attributes||isNaN(T.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:T.attributes["TIME-OFFSET"],precise:T.attributes.PRECISE}},"cue-out":function(){s.cueOut=T.data},"cue-out-cont":function(){s.cueOutCont=T.data},"cue-in":function(){s.cueIn=T.data},skip:function(){this.manifest.skip=_r(T.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",T.attributes,["SKIPPED-SEGMENTS"])},part:function(){var R=this;l=!0;var H=this.manifest.segments.length,B=_r(T.attributes);s.parts=s.parts||[],s.parts.push(B),B.byterange&&(B.byterange.hasOwnProperty("offset")||(B.byterange.offset=b),b=B.byterange.offset+B.byterange.length);var O=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+O+" for segment #"+H,T.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(N,M){N.hasOwnProperty("lastPart")||R.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+M+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var R=this.manifest.serverControl=_r(T.attributes);R.hasOwnProperty("canBlockReload")||(R.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),nl.call(this,this.manifest),R.canSkipDateranges&&!R.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var R=this.manifest.segments.length,H=_r(T.attributes),B=H.type&&H.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(H),H.byterange&&(H.byterange.hasOwnProperty("offset")||(H.byterange.offset=B?b:0,B&&(b=H.byterange.offset+H.byterange.length)));var O=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+O+" for segment #"+R,T.attributes,["TYPE","URI"]),!!H.type)for(var N=0;N<s.preloadHints.length-1;N++){var M=s.preloadHints[N];!M.type||M.type===H.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+O+" for segment #"+R+" has the same TYPE "+H.type+" as preload hint #"+N})}},"rendition-report":function(){var R=_r(T.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(R);var H=this.manifest.renditionReports.length-1,B=["LAST-MSN","URI"];l&&B.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+H,T.attributes,B)},"part-inf":function(){this.manifest.partInf=_r(T.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",T.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),nl.call(this,this.manifest)}}[T.tagType]||c).call(t)},uri:function(){s.uri=T.uri,n.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),u&&(s.key=u),s.timeline=_,o&&(s.map=o),b=0,s={}},comment:function(){},custom:function(){T.segment?(s.custom=s.custom||{},s.custom[T.customType]=T.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[T.customType]=T.data)}})[T.type].call(t)}),i}var r=e.prototype;return r.warnOnMissingAttributes_=function(t,n,s){var o=[];s.forEach(function(u){n.hasOwnProperty(u)||o.push(u)}),o.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+o.join(", ")})},r.push=function(t){this.lineStream.push(t)},r.end=function(){this.lineStream.push(`
`),this.trigger("end")},r.addParser=function(t){this.parseStream.addParser(t)},r.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(Ss);var Cs=Ae(Et()),$i={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},Gb=["video","audio","text"],xp=["Video","Audio","Text"],al=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(r,i,t){var n=("00"+Number(i).toString(16)).slice(-2),s=("00"+Number(t).toString(16)).slice(-2);return"avc1."+n+"00"+s})};var At=function(e){e===void 0&&(e="");var r=e.split(","),i=[];return r.forEach(function(t){t=t.trim();var n;Gb.forEach(function(s){var o=$i[s].exec(t.toLowerCase());if(!(!o||o.length<=1)){n=s;var u=t.substring(0,o[1].length),l=t.replace(u,"");i.push({type:u,details:l,mediaType:s})}}),n||i.push({type:t,details:"",mediaType:"unknown"})}),i},Dp=function(e,r){if(!e.mediaGroups.AUDIO||!r)return null;var i=e.mediaGroups.AUDIO[r];if(!i)return null;for(var t in i){var n=i[t];if(n.default&&n.playlists)return At(n.playlists[0].attributes.CODECS)}return null};var sl=function(e){return e===void 0&&(e=""),$i.audio.test(e.trim().toLowerCase())},Kb=function(e){return e===void 0&&(e=""),$i.text.test(e.trim().toLowerCase())},xr=function(e){if(!(!e||typeof e!="string")){var r=e.toLowerCase().split(",").map(function(n){return al(n.trim())}),i="video";r.length===1&&sl(r[0])?i="audio":r.length===1&&Kb(r[0])&&(i="application");var t="mp4";return r.every(function(n){return $i.mp4.test(n)})?t="mp4":r.every(function(n){return $i.webm.test(n)})?t="webm":r.every(function(n){return $i.ogg.test(n)})&&(t="ogg"),i+"/"+t+';codecs="'+e+'"'}},On=function(e){return e===void 0&&(e=""),Cs.default.MediaSource&&Cs.default.MediaSource.isTypeSupported&&Cs.default.MediaSource.isTypeSupported(xr(e))||!1},ws=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(r){r=r.trim();for(var i=0;i<xp.length;i++){var t=xp[i];if($i["muxer"+t].test(r))return!0}return!1})},ol="mp4a.40.2",Tp="avc1.4d400d";var Xb=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,Yb=/^application\/dash\+xml/i,ul=function(e){return Xb.test(e)?"hls":Yb.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null};var bp=Ae(Et());var Qb=function(e){return e.toString(2).length},Jb=function(e){return Math.ceil(Qb(e)/8)};var cl=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Zb=function(e){return cl(e)},Q=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!Zb(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))};var $e=bp.default.BigInt||Number,ll=[$e("0x1"),$e("0x100"),$e("0x10000"),$e("0x1000000"),$e("0x100000000"),$e("0x10000000000"),$e("0x1000000000000"),$e("0x100000000000000"),$e("0x10000000000000000")],cP=function(){var a=new Uint16Array([65484]),e=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"}();var dl=function(e,r){var i=r===void 0?{}:r,t=i.signed,n=t===void 0?!1:t,s=i.le,o=s===void 0?!1:s;e=Q(e);var u=o?"reduce":"reduceRight",l=e[u]?e[u]:Array.prototype[u],c=l.call(e,function(m,_,x){var b=o?x:Math.abs(x+1-e.length);return m+$e(_)*ll[b]},$e(0));if(n){var f=ll[e.length]/$e(2)-$e(1);c=$e(c),c>f&&(c-=f,c-=f,c-=$e(2))}return Number(c)},Ep=function(e,r){var i=r===void 0?{}:r,t=i.le,n=t===void 0?!1:t;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=$e(e);for(var s=Jb(e),o=new Uint8Array(new ArrayBuffer(s)),u=0;u<s;u++){var l=n?u:Math.abs(u+1-o.length);o[l]=Number(e/ll[u]&$e(255)),e<0&&(o[l]=Math.abs(~o[l]),o[l]-=u===0?1:2)}return o},fl=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var r=String.fromCharCode.apply(null,Q(e));try{return decodeURIComponent(escape(r))}catch{}return r},As=function(e,r){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;r||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return i},Sp=function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];if(r=r.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),r.length<=1)return Q(r[0]);var t=r.reduce(function(o,u,l){return o+(u.byteLength||u.length)},0),n=new Uint8Array(t),s=0;return r.forEach(function(o){o=Q(o),n.set(o,s),s+=o.byteLength}),n},me=function(e,r,i){var t=i===void 0?{}:i,n=t.offset,s=n===void 0?0:n,o=t.mask,u=o===void 0?[]:o;e=Q(e),r=Q(r);var l=r.every?r.every:Array.prototype.every;return r.length&&e.length-s>=r.length&&l.call(r,function(c,f){var m=u[f]?u[f]&e[s+f]:e[s+f];return c===m})};var Je=Ae(Et());var Cp=function(e,r,i){r.forEach(function(t){for(var n in e.mediaGroups[t])for(var s in e.mediaGroups[t][n]){var o=e.mediaGroups[t][n][s];i(o,t,n,s)}})};var Am=Ae(xm());var Dm=function(e){return!!e&&typeof e=="object"},Ze=function a(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.reduce(function(t,n){return typeof n!="object"||Object.keys(n).forEach(function(s){Array.isArray(t[s])&&Array.isArray(n[s])?t[s]=t[s].concat(n[s]):Dm(t[s])&&Dm(n[s])?t[s]=a(t[s],n[s]):t[s]=n[s]}),t},{})},Fm=function(e){return Object.keys(e).map(function(r){return e[r]})},wE=function(e,r){for(var i=[],t=e;t<r;t++)i.push(t);return i},Us=function(e){return e.reduce(function(r,i){return r.concat(i)},[])},km=function(e){if(!e.length)return[];for(var r=[],i=0;i<e.length;i++)r.push(e[i]);return r},AE=function(e,r){return e.reduce(function(i,t,n){return t[r]&&i.push(n),i},[])},Fl=function(e,r){for(var i=0;i<e.length;i++)if(r(e[i]))return i;return-1},FE=function(e,r){return Fm(e.reduce(function(i,t){return t.forEach(function(n){i[r(n)]=n}),i},{}))},Pr={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},zn=function(e){var r=e.baseUrl,i=r===void 0?"":r,t=e.source,n=t===void 0?"":t,s=e.range,o=s===void 0?"":s,u=e.indexRange,l=u===void 0?"":u,c={uri:n,resolvedUri:yr(i||"",n)};if(o||l){var f=o||l,m=f.split("-"),_=Je.default.BigInt?Je.default.BigInt(m[0]):parseInt(m[0],10),x=Je.default.BigInt?Je.default.BigInt(m[1]):parseInt(m[1],10);_<Number.MAX_SAFE_INTEGER&&typeof _=="bigint"&&(_=Number(_)),x<Number.MAX_SAFE_INTEGER&&typeof x=="bigint"&&(x=Number(x));var b;typeof x=="bigint"||typeof _=="bigint"?b=Je.default.BigInt(x)-Je.default.BigInt(_)+Je.default.BigInt(1):b=x-_+1,typeof b=="bigint"&&b<Number.MAX_SAFE_INTEGER&&(b=Number(b)),c.byterange={length:b,offset:_}}return c},kE=function(e){var r;return typeof e.offset=="bigint"||typeof e.length=="bigint"?r=Je.default.BigInt(e.offset)+Je.default.BigInt(e.length)-Je.default.BigInt(1):r=e.offset+e.length-1,e.offset+"-"+r},Tm=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},PE={static:function(e){var r=e.duration,i=e.timescale,t=i===void 0?1:i,n=e.sourceDuration,s=e.periodDuration,o=Tm(e.endNumber),u=r/t;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/u}:{start:0,end:n/u}},dynamic:function(e){var r=e.NOW,i=e.clientOffset,t=e.availabilityStartTime,n=e.timescale,s=n===void 0?1:n,o=e.duration,u=e.periodStart,l=u===void 0?0:u,c=e.minimumUpdatePeriod,f=c===void 0?0:c,m=e.timeShiftBufferDepth,_=m===void 0?1/0:m,x=Tm(e.endNumber),b=(r+i)/1e3,T=t+l,C=b+f,k=C-T,j=Math.ceil(k*s/o),L=Math.floor((b-T-_)*s/o),R=Math.floor((b-T)*s/o);return{start:Math.max(0,L),end:typeof x=="number"?x:Math.min(j,R)}}},IE=function(e){return function(r){var i=e.duration,t=e.timescale,n=t===void 0?1:t,s=e.periodStart,o=e.startNumber,u=o===void 0?1:o;return{number:u+r,duration:i/n,timeline:s,time:r*i}}},kl=function(e){var r=e.type,i=e.duration,t=e.timescale,n=t===void 0?1:t,s=e.periodDuration,o=e.sourceDuration,u=PE[r](e),l=u.start,c=u.end,f=wE(l,c).map(IE(e));if(r==="static"){var m=f.length-1,_=typeof s=="number"?s:o;f[m].duration=_-i/n*m}return f},Pm=function(e){var r=e.baseUrl,i=e.initialization,t=i===void 0?{}:i,n=e.sourceDuration,s=e.indexRange,o=s===void 0?"":s,u=e.periodStart,l=e.presentationTime,c=e.number,f=c===void 0?0:c,m=e.duration;if(!r)throw new Error(Pr.NO_BASE_URL);var _=zn({baseUrl:r,source:t.sourceURL,range:t.range}),x=zn({baseUrl:r,source:r,indexRange:o});if(x.map=_,m){var b=kl(e);b.length&&(x.duration=b[0].duration,x.timeline=b[0].timeline)}else n&&(x.duration=n,x.timeline=u);return x.presentationTime=l||u,x.number=f,[x]},js=function(e,r,i){var t=e.sidx.map?e.sidx.map:null,n=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,u=o.offset+o.length,l=r.timescale,c=r.references.filter(function(N){return N.referenceType!==1}),f=[],m=e.endList?"static":"dynamic",_=e.sidx.timeline,x=_,b=e.mediaSequence||0,T;typeof r.firstOffset=="bigint"?T=Je.default.BigInt(u)+r.firstOffset:T=u+r.firstOffset;for(var C=0;C<c.length;C++){var k=r.references[C],j=k.referencedSize,L=k.subsegmentDuration,R=void 0;typeof T=="bigint"?R=T+Je.default.BigInt(j)-Je.default.BigInt(1):R=T+j-1;var H=T+"-"+R,B={baseUrl:i,timescale:l,timeline:s,periodStart:_,presentationTime:x,number:b,duration:L,sourceDuration:n,indexRange:H,type:m},O=Pm(B)[0];t&&(O.map=t),f.push(O),typeof T=="bigint"?T+=Je.default.BigInt(j):T+=j,x+=L/l,b++}return e.segments=f,e},OE=["AUDIO","SUBTITLES"],LE=1/60,Im=function(e){return FE(e,function(r){var i=r.timeline;return i}).sort(function(r,i){return r.timeline>i.timeline?1:-1})},RE=function(e,r){for(var i=0;i<e.length;i++)if(e[i].attributes.NAME===r)return e[i];return null},bm=function(e){var r=[];return Cp(e,OE,function(i,t,n,s){r=r.concat(i.playlists||[])}),r},Em=function(e){var r=e.playlist,i=e.mediaSequence;r.mediaSequence=i,r.segments.forEach(function(t,n){t.number=r.mediaSequence+n})},ME=function(e){var r=e.oldPlaylists,i=e.newPlaylists,t=e.timelineStarts;i.forEach(function(n){n.discontinuitySequence=Fl(t,function(c){var f=c.timeline;return f===n.timeline});var s=RE(r,n.attributes.NAME);if(!!s&&!n.sidx){var o=n.segments[0],u=Fl(s.segments,function(c){return Math.abs(c.presentationTime-o.presentationTime)<LE});if(u===-1){Em({playlist:n,mediaSequence:s.mediaSequence+s.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!s.segments.length&&n.timeline>s.timeline||s.segments.length&&n.timeline>s.segments[s.segments.length-1].timeline)&&n.discontinuitySequence--;return}var l=s.segments[u];l.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),Em({playlist:n,mediaSequence:s.segments[u].number})}})},NE=function(e){var r=e.oldManifest,i=e.newManifest,t=r.playlists.concat(bm(r)),n=i.playlists.concat(bm(i));return i.timelineStarts=Im([r.timelineStarts,i.timelineStarts]),ME({oldPlaylists:t,newPlaylists:n,timelineStarts:i.timelineStarts}),i},Gn=function(e){return e&&e.uri+"-"+kE(e.byterange)},Al=function(e){var r=Fm(e.reduce(function(i,t){var n=t.attributes.id+(t.attributes.lang||"");if(!i[n])i[n]=t,i[n].attributes.timelineStarts=[];else{if(t.segments){var s;t.segments[0]&&(t.segments[0].discontinuity=!0),(s=i[n].segments).push.apply(s,t.segments)}t.attributes.contentProtection&&(i[n].attributes.contentProtection=t.attributes.contentProtection)}return i[n].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),i},{}));return r.map(function(i){return i.discontinuityStarts=AE(i.segments||[],"discontinuity"),i})},Pl=function(e,r){var i=Gn(e.sidx),t=i&&r[i]&&r[i].sidx;return t&&js(e,t,e.sidx.resolvedUri),e},BE=function(e,r){if(r===void 0&&(r={}),!Object.keys(r).length)return e;for(var i in e)e[i]=Pl(e[i],r);return e},UE=function(e,r){var i,t=e.attributes,n=e.segments,s=e.sidx,o=e.mediaSequence,u=e.discontinuitySequence,l=e.discontinuityStarts,c={attributes:(i={NAME:t.id,BANDWIDTH:t.bandwidth,CODECS:t.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:t.type==="static",timeline:t.periodStart,resolvedUri:"",targetDuration:t.duration,discontinuitySequence:u,discontinuityStarts:l,timelineStarts:t.timelineStarts,mediaSequence:o,segments:n};return t.contentProtection&&(c.contentProtection=t.contentProtection),s&&(c.sidx=s),r&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c},jE=function(e){var r,i=e.attributes,t=e.segments,n=e.mediaSequence,s=e.discontinuityStarts,o=e.discontinuitySequence;typeof t>"u"&&(t=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var u=(r={NAME:i.id,BANDWIDTH:i.bandwidth},r["PROGRAM-ID"]=1,r);return i.codecs&&(u.CODECS=i.codecs),{attributes:u,uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:n,segments:t}},HE=function(e,r,i){r===void 0&&(r={}),i===void 0&&(i=!1);var t,n=e.reduce(function(o,u){var l=u.attributes.role&&u.attributes.role.value||"",c=u.attributes.lang||"",f=u.attributes.label||"main";if(c&&!u.attributes.label){var m=l?" ("+l+")":"";f=""+u.attributes.lang+m}o[f]||(o[f]={language:c,autoselect:!0,default:l==="main",playlists:[],uri:""});var _=Pl(UE(u,i),r);return o[f].playlists.push(_),typeof t>"u"&&l==="main"&&(t=u,t.default=!0),o},{});if(!t){var s=Object.keys(n)[0];n[s].default=!0}return n},VE=function(e,r){return r===void 0&&(r={}),e.reduce(function(i,t){var n=t.attributes.lang||"text";return i[n]||(i[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),i[n].playlists.push(Pl(jE(t),r)),i},{})},$E=function(e){return e.reduce(function(r,i){return i&&i.forEach(function(t){var n=t.channel,s=t.language;r[s]={autoselect:!1,default:!1,instreamId:n,language:s},t.hasOwnProperty("aspectRatio")&&(r[s].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(r[s].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(r[s]["3D"]=t["3D"])}),r},{})},WE=function(e){var r,i=e.attributes,t=e.segments,n=e.sidx,s=e.discontinuityStarts,o={attributes:(r={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuityStarts:s,timelineStarts:i.timelineStarts,segments:t};return i.frameRate&&(o.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(o.contentProtection=i.contentProtection),n&&(o.sidx=n),o},qE=function(e){var r=e.attributes;return r.mimeType==="video/mp4"||r.mimeType==="video/webm"||r.contentType==="video"},zE=function(e){var r=e.attributes;return r.mimeType==="audio/mp4"||r.mimeType==="audio/webm"||r.contentType==="audio"},GE=function(e){var r=e.attributes;return r.mimeType==="text/vtt"||r.contentType==="text"},KE=function(e,r){e.forEach(function(i){i.mediaSequence=0,i.discontinuitySequence=Fl(r,function(t){var n=t.timeline;return n===i.timeline}),i.segments&&i.segments.forEach(function(t,n){t.number=n})})},Sm=function(e){return e?Object.keys(e).reduce(function(r,i){var t=e[i];return r.concat(t.playlists)},[]):[]},XE=function(e){var r,i=e.dashPlaylists,t=e.locations,n=e.sidxMapping,s=n===void 0?{}:n,o=e.previousManifest;if(!i.length)return{};var u=i[0].attributes,l=u.sourceDuration,c=u.type,f=u.suggestedPresentationDelay,m=u.minimumUpdatePeriod,_=Al(i.filter(qE)).map(WE),x=Al(i.filter(zE)),b=Al(i.filter(GE)),T=i.map(function(B){return B.attributes.captionServices}).filter(Boolean),C={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(r={AUDIO:{},VIDEO:{}},r["CLOSED-CAPTIONS"]={},r.SUBTITLES={},r),uri:"",duration:l,playlists:BE(_,s)};m>=0&&(C.minimumUpdatePeriod=m*1e3),t&&(C.locations=t),c==="dynamic"&&(C.suggestedPresentationDelay=f);var k=C.playlists.length===0,j=x.length?HE(x,s,k):null,L=b.length?VE(b,s):null,R=_.concat(Sm(j),Sm(L)),H=R.map(function(B){var O=B.timelineStarts;return O});return C.timelineStarts=Im(H),KE(R,C.timelineStarts),j&&(C.mediaGroups.AUDIO.audio=j),L&&(C.mediaGroups.SUBTITLES.subs=L),T.length&&(C.mediaGroups["CLOSED-CAPTIONS"].cc=$E(T)),o?NE({oldManifest:o,newManifest:C}):C},YE=function(e,r,i){var t=e.NOW,n=e.clientOffset,s=e.availabilityStartTime,o=e.timescale,u=o===void 0?1:o,l=e.periodStart,c=l===void 0?0:l,f=e.minimumUpdatePeriod,m=f===void 0?0:f,_=(t+n)/1e3,x=s+c,b=_+m,T=b-x;return Math.ceil((T*u-r)/i)},Om=function(e,r){for(var i=e.type,t=e.minimumUpdatePeriod,n=t===void 0?0:t,s=e.media,o=s===void 0?"":s,u=e.sourceDuration,l=e.timescale,c=l===void 0?1:l,f=e.startNumber,m=f===void 0?1:f,_=e.periodStart,x=[],b=-1,T=0;T<r.length;T++){var C=r[T],k=C.d,j=C.r||0,L=C.t||0;b<0&&(b=L),L&&L>b&&(b=L);var R=void 0;if(j<0){var H=T+1;H===r.length?i==="dynamic"&&n>0&&o.indexOf("$Number$")>0?R=YE(e,b,k):R=(u*c-b)/k:R=(r[H].t-b)/k}else R=j+1;for(var B=m+x.length+R,O=m+x.length;O<B;)x.push({number:O,duration:k/c,time:b,timeline:_}),b+=k,O++}return x},QE=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,JE=function(e){return function(r,i,t,n){if(r==="$$")return"$";if(typeof e[i]>"u")return r;var s=""+e[i];return i==="RepresentationID"||(t?n=parseInt(n,10):n=1,s.length>=n)?s:""+new Array(n-s.length+1).join("0")+s}},Cm=function(e,r){return e.replace(QE,JE(r))},ZE=function(e,r){return!e.duration&&!r?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?kl(e):Om(e,r)},eS=function(e,r){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},t=e.initialization,n=t===void 0?{sourceURL:"",range:""}:t,s=zn({baseUrl:e.baseUrl,source:Cm(n.sourceURL,i),range:n.range}),o=ZE(e,r);return o.map(function(u){i.Number=u.number,i.Time=u.time;var l=Cm(e.media||"",i),c=e.timescale||1,f=e.presentationTimeOffset||0,m=e.periodStart+(u.time-f)/c,_={uri:l,timeline:u.timeline,duration:u.duration,resolvedUri:yr(e.baseUrl||"",l),map:s,number:u.number,presentationTime:m};return _})},tS=function(e,r){var i=e.baseUrl,t=e.initialization,n=t===void 0?{}:t,s=zn({baseUrl:i,source:n.sourceURL,range:n.range}),o=zn({baseUrl:i,source:r.media,range:r.mediaRange});return o.map=s,o},iS=function(e,r){var i=e.duration,t=e.segmentUrls,n=t===void 0?[]:t,s=e.periodStart;if(!i&&!r||i&&r)throw new Error(Pr.SEGMENT_TIME_UNSPECIFIED);var o=n.map(function(c){return tS(e,c)}),u;i&&(u=kl(e)),r&&(u=Om(e,r));var l=u.map(function(c,f){if(o[f]){var m=o[f],_=e.timescale||1,x=e.presentationTimeOffset||0;return m.timeline=c.timeline,m.duration=c.duration,m.number=c.number,m.presentationTime=s+(c.time-x)/_,m}}).filter(function(c){return c});return l},rS=function(e){var r=e.attributes,i=e.segmentInfo,t,n;i.template?(n=eS,t=Ze(r,i.template)):i.base?(n=Pm,t=Ze(r,i.base)):i.list&&(n=iS,t=Ze(r,i.list));var s={attributes:r};if(!n)return s;var o=n(t,i.segmentTimeline);if(t.duration){var u=t,l=u.duration,c=u.timescale,f=c===void 0?1:c;t.duration=l/f}else o.length?t.duration=o.reduce(function(m,_){return Math.max(m,Math.ceil(_.duration))},0):t.duration=0;return s.attributes=t,s.segments=o,i.base&&t.indexRange&&(s.sidx=o[0],s.segments=[]),s},nS=function(e){return e.map(rS)},Oe=function(e,r){return km(e.childNodes).filter(function(i){var t=i.tagName;return t===r})},Il=function(e){return e.textContent.trim()},aS=function(e){return parseFloat(e.split("/").reduce(function(r,i){return r/i}))},kr=function(e){var r=31536e3,i=30*24*60*60,t=24*60*60,n=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,u=o.exec(e);if(!u)return 0;var l=u.slice(1),c=l[0],f=l[1],m=l[2],_=l[3],x=l[4],b=l[5];return parseFloat(c||0)*r+parseFloat(f||0)*i+parseFloat(m||0)*t+parseFloat(_||0)*n+parseFloat(x||0)*s+parseFloat(b||0)},sS=function(e){var r=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return r.test(e)&&(e+="Z"),Date.parse(e)},wm={mediaPresentationDuration:function(e){return kr(e)},availabilityStartTime:function(e){return sS(e)/1e3},minimumUpdatePeriod:function(e){return kr(e)},suggestedPresentationDelay:function(e){return kr(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return kr(e)},start:function(e){return kr(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return aS(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var r=parseInt(e,10);return isNaN(r)?kr(e):r},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Ge=function(e){return e&&e.attributes?km(e.attributes).reduce(function(r,i){var t=wm[i.name]||wm.DEFAULT;return r[i.name]=t(i.value),r},{}):{}},oS={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Hs=function(e,r){return r.length?Us(e.map(function(i){return r.map(function(t){return yr(i,Il(t))})})):e},Ol=function(e){var r=Oe(e,"SegmentTemplate")[0],i=Oe(e,"SegmentList")[0],t=i&&Oe(i,"SegmentURL").map(function(m){return Ze({tag:"SegmentURL"},Ge(m))}),n=Oe(e,"SegmentBase")[0],s=i||r,o=s&&Oe(s,"SegmentTimeline")[0],u=i||n||r,l=u&&Oe(u,"Initialization")[0],c=r&&Ge(r);c&&l?c.initialization=l&&Ge(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var f={template:c,segmentTimeline:o&&Oe(o,"S").map(function(m){return Ge(m)}),list:i&&Ze(Ge(i),{segmentUrls:t,initialization:Ge(l)}),base:n&&Ze(Ge(n),{initialization:Ge(l)})};return Object.keys(f).forEach(function(m){f[m]||delete f[m]}),f},uS=function(e,r,i){return function(t){var n=Oe(t,"BaseURL"),s=Hs(r,n),o=Ze(e,Ge(t)),u=Ol(t);return s.map(function(l){return{segmentInfo:Ze(i,u),attributes:Ze(o,{baseUrl:l})}})}},lS=function(e){return e.reduce(function(r,i){var t=Ge(i);t.schemeIdUri&&(t.schemeIdUri=t.schemeIdUri.toLowerCase());var n=oS[t.schemeIdUri];if(n){r[n]={attributes:t};var s=Oe(i,"cenc:pssh")[0];if(s){var o=Il(s);r[n].pssh=o&&In(o)}}return r},{})},cS=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var r=typeof e.value!="string"?[]:e.value.split(";");return r.map(function(t){var n,s;if(s=t,/^CC\d=/.test(t)){var o=t.split("=");n=o[0],s=o[1]}else/^CC\d$/.test(t)&&(n=t);return{channel:n,language:s}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var i=typeof e.value!="string"?[]:e.value.split(";");return i.map(function(t){var n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var s=t.split("="),o=s[0],u=s[1],l=u===void 0?"":u;n.channel=o,n.language=t,l.split(",").forEach(function(c){var f=c.split(":"),m=f[0],_=f[1];m==="lang"?n.language=_:m==="er"?n.easyReader=Number(_):m==="war"?n.aspectRatio=Number(_):m==="3D"&&(n["3D"]=Number(_))})}else n.language=t;return n.channel&&(n.channel="SERVICE"+n.channel),n})}},dS=function(e,r,i){return function(t){var n=Ge(t),s=Hs(r,Oe(t,"BaseURL")),o=Oe(t,"Role")[0],u={role:Ge(o)},l=Ze(e,n,u),c=Oe(t,"Accessibility")[0],f=cS(Ge(c));f&&(l=Ze(l,{captionServices:f}));var m=Oe(t,"Label")[0];if(m&&m.childNodes.length){var _=m.childNodes[0].nodeValue.trim();l=Ze(l,{label:_})}var x=lS(Oe(t,"ContentProtection"));Object.keys(x).length&&(l=Ze(l,{contentProtection:x}));var b=Ol(t),T=Oe(t,"Representation"),C=Ze(i,b);return Us(T.map(uS(l,s,C)))}},fS=function(e,r){return function(i,t){var n=Hs(r,Oe(i.node,"BaseURL")),s=Ze(e,{periodStart:i.attributes.start});typeof i.attributes.duration=="number"&&(s.periodDuration=i.attributes.duration);var o=Oe(i.node,"AdaptationSet"),u=Ol(i.node);return Us(o.map(dS(s,n,u)))}},hS=function(e){var r=e.attributes,i=e.priorPeriodAttributes,t=e.mpdType;return typeof r.start=="number"?r.start:i&&typeof i.start=="number"&&typeof i.duration=="number"?i.start+i.duration:!i&&t==="static"?0:null},pS=function(e,r){r===void 0&&(r={});var i=r,t=i.manifestUri,n=t===void 0?"":t,s=i.NOW,o=s===void 0?Date.now():s,u=i.clientOffset,l=u===void 0?0:u,c=Oe(e,"Period");if(!c.length)throw new Error(Pr.INVALID_NUMBER_OF_PERIOD);var f=Oe(e,"Location"),m=Ge(e),_=Hs([n],Oe(e,"BaseURL"));m.type=m.type||"static",m.sourceDuration=m.mediaPresentationDuration||0,m.NOW=o,m.clientOffset=l,f.length&&(m.locations=f.map(Il));var x=[];return c.forEach(function(b,T){var C=Ge(b),k=x[T-1];C.start=hS({attributes:C,priorPeriodAttributes:k?k.attributes:null,mpdType:m.type}),x.push({node:b,attributes:C})}),{locations:m.locations,representationInfo:Us(x.map(fS(m,_)))}},Lm=function(e){if(e==="")throw new Error(Pr.DASH_EMPTY_MANIFEST);var r=new Am.DOMParser,i,t;try{i=r.parseFromString(e,"application/xml"),t=i&&i.documentElement.tagName==="MPD"?i.documentElement:null}catch{}if(!t||t&&t.getElementsByTagName("parsererror").length>0)throw new Error(Pr.DASH_INVALID_XML);return t},mS=function(e){var r=Oe(e,"UTCTiming")[0];if(!r)return null;var i=Ge(r);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(Pr.UNSUPPORTED_UTC_TIMING_SCHEME)}return i};var Rm=function(e,r){r===void 0&&(r={});var i=pS(Lm(e),r),t=nS(i.representationInfo);return XE({dashPlaylists:t,locations:i.locations,sidxMapping:r.sidxMapping,previousManifest:r.previousManifest})},Mm=function(e){return mS(Lm(e))};var Zg=Ae(Vm());var yS=Q([73,68,51]),_S=function(e,r){r===void 0&&(r=0),e=Q(e);var i=e[r+5],t=e[r+6]<<21|e[r+7]<<14|e[r+8]<<7|e[r+9],n=(i&16)>>4;return n?t+20:t+10},qi=function a(e,r){return r===void 0&&(r=0),e=Q(e),e.length-r<10||!me(e,yS,{offset:r})?r:(r+=_S(e,r),a(e,r))};var $P=new Uint8Array([79,112,117,115,72,101,97,100]);var Wm=function(e){return typeof e=="string"?As(e):e},ES=function(e){return Array.isArray(e)?e.map(function(r){return Wm(r)}):[Wm(e)]},Ll,qm=function(e){e=Q(e);for(var r=[],i=0;e.length>i;){var t=e[i],n=0,s=0;s++;var o=e[s];for(s++;o&128;)n=(o&127)<<7,o=e[s],s++;n+=o&127;for(var u=0;u<Ll.length;u++){var l=Ll[u],c=l.id,f=l.parser;if(t===c){r.push(f(e.subarray(s,s+n)));break}}i+=n+s}return r};Ll=[{id:3,parser:function(e){var r={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(r.flags&128&&(r.dependsOnEsId=e[r.size]<<8|e[r.size+1],r.size+=2),r.flags&64){var i=e[r.size];r.url=fl(e.subarray(r.size+1,r.size+1+i)),r.size+=i}return r.flags&32&&(r.ocrEsId=e[r.size]<<8|e[r.size+1],r.size+=2),r.descriptors=qm(e.subarray(r.size))||[],r}},{id:4,parser:function(e){var r={tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:qm(e.subarray(13))};return r}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var zm=function a(e,r,i){i===void 0&&(i=!1),r=ES(r),e=Q(e);var t=[];if(!r.length)return t;for(var n=0;n<e.length;){var s=(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])>>>0,o=e.subarray(n+4,n+8);if(s===0)break;var u=n+s;if(u>e.length){if(i)break;u=e.length}var l=e.subarray(n+8,u);me(o,r[0])&&(r.length===1?t.push(l):t.push.apply(t,a(l,r.slice(1),i))),n=u}return t};var Kn={EBML:Q([26,69,223,163]),DocType:Q([66,130]),Segment:Q([24,83,128,103]),SegmentInfo:Q([21,73,169,102]),Tracks:Q([22,84,174,107]),Track:Q([174]),TrackNumber:Q([215]),DefaultDuration:Q([35,227,131]),TrackEntry:Q([174]),TrackType:Q([131]),FlagDefault:Q([136]),CodecID:Q([134]),CodecPrivate:Q([99,162]),VideoTrack:Q([224]),AudioTrack:Q([225]),Cluster:Q([31,67,182,117]),Timestamp:Q([231]),TimestampScale:Q([42,215,177]),BlockGroup:Q([160]),BlockDuration:Q([155]),Block:Q([161]),SimpleBlock:Q([163])},Rl=[128,64,32,16,8,4,2,1],SS=function(e){for(var r=1,i=0;i<Rl.length&&!(e&Rl[i]);i++)r++;return r},Vs=function(e,r,i,t){i===void 0&&(i=!0),t===void 0&&(t=!1);var n=SS(e[r]),s=e.subarray(r,r+n);return i&&(s=Array.prototype.slice.call(e,r,r+n),s[0]^=Rl[n-1]),{length:n,value:dl(s,{signed:t}),bytes:s}},Gm=function a(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(r){return a(r)}):typeof e=="number"?Ep(e):e},CS=function(e){return Array.isArray(e)?e.map(function(r){return Gm(r)}):[Gm(e)]},wS=function a(e,r,i){if(i>=r.length)return r.length;var t=Vs(r,i,!1);if(me(e.bytes,t.bytes))return i;var n=Vs(r,i+t.length);return a(e,r,i+n.length+n.value+t.length)},Ml=function a(e,r){r=CS(r),e=Q(e);var i=[];if(!r.length)return i;for(var t=0;t<e.length;){var n=Vs(e,t,!1),s=Vs(e,t+n.length),o=t+n.length+s.length;s.value===127&&(s.value=wS(n,e,o),s.value!==e.length&&(s.value-=o));var u=o+s.value>e.length?e.length:o+s.value,l=e.subarray(o,u);me(r[0],n.bytes)&&(r.length===1?i.push(l):i=i.concat(a(l,r.slice(1))));var c=n.length+s.length+l.length;t+=c}return i};var AS=Q([0,0,0,1]),FS=Q([0,0,1]),kS=Q([0,0,3]),PS=function(e){for(var r=[],i=1;i<e.length-2;)me(e.subarray(i,i+3),kS)&&(r.push(i+2),i++),i++;if(r.length===0)return e;var t=e.length-r.length,n=new Uint8Array(t),s=0;for(i=0;i<t;s++,i++)s===r[0]&&(s++,r.shift()),n[i]=e[s];return n},Km=function(e,r,i,t){t===void 0&&(t=1/0),e=Q(e),i=[].concat(i);for(var n=0,s,o=0;n<e.length&&(o<t||s);){var u=void 0;if(me(e.subarray(n),AS)?u=4:me(e.subarray(n),FS)&&(u=3),!u){n++;continue}if(o++,s)return PS(e.subarray(s,n));var l=void 0;r==="h264"?l=e[n+u]&31:r==="h265"&&(l=e[n+u]>>1&63),i.indexOf(l)!==-1&&(s=n+u),n+=u+(r==="h264"?1:2)}return e.subarray(0,0)},Xm=function(e,r,i){return Km(e,"h264",r,i)},Ym=function(e,r,i){return Km(e,"h265",r,i)};var et={webm:Q([119,101,98,109]),matroska:Q([109,97,116,114,111,115,107,97]),flac:Q([102,76,97,67]),ogg:Q([79,103,103,83]),ac3:Q([11,119]),riff:Q([82,73,70,70]),avi:Q([65,86,73]),wav:Q([87,65,86,69]),"3gp":Q([102,116,121,112,51,103]),mp4:Q([102,116,121,112]),fmp4:Q([115,116,121,112]),mov:Q([102,116,121,112,113,116]),moov:Q([109,111,111,118]),moof:Q([109,111,111,102])},Ir={aac:function(e){var r=qi(e);return me(e,[255,16],{offset:r,mask:[255,22]})},mp3:function(e){var r=qi(e);return me(e,[255,2],{offset:r,mask:[255,6]})},webm:function(e){var r=Ml(e,[Kn.EBML,Kn.DocType])[0];return me(r,et.webm)},mkv:function(e){var r=Ml(e,[Kn.EBML,Kn.DocType])[0];return me(r,et.matroska)},mp4:function(e){if(Ir["3gp"](e)||Ir.mov(e))return!1;if(me(e,et.mp4,{offset:4})||me(e,et.fmp4,{offset:4})||me(e,et.moof,{offset:4})||me(e,et.moov,{offset:4}))return!0},mov:function(e){return me(e,et.mov,{offset:4})},"3gp":function(e){return me(e,et["3gp"],{offset:4})},ac3:function(e){var r=qi(e);return me(e,et.ac3,{offset:r})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var r=0;r+188<e.length&&r<188;){if(e[r]===71&&e[r+188]===71)return!0;r+=1}return!1},flac:function(e){var r=qi(e);return me(e,et.flac,{offset:r})},ogg:function(e){return me(e,et.ogg)},avi:function(e){return me(e,et.riff)&&me(e,et.avi,{offset:8})},wav:function(e){return me(e,et.riff)&&me(e,et.wav,{offset:8})},h264:function(e){return Xm(e,7,3).length},h265:function(e){return Ym(e,[32,33],3).length}},Nl=Object.keys(Ir).filter(function(a){return a!=="ts"&&a!=="h264"&&a!=="h265"}).concat(["ts","h264","h265"]);Nl.forEach(function(a){var e=Ir[a];Ir[a]=function(r){return e(Q(r))}});var IS=Ir,$s=function(e){e=Q(e);for(var r=0;r<Nl.length;r++){var i=Nl[r];if(IS[i](e))return i}return""},Qm=function(e){return zm(e,["moof"]).length>0};var ua=Ae(ig());function Xn(a){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xn(a)}function Vl(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function Yn(a){var e=typeof Map=="function"?new Map:void 0;return Yn=function(i){if(i===null||!Vl(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,t)}function t(){return bi(i,arguments,Xn(this).constructor)}return t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Ct(t,i)},Yn(a)}var ev="7.21.3",si={},Ci=function(e,r){return si[e]=si[e]||[],r&&(si[e]=si[e].concat(r)),si[e]},OS=function(e,r){Ci(e,r)},tv=function(e,r){var i=Ci(e).indexOf(r);return i<=-1?!1:(si[e]=si[e].slice(),si[e].splice(i,1),!0)},LS=function(e,r){Ci(e,[].concat(r).map(function(i){var t=function n(){return tv(e,n),i.apply(void 0,arguments)};return t}))},to={prefixed:!0},Qs=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],rg=Qs[0],ra;for(Qn=0;Qn<Qs.length;Qn++)if(Qs[Qn][1]in W.default){ra=Qs[Qn];break}var Qn;if(ra){for(Jn=0;Jn<ra.length;Jn++)to[rg[Jn]]=ra[Jn];to.prefixed=ra[0]!==rg[0]}var Jn,dt=[],RS=function(e,r){return function(i,t,n){var s=r.levels[t],o=new RegExp("^("+s+")$");if(i!=="log"&&n.unshift(i.toUpperCase()+":"),n.unshift(e+":"),dt){dt.push([].concat(n));var u=dt.length-1e3;dt.splice(0,u>0?u:0)}if(!!A.default.console){var l=A.default.console[i];!l&&i==="debug"&&(l=A.default.console.info||A.default.console.log),!(!l||!s||!o.test(i))&&l[Array.isArray(n)?"apply":"call"](A.default.console,n)}}};function iv(a){var e="info",r,i=function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];r("log",e,s)};return r=RS(a,i),i.createLogger=function(t){return iv(a+": "+t)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},i.level=function(t){if(typeof t=="string"){if(!i.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');e=t}return e},i.history=function(){return dt?[].concat(dt):[]},i.history.filter=function(t){return(dt||[]).filter(function(n){return new RegExp(".*"+t+".*").test(n[0])})},i.history.clear=function(){dt&&(dt.length=0)},i.history.disable=function(){dt!==null&&(dt.length=0,dt=null)},i.history.enable=function(){dt===null&&(dt=[])},i.error=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return r("error",e,n)},i.warn=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return r("warn",e,n)},i.debug=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return r("debug",e,n)},i}var ne=iv("VIDEOJS"),rv=ne.createLogger,MS=Object.prototype.toString,nv=function(e){return ci(e)?Object.keys(e):[]};function Nr(a,e){nv(a).forEach(function(r){return e(a[r],r)})}function NS(a,e,r){return r===void 0&&(r=0),nv(a).reduce(function(i,t){return e(i,a[t],t)},r)}function ke(a){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return Object.assign?ot.apply(void 0,[a].concat(r)):(r.forEach(function(t){!t||Nr(t,function(n,s){a[s]=n})}),a)}function ci(a){return!!a&&typeof a=="object"}function la(a){return ci(a)&&MS.call(a)==="[object Object]"&&a.constructor===Object}function ca(a,e){if(!a||!e)return"";if(typeof A.default.getComputedStyle=="function"){var r;try{r=A.default.getComputedStyle(a)}catch{return""}return r?r.getPropertyValue(e)||r[e]:""}return""}var je=A.default.navigator&&A.default.navigator.userAgent||"",ng=/AppleWebKit\/([\d.]+)/i.exec(je),BS=ng?parseFloat(ng.pop()):null,av=/iPod/i.test(je),US=function(){var a=je.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),fi=/Android/i.test(je),Cc=function(){var a=je.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var e=a[1]&&parseFloat(a[1]),r=a[2]&&parseFloat(a[2]);return e&&r?parseFloat(a[1]+"."+a[2]):e||null}(),sv=fi&&Cc<5&&BS<537,ov=/Firefox/i.test(je),pa=/Edg/i.test(je),hi=!pa&&(/Chrome/i.test(je)||/CriOS/i.test(je)),uv=function(){var a=je.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),ma=function(){var a=/MSIE\s(\d+)\.\d/.exec(je),e=a&&parseFloat(a[1]);return!e&&/Trident\/7.0/i.test(je)&&/rv:11.0/.test(je)&&(e=11),e}(),wc=/Safari/i.test(je)&&!hi&&!fi&&!pa,lv=/Windows/i.test(je),jr=Boolean(zr()&&("ontouchstart"in A.default||A.default.navigator.maxTouchPoints||A.default.DocumentTouch&&A.default.document instanceof A.default.DocumentTouch)),Ac=/iPad/i.test(je)||wc&&jr&&!/iPhone/i.test(je),Fc=/iPhone/i.test(je)&&!Ac,nt=Fc||Ac||av,_o=(wc||nt)&&!hi,jS=Object.freeze({__proto__:null,IS_IPOD:av,IOS_VERSION:US,IS_ANDROID:fi,ANDROID_VERSION:Cc,IS_NATIVE_ANDROID:sv,IS_FIREFOX:ov,IS_EDGE:pa,IS_CHROME:hi,CHROME_VERSION:uv,IE_VERSION:ma,IS_SAFARI:wc,IS_WINDOWS:lv,TOUCH_ENABLED:jr,IS_IPAD:Ac,IS_IPHONE:Fc,IS_IOS:nt,IS_ANY_SAFARI:_o});function ag(a){return typeof a=="string"&&Boolean(a.trim())}function cv(a){if(a.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function HS(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}function zr(){return W.default===A.default.document}function Gr(a){return ci(a)&&a.nodeType===1}function dv(){try{return A.default.parent!==A.default.self}catch{return!0}}function fv(a){return function(e,r){if(!ag(e))return W.default[a](null);ag(r)&&(r=W.default.querySelector(r));var i=Gr(r)?r:W.default;return i[a]&&i[a](e)}}function se(a,e,r,i){a===void 0&&(a="div"),e===void 0&&(e={}),r===void 0&&(r={});var t=W.default.createElement(a);return Object.getOwnPropertyNames(e).forEach(function(n){var s=e[n];n.indexOf("aria-")!==-1||n==="role"||n==="type"?(ne.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+n+" to "+s+".")),t.setAttribute(n,s)):n==="textContent"?er(t,s):(t[n]!==s||n==="tabIndex")&&(t[n]=s)}),Object.getOwnPropertyNames(r).forEach(function(n){t.setAttribute(n,r[n])}),i&&Pc(t,i),t}function er(a,e){return typeof a.textContent>"u"?a.innerText=e:a.textContent=e,a}function ac(a,e){e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}function Qi(a,e){return cv(e),a.classList?a.classList.contains(e):HS(e).test(a.className)}function ui(a,e){return a.classList?a.classList.add(e):Qi(a,e)||(a.className=(a.className+" "+e).trim()),a}function ga(a,e){return a?(a.classList?a.classList.remove(e):(cv(e),a.className=a.className.split(/\s+/).filter(function(r){return r!==e}).join(" ")),a):(ne.warn("removeClass was called with an element that doesn't exist"),null)}function hv(a,e,r){var i=Qi(a,e);if(typeof r=="function"&&(r=r(a,e)),typeof r!="boolean"&&(r=!i),r!==i)return r?ui(a,e):ga(a,e),a}function pv(a,e){Object.getOwnPropertyNames(e).forEach(function(r){var i=e[r];i===null||typeof i>"u"||i===!1?a.removeAttribute(r):a.setAttribute(r,i===!0?"":i)})}function ai(a){var e={},r=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(a&&a.attributes&&a.attributes.length>0)for(var i=a.attributes,t=i.length-1;t>=0;t--){var n=i[t].name,s=i[t].value;(typeof a[n]=="boolean"||r.indexOf(","+n+",")!==-1)&&(s=s!==null),e[n]=s}return e}function mv(a,e){return a.getAttribute(e)}function Hr(a,e,r){a.setAttribute(e,r)}function xo(a,e){a.removeAttribute(e)}function gv(){W.default.body.focus(),W.default.onselectstart=function(){return!1}}function vv(){W.default.onselectstart=function(){return!0}}function Vr(a){if(a&&a.getBoundingClientRect&&a.parentNode){var e=a.getBoundingClientRect(),r={};return["bottom","height","left","right","top","width"].forEach(function(i){e[i]!==void 0&&(r[i]=e[i])}),r.height||(r.height=parseFloat(ca(a,"height"))),r.width||(r.width=parseFloat(ca(a,"width"))),r}}function da(a){if(!a||a&&!a.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=a.offsetWidth,r=a.offsetHeight,i=0,t=0;a.offsetParent&&a!==W.default[to.fullscreenElement];)i+=a.offsetLeft,t+=a.offsetTop,a=a.offsetParent;return{left:i,top:t,width:e,height:r}}function Do(a,e){var r={x:0,y:0};if(nt)for(var i=a;i&&i.nodeName.toLowerCase()!=="html";){var t=ca(i,"transform");if(/^matrix/.test(t)){var n=t.slice(7,-1).split(/,\s/).map(Number);r.x+=n[4],r.y+=n[5]}else if(/^matrix3d/.test(t)){var s=t.slice(9,-1).split(/,\s/).map(Number);r.x+=s[12],r.y+=s[13]}i=i.parentNode}var o={},u=da(e.target),l=da(a),c=l.width,f=l.height,m=e.offsetY-(l.top-u.top),_=e.offsetX-(l.left-u.left);return e.changedTouches&&(_=e.changedTouches[0].pageX-l.left,m=e.changedTouches[0].pageY+l.top,nt&&(_-=r.x,m-=r.y)),o.y=1-Math.max(0,Math.min(1,m/f)),o.x=Math.max(0,Math.min(1,_/c)),o}function yv(a){return ci(a)&&a.nodeType===3}function kc(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function _v(a){return typeof a=="function"&&(a=a()),(Array.isArray(a)?a:[a]).map(function(e){if(typeof e=="function"&&(e=e()),Gr(e)||yv(e))return e;if(typeof e=="string"&&/\S/.test(e))return W.default.createTextNode(e)}).filter(function(e){return e})}function Pc(a,e){return _v(e).forEach(function(r){return a.appendChild(r)}),a}function xv(a,e){return Pc(kc(a),e)}function fa(a){return a.button===void 0&&a.buttons===void 0||a.button===0&&a.buttons===void 0||a.type==="mouseup"&&a.button===0&&a.buttons===0?!0:!(a.button!==0||a.buttons!==1)}var wi=fv("querySelector"),Dv=fv("querySelectorAll"),Tv=Object.freeze({__proto__:null,isReal:zr,isEl:Gr,isInFrame:dv,createEl:se,textContent:er,prependTo:ac,hasClass:Qi,addClass:ui,removeClass:ga,toggleClass:hv,setAttributes:pv,getAttributes:ai,getAttribute:mv,setAttribute:Hr,removeAttribute:xo,blockTextSelection:gv,unblockTextSelection:vv,getBoundingClientRect:Vr,findPosition:da,getPointerPosition:Do,isTextNode:yv,emptyEl:kc,normalizeContent:_v,appendContent:Pc,insertContent:xv,isSingleLeftClick:fa,$:wi,$$:Dv}),bv=!1,sc,VS=function(){if(sc.options.autoSetup!==!1){var e=Array.prototype.slice.call(W.default.getElementsByTagName("video")),r=Array.prototype.slice.call(W.default.getElementsByTagName("audio")),i=Array.prototype.slice.call(W.default.getElementsByTagName("video-js")),t=e.concat(r,i);if(t&&t.length>0)for(var n=0,s=t.length;n<s;n++){var o=t[n];if(o&&o.getAttribute){if(o.player===void 0){var u=o.getAttribute("data-setup");u!==null&&sc(o)}}else{oc(1);break}}else bv||oc(1)}};function oc(a,e){!zr()||(e&&(sc=e),A.default.setTimeout(VS,a))}function uc(){bv=!0,A.default.removeEventListener("load",uc)}zr()&&(W.default.readyState==="complete"?uc():A.default.addEventListener("load",uc));var Ev=function(e){var r=W.default.createElement("style");return r.className=e,r},Sv=function(e,r){e.styleSheet?e.styleSheet.cssText=r:e.textContent=r},$S=3,WS=$S;function pi(){return WS++}var Cv;A.default.WeakMap||(Cv=function(){function a(){this.vdata="vdata"+Math.floor(A.default.performance&&A.default.performance.now()||Date.now()),this.data={}}var e=a.prototype;return e.set=function(i,t){var n=i[this.vdata]||pi();return i[this.vdata]||(i[this.vdata]=n),this.data[n]=t,this},e.get=function(i){var t=i[this.vdata];if(t)return this.data[t];ne("We have no data for this element",i)},e.has=function(i){var t=i[this.vdata];return t in this.data},e.delete=function(i){var t=i[this.vdata];t&&(delete this.data[t],delete i[this.vdata])},a}());var it=A.default.WeakMap?new WeakMap:new Cv;function sg(a,e){if(!!it.has(a)){var r=it.get(a);r.handlers[e].length===0&&(delete r.handlers[e],a.removeEventListener?a.removeEventListener(e,r.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+e,r.dispatcher)),Object.getOwnPropertyNames(r.handlers).length<=0&&(delete r.handlers,delete r.dispatcher,delete r.disabled),Object.getOwnPropertyNames(r).length===0&&it.delete(a)}}function Ic(a,e,r,i){r.forEach(function(t){a(e,t,i)})}function To(a){if(a.fixed_)return a;function e(){return!0}function r(){return!1}if(!a||!a.isPropagationStopped||!a.isImmediatePropagationStopped){var i=a||A.default.event;a={};for(var t in i)t!=="layerX"&&t!=="layerY"&&t!=="keyLocation"&&t!=="webkitMovementX"&&t!=="webkitMovementY"&&t!=="path"&&(t==="returnValue"&&i.preventDefault||(a[t]=i[t]));if(a.target||(a.target=a.srcElement||W.default),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){i.preventDefault&&i.preventDefault(),a.returnValue=!1,i.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),a.cancelBubble=!0,i.cancelBubble=!0,a.isPropagationStopped=e},a.isPropagationStopped=r,a.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),a.isImmediatePropagationStopped=e,a.stopPropagation()},a.isImmediatePropagationStopped=r,a.clientX!==null&&a.clientX!==void 0){var n=W.default.documentElement,s=W.default.body;a.pageX=a.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),a.pageY=a.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)}a.which=a.charCode||a.keyCode,a.button!==null&&a.button!==void 0&&(a.button=a.button&1?0:a.button&4?1:a.button&2?2:0)}return a.fixed_=!0,a}var qs,qS=function(){if(typeof qs!="boolean"){qs=!1;try{var e=Object.defineProperty({},"passive",{get:function(){qs=!0}});A.default.addEventListener("test",null,e),A.default.removeEventListener("test",null,e)}catch{}}return qs},zS=["touchstart","touchmove"];function vt(a,e,r){if(Array.isArray(e))return Ic(vt,a,e,r);it.has(a)||it.set(a,{});var i=it.get(a);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),r.guid||(r.guid=pi()),i.handlers[e].push(r),i.dispatcher||(i.disabled=!1,i.dispatcher=function(n,s){if(!i.disabled){n=To(n);var o=i.handlers[n.type];if(o)for(var u=o.slice(0),l=0,c=u.length;l<c&&!n.isImmediatePropagationStopped();l++)try{u[l].call(a,n,s)}catch(f){ne.error(f)}}}),i.handlers[e].length===1)if(a.addEventListener){var t=!1;qS()&&zS.indexOf(e)>-1&&(t={passive:!0}),a.addEventListener(e,i.dispatcher,t)}else a.attachEvent&&a.attachEvent("on"+e,i.dispatcher)}function Ke(a,e,r){if(!!it.has(a)){var i=it.get(a);if(!!i.handlers){if(Array.isArray(e))return Ic(Ke,a,e,r);var t=function(l,c){i.handlers[c]=[],sg(l,c)};if(e===void 0){for(var n in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},n)&&t(a,n);return}var s=i.handlers[e];if(!!s){if(!r){t(a,e);return}if(r.guid)for(var o=0;o<s.length;o++)s[o].guid===r.guid&&s.splice(o--,1);sg(a,e)}}}}function Kr(a,e,r){var i=it.has(a)?it.get(a):{},t=a.parentNode||a.ownerDocument;if(typeof e=="string"?e={type:e,target:a}:e.target||(e.target=a),e=To(e),i.dispatcher&&i.dispatcher.call(a,e,r),t&&!e.isPropagationStopped()&&e.bubbles===!0)Kr.call(null,t,e,r);else if(!t&&!e.defaultPrevented&&e.target&&e.target[e.type]){it.has(e.target)||it.set(e.target,{});var n=it.get(e.target);e.target[e.type]&&(n.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),n.disabled=!1)}return!e.defaultPrevented}function bo(a,e,r){if(Array.isArray(e))return Ic(bo,a,e,r);var i=function t(){Ke(a,e,t),r.apply(this,arguments)};i.guid=r.guid=r.guid||pi(),vt(a,e,i)}function wv(a,e,r){var i=function t(){Ke(a,e,t),r.apply(this,arguments)};i.guid=r.guid=r.guid||pi(),vt(a,e,i)}var GS=Object.freeze({__proto__:null,fixEvent:To,on:vt,off:Ke,trigger:Kr,one:bo,any:wv}),It=30,Ce=function(e,r,i){r.guid||(r.guid=pi());var t=r.bind(e);return t.guid=i?i+"_"+r.guid:r.guid,t},di=function(e,r){var i=A.default.performance.now(),t=function(){var s=A.default.performance.now();s-i>=r&&(e.apply(void 0,arguments),i=s)};return t},KS=function(e,r,i,t){t===void 0&&(t=A.default);var n,s=function(){t.clearTimeout(n),n=null},o=function(){var l=this,c=arguments,f=function(){n=null,f=null,i||e.apply(l,c)};!n&&i&&e.apply(l,c),t.clearTimeout(n),n=t.setTimeout(f,r)};return o.cancel=s,o},He=function(){};He.prototype.allowedEvents_={};He.prototype.on=function(a,e){var r=this.addEventListener;this.addEventListener=function(){},vt(this,a,e),this.addEventListener=r};He.prototype.addEventListener=He.prototype.on;He.prototype.off=function(a,e){Ke(this,a,e)};He.prototype.removeEventListener=He.prototype.off;He.prototype.one=function(a,e){var r=this.addEventListener;this.addEventListener=function(){},bo(this,a,e),this.addEventListener=r};He.prototype.any=function(a,e){var r=this.addEventListener;this.addEventListener=function(){},wv(this,a,e),this.addEventListener=r};He.prototype.trigger=function(a){var e=a.type||a;typeof a=="string"&&(a={type:e}),a=To(a),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](a),Kr(this,a)};He.prototype.dispatchEvent=He.prototype.trigger;var Zn;He.prototype.queueTrigger=function(a){var e=this;Zn||(Zn=new Map);var r=a.type||a,i=Zn.get(this);i||(i=new Map,Zn.set(this,i));var t=i.get(r);i.delete(r),A.default.clearTimeout(t);var n=A.default.setTimeout(function(){i.delete(r),i.size===0&&(i=null,Zn.delete(e)),e.trigger(a)},0);i.set(r,n)};var Eo=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},li=function(e){return e instanceof He||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(r){return typeof e[r]=="function"})},XS=function(e,r){li(e)?r():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(r))},lc=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},io=function(e,r,i){if(!e||!e.nodeName&&!li(e))throw new Error("Invalid target for "+Eo(r)+"#"+i+"; must be a DOM node or evented object.")},Av=function(e,r,i){if(!lc(e))throw new Error("Invalid event type for "+Eo(r)+"#"+i+"; must be a non-empty string or array.")},Fv=function(e,r,i){if(typeof e!="function")throw new Error("Invalid listener for "+Eo(r)+"#"+i+"; must be a function.")},$l=function(e,r,i){var t=r.length<3||r[0]===e||r[0]===e.eventBusEl_,n,s,o;return t?(n=e.eventBusEl_,r.length>=3&&r.shift(),s=r[0],o=r[1]):(n=r[0],s=r[1],o=r[2]),io(n,e,i),Av(s,e,i),Fv(o,e,i),o=Ce(e,o),{isTargetingSelf:t,target:n,type:s,listener:o}},zi=function(e,r,i,t){io(e,e,r),e.nodeName?GS[r](e,i,t):e[r](i,t)},YS={on:function(){for(var e=this,r=arguments.length,i=new Array(r),t=0;t<r;t++)i[t]=arguments[t];var n=$l(this,i,"on"),s=n.isTargetingSelf,o=n.target,u=n.type,l=n.listener;if(zi(o,"on",u,l),!s){var c=function(){return e.off(o,u,l)};c.guid=l.guid;var f=function(){return e.off("dispose",c)};f.guid=l.guid,zi(this,"on","dispose",c),zi(o,"on","dispose",f)}},one:function(){for(var e=this,r=arguments.length,i=new Array(r),t=0;t<r;t++)i[t]=arguments[t];var n=$l(this,i,"one"),s=n.isTargetingSelf,o=n.target,u=n.type,l=n.listener;if(s)zi(o,"one",u,l);else{var c=function f(){e.off(o,u,f);for(var m=arguments.length,_=new Array(m),x=0;x<m;x++)_[x]=arguments[x];l.apply(null,_)};c.guid=l.guid,zi(o,"one",u,c)}},any:function(){for(var e=this,r=arguments.length,i=new Array(r),t=0;t<r;t++)i[t]=arguments[t];var n=$l(this,i,"any"),s=n.isTargetingSelf,o=n.target,u=n.type,l=n.listener;if(s)zi(o,"any",u,l);else{var c=function f(){e.off(o,u,f);for(var m=arguments.length,_=new Array(m),x=0;x<m;x++)_[x]=arguments[x];l.apply(null,_)};c.guid=l.guid,zi(o,"any",u,c)}},off:function(e,r,i){if(!e||lc(e))Ke(this.eventBusEl_,e,r);else{var t=e,n=r;io(t,this,"off"),Av(n,this,"off"),Fv(i,this,"off"),i=Ce(this,i),this.off("dispose",i),t.nodeName?(Ke(t,n,i),Ke(t,"dispose",i)):li(t)&&(t.off(n,i),t.off("dispose",i))}},trigger:function(e,r){io(this.eventBusEl_,this,"trigger");var i=e&&typeof e!="string"?e.type:e;if(!lc(i)){var t="Invalid event type for "+Eo(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||ne).error(t);else throw new Error(t)}return Kr(this.eventBusEl_,e,r)}};function Oc(a,e){e===void 0&&(e={});var r=e,i=r.eventBusKey;if(i){if(!a[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');a.eventBusEl_=a[i]}else a.eventBusEl_=se("span",{className:"vjs-event-bus"});return ke(a,YS),a.eventedCallbacks&&a.eventedCallbacks.forEach(function(t){t()}),a.on("dispose",function(){a.off(),[a,a.el_,a.eventBusEl_].forEach(function(t){t&&it.has(t)&&it.delete(t)}),A.default.setTimeout(function(){a.eventBusEl_=null},0)}),a}var QS={state:{},setState:function(e){var r=this;typeof e=="function"&&(e=e());var i;return Nr(e,function(t,n){r.state[n]!==t&&(i=i||{},i[n]={from:r.state[n],to:t}),r.state[n]=t}),i&&li(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function kv(a,e){return ke(a,QS),a.state=ke({},a.state,e),typeof a.handleStateChanged=="function"&&li(a)&&a.on("statechanged",a.handleStateChanged),a}var Js=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toLowerCase()})},Le=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toUpperCase()})},JS=function(e,r){return Le(e)===Le(r)};function Se(){for(var a={},e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return r.forEach(function(t){!t||Nr(t,function(n,s){if(!la(n)){a[s]=n;return}la(a[s])||(a[s]={}),a[s]=Se(a[s],n)})}),a}var ZS=function(){function a(){this.map_={}}var e=a.prototype;return e.has=function(i){return i in this.map_},e.delete=function(i){var t=this.has(i);return delete this.map_[i],t},e.set=function(i,t){return this.map_[i]=t,this},e.forEach=function(i,t){for(var n in this.map_)i.call(t,this.map_[n],n,this)},a}(),eC=A.default.Map?A.default.Map:ZS,tC=function(){function a(){this.set_={}}var e=a.prototype;return e.has=function(i){return i in this.set_},e.delete=function(i){var t=this.has(i);return delete this.set_[i],t},e.add=function(i){return this.set_[i]=1,this},e.forEach=function(i,t){for(var n in this.set_)i.call(t,n,n,this)},a}(),Wl=A.default.Set?A.default.Set:tC,V=function(){function a(r,i,t){var n=this;if(!r&&this.play?this.player_=r=this:this.player_=r,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Se({},this.options_),i=this.options_=Se(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var s=r&&r.id&&r.id()||"no_player";this.id_=s+"_component_"+pi()}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(function(o){return n.addClass(o)}),i.evented!==!1&&(Oc(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),kv(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Wl,this.setIntervalIds_=new Wl,this.rafIds_=new Wl,this.namedRafs_=new eC,this.clearingTimersOnDispose_=!1,i.initChildren!==!1&&this.initChildren(),this.ready(t),i.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=a.prototype;return e.dispose=function(i){if(i===void 0&&(i={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(i.restoreEl?this.el_.parentNode.replaceChild(i.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(i){return i?(this.options_=Se(this.options_,i),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(i,t,n){return se(i,t,n)},e.localize=function(i,t,n){n===void 0&&(n=i);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),u=o&&o[s],l=s&&s.split("-")[0],c=o&&o[l],f=n;return u&&u[i]?f=u[i]:c&&c[i]&&(f=c[i]),t&&(f=f.replace(/\{(\d+)\}/g,function(m,_){var x=t[_-1],b=x;return typeof x>"u"&&(b=m),b})),f},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(i){return this.childIndex_[i]},e.getChild=function(i){if(!!i)return this.childNameIndex_[i]},e.getDescendant=function(){for(var i=arguments.length,t=new Array(i),n=0;n<i;n++)t[n]=arguments[n];t=t.reduce(function(u,l){return u.concat(l)},[]);for(var s=this,o=0;o<t.length;o++)if(s=s.getChild(t[o]),!s||!s.getChild)return;return s},e.addChild=function(i,t,n){t===void 0&&(t={}),n===void 0&&(n=this.children_.length);var s,o;if(typeof i=="string"){o=Le(i);var u=t.componentClass||o;t.name=o;var l=a.getComponent(u);if(!l)throw new Error("Component "+u+" does not exist");if(typeof l!="function")return null;s=new l(this.player_||this,t)}else s=i;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(n,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&Le(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[Js(o)]=s),typeof s.el=="function"&&s.el()){var c=null;this.children_[n+1]&&(this.children_[n+1].el_?c=this.children_[n+1].el_:Gr(this.children_[n+1])&&(c=this.children_[n+1])),this.contentEl().insertBefore(s.el(),c)}return s},e.removeChild=function(i){if(typeof i=="string"&&(i=this.getChild(i)),!(!i||!this.children_)){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===i){t=!0,this.children_.splice(n,1);break}if(!!t){i.parentComponent_=null,this.childIndex_[i.id()]=null,this.childNameIndex_[Le(i.name())]=null,this.childNameIndex_[Js(i.name())]=null;var s=i.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(i.el())}}},e.initChildren=function(){var i=this,t=this.options_.children;if(t){var n=this.options_,s=function(c){var f=c.name,m=c.opts;if(n[f]!==void 0&&(m=n[f]),m!==!1){m===!0&&(m={}),m.playerOptions=i.options_.playerOptions;var _=i.addChild(f,m);_&&(i[f]=_)}},o,u=a.getComponent("Tech");Array.isArray(t)?o=t:o=Object.keys(t),o.concat(Object.keys(this.options_).filter(function(l){return!o.some(function(c){return typeof c=="string"?l===c:l===c.name})})).map(function(l){var c,f;return typeof l=="string"?(c=l,f=t[c]||i.options_[c]||{}):(c=l.name,f=l),{name:c,opts:f}}).filter(function(l){var c=a.getComponent(l.opts.componentClass||Le(l.name));return c&&!u.isTech(c)}).forEach(s)}},e.buildCSSClass=function(){return""},e.ready=function(i,t){if(t===void 0&&(t=!1),!!i){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(i);return}t?i.call(this):this.setTimeout(i,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var i=this.readyQueue_;this.readyQueue_=[],i&&i.length>0&&i.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},e.$=function(i,t){return wi(i,t||this.contentEl())},e.$$=function(i,t){return Dv(i,t||this.contentEl())},e.hasClass=function(i){return Qi(this.el_,i)},e.addClass=function(i){ui(this.el_,i)},e.removeClass=function(i){ga(this.el_,i)},e.toggleClass=function(i,t){hv(this.el_,i,t)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(i){return mv(this.el_,i)},e.setAttribute=function(i,t){Hr(this.el_,i,t)},e.removeAttribute=function(i){xo(this.el_,i)},e.width=function(i,t){return this.dimension("width",i,t)},e.height=function(i,t){return this.dimension("height",i,t)},e.dimensions=function(i,t){this.width(i,!0),this.height(t)},e.dimension=function(i,t,n){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[i]=t:t==="auto"?this.el_.style[i]="":this.el_.style[i]=t+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[i],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+Le(i)],10)},e.currentDimension=function(i){var t=0;if(i!=="width"&&i!=="height")throw new Error("currentDimension only accepts width or height value");if(t=ca(this.el_,i),t=parseFloat(t),t===0||isNaN(t)){var n="offset"+Le(i);t=this.el_[n]}return t},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(i){this.player_&&(te.default.isEventKey(i,"Tab")||i.stopPropagation(),this.player_.handleKeyDown(i))},e.handleKeyPress=function(i){this.handleKeyDown(i)},e.emitTapEvents=function(){var i=0,t=null,n=10,s=200,o;this.on("touchstart",function(l){l.touches.length===1&&(t={pageX:l.touches[0].pageX,pageY:l.touches[0].pageY},i=A.default.performance.now(),o=!0)}),this.on("touchmove",function(l){if(l.touches.length>1)o=!1;else if(t){var c=l.touches[0].pageX-t.pageX,f=l.touches[0].pageY-t.pageY,m=Math.sqrt(c*c+f*f);m>n&&(o=!1)}});var u=function(){o=!1};this.on("touchleave",u),this.on("touchcancel",u),this.on("touchend",function(l){if(t=null,o===!0){var c=A.default.performance.now()-i;c<s&&(l.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var i=Ce(this.player(),this.player().reportUserActivity),t;this.on("touchstart",function(){i(),this.clearInterval(t),t=this.setInterval(i,250)});var n=function(o){i(),this.clearInterval(t)};this.on("touchmove",i),this.on("touchend",n),this.on("touchcancel",n)}},e.setTimeout=function(i,t){var n=this,s;return i=Ce(this,i),this.clearTimersOnDispose_(),s=A.default.setTimeout(function(){n.setTimeoutIds_.has(s)&&n.setTimeoutIds_.delete(s),i()},t),this.setTimeoutIds_.add(s),s},e.clearTimeout=function(i){return this.setTimeoutIds_.has(i)&&(this.setTimeoutIds_.delete(i),A.default.clearTimeout(i)),i},e.setInterval=function(i,t){i=Ce(this,i),this.clearTimersOnDispose_();var n=A.default.setInterval(i,t);return this.setIntervalIds_.add(n),n},e.clearInterval=function(i){return this.setIntervalIds_.has(i)&&(this.setIntervalIds_.delete(i),A.default.clearInterval(i)),i},e.requestAnimationFrame=function(i){var t=this;if(!this.supportsRaf_)return this.setTimeout(i,1e3/60);this.clearTimersOnDispose_();var n;return i=Ce(this,i),n=A.default.requestAnimationFrame(function(){t.rafIds_.has(n)&&t.rafIds_.delete(n),i()}),this.rafIds_.add(n),n},e.requestNamedAnimationFrame=function(i,t){var n=this;if(!this.namedRafs_.has(i)){this.clearTimersOnDispose_(),t=Ce(this,t);var s=this.requestAnimationFrame(function(){t(),n.namedRafs_.has(i)&&n.namedRafs_.delete(i)});return this.namedRafs_.set(i,s),i}},e.cancelNamedAnimationFrame=function(i){!this.namedRafs_.has(i)||(this.cancelAnimationFrame(this.namedRafs_.get(i)),this.namedRafs_.delete(i))},e.cancelAnimationFrame=function(i){return this.supportsRaf_?(this.rafIds_.has(i)&&(this.rafIds_.delete(i),A.default.cancelAnimationFrame(i)),i):this.clearTimeout(i)},e.clearTimersOnDispose_=function(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(t){var n=t[0],s=t[1];i[n].forEach(function(o,u){return i[s](u)})}),i.clearingTimersOnDispose_=!1}))},a.registerComponent=function(i,t){if(typeof i!="string"||!i)throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.');var n=a.getComponent("Tech"),s=n&&n.isTech(t),o=a===t||a.prototype.isPrototypeOf(t.prototype);if(s||!o){var u;throw s?u="techs must be registered using Tech.registerTech()":u="must be a Component subclass",new Error('Illegal component, "'+i+'"; '+u+".")}i=Le(i),a.components_||(a.components_={});var l=a.getComponent("Player");if(i==="Player"&&l&&l.players){var c=l.players,f=Object.keys(c);if(c&&f.length>0&&f.map(function(m){return c[m]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return a.components_[i]=t,a.components_[Js(i)]=t,t},a.getComponent=function(i){if(!(!i||!a.components_))return a.components_[i]},a}();V.prototype.supportsRaf_=typeof A.default.requestAnimationFrame=="function"&&typeof A.default.cancelAnimationFrame=="function";V.registerComponent("Component",V);function iC(a,e,r){if(typeof e!="number"||e<0||e>r)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+r+").")}function og(a,e,r,i){return iC(a,i,r.length-1),r[i][e]}function ql(a){var e;return a===void 0||a.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:a.length,start:og.bind(null,"start",0,a),end:og.bind(null,"end",1,a)},A.default.Symbol&&A.default.Symbol.iterator&&(e[A.default.Symbol.iterator]=function(){return(a||[]).values()}),e}function Ji(a,e){return Array.isArray(a)?ql(a):a===void 0||e===void 0?ql():ql([[a,e]])}function Pv(a,e){var r=0,i,t;if(!e)return 0;(!a||!a.length)&&(a=Ji(0,0));for(var n=0;n<a.length;n++)i=a.start(n),t=a.end(n),t>e&&(t=e),r+=t-i;return r/e}function rt(a){if(a instanceof rt)return a;typeof a=="number"?this.code=a:typeof a=="string"?this.message=a:ci(a)&&(typeof a.code=="number"&&(this.code=a.code),ke(this,a)),this.message||(this.message=rt.defaultMessages[this.code]||"")}rt.prototype.code=0;rt.prototype.message="";rt.prototype.status=null;rt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];rt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(Gi=0;Gi<rt.errorTypes.length;Gi++)rt[rt.errorTypes[Gi]]=Gi,rt.prototype[rt.errorTypes[Gi]]=Gi;var Gi;function aa(a){return a!=null&&typeof a.then=="function"}function Vt(a){aa(a)&&a.then(null,function(e){})}var cc=function(e){var r=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(i,t,n){return e[t]&&(i[t]=e[t]),i},{cues:e.cues&&Array.prototype.map.call(e.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})});return r},rC=function(e){var r=e.$$("track"),i=Array.prototype.map.call(r,function(n){return n.track}),t=Array.prototype.map.call(r,function(n){var s=cc(n.track);return n.src&&(s.src=n.src),s});return t.concat(Array.prototype.filter.call(e.textTracks(),function(n){return i.indexOf(n)===-1}).map(cc))},nC=function(e,r){return e.forEach(function(i){var t=r.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(function(n){return t.addCue(n)})}),r.textTracks()},ug={textTracksToJson:rC,jsonToTextTracks:nC,trackToJson_:cc},zl="vjs-modal-dialog",Xr=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.handleKeyDown_=function(s){return n.handleKeyDown(s)},n.close_=function(s){return n.close(s)},n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=se("div",{className:zl+"-content"},{role:"document"}),n.descEl_=se("p",{className:zl+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),er(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},r.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},r.buildCSSClass=function(){return zl+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},r.label=function(){return this.localize(this.options_.label||"Modal Window")},r.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},r.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},r.opened=function(t){return typeof t=="boolean"&&this[t?"open":"close"](),this.opened_},r.close=function(){if(!!this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},r.closeable=function(t){if(typeof t=="boolean"){var n=this.closeable_=!!t,s=this.getChild("closeButton");if(n&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!n&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},r.fill=function(){this.fillWith(this.content())},r.fillWith=function(t){var n=this.contentEl(),s=n.parentNode,o=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(n),this.empty(),xv(n,t),this.trigger("modalfill"),o?s.insertBefore(n,o):s.appendChild(n);var u=this.getChild("closeButton");u&&s.appendChild(u.el_)},r.empty=function(){this.trigger("beforemodalempty"),kc(this.contentEl()),this.trigger("modalempty")},r.content=function(t){return typeof t<"u"&&(this.content_=t),this.content_},r.conditionalFocus_=function(){var t=W.default.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(t)||n===t)&&(this.previouslyActiveEl_=t,this.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(t){if(t.stopPropagation(),te.default.isEventKey(t,"Escape")&&this.closeable()){t.preventDefault(),this.close();return}if(!!te.default.isEventKey(t,"Tab")){for(var n=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,u=0;u<n.length;u++)if(s===n[u]){o=u;break}W.default.activeElement===this.el_&&(o=0),t.shiftKey&&o===0?(n[n.length-1].focus(),t.preventDefault()):!t.shiftKey&&o===n.length-1&&(n[0].focus(),t.preventDefault())}},r.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,function(n){return(n instanceof A.default.HTMLAnchorElement||n instanceof A.default.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof A.default.HTMLInputElement||n instanceof A.default.HTMLSelectElement||n instanceof A.default.HTMLTextAreaElement||n instanceof A.default.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof A.default.HTMLIFrameElement||n instanceof A.default.HTMLObjectElement||n instanceof A.default.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable")})},e}(V);Xr.prototype.options_={pauseOnOpen:!0,temporary:!0};V.registerComponent("ModalDialog",Xr);var $r=function(a){q(e,a);function e(i){var t;i===void 0&&(i=[]),t=a.call(this)||this,t.tracks_=[],Object.defineProperty(ee(t),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<i.length;n++)t.addTrack(i[n]);return t}var r=e.prototype;return r.addTrack=function(t){var n=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(t)===-1&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){n.trigger({track:t,type:"labelchange",target:n})},li(t)&&t.addEventListener("labelchange",t.labelchange_)},r.removeTrack=function(t){for(var n,s=0,o=this.length;s<o;s++)if(this[s]===t){n=this[s],n.off&&n.off(),this.tracks_.splice(s,1);break}!n||this.trigger({track:n,type:"removetrack",target:this})},r.getTrackById=function(t){for(var n=null,s=0,o=this.length;s<o;s++){var u=this[s];if(u.id===t){n=u;break}}return n},e}(He);$r.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(lg in $r.prototype.allowedEvents_)$r.prototype["on"+lg]=null;var lg,Gl=function(e,r){for(var i=0;i<e.length;i++)!Object.keys(e[i]).length||r.id===e[i].id||(e[i].enabled=!1)},aC=function(a){q(e,a);function e(i){var t;i===void 0&&(i=[]);for(var n=i.length-1;n>=0;n--)if(i[n].enabled){Gl(i,i[n]);break}return t=a.call(this,i)||this,t.changing_=!1,t}var r=e.prototype;return r.addTrack=function(t){var n=this;t.enabled&&Gl(this,t),a.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,Gl(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},r.removeTrack=function(t){a.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},e}($r),Kl=function(e,r){for(var i=0;i<e.length;i++)!Object.keys(e[i]).length||r.id===e[i].id||(e[i].selected=!1)},sC=function(a){q(e,a);function e(i){var t;i===void 0&&(i=[]);for(var n=i.length-1;n>=0;n--)if(i[n].selected){Kl(i,i[n]);break}return t=a.call(this,i)||this,t.changing_=!1,Object.defineProperty(ee(t),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),t}var r=e.prototype;return r.addTrack=function(t){var n=this;t.selected&&Kl(this,t),a.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,Kl(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},r.removeTrack=function(t){a.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},e}($r),Iv=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.addTrack=function(t){var n=this;a.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(t.kind)===-1&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},r.removeTrack=function(t){a.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}($r),oC=function(){function a(r){r===void 0&&(r=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var i=0,t=r.length;i<t;i++)this.addTrackElement_(r[i])}var e=a.prototype;return e.addTrackElement_=function(i){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),this.trackElements_.indexOf(i)===-1&&this.trackElements_.push(i)},e.getTrackElementByTrack_=function(i){for(var t,n=0,s=this.trackElements_.length;n<s;n++)if(i===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},e.removeTrackElement_=function(i){for(var t=0,n=this.trackElements_.length;t<n;t++)if(i===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},a}(),cg=function(){function a(r){a.prototype.setCues_.call(this,r),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=a.prototype;return e.setCues_=function(i){var t=this.length||0,n=0,s=i.length;this.cues_=i,this.length_=i.length;var o=function(l){""+l in this||Object.defineProperty(this,""+l,{get:function(){return this.cues_[l]}})};if(t<s)for(n=t;n<s;n++)o.call(this,n)},e.getCueById=function(i){for(var t=null,n=0,s=this.length;n<s;n++){var o=this[n];if(o.id===i){t=o;break}}return t},a}(),uC={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},lC={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},cC={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},dg={disabled:"disabled",hidden:"hidden",showing:"showing"},Lc=function(a){q(e,a);function e(r){var i;r===void 0&&(r={}),i=a.call(this)||this;var t={id:r.id||"vjs_track_"+pi(),kind:r.kind||"",language:r.language||""},n=r.label||"",s=function(l){Object.defineProperty(ee(i),l,{get:function(){return t[l]},set:function(){}})};for(var o in t)s(o);return Object.defineProperty(ee(i),"label",{get:function(){return n},set:function(l){l!==n&&(n=l,this.trigger("labelchange"))}}),i}return e}(He),Rc=function(e){var r=["protocol","hostname","port","pathname","search","hash","host"],i=W.default.createElement("a");i.href=e;for(var t={},n=0;n<r.length;n++)t[r[n]]=i[r[n]];return t.protocol==="http:"&&(t.host=t.host.replace(/:80$/,"")),t.protocol==="https:"&&(t.host=t.host.replace(/:443$/,"")),t.protocol||(t.protocol=A.default.location.protocol),t.host||(t.host=A.default.location.host),t},Ov=function(e){if(!e.match(/^https?:\/\//)){var r=W.default.createElement("a");r.href=e,e=r.href}return e},Mc=function(e){if(typeof e=="string"){var r=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,i=r.exec(e);if(i)return i.pop().toLowerCase()}return""},So=function(e,r){r===void 0&&(r=A.default.location);var i=Rc(e),t=i.protocol===":"?r.protocol:i.protocol,n=t+i.host!==r.protocol+r.host;return n},dC=Object.freeze({__proto__:null,parseUrl:Rc,getAbsoluteURL:Ov,getFileExtension:Mc,isCrossOrigin:So}),fg=function(e,r){var i=new A.default.WebVTT.Parser(A.default,A.default.vttjs,A.default.WebVTT.StringDecoder()),t=[];i.oncue=function(n){r.addCue(n)},i.onparsingerror=function(n){t.push(n)},i.onflush=function(){r.trigger({type:"loadeddata",target:r})},i.parse(e),t.length>0&&(A.default.console&&A.default.console.groupCollapsed&&A.default.console.groupCollapsed("Text Track parsing errors for "+r.src),t.forEach(function(n){return ne.error(n)}),A.default.console&&A.default.console.groupEnd&&A.default.console.groupEnd()),i.flush()},hg=function(e,r){var i={uri:e},t=So(e);t&&(i.cors=t);var n=r.tech_.crossOrigin()==="use-credentials";n&&(i.withCredentials=n),(0,Sc.default)(i,Ce(this,function(s,o,u){if(s)return ne.error(s,o);r.loaded_=!0,typeof A.default.WebVTT!="function"?r.tech_&&r.tech_.any(["vttjsloaded","vttjserror"],function(l){if(l.type==="vttjserror"){ne.error("vttjs failed to load, stopping trying to process "+r.src);return}return fg(u,r)}):fg(u,r)}))},va=function(a){q(e,a);function e(i){var t;if(i===void 0&&(i={}),!i.tech)throw new Error("A tech was not provided.");var n=Se(i,{kind:cC[i.kind]||"subtitles",language:i.language||i.srclang||""}),s=dg[n.mode]||"disabled",o=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(s="hidden"),t=a.call(this,n)||this,t.tech_=n.tech,t.cues_=[],t.activeCues_=[],t.preload_=t.tech_.preloadTextTracks!==!1;var u=new cg(t.cues_),l=new cg(t.activeCues_),c=!1;t.timeupdateHandler=Ce(ee(t),function(m){if(m===void 0&&(m={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),m.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var f=function(){t.stopTracking()};return t.tech_.one("dispose",f),s!=="disabled"&&t.startTracking(),Object.defineProperties(ee(t),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(_){!dg[_]||s!==_&&(s=_,!this.preload_&&s!=="disabled"&&this.cues.length===0&&hg(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?u:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return l;for(var _=this.tech_.currentTime(),x=[],b=0,T=this.cues.length;b<T;b++){var C=this.cues[b];(C.startTime<=_&&C.endTime>=_||C.startTime===C.endTime&&C.startTime<=_&&C.startTime+.5>=_)&&x.push(C)}if(c=!1,x.length!==this.activeCues_.length)c=!0;else for(var k=0;k<x.length;k++)this.activeCues_.indexOf(x[k])===-1&&(c=!0);return this.activeCues_=x,l.setCues_(this.activeCues_),l},set:function(){}}}),n.src?(t.src=n.src,t.preload_||(t.loaded_=!0),(t.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&hg(t.src,ee(t))):t.loaded_=!0,t}var r=e.prototype;return r.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},r.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},r.addCue=function(t){var n=t;if(A.default.vttjs&&!(t instanceof A.default.vttjs.VTTCue)){n=new A.default.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(var s in t)s in n||(n[s]=t[s]);n.id=t.id,n.originalCue_=t}for(var o=this.tech_.textTracks(),u=0;u<o.length;u++)o[u]!==this&&o[u].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},r.removeCue=function(t){for(var n=this.cues_.length;n--;){var s=this.cues_[n];if(s===t||s.originalCue_&&s.originalCue_===t){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}},e}(Lc);va.prototype.allowedEvents_={cuechange:"cuechange"};var Lv=function(a){q(e,a);function e(r){var i;r===void 0&&(r={});var t=Se(r,{kind:lC[r.kind]||""});i=a.call(this,t)||this;var n=!1;return Object.defineProperty(ee(i),"enabled",{get:function(){return n},set:function(o){typeof o!="boolean"||o===n||(n=o,this.trigger("enabledchange"))}}),t.enabled&&(i.enabled=t.enabled),i.loaded_=!0,i}return e}(Lc),Rv=function(a){q(e,a);function e(r){var i;r===void 0&&(r={});var t=Se(r,{kind:uC[r.kind]||""});i=a.call(this,t)||this;var n=!1;return Object.defineProperty(ee(i),"selected",{get:function(){return n},set:function(o){typeof o!="boolean"||o===n||(n=o,this.trigger("selectedchange"))}}),t.selected&&(i.selected=t.selected),i}return e}(Lc),Mv=0,fC=1,Nv=2,hC=3,Yr=function(a){q(e,a);function e(r){var i;r===void 0&&(r={}),i=a.call(this)||this;var t,n=new va(r);return i.kind=n.kind,i.src=n.src,i.srclang=n.language,i.label=n.label,i.default=n.default,Object.defineProperties(ee(i),{readyState:{get:function(){return t}},track:{get:function(){return n}}}),t=Mv,n.addEventListener("loadeddata",function(){t=Nv,i.trigger({type:"load",target:ee(i)})}),i}return e}(He);Yr.prototype.allowedEvents_={load:"load"};Yr.NONE=Mv;Yr.LOADING=fC;Yr.LOADED=Nv;Yr.ERROR=hC;var Tt={audio:{ListClass:aC,TrackClass:Lv,capitalName:"Audio"},video:{ListClass:sC,TrackClass:Rv,capitalName:"Video"},text:{ListClass:Iv,TrackClass:va,capitalName:"Text"}};Object.keys(Tt).forEach(function(a){Tt[a].getterName=a+"Tracks",Tt[a].privateName=a+"Tracks_"});var Wr={remoteText:{ListClass:Iv,TrackClass:va,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:oC,TrackClass:Yr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},tt=ot({},Tt,Wr);Wr.names=Object.keys(Wr);Tt.names=Object.keys(Tt);tt.names=[].concat(Wr.names).concat(Tt.names);function pC(a,e,r,i,t){t===void 0&&(t={});var n=a.textTracks();t.kind=e,r&&(t.label=r),i&&(t.language=i),t.tech=a;var s=new tt.text.TrackClass(t);return n.addTrack(s),s}var _e=function(a){q(e,a);function e(i,t){var n;return i===void 0&&(i={}),t===void 0&&(t=function(){}),i.reportTouchActivity=!1,n=a.call(this,null,i,t)||this,n.onDurationChange_=function(s){return n.onDurationChange(s)},n.trackProgress_=function(s){return n.trackProgress(s)},n.trackCurrentTime_=function(s){return n.trackCurrentTime(s)},n.stopTrackingCurrentTime_=function(s){return n.stopTrackingCurrentTime(s)},n.disposeSourceHandler_=function(s){return n.disposeSourceHandler(s)},n.queuedHanders_=new Set,n.hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),tt.names.forEach(function(s){var o=tt[s];i&&i[o.getterName]&&(n[o.privateName]=i[o.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){i["native"+s+"Tracks"]===!1&&(n["featuresNative"+s+"Tracks"]=!1)}),i.nativeCaptions===!1||i.nativeTextTracks===!1?n.featuresNativeTextTracks=!1:(i.nativeCaptions===!0||i.nativeTextTracks===!0)&&(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=i.preloadTextTracks!==!1,n.autoRemoteTextTracks_=new tt.text.ListClass,n.initTrackListeners(),i.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}var r=e.prototype;return r.triggerSourceset=function(t){var n=this;this.isReady_||this.one("ready",function(){return n.setTimeout(function(){return n.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},r.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},r.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},r.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Ce(this,function(){var n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)},r.onDurationChange=function(t){this.duration_=this.duration()},r.buffered=function(){return Ji(0,0)},r.bufferedPercent=function(){return Pv(this.buffered(),this.duration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},r.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},r.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},r.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.dispose=function(){this.clearTracks(Tt.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},r.clearTracks=function(t){var n=this;t=[].concat(t),t.forEach(function(s){for(var o=n[s+"Tracks"]()||[],u=o.length;u--;){var l=o[u];s==="text"&&n.removeRemoteTextTrack(l),o.removeTrack(l)}})},r.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],n=t.length;n--;){var s=t[n];this.removeRemoteTextTrack(s)}},r.reset=function(){},r.crossOrigin=function(){},r.setCrossOrigin=function(){},r.error=function(t){return t!==void 0&&(this.error_=new rt(t),this.trigger("error")),this.error_},r.played=function(){return this.hasStarted_?Ji(0,0):Ji()},r.play=function(){},r.setScrubbing=function(){},r.scrubbing=function(){},r.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},r.initTrackListeners=function(){var t=this;Tt.names.forEach(function(n){var s=Tt[n],o=function(){t.trigger(n+"trackchange")},u=t[s.getterName]();u.addEventListener("removetrack",o),u.addEventListener("addtrack",o),t.on("dispose",function(){u.removeEventListener("removetrack",o),u.removeEventListener("addtrack",o)})})},r.addWebVttScript_=function(){var t=this;if(!A.default.WebVTT)if(W.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&la(nc.default)&&Object.keys(nc.default).length>0){this.trigger("vttjsloaded");return}var n=W.default.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",n.onload=function(){t.trigger("vttjsloaded")},n.onerror=function(){t.trigger("vttjserror")},this.on("dispose",function(){n.onload=null,n.onerror=null}),A.default.WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},r.emulateTextTracks=function(){var t=this,n=this.textTracks(),s=this.remoteTextTracks(),o=function(m){return n.addTrack(m.track)},u=function(m){return n.removeTrack(m.track)};s.on("addtrack",o),s.on("removetrack",u),this.addWebVttScript_();var l=function(){return t.trigger("texttrackchange")},c=function(){l();for(var m=0;m<n.length;m++){var _=n[m];_.removeEventListener("cuechange",l),_.mode==="showing"&&_.addEventListener("cuechange",l)}};c(),n.addEventListener("change",c),n.addEventListener("addtrack",c),n.addEventListener("removetrack",c),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",u),n.removeEventListener("change",c),n.removeEventListener("addtrack",c),n.removeEventListener("removetrack",c);for(var f=0;f<n.length;f++){var m=n[f];m.removeEventListener("cuechange",l)}})},r.addTextTrack=function(t,n,s){if(!t)throw new Error("TextTrack kind is required but was not provided");return pC(this,t,n,s)},r.createRemoteTextTrack=function(t){var n=Se(t,{tech:this});return new Wr.remoteTextEl.TrackClass(n)},r.addRemoteTextTrack=function(t,n){var s=this;t===void 0&&(t={});var o=this.createRemoteTextTrack(t);return n!==!0&&n!==!1&&(ne.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),n!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},r.removeRemoteTextTrack=function(t){var n=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},r.getVideoPlaybackQuality=function(){return{}},r.requestPictureInPicture=function(){var t=this.options_.Promise||A.default.Promise;if(t)return t.reject()},r.disablePictureInPicture=function(){return!0},r.setDisablePictureInPicture=function(){},r.requestVideoFrameCallback=function(t){var n=this,s=pi();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){n.queuedHanders_.has(s)&&(n.queuedHanders_.delete(s),t())})):this.requestNamedAnimationFrame(s,t),s},r.cancelVideoFrameCallback=function(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(t,n){return e.canPlayType(t.type)},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,n){if(e.techs_||(e.techs_={}),!e.isTech(n))throw new Error("Tech "+t+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Le(t),e.techs_[t]=n,e.techs_[Js(t)]=n,t!=="Tech"&&e.defaultTechOrder_.push(t),n},e.getTech=function(t){if(!!t){if(e.techs_&&e.techs_[t])return e.techs_[t];if(t=Le(t),A.default&&A.default.videojs&&A.default.videojs[t])return ne.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),A.default.videojs[t]}},e}(V);tt.names.forEach(function(a){var e=tt[a];_e.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});_e.prototype.featuresVolumeControl=!0;_e.prototype.featuresMuteControl=!0;_e.prototype.featuresFullscreenResize=!1;_e.prototype.featuresPlaybackRate=!1;_e.prototype.featuresProgressEvents=!1;_e.prototype.featuresSourceset=!1;_e.prototype.featuresTimeupdateEvents=!1;_e.prototype.featuresNativeTextTracks=!1;_e.prototype.featuresVideoFrameCallback=!1;_e.withSourceHandlers=function(a){a.registerSourceHandler=function(r,i){var t=a.sourceHandlers;t||(t=a.sourceHandlers=[]),i===void 0&&(i=t.length),t.splice(i,0,r)},a.canPlayType=function(r){for(var i=a.sourceHandlers||[],t,n=0;n<i.length;n++)if(t=i[n].canPlayType(r),t)return t;return""},a.selectSourceHandler=function(r,i){for(var t=a.sourceHandlers||[],n,s=0;s<t.length;s++)if(n=t[s].canHandleSource(r,i),n)return t[s];return null},a.canPlaySource=function(r,i){var t=a.selectSourceHandler(r,i);return t?t.canHandleSource(r,i):""};var e=["seekable","seeking","duration"];e.forEach(function(r){var i=this[r];typeof i=="function"&&(this[r]=function(){return this.sourceHandler_&&this.sourceHandler_[r]?this.sourceHandler_[r].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(r){var i=a.selectSourceHandler(r,this.options_);i||(a.nativeSourceHandler?i=a.nativeSourceHandler:ne.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==a.nativeSourceHandler&&(this.currentSource_=r),this.sourceHandler_=i.handleSource(r,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};V.registerComponent("Tech",_e);_e.registerTech("Tech",_e);_e.defaultTechOrder_=[];var Zi={},dc={},ro={};function mC(a,e){Zi[a]=Zi[a]||[],Zi[a].push(e)}function gC(a,e,r){a.setTimeout(function(){return Ki(e,Zi[e.type],r,a)},1)}function vC(a,e){a.forEach(function(r){return r.setTech&&r.setTech(e)})}function yC(a,e,r){return a.reduceRight(Nc(r),e[r]())}function _C(a,e,r,i){return e[r](a.reduce(Nc(r),i))}function pg(a,e,r,i){i===void 0&&(i=null);var t="call"+Le(r),n=a.reduce(Nc(t),i),s=n===ro,o=s?null:e[r](n);return TC(a,r,o,s),o}var xC={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},DC={setCurrentTime:1,setMuted:1,setVolume:1},mg={play:1,pause:1};function Nc(a){return function(e,r){return e===ro?ro:r[a]?r[a](e):e}}function TC(a,e,r,i){for(var t=a.length-1;t>=0;t--){var n=a[t];n[e]&&n[e](i,r)}}function bC(a){dc[a.id()]=null}function EC(a,e){var r=dc[a.id()],i=null;if(r==null)return i=e(a),dc[a.id()]=[[e,i]],i;for(var t=0;t<r.length;t++){var n=r[t],s=n[0],o=n[1];s===e&&(i=o)}return i===null&&(i=e(a),r.push([e,i])),i}function Ki(a,e,r,i,t,n){a===void 0&&(a={}),e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n=!1);var s=e,o=s[0],u=s.slice(1);if(typeof o=="string")Ki(a,Zi[o],r,i,t,n);else if(o){var l=EC(i,o);if(!l.setSource)return t.push(l),Ki(a,u,r,i,t,n);l.setSource(ke({},a),function(c,f){if(c)return Ki(a,u,r,i,t,n);t.push(l),Ki(f,a.type===f.type?u:Zi[f.type],r,i,t,n)})}else u.length?Ki(a,u,r,i,t,n):n?r(a,t):Ki(a,Zi["*"],r,i,t,!0)}var SC={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},no=function(e){e===void 0&&(e="");var r=Mc(e),i=SC[r.toLowerCase()];return i||""},CC=function(e,r){if(!r)return"";if(e.cache_.source.src===r&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(o){return o.src===r});if(i.length)return i[0].type;for(var t=e.$$("source"),n=0;n<t.length;n++){var s=t[n];if(s.type&&s.src&&s.src===r)return s.type}return no(r)},wC=function a(e){if(Array.isArray(e)){var r=[];e.forEach(function(i){i=a(i),Array.isArray(i)?r=r.concat(i):ci(i)&&r.push(i)}),e=r}else typeof e=="string"&&e.trim()?e=[gg({src:e})]:ci(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[gg(e)]:e=[];return e};function gg(a){if(!a.type){var e=no(a.src);e&&(a.type=e)}return a}var AC=function(a){q(e,a);function e(r,i,t){var n,s=Se({createEl:!1},i);if(n=a.call(this,r,s,t)||this,!i.playerOptions.sources||i.playerOptions.sources.length===0)for(var o=0,u=i.playerOptions.techOrder;o<u.length;o++){var l=Le(u[o]),c=_e.getTech(l);if(l||(c=V.getComponent(l)),c&&c.isSupported()){r.loadTech_(l);break}}else r.src(i.playerOptions.sources);return n}return e}(V);V.registerComponent("MediaLoader",AC);var Co=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.options_.controlText&&n.controlText(n.options_.controlText),n.handleMouseOver_=function(s){return n.handleMouseOver(s)},n.handleMouseOut_=function(s){return n.handleMouseOut(s)},n.handleClick_=function(s){return n.handleClick(s)},n.handleKeyDown_=function(s){return n.handleKeyDown(s)},n.emitTapEvents(),n.enable(),n}var r=e.prototype;return r.createEl=function(t,n,s){t===void 0&&(t="div"),n===void 0&&(n={}),s===void 0&&(s={}),n=ke({className:this.buildCSSClass(),tabIndex:0},n),t==="button"&&ne.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),s=ke({role:"button"},s),this.tabIndex_=n.tabIndex;var o=se(t,n,s);return o.appendChild(se("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},r.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},r.createControlTextEl=function(t){return this.controlTextEl_=se("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},r.controlText=function(t,n){if(n===void 0&&(n=this.el()),t===void 0)return this.controlText_||"Need Text";var s=this.localize(t);this.controlText_=t,er(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",s)},r.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},r.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},r.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},r.handleLanguagechange=function(){this.controlText(this.controlText_)},r.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},r.handleKeyDown=function(t){te.default.isEventKey(t,"Space")||te.default.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,t)},e}(V);V.registerComponent("ClickableComponent",Co);var FC=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.update(),n.update_=function(s){return n.update(s)},i.on("posterchange",n.update_),n}var r=e.prototype;return r.dispose=function(){this.player().off("posterchange",this.update_),a.prototype.dispose.call(this)},r.createEl=function(){var t=se("div",{className:"vjs-poster",tabIndex:-1});return t},r.update=function(t){var n=this.player().poster();this.setSrc(n),n?this.show():this.hide()},r.setSrc=function(t){var n="";t&&(n='url("'+t+'")'),this.el_.style.backgroundImage=n},r.handleClick=function(t){if(!!this.player_.controls()){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((ma||pa)&&n)&&this.player_.tech(!0).focus(),this.player_.paused()?Vt(this.player_.play()):this.player_.pause()}},e}(Co);V.registerComponent("PosterImage",FC);var Dt="#222",vg="#ccc",kC={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Xl(a,e){var r;if(a.length===4)r=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else if(a.length===7)r=a.slice(1);else throw new Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(r.slice(0,2),16)+","+parseInt(r.slice(2,4),16)+","+parseInt(r.slice(4,6),16)+","+e+")"}function Yl(a,e,r){try{a.style[e]=r}catch{return}}var PC=function(a){q(e,a);function e(i,t,n){var s;s=a.call(this,i,t,n)||this;var o=function(l){return s.updateDisplay(l)};return i.on("loadstart",function(u){return s.toggleDisplay(u)}),i.on("texttrackchange",o),i.on("loadedmetadata",function(u){return s.preselectTrack(u)}),i.ready(Ce(ee(s),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks){this.hide();return}i.on("fullscreenchange",o),i.on("playerresize",o),A.default.addEventListener("orientationchange",o),i.on("dispose",function(){return A.default.removeEventListener("orientationchange",o)});for(var u=this.options_.playerOptions.tracks||[],l=0;l<u.length;l++)this.player_.addRemoteTextTrack(u[l],!0);this.preselectTrack()})),s}var r=e.prototype;return r.preselectTrack=function(){for(var t={captions:1,subtitles:1},n=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,u,l,c=0;c<n.length;c++){var f=n[c];s&&s.enabled&&s.language&&s.language===f.language&&f.kind in t?f.kind===s.kind?l=f:l||(l=f):s&&!s.enabled?(l=null,o=null,u=null):f.default&&(f.kind==="descriptions"&&!o?o=f:f.kind in t&&!u&&(u=f))}l?l.mode="showing":u?u.mode="showing":o&&(o.mode="showing")},r.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},r.clearDisplay=function(){typeof A.default.WebVTT=="function"&&A.default.WebVTT.processCues(A.default,[],this.el_)},r.updateDisplay=function(){var t=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){for(var s=[],o=0;o<t.length;++o){var u=t[o];u.mode==="showing"&&s.push(u)}this.updateForTrack(s);return}for(var l=null,c=null,f=t.length;f--;){var m=t[f];m.mode==="showing"&&(m.kind==="descriptions"?l=m:c=m)}c?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):l&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(l))},r.updateDisplayState=function(t){for(var n=this.player_.textTrackSettings.getValues(),s=t.activeCues,o=s.length;o--;){var u=s[o];if(!!u){var l=u.displayState;if(n.color&&(l.firstChild.style.color=n.color),n.textOpacity&&Yl(l.firstChild,"color",Xl(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(l.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&Yl(l.firstChild,"backgroundColor",Xl(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?Yl(l,"backgroundColor",Xl(n.windowColor,n.windowOpacity)):l.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?l.firstChild.style.textShadow="2px 2px 3px "+Dt+", 2px 2px 4px "+Dt+", 2px 2px 5px "+Dt:n.edgeStyle==="raised"?l.firstChild.style.textShadow="1px 1px "+Dt+", 2px 2px "+Dt+", 3px 3px "+Dt:n.edgeStyle==="depressed"?l.firstChild.style.textShadow="1px 1px "+vg+", 0 1px "+vg+", -1px -1px "+Dt+", 0 -1px "+Dt:n.edgeStyle==="uniform"&&(l.firstChild.style.textShadow="0 0 4px "+Dt+", 0 0 4px "+Dt+", 0 0 4px "+Dt+", 0 0 4px "+Dt)),n.fontPercent&&n.fontPercent!==1){var c=A.default.parseFloat(l.style.fontSize);l.style.fontSize=c*n.fontPercent+"px",l.style.height="auto",l.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?l.firstChild.style.fontVariant="small-caps":l.firstChild.style.fontFamily=kC[n.fontFamily])}}},r.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),!(typeof A.default.WebVTT!="function"||t.every(function(_){return!_.activeCues}))){for(var n=[],s=0;s<t.length;++s)for(var o=t[s],u=0;u<o.activeCues.length;++u)n.push(o.activeCues[u]);A.default.WebVTT.processCues(A.default,n,this.el_);for(var l=0;l<t.length;++l){for(var c=t[l],f=0;f<c.activeCues.length;++f){var m=c.activeCues[f].displayState;ui(m,"vjs-text-track-cue"),ui(m,"vjs-text-track-cue-"+(c.language?c.language:l)),c.language&&Hr(m,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}},e}(V);V.registerComponent("TextTrackDisplay",PC);var IC=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),s=se("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),o=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},e}(V);V.registerComponent("LoadingSpinner",IC);var Pt=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(t,n,s){n===void 0&&(n={}),s===void 0&&(s={}),t="button",n=ke({className:this.buildCSSClass()},n),s=ke({type:"button"},s);var o=se(t,n,s);return o.appendChild(se("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},r.addChild=function(t,n){n===void 0&&(n={});var s=this.constructor.name;return ne.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),V.prototype.addChild.call(this,t,n)},r.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},r.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},r.handleKeyDown=function(t){if(te.default.isEventKey(t,"Space")||te.default.isEventKey(t,"Enter")){t.stopPropagation();return}a.prototype.handleKeyDown.call(this,t)},e}(Co);V.registerComponent("Button",Pt);var Bv=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.mouseused_=!1,n.on("mousedown",function(s){return n.handleMouseDown(s)}),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-big-play-button"},r.handleClick=function(t){var n=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;Vt(n),this.player_.tech(!0)&&!((ma||pa)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),u=o&&o.getChild("playToggle");if(!u){this.player_.tech(!0).focus();return}var l=function(){return u.focus()};aa(n)?n.then(l,function(){}):this.setTimeout(l,1)},r.handleKeyDown=function(t){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,t)},r.handleMouseDown=function(t){this.mouseused_=!0},e}(Pt);Bv.prototype.controlText_="Play Video";V.registerComponent("BigPlayButton",Bv);var OC=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.controlText(t&&t.controlText||n.localize("Close")),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},r.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},r.handleKeyDown=function(t){te.default.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,t)},e}(Pt);V.registerComponent("CloseButton",OC);var Uv=function(a){q(e,a);function e(i,t){var n;return t===void 0&&(t={}),n=a.call(this,i,t)||this,t.replay=t.replay===void 0||t.replay,n.on(i,"play",function(s){return n.handlePlay(s)}),n.on(i,"pause",function(s){return n.handlePause(s)}),t.replay&&n.on(i,"ended",function(s){return n.handleEnded(s)}),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},r.handleClick=function(t){this.player_.paused()?Vt(this.player_.play()):this.player_.pause()},r.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},r.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},r.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},r.handleEnded=function(t){var n=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return n.handleSeeked(s)})},e}(Pt);Uv.prototype.controlText_="Play";V.registerComponent("PlayToggle",Uv);var jv=function(e,r){e=e<0?0:e;var i=Math.floor(e%60),t=Math.floor(e/60%60),n=Math.floor(e/3600),s=Math.floor(r/60%60),o=Math.floor(r/3600);return(isNaN(e)||e===1/0)&&(n=t=i="-"),n=n>0||o>0?n+":":"",t=((n||s>=10)&&t<10?"0"+t:t)+":",i=i<10?"0"+i:i,n+t+i},Bc=jv;function LC(a){Bc=a}function RC(){Bc=jv}function qr(a,e){return e===void 0&&(e=a),Bc(a,e)}var Qr=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.on(i,["timeupdate","ended"],function(s){return n.updateContent(s)}),n.updateTextNode_(),n}var r=e.prototype;return r.createEl=function(){var t=this.buildCSSClass(),n=a.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),s=se("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xA0"},{role:"presentation"});return n.appendChild(s),this.contentEl_=se("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},r.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},r.updateTextNode_=function(t){var n=this;t===void 0&&(t=0),t=qr(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!!n.contentEl_){var s=n.textNode_;s&&n.contentEl_.firstChild!==s&&(s=null,ne.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),n.textNode_=W.default.createTextNode(n.formattedTime_),n.textNode_&&(s?n.contentEl_.replaceChild(n.textNode_,s):n.contentEl_.appendChild(n.textNode_))}}))},r.updateContent=function(t){},e}(V);Qr.prototype.labelText_="Time";Qr.prototype.controlText_="Time";V.registerComponent("TimeDisplay",Qr);var Uc=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-current-time"},r.updateContent=function(t){var n;this.player_.ended()?n=this.player_.duration():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)},e}(Qr);Uc.prototype.labelText_="Current Time";Uc.prototype.controlText_="Current Time";V.registerComponent("CurrentTimeDisplay",Uc);var jc=function(a){q(e,a);function e(i,t){var n;n=a.call(this,i,t)||this;var s=function(u){return n.updateContent(u)};return n.on(i,"durationchange",s),n.on(i,"loadstart",s),n.on(i,"loadedmetadata",s),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-duration"},r.updateContent=function(t){var n=this.player_.duration();this.updateTextNode_(n)},e}(Qr);jc.prototype.labelText_="Duration";jc.prototype.controlText_="Duration";V.registerComponent("DurationDisplay",jc);var MC=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var t=a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=a.prototype.createEl.call(this,"div"),s=a.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(s),t.appendChild(n),t},e}(V);V.registerComponent("TimeDivider",MC);var Hc=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.on(i,"durationchange",function(s){return n.updateContent(s)}),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-remaining-time"},r.createEl=function(){var t=a.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&t.insertBefore(se("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},r.updateContent=function(t){if(typeof this.player_.duration()=="number"){var n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}},e}(Qr);Hc.prototype.labelText_="Remaining Time";Hc.prototype.controlText_="Remaining Time";V.registerComponent("RemainingTimeDisplay",Hc);var NC=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.updateShowing(),n.on(n.player(),"durationchange",function(s){return n.updateShowing(s)}),n}var r=e.prototype;return r.createEl=function(){var t=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=se("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(se("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xA0"})),this.contentEl_.appendChild(W.default.createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},r.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},r.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},e}(V);V.registerComponent("LiveDisplay",NC);var Hv=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.updateLiveEdgeStatus(),n.player_.liveTracker&&(n.updateLiveEdgeStatusHandler_=function(s){return n.updateLiveEdgeStatus(s)},n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatusHandler_)),n}var r=e.prototype;return r.createEl=function(){var t=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=se("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},r.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},r.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},r.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,a.prototype.dispose.call(this)},e}(Pt);Hv.prototype.controlText_="Seek to live, currently playing live";V.registerComponent("SeekToLive",Hv);var wo=function(e,r,i){return e=Number(e),Math.min(i,Math.max(r,isNaN(e)?r:e))},Vc=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.handleMouseDown_=function(s){return n.handleMouseDown(s)},n.handleMouseUp_=function(s){return n.handleMouseUp(s)},n.handleKeyDown_=function(s){return n.handleKeyDown(s)},n.handleClick_=function(s){return n.handleClick(s)},n.handleMouseMove_=function(s){return n.handleMouseMove(s)},n.update_=function(s){return n.update(s)},n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}var r=e.prototype;return r.enabled=function(){return this.enabled_},r.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},r.disable=function(){if(!!this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},r.createEl=function(t,n,s){return n===void 0&&(n={}),s===void 0&&(s={}),n.className=n.className+" vjs-slider",n=ke({tabIndex:0},n),s=ke({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),a.prototype.createEl.call(this,t,n,s)},r.handleMouseDown=function(t){var n=this.bar.el_.ownerDocument;t.type==="mousedown"&&t.preventDefault(),t.type==="touchstart"&&!hi&&t.preventDefault(),gv(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)},r.handleMouseMove=function(t){},r.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;vv(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},r.update=function(){var t=this;if(!(!this.el_||!this.bar)){var n=this.getProgress();return n===this.progress_||(this.progress_=n,this.requestNamedAnimationFrame("Slider#update",function(){var s=t.vertical()?"height":"width";t.bar.el().style[s]=(n*100).toFixed(2)+"%"})),n}},r.getProgress=function(){return Number(wo(this.getPercent(),0,1).toFixed(4))},r.calculateDistance=function(t){var n=Do(this.el_,t);return this.vertical()?n.y:n.x},r.handleKeyDown=function(t){te.default.isEventKey(t,"Left")||te.default.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):te.default.isEventKey(t,"Right")||te.default.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,t)},r.handleClick=function(t){t.stopPropagation(),t.preventDefault()},r.vertical=function(t){if(t===void 0)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(V);V.registerComponent("Slider",Vc);var Ql=function(e,r){return wo(e/r*100,0,100).toFixed(2)+"%"},BC=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.partEls_=[],n.on(i,"progress",function(s){return n.update(s)}),n}var r=e.prototype;return r.createEl=function(){var t=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=se("span",{className:"vjs-control-text"}),s=se("span",{textContent:this.localize("Loaded")}),o=W.default.createTextNode(": ");return this.percentageEl_=se("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(s),n.appendChild(o),n.appendChild(this.percentageEl_),t},r.dispose=function(){this.partEls_=null,this.percentageEl_=null,a.prototype.dispose.call(this)},r.update=function(t){var n=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=n.player_.liveTracker,o=n.player_.buffered(),u=s&&s.isLive()?s.seekableEnd():n.player_.duration(),l=n.player_.bufferedEnd(),c=n.partEls_,f=Ql(l,u);n.percent_!==f&&(n.el_.style.width=f,er(n.percentageEl_,f),n.percent_=f);for(var m=0;m<o.length;m++){var _=o.start(m),x=o.end(m),b=c[m];b||(b=n.el_.appendChild(se()),c[m]=b),!(b.dataset.start===_&&b.dataset.end===x)&&(b.dataset.start=_,b.dataset.end=x,b.style.left=Ql(_,l),b.style.width=Ql(x-_,l))}for(var T=c.length;T>o.length;T--)n.el_.removeChild(c[T-1]);c.length=o.length})},e}(V);V.registerComponent("LoadProgressBar",BC);var UC=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.update=di(Ce(ee(n),n.update),It),n}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},r.update=function(t,n,s){var o=da(this.el_),u=Vr(this.player_.el()),l=t.width*n;if(!(!u||!o)){var c=t.left-u.left+l,f=t.width-l+(u.right-t.right),m=o.width/2;c<m?m+=m-c:f<m&&(m=f),m<0?m=0:m>o.width&&(m=o.width),m=Math.round(m),this.el_.style.right="-"+m+"px",this.write(s)}},r.write=function(t){er(this.el_,t)},r.updateTime=function(t,n,s,o){var u=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var l,c=u.player_.duration();if(u.player_.liveTracker&&u.player_.liveTracker.isLive()){var f=u.player_.liveTracker.liveWindow(),m=f-n*f;l=(m<1?"":"-")+qr(m,f)}else l=qr(s,c);u.update(t,n,l),o&&o()})},e}(V);V.registerComponent("TimeTooltip",UC);var $c=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.update=di(Ce(ee(n),n.update),It),n}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},r.update=function(t,n){var s=this.getChild("timeTooltip");if(!!s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(t,n,o)}},e}(V);$c.prototype.options_={children:[]};!nt&&!fi&&$c.prototype.options_.children.push("timeTooltip");V.registerComponent("PlayProgressBar",$c);var Vv=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.update=di(Ce(ee(n),n.update),It),n}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(t,n){var s=this,o=n*this.player_.duration();this.getChild("timeTooltip").updateTime(t,n,o,function(){s.el_.style.left=t.width*n+"px"})},e}(V);Vv.prototype.options_={children:["timeTooltip"]};V.registerComponent("MouseTimeDisplay",Vv);var zs=5,yg=12,Wc=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.setEventHandlers_(),n}var r=e.prototype;return r.setEventHandlers_=function(){var t=this;this.update_=Ce(this,this.update),this.update=di(this.update_,It),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(n){return t.enableInterval_(n)},this.disableIntervalHandler_=function(n){return t.disableInterval_(n)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in W.default&&"visibilityState"in W.default&&this.on(W.default,"visibilitychange",this.toggleVisibility_)},r.toggleVisibility_=function(t){W.default.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},r.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,It))},r.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"||!this.updateInterval||(this.clearInterval(this.updateInterval),this.updateInterval=null)},r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},r.update=function(t){var n=this;if(W.default.visibilityState!=="hidden"){var s=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),u=n.player_.liveTracker,l=n.player_.duration();u&&u.isLive()&&(l=n.player_.liveTracker.liveCurrentTime()),n.percent_!==s&&(n.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),n.percent_=s),(n.currentTime_!==o||n.duration_!==l)&&(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[qr(o,l),qr(l,l)],"{1} of {2}")),n.currentTime_=o,n.duration_=l),n.bar&&n.bar.update(Vr(n.el()),n.getProgress())}),s}},r.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},r.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},r.getPercent=function(){var t=this.getCurrentTime_(),n,s=this.player_.liveTracker;return s&&s.isLive()?(n=(t-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(n=1)):n=t/this.player_.duration(),n},r.handleMouseDown=function(t){!fa(t)||(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,t))},r.handleMouseMove=function(t,n){if(n===void 0&&(n=!1),!!fa(t)){!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,o=this.calculateDistance(t),u=this.player_.liveTracker;if(!u||!u.isLive())s=o*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(o>=.99){u.seekToLiveEdge();return}var l=u.seekableStart(),c=u.liveCurrentTime();if(s=l+o*u.liveWindow(),s>=c&&(s=c),s<=l&&(s=l+.1),s===1/0)return}this.userSeek_(s)}},r.enable=function(){a.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.show()},r.disable=function(){a.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");!t||t.hide()},r.handleMouseUp=function(t){a.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Vt(this.player_.play()):this.update_()},r.stepForward=function(){this.userSeek_(this.player_.currentTime()+zs)},r.stepBack=function(){this.userSeek_(this.player_.currentTime()-zs)},r.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},r.handleKeyDown=function(t){var n=this.player_.liveTracker;if(te.default.isEventKey(t,"Space")||te.default.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(te.default.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(te.default.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test((0,te.default)(t))){t.preventDefault(),t.stopPropagation();var s=(te.default.codes[(0,te.default)(t)]-te.default.codes[0])*10/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else te.default.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-zs*yg)):te.default.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+zs*yg)):a.prototype.handleKeyDown.call(this,t)},r.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in W.default&&"visibilityState"in W.default&&this.off(W.default,"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},e}(Vc);Wc.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!nt&&!fi&&Wc.prototype.options_.children.splice(1,0,"mouseTimeDisplay");V.registerComponent("SeekBar",Wc);var $v=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.handleMouseMove=di(Ce(ee(n),n.handleMouseMove),It),n.throttledHandleMouseSeek=di(Ce(ee(n),n.handleMouseSeek),It),n.handleMouseUpHandler_=function(s){return n.handleMouseUp(s)},n.handleMouseDownHandler_=function(s){return n.handleMouseDown(s)},n.enable(),n}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.handleMouseMove=function(t){var n=this.getChild("seekBar");if(!!n){var s=n.getChild("playProgressBar"),o=n.getChild("mouseTimeDisplay");if(!(!s&&!o)){var u=n.el(),l=da(u),c=Do(u,t).x;c=wo(c,0,1),o&&o.update(l,c),s&&s.update(l,n.getProgress())}}},r.handleMouseSeek=function(t){var n=this.getChild("seekBar");n&&n.handleMouseMove(t)},r.enabled=function(){return this.enabled_},r.disable=function(){if(this.children().forEach(function(n){return n.disable&&n.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&Vt(this.player_.play())}},r.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},r.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},r.handleMouseDown=function(t){var n=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(t),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(t){var n=this.getChild("seekBar");n&&n.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},e}(V);$v.prototype.options_={children:["seekBar"]};V.registerComponent("ProgressControl",$v);var Wv=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.on(i,["enterpictureinpicture","leavepictureinpicture"],function(s){return n.handlePictureInPictureChange(s)}),n.on(i,["disablepictureinpicturechanged","loadedmetadata"],function(s){return n.handlePictureInPictureEnabledChange(s)}),n.on(i,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var s=i.currentType().substring(0,5)==="audio";s||i.audioPosterMode()||i.audioOnlyMode()?(i.isInPictureInPicture()&&i.exitPictureInPicture(),n.hide()):n.show()}),n.disable(),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},r.handlePictureInPictureEnabledChange=function(){W.default.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},r.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},r.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Pt);Wv.prototype.controlText_="Picture-in-Picture";V.registerComponent("PictureInPictureToggle",Wv);var qv=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.on(i,"fullscreenchange",function(s){return n.handleFullscreenChange(s)}),W.default[i.fsApi_.fullscreenEnabled]===!1&&n.disable(),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},r.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},r.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Pt);qv.prototype.controlText_="Fullscreen";V.registerComponent("FullscreenToggle",qv);var jC=function(e,r){r.tech_&&!r.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(r,"loadstart",function(){r.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},HC=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){var t=a.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},e}(V);V.registerComponent("VolumeLevel",HC);var VC=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.update=di(Ce(ee(n),n.update),It),n}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},r.update=function(t,n,s,o){if(!s){var u=Vr(this.el_),l=Vr(this.player_.el()),c=t.width*n;if(!l||!u)return;var f=t.left-l.left+c,m=t.width-c+(l.right-t.right),_=u.width/2;f<_?_+=_-f:m<_&&(_=m),_<0?_=0:_>u.width&&(_=u.width),this.el_.style.right="-"+_+"px"}this.write(o+"%")},r.write=function(t){er(this.el_,t)},r.updateVolume=function(t,n,s,o,u){var l=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){l.update(t,n,s,o.toFixed(0)),u&&u()})},e}(V);V.registerComponent("VolumeLevelTooltip",VC);var zv=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.update=di(Ce(ee(n),n.update),It),n}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},r.update=function(t,n,s){var o=this,u=100*n;this.getChild("volumeLevelTooltip").updateVolume(t,n,s,u,function(){s?o.el_.style.bottom=t.height*n+"px":o.el_.style.left=t.width*n+"px"})},e}(V);zv.prototype.options_={children:["volumeLevelTooltip"]};V.registerComponent("MouseVolumeLevelDisplay",zv);var Ao=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.on("slideractive",function(s){return n.updateLastVolume_(s)}),n.on(i,"volumechange",function(s){return n.updateARIAAttributes(s)}),i.ready(function(){return n.updateARIAAttributes()}),n}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},r.handleMouseDown=function(t){!fa(t)||a.prototype.handleMouseDown.call(this,t)},r.handleMouseMove=function(t){var n=this.getChild("mouseVolumeLevelDisplay");if(n){var s=this.el(),o=Vr(s),u=this.vertical(),l=Do(s,t);l=u?l.y:l.x,l=wo(l,0,1),n.update(o,l,u)}!fa(t)||(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},r.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},r.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},r.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},r.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},r.updateARIAAttributes=function(t){var n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")},r.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},r.updateLastVolume_=function(){var t=this,n=this.player_.volume();this.one("sliderinactive",function(){t.player_.volume()===0&&t.player_.lastVolume_(n)})},e}(Vc);Ao.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!nt&&!fi&&Ao.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Ao.prototype.playerEvent="volumechange";V.registerComponent("VolumeBar",Ao);var Gv=function(a){q(e,a);function e(i,t){var n;return t===void 0&&(t={}),t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||la(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),n=a.call(this,i,t)||this,jC(ee(n),i),n.throttledHandleMouseMove=di(Ce(ee(n),n.handleMouseMove),It),n.handleMouseUpHandler_=function(s){return n.handleMouseUp(s)},n.on("mousedown",function(s){return n.handleMouseDown(s)}),n.on("touchstart",function(s){return n.handleMouseDown(s)}),n.on("mousemove",function(s){return n.handleMouseMove(s)}),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}var r=e.prototype;return r.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},r.handleMouseDown=function(t){var n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},r.handleMouseUp=function(t){var n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)},r.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},e}(V);Gv.prototype.options_={children:["volumeBar"]};V.registerComponent("VolumeControl",Gv);var $C=function(e,r){r.tech_&&!r.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(r,"loadstart",function(){r.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},Kv=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,$C(ee(n),i),n.on(i,["loadstart","volumechange"],function(s){return n.update(s)}),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},r.handleClick=function(t){var n=this.player_.volume(),s=this.player_.lastVolume_();if(n===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},r.update=function(t){this.updateIcon_(),this.updateControlText_()},r.updateIcon_=function(){var t=this.player_.volume(),n=3;nt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),t===0||this.player_.muted()?n=0:t<.33?n=1:t<.67&&(n=2);for(var s=0;s<4;s++)ga(this.el_,"vjs-vol-"+s);ui(this.el_,"vjs-vol-"+n)},r.updateControlText_=function(){var t=this.player_.muted()||this.player_.volume()===0,n=t?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)},e}(Pt);Kv.prototype.controlText_="Mute";V.registerComponent("MuteToggle",Kv);var Xv=function(a){q(e,a);function e(i,t){var n;return t===void 0&&(t={}),typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||la(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),n=a.call(this,i,t)||this,n.handleKeyPressHandler_=function(s){return n.handleKeyPress(s)},n.on(i,["loadstart"],function(s){return n.volumePanelState_(s)}),n.on(n.muteToggle,"keyup",function(s){return n.handleKeyPress(s)}),n.on(n.volumeControl,"keyup",function(s){return n.handleVolumeControlKeyUp(s)}),n.on("keydown",function(s){return n.handleKeyPress(s)}),n.on("mouseover",function(s){return n.handleMouseOver(s)}),n.on("mouseout",function(s){return n.handleMouseOut(s)}),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}var r=e.prototype;return r.sliderActive_=function(){this.addClass("vjs-slider-active")},r.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},r.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},r.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},r.handleVolumeControlKeyUp=function(t){te.default.isEventKey(t,"Esc")&&this.muteToggle.focus()},r.handleMouseOver=function(t){this.addClass("vjs-hover"),vt(W.default,"keyup",this.handleKeyPressHandler_)},r.handleMouseOut=function(t){this.removeClass("vjs-hover"),Ke(W.default,"keyup",this.handleKeyPressHandler_)},r.handleKeyPress=function(t){te.default.isEventKey(t,"Esc")&&this.handleMouseOut()},e}(V);Xv.prototype.options_={children:["muteToggle","volumeControl"]};V.registerComponent("VolumePanel",Xv);var Yv=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,t&&(n.menuButton_=t.menuButton),n.focusedChild_=-1,n.on("keydown",function(s){return n.handleKeyDown(s)}),n.boundHandleBlur_=function(s){return n.handleBlur(s)},n.boundHandleTapClick_=function(s){return n.handleTapClick(s)},n}var r=e.prototype;return r.addEventListenerForItem=function(t){t instanceof V&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},r.removeEventListenerForItem=function(t){t instanceof V&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},r.removeChild=function(t){typeof t=="string"&&(t=this.getChild(t)),this.removeEventListenerForItem(t),a.prototype.removeChild.call(this,t)},r.addItem=function(t){var n=this.addChild(t);n&&this.addEventListenerForItem(n)},r.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=se(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),vt(n,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),n},r.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},r.handleBlur=function(t){var n=t.relatedTarget||W.default.activeElement;if(!this.children().some(function(o){return o.el()===n})){var s=this.menuButton_;s&&s.buttonPressed_&&n!==s.el().firstChild&&s.unpressButton()}},r.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var n=this.children();if(!Array.isArray(n))return;var s=n.filter(function(o){return o.el()===t.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},r.handleKeyDown=function(t){te.default.isEventKey(t,"Left")||te.default.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(te.default.isEventKey(t,"Right")||te.default.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},r.stepForward=function(){var t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_+1),this.focus(t)},r.stepBack=function(){var t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_-1),this.focus(t)},r.focus=function(t){t===void 0&&(t=0);var n=this.children().slice(),s=n.length&&n[0].hasClass("vjs-menu-title");s&&n.shift(),n.length>0&&(t<0?t=0:t>=n.length&&(t=n.length-1),this.focusedChild_=t,n[t].el_.focus())},e}(V);V.registerComponent("Menu",Yv);var qc=function(a){q(e,a);function e(i,t){var n;t===void 0&&(t={}),n=a.call(this,i,t)||this,n.menuButton_=new Pt(i,t),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var s=Pt.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+s,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0;var o=function(l){return n.handleClick(l)};return n.handleMenuKeyUp_=function(u){return n.handleMenuKeyUp(u)},n.on(n.menuButton_,"tap",o),n.on(n.menuButton_,"click",o),n.on(n.menuButton_,"keydown",function(u){return n.handleKeyDown(u)}),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),vt(W.default,"keyup",n.handleMenuKeyUp_)}),n.on("mouseleave",function(u){return n.handleMouseLeave(u)}),n.on("keydown",function(u){return n.handleSubmenuKeyDown(u)}),n}var r=e.prototype;return r.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},r.createMenu=function(){var t=new Yv(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var n=se("li",{className:"vjs-menu-title",textContent:Le(this.options_.title),tabIndex:-1}),s=new V(this.player_,{el:n});t.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)t.addItem(this.items[o]);return t},r.createItems=function(){},r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},r.buildWrapperCSSClass=function(){var t="vjs-menu-button";this.options_.inline===!0?t+="-inline":t+="-popup";var n=Pt.prototype.buildCSSClass();return"vjs-menu-button "+t+" "+n+" "+a.prototype.buildCSSClass.call(this)},r.buildCSSClass=function(){var t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+a.prototype.buildCSSClass.call(this)},r.controlText=function(t,n){return n===void 0&&(n=this.menuButton_.el()),this.menuButton_.controlText(t,n)},r.dispose=function(){this.handleMouseLeave(),a.prototype.dispose.call(this)},r.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},r.handleMouseLeave=function(t){this.removeClass("vjs-hover"),Ke(W.default,"keyup",this.handleMenuKeyUp_)},r.focus=function(){this.menuButton_.focus()},r.blur=function(){this.menuButton_.blur()},r.handleKeyDown=function(t){te.default.isEventKey(t,"Esc")||te.default.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),te.default.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(te.default.isEventKey(t,"Up")||te.default.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},r.handleMenuKeyUp=function(t){(te.default.isEventKey(t,"Esc")||te.default.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},r.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},r.handleSubmenuKeyDown=function(t){(te.default.isEventKey(t,"Esc")||te.default.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),te.default.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},r.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),nt&&dv())return;this.menu.focus()}},r.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},r.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},r.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(V);V.registerComponent("MenuButton",qc);var zc=function(a){q(e,a);function e(r,i){var t,n=i.tracks;if(t=a.call(this,r,i)||this,t.items.length<=1&&t.hide(),!n)return ee(t);var s=Ce(ee(t),t.update);return n.addEventListener("removetrack",s),n.addEventListener("addtrack",s),n.addEventListener("labelchange",s),t.player_.on("ready",s),t.player_.on("dispose",function(){n.removeEventListener("removetrack",s),n.removeEventListener("addtrack",s),n.removeEventListener("labelchange",s)}),t}return e}(qc);V.registerComponent("TrackButton",zc);var WC=["Tab","Esc","Up","Down","Right","Left"],ya=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.selectable=t.selectable,n.isSelected_=t.selected||!1,n.multiSelectable=t.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}var r=e.prototype;return r.createEl=function(t,n,s){this.nonIconControl=!0;var o=a.prototype.createEl.call(this,"li",ke({className:"vjs-menu-item",tabIndex:-1},n),s);return o.replaceChild(se("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},r.handleKeyDown=function(t){WC.some(function(n){return te.default.isEventKey(t,n)})||a.prototype.handleKeyDown.call(this,t)},r.handleClick=function(t){this.selected(!0)},r.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(Co);V.registerComponent("MenuItem",ya);var _a=function(a){q(e,a);function e(i,t){var n,s=t.track,o=i.textTracks();t.label=s.label||s.language||"Unknown",t.selected=s.mode==="showing",n=a.call(this,i,t)||this,n.track=s,n.kinds=(t.kinds||[t.kind||n.track.kind]).filter(Boolean);var u=function(){for(var m=arguments.length,_=new Array(m),x=0;x<m;x++)_[x]=arguments[x];n.handleTracksChange.apply(ee(n),_)},l=function(){for(var m=arguments.length,_=new Array(m),x=0;x<m;x++)_[x]=arguments[x];n.handleSelectedLanguageChange.apply(ee(n),_)};if(i.on(["loadstart","texttrackchange"],u),o.addEventListener("change",u),o.addEventListener("selectedlanguagechange",l),n.on("dispose",function(){i.off(["loadstart","texttrackchange"],u),o.removeEventListener("change",u),o.removeEventListener("selectedlanguagechange",l)}),o.onchange===void 0){var c;n.on(["tap","click"],function(){if(typeof A.default.Event!="object")try{c=new A.default.Event("change")}catch{}c||(c=W.default.createEvent("Event"),c.initEvent("change",!0,!0)),o.dispatchEvent(c)})}return n.handleTracksChange(),n}var r=e.prototype;return r.handleClick=function(t){var n=this.track,s=this.player_.textTracks();if(a.prototype.handleClick.call(this,t),!!s)for(var o=0;o<s.length;o++){var u=s[o];this.kinds.indexOf(u.kind)!==-1&&(u===n?u.mode!=="showing"&&(u.mode="showing"):u.mode!=="disabled"&&(u.mode="disabled"))}},r.handleTracksChange=function(t){var n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)},r.handleSelectedLanguageChange=function(t){if(this.track.mode==="showing"){var n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},r.dispose=function(){this.track=null,a.prototype.dispose.call(this)},e}(ya);V.registerComponent("TextTrackMenuItem",_a);var Qv=function(a){q(e,a);function e(i,t){return t.track={player:i,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,a.call(this,i,t)||this}var r=e.prototype;return r.handleTracksChange=function(t){for(var n=this.player().textTracks(),s=!0,o=0,u=n.length;o<u;o++){var l=n[o];if(this.options_.kinds.indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},r.handleSelectedLanguageChange=function(t){for(var n=this.player().textTracks(),s=!0,o=0,u=n.length;o<u;o++){var l=n[o];if(["captions","descriptions","subtitles"].indexOf(l.kind)>-1&&l.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(_a);V.registerComponent("OffTextTrackMenuItem",Qv);var Jr=function(a){q(e,a);function e(i,t){return t===void 0&&(t={}),t.tracks=i.textTracks(),a.call(this,i,t)||this}var r=e.prototype;return r.createItems=function(t,n){t===void 0&&(t=[]),n===void 0&&(n=_a);var s;this.label_&&(s=this.label_+" off"),t.push(new Qv(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var u=0;u<o.length;u++){var l=o[u];if(this.kinds_.indexOf(l.kind)>-1){var c=new n(this.player_,{track:l,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass("vjs-"+l.kind+"-menu-item"),t.push(c)}}return t},e}(zc);V.registerComponent("TextTrackButton",Jr);var Jv=function(a){q(e,a);function e(i,t){var n,s=t.track,o=t.cue,u=i.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=o.text,t.selected=o.startTime<=u&&u<o.endTime,n=a.call(this,i,t)||this,n.track=s,n.cue=o,n}var r=e.prototype;return r.handleClick=function(t){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(ya);V.registerComponent("ChaptersTrackMenuItem",Jv);var Gc=function(a){q(e,a);function e(i,t,n){var s;return s=a.call(this,i,t,n)||this,s.selectCurrentItem_=function(){s.items.forEach(function(o){o.selected(s.track_.activeCues[0]===o.cue)})},s}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},r.update=function(t){if(!(t&&t.track&&t.track.kind!=="chapters")){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),a.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&a.prototype.update.call(this)}},r.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},r.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],n=t.length-1;n>=0;n--){var s=t[n];if(s.kind===this.kind_)return s}},r.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Le(this.kind_))},r.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},r.createItems=function(){var t=[];if(!this.track_)return t;var n=this.track_.cues;if(!n)return t;for(var s=0,o=n.length;s<o;s++){var u=n[s],l=new Jv(this.player_,{track:this.track_,cue:u});t.push(l)}return t},e}(Jr);Gc.prototype.kind_="chapters";Gc.prototype.controlText_="Chapters";V.registerComponent("ChaptersButton",Gc);var Kc=function(a){q(e,a);function e(i,t,n){var s;s=a.call(this,i,t,n)||this;var o=i.textTracks(),u=Ce(ee(s),s.handleTracksChange);return o.addEventListener("change",u),s.on("dispose",function(){o.removeEventListener("change",u)}),s}var r=e.prototype;return r.handleTracksChange=function(t){for(var n=this.player().textTracks(),s=!1,o=0,u=n.length;o<u;o++){var l=n[o];if(l.kind!==this.kind_&&l.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},r.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},e}(Jr);Kc.prototype.kind_="descriptions";Kc.prototype.controlText_="Descriptions";V.registerComponent("DescriptionsButton",Kc);var Xc=function(a){q(e,a);function e(i,t,n){return a.call(this,i,t,n)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},e}(Jr);Xc.prototype.kind_="subtitles";Xc.prototype.controlText_="Subtitles";V.registerComponent("SubtitlesButton",Xc);var Yc=function(a){q(e,a);function e(i,t){var n;return t.track={player:i,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",n=a.call(this,i,t)||this,n.addClass("vjs-texttrack-settings"),n.controlText(", opens "+t.kind+" settings dialog"),n}var r=e.prototype;return r.handleClick=function(t){this.player().getChild("textTrackSettings").open()},e}(_a);V.registerComponent("CaptionSettingsMenuItem",Yc);var Qc=function(a){q(e,a);function e(i,t,n){return a.call(this,i,t,n)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new Yc(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,t)},e}(Jr);Qc.prototype.kind_="captions";Qc.prototype.controlText_="Captions";V.registerComponent("CaptionsButton",Qc);var Zv=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(t,n,s){var o=a.prototype.createEl.call(this,t,n,s),u=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(u.appendChild(se("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(se("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e}(_a);V.registerComponent("SubsCapsMenuItem",Zv);var Jc=function(a){q(e,a);function e(i,t){var n;return t===void 0&&(t={}),n=a.call(this,i,t)||this,n.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(Le(n.label_)),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){var t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new Yc(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=a.prototype.createItems.call(this,t,Zv),t},e}(Jr);Jc.prototype.kinds_=["captions","subtitles"];Jc.prototype.controlText_="Subtitles";V.registerComponent("SubsCapsButton",Jc);var e0=function(a){q(e,a);function e(i,t){var n,s=t.track,o=i.audioTracks();t.label=s.label||s.language||"Unknown",t.selected=s.enabled,n=a.call(this,i,t)||this,n.track=s,n.addClass("vjs-"+s.kind+"-menu-item");var u=function(){for(var c=arguments.length,f=new Array(c),m=0;m<c;m++)f[m]=arguments[m];n.handleTracksChange.apply(ee(n),f)};return o.addEventListener("change",u),n.on("dispose",function(){o.removeEventListener("change",u)}),n}var r=e.prototype;return r.createEl=function(t,n,s){var o=a.prototype.createEl.call(this,t,n,s),u=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(u.appendChild(se("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),u.appendChild(se("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},r.handleClick=function(t){if(a.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),s=0;s<n.length;s++){var o=n[s];o!==this.track&&(o.enabled=o===this.track)}},r.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(ya);V.registerComponent("AudioTrackMenuItem",e0);var t0=function(a){q(e,a);function e(i,t){return t===void 0&&(t={}),t.tracks=i.audioTracks(),a.call(this,i,t)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(t){t===void 0&&(t=[]),this.hideThreshold_=1;for(var n=this.player_.audioTracks(),s=0;s<n.length;s++){var o=n[s];t.push(new e0(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return t},e}(zc);t0.prototype.controlText_="Audio Track";V.registerComponent("AudioTrackButton",t0);var Zc=function(a){q(e,a);function e(i,t){var n,s=t.rate,o=parseFloat(s,10);return t.label=s,t.selected=o===i.playbackRate(),t.selectable=!0,t.multiSelectable=!1,n=a.call(this,i,t)||this,n.label=s,n.rate=o,n.on(i,"ratechange",function(u){return n.update(u)}),n}var r=e.prototype;return r.handleClick=function(t){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},r.update=function(t){this.selected(this.player().playbackRate()===this.rate)},e}(ya);Zc.prototype.contentElType="button";V.registerComponent("PlaybackRateMenuItem",Zc);var i0=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.menuButton_.el_.setAttribute("aria-describedby",n.labelElId_),n.updateVisibility(),n.updateLabel(),n.on(i,"loadstart",function(s){return n.updateVisibility(s)}),n.on(i,"ratechange",function(s){return n.updateLabel(s)}),n.on(i,"playbackrateschange",function(s){return n.handlePlaybackRateschange(s)}),n}var r=e.prototype;return r.createEl=function(){var t=a.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=se("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},r.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},r.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},r.createItems=function(){for(var t=this.playbackRates(),n=[],s=t.length-1;s>=0;s--)n.push(new Zc(this.player(),{rate:t[s]+"x"}));return n},r.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},r.handleClick=function(t){var n=this.player().playbackRate(),s=this.playbackRates(),o=s.indexOf(n),u=(o+1)%s.length;this.player().playbackRate(s[u])},r.handlePlaybackRateschange=function(t){this.update()},r.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},r.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},r.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},r.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(qc);i0.prototype.controlText_="Playback Rate";V.registerComponent("PlaybackRateMenuButton",i0);var r0=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},r.createEl=function(t,n,s){return t===void 0&&(t="div"),n===void 0&&(n={}),s===void 0&&(s={}),n.className||(n.className=this.buildCSSClass()),a.prototype.createEl.call(this,t,n,s)},e}(V);V.registerComponent("Spacer",r0);var qC=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xA0"})},e}(r0);V.registerComponent("CustomControlSpacer",qC);var ao=function(a){q(e,a);function e(){return a.apply(this,arguments)||this}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(V);ao.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in W.default&&ao.prototype.options_.children.splice(ao.prototype.options_.children.length-1,0,"pictureInPictureToggle");V.registerComponent("ControlBar",ao);var n0=function(a){q(e,a);function e(i,t){var n;return n=a.call(this,i,t)||this,n.on(i,"error",function(s){return n.open(s)}),n}var r=e.prototype;return r.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},r.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(Xr);n0.prototype.options_=ot({},Xr.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});V.registerComponent("ErrorDisplay",n0);var Jl="vjs-text-track-settings",_g=["#000","Black"],xg=["#00F","Blue"],Dg=["#0FF","Cyan"],Tg=["#0F0","Green"],bg=["#F0F","Magenta"],Eg=["#F00","Red"],Sg=["#FFF","White"],Cg=["#FF0","Yellow"],Zl=["1","Opaque"],ec=["0.5","Semi-Transparent"],wg=["0","Transparent"],Xi={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[_g,Sg,Eg,Tg,xg,Cg,bg,Dg]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Zl,ec,wg]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Sg,_g,Eg,Tg,xg,Cg,bg,Dg]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Zl,ec]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[wg,ec,Zl]}};Xi.windowColor.options=Xi.backgroundColor.options;function a0(a,e){if(e&&(a=e(a)),a&&a!=="none")return a}function zC(a,e){var r=a.options[a.options.selectedIndex].value;return a0(r,e)}function GC(a,e,r){if(!!e){for(var i=0;i<a.options.length;i++)if(a0(a.options[i].value,r)===e){a.selectedIndex=i;break}}}var KC=function(a){q(e,a);function e(i,t){var n;return t.temporary=!1,n=a.call(this,i,t)||this,n.updateDisplay=n.updateDisplay.bind(ee(n)),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=se("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),t.persistTextTrackSettings===void 0&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),Nr(Xi,function(s){n.on(n.$(s.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}var r=e.prototype;return r.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},r.createElSelect_=function(t,n,s){var o=this;n===void 0&&(n=""),s===void 0&&(s="label");var u=Xi[t],l=u.id.replace("%s",this.id_),c=[n,l].join(" ").trim();return["<"+s+' id="'+l+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(u.label),"</"+s+">",'<select aria-labelledby="'+c+'">'].concat(u.options.map(function(f){var m=l+"-"+f[1].replace(/\W+/g,"");return['<option id="'+m+'" value="'+f[0]+'" ','aria-labelledby="'+c+" "+m+'">',o.localize(f[1]),"</option>"].join("")})).concat("</select>").join("")},r.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},r.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},r.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},r.createElColors_=function(){return se("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},r.createElFont_=function(){return se("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},r.createElControls_=function(){var t=this.localize("restore all settings to the default values");return se("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},r.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},r.label=function(){return this.localize("Caption Settings Dialog")},r.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r.getValues=function(){var t=this;return NS(Xi,function(n,s,o){var u=zC(t.$(s.selector),s.parser);return u!==void 0&&(n[o]=u),n},{})},r.setValues=function(t){var n=this;Nr(Xi,function(s,o){GC(n.$(s.selector),t[o],s.parser)})},r.setDefaults=function(){var t=this;Nr(Xi,function(n){var s=n.hasOwnProperty("default")?n.default:0;t.$(n.selector).selectedIndex=s})},r.restoreSettings=function(){var t;try{t=JSON.parse(A.default.localStorage.getItem(Jl))}catch(n){ne.warn(n)}t&&this.setValues(t)},r.saveSettings=function(){if(!!this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?A.default.localStorage.setItem(Jl,JSON.stringify(t)):A.default.localStorage.removeItem(Jl)}catch(n){ne.warn(n)}}},r.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},r.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,n=t&&t.subsCapsButton,s=t&&t.captionsButton;n?n.focus():s&&s.focus()},e}(Xr);V.registerComponent("TextTrackSettings",KC);var XC=function(a){q(e,a);function e(i,t){var n,s=t.ResizeObserver||A.default.ResizeObserver;t.ResizeObserver===null&&(s=!1);var o=Se({createEl:!s,reportTouchActivity:!1},t);return n=a.call(this,i,o)||this,n.ResizeObserver=t.ResizeObserver||A.default.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=KS(function(){n.resizeHandler()},100,!1,ee(n)),s?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(i.el())):(n.loadListener_=function(){if(!(!n.el_||!n.el_.contentWindow)){var u=n.debouncedHandler_,l=n.unloadListener_=function(){Ke(this,"resize",u),Ke(this,"unload",l),l=null};vt(n.el_.contentWindow,"unload",l),vt(n.el_.contentWindow,"resize",u)}},n.one("load",n.loadListener_)),n}var r=e.prototype;return r.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},r.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},r.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},e}(V);V.registerComponent("ResizeManager",XC);var YC={trackingThreshold:20,liveTolerance:15},QC=function(a){q(e,a);function e(i,t){var n,s=Se(YC,t,{createEl:!1});return n=a.call(this,i,s)||this,n.handleVisibilityChange_=function(o){return n.handleVisibilityChange(o)},n.trackLiveHandler_=function(){return n.trackLive_()},n.handlePlay_=function(o){return n.handlePlay(o)},n.handleFirstTimeupdate_=function(o){return n.handleFirstTimeupdate(o)},n.handleSeeked_=function(o){return n.handleSeeked(o)},n.seekToLiveEdge_=function(o){return n.seekToLiveEdge(o)},n.reset_(),n.on(n.player_,"durationchange",function(o){return n.handleDurationchange(o)}),n.on(n.player_,"canplay",function(){return n.toggleTracking()}),ma&&"hidden"in W.default&&"visibilityState"in W.default&&n.on(W.default,"visibilitychange",n.handleVisibilityChange_),n}var r=e.prototype;return r.handleVisibilityChange=function(){this.player_.duration()===1/0&&(W.default.hidden?this.stopTracking():this.startTracking())},r.trackLive_=function(){var t=this.player_.seekable();if(!(!t||!t.length)){var n=Number(A.default.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),u=this.player_.currentTime(),l=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-u)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(l=!1),l!==this.behindLiveEdge_&&(this.behindLiveEdge_=l,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.toggleTracking()},r.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},r.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,It),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},r.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},r.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()},r.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},r.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},r.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},r.stopTracking=function(){!this.isTracking()||(this.reset_(),this.trigger("liveedgechange"))},r.seekableEnd=function(){for(var t=this.player_.seekable(),n=[],s=t?t.length:0;s--;)n.push(t.end(s));return n.length?n.sort()[n.length-1]:1/0},r.seekableStart=function(){for(var t=this.player_.seekable(),n=[],s=t?t.length:0;s--;)n.push(t.start(s));return n.length?n.sort()[0]:0},r.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},r.isLive=function(){return this.isTracking()},r.atLiveEdge=function(){return!this.behindLiveEdge()},r.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},r.pastSeekEnd=function(){var t=this.seekableEnd();return this.lastSeekEnd_!==-1&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.isTracking=function(){return typeof this.trackingInterval_=="number"},r.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},r.dispose=function(){this.off(W.default,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),a.prototype.dispose.call(this)},e}(V);V.registerComponent("LiveTracker",QC);var fc=function(e){var r=e.el();if(r.hasAttribute("src"))return e.triggerSourceset(r.src),!0;var i=e.$$("source"),t=[],n="";if(!i.length)return!1;for(var s=0;s<i.length;s++){var o=i[s].src;o&&t.indexOf(o)===-1&&t.push(o)}return t.length?(t.length===1&&(n=t[0]),e.triggerSourceset(n),!0):!1},JC=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var r=W.default.createElement(this.nodeName.toLowerCase());r.innerHTML=e;for(var i=W.default.createDocumentFragment();r.childNodes.length;)i.appendChild(r.childNodes[0]);return this.innerText="",A.default.Element.prototype.appendChild.call(this,i),this.innerHTML}}),s0=function(e,r){for(var i={},t=0;t<e.length&&(i=Object.getOwnPropertyDescriptor(e[t],r),!(i&&i.set&&i.get));t++);return i.enumerable=!0,i.configurable=!0,i},ZC=function(e){return s0([e.el(),A.default.HTMLMediaElement.prototype,A.default.Element.prototype,JC],"innerHTML")},Ag=function(e){var r=e.el();if(!r.resetSourceWatch_){var i={},t=ZC(e),n=function(o){return function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var f=o.apply(r,l);return fc(e),f}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){!r[s]||(i[s]=r[s],r[s]=n(i[s]))}),Object.defineProperty(r,"innerHTML",Se(t,{set:n(t.set)})),r.resetSourceWatch_=function(){r.resetSourceWatch_=null,Object.keys(i).forEach(function(s){r[s]=i[s]}),Object.defineProperty(r,"innerHTML",t)},e.one("sourceset",r.resetSourceWatch_)}},ew=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Ov(A.default.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return A.default.Element.prototype.setAttribute.call(this,"src",e),e}}),tw=function(e){return s0([e.el(),A.default.HTMLMediaElement.prototype,ew],"src")},iw=function(e){if(!!e.featuresSourceset){var r=e.el();if(!r.resetSourceset_){var i=tw(e),t=r.setAttribute,n=r.load;Object.defineProperty(r,"src",Se(i,{set:function(o){var u=i.set.call(r,o);return e.triggerSourceset(r.src),u}})),r.setAttribute=function(s,o){var u=t.call(r,s,o);return/src/i.test(s)&&e.triggerSourceset(r.src),u},r.load=function(){var s=n.call(r);return fc(e)||(e.triggerSourceset(""),Ag(e)),s},r.currentSrc?e.triggerSourceset(r.currentSrc):fc(e)||Ag(e),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=n,r.setAttribute=t,Object.defineProperty(r,"src",i),r.resetSourceWatch_&&r.resetSourceWatch_()}}}},ed=function(e,r,i,t){t===void 0&&(t=!0);var n=function(u){return Object.defineProperty(e,r,{value:u,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var u=i();return n(u),u}};return t&&(s.set=n),Object.defineProperty(e,r,s)},X=function(a){q(e,a);function e(i,t){var n;n=a.call(this,i,t)||this;var s=i.source,o=!1;if(n.featuresVideoFrameCallback=n.featuresVideoFrameCallback&&n.el_.tagName==="VIDEO",s&&(n.el_.currentSrc!==s.src||i.tag&&i.tag.initNetworkState_===3)?n.setSource(s):n.handleLateInit_(n.el_),i.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var u=n.el_.childNodes,l=u.length,c=[];l--;){var f=u[l],m=f.nodeName.toLowerCase();m==="track"&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(f),n.remoteTextTracks().addTrack(f.track),n.textTracks().addTrack(f.track),!o&&!n.el_.hasAttribute("crossorigin")&&So(f.src)&&(o=!0)):c.push(f))}for(var _=0;_<c.length;_++)n.el_.removeChild(c[_])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&o&&ne.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),n.restoreMetadataTracksInIOSNativePlayer_(),(jr||Fc||sv)&&i.nativeControlsForTouch===!0&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}var r=e.prototype;return r.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,a.prototype.dispose.call(this)},r.setupSourcesetHandling_=function(){iw(this)},r.restoreMetadataTracksInIOSNativePlayer_=function(){var t=this.textTracks(),n,s=function(){n=[];for(var l=0;l<t.length;l++){var c=t[l];c.kind==="metadata"&&n.push({track:c,storedMode:c.mode})}};s(),t.addEventListener("change",s),this.on("dispose",function(){return t.removeEventListener("change",s)});var o=function u(){for(var l=0;l<n.length;l++){var c=n[l];c.track.mode==="disabled"&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}t.removeEventListener("change",u)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",s),t.removeEventListener("change",o),t.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){t.removeEventListener("change",s),t.addEventListener("change",s),t.removeEventListener("change",o)})},r.overrideNative_=function(t,n){var s=this;if(n===this["featuresNative"+t+"Tracks"]){var o=t.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(u){var l=s.el()[o+"Tracks"];l.removeEventListener(u,s[o+"TracksListeners_"][u])}),this["featuresNative"+t+"Tracks"]=!n,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},r.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},r.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},r.proxyNativeTracksForType_=function(t){var n=this,s=Tt[t],o=this.el()[s.getterName],u=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var l={change:function(m){var _={type:"change",target:u,currentTarget:u,srcElement:u};u.trigger(_),t==="text"&&n[Wr.remoteText.getterName]().trigger(_)},addtrack:function(m){u.addTrack(m.track)},removetrack:function(m){u.removeTrack(m.track)}},c=function(){for(var m=[],_=0;_<u.length;_++){for(var x=!1,b=0;b<o.length;b++)if(o[b]===u[_]){x=!0;break}x||m.push(u[_])}for(;m.length;)u.removeTrack(m.shift())};this[s.getterName+"Listeners_"]=l,Object.keys(l).forEach(function(f){var m=l[f];o.addEventListener(f,m),n.on("dispose",function(_){return o.removeEventListener(f,m)})}),this.on("loadstart",c),this.on("dispose",function(f){return n.off("loadstart",c)})}},r.proxyNativeTracks_=function(){var t=this;Tt.names.forEach(function(n){t.proxyNativeTracksForType_(n)})},r.createEl=function(){var t=this.options_.tag;if(!t||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(t){var n=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(n,t),e.disposeMediaElement(t),t=n}else{t=W.default.createElement("video");var s=this.options_.tag&&ai(this.options_.tag),o=Se({},s);(!jr||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,pv(t,ke(o,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Hr(t,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var u=["loop","muted","playsinline","autoplay"],l=0;l<u.length;l++){var c=u[l],f=this.options_[c];typeof f<"u"&&(f?Hr(t,c,c):xo(t,c),t[c]=f)}return t},r.handleLateInit_=function(t){if(!(t.networkState===0||t.networkState===3)){if(t.readyState===0){var n=!1,s=function(){n=!0};this.on("loadstart",s);var o=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),n||this.trigger("loadstart")});return}var u=["loadstart"];u.push("loadedmetadata"),t.readyState>=2&&u.push("loadeddata"),t.readyState>=3&&u.push("canplay"),t.readyState>=4&&u.push("canplaythrough"),this.ready(function(){u.forEach(function(l){this.trigger(l)},this)})}},r.setScrubbing=function(t){this.isScrubbing_=t},r.scrubbing=function(){return this.isScrubbing_},r.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&_o?this.el_.fastSeek(t):this.el_.currentTime=t}catch(n){ne(n,"Video is not ready. (Video.js)")}},r.duration=function(){var t=this;if(this.el_.duration===1/0&&fi&&hi&&this.el_.currentTime===0){var n=function s(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",s))};return this.on("timeupdate",n),NaN}return this.el_.duration||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var n=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",n),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){t.off("webkitbeginfullscreen",s),t.off("webkitendfullscreen",n)})}},r.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var t=A.default.navigator&&A.default.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},r.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)Vt(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{t.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},r.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},r.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},r.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):a.prototype.requestVideoFrameCallback.call(this,t)},r.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):a.prototype.cancelVideoFrameCallback.call(this,t)},r.src=function(t){if(t===void 0)return this.el_.src;this.setSrc(t)},r.reset=function(){e.resetMediaElement(this.el_)},r.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},r.setControls=function(t){this.el_.controls=!!t},r.addTextTrack=function(t,n,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,s):a.prototype.addTextTrack.call(this,t,n,s)},r.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,t);var n=W.default.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},r.addRemoteTextTrack=function(t,n){var s=a.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},r.removeRemoteTextTrack=function(t){if(a.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),s=n.length;s--;)(t===n[s]||t===n[s].track)&&this.el().removeChild(n[s])},r.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),A.default.performance&&typeof A.default.performance.now=="function"?t.creationTime=A.default.performance.now():A.default.performance&&A.default.performance.timing&&typeof A.default.performance.timing.navigationStart=="number"&&(t.creationTime=A.default.Date.now()-A.default.performance.timing.navigationStart),t},e}(_e);ed(X,"TEST_VID",function(){if(!!zr()){var a=W.default.createElement("video"),e=W.default.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",a.appendChild(e),a}});X.isSupported=function(){try{X.TEST_VID.volume=.5}catch{return!1}return!!(X.TEST_VID&&X.TEST_VID.canPlayType)};X.canPlayType=function(a){return X.TEST_VID.canPlayType(a)};X.canPlaySource=function(a,e){return X.canPlayType(a.type)};X.canControlVolume=function(){try{var a=X.TEST_VID.volume;X.TEST_VID.volume=a/2+.1;var e=a!==X.TEST_VID.volume;return e&&nt?(A.default.setTimeout(function(){X&&X.prototype&&(X.prototype.featuresVolumeControl=a!==X.TEST_VID.volume)}),!1):e}catch{return!1}};X.canMuteVolume=function(){try{var a=X.TEST_VID.muted;return X.TEST_VID.muted=!a,X.TEST_VID.muted?Hr(X.TEST_VID,"muted","muted"):xo(X.TEST_VID,"muted","muted"),a!==X.TEST_VID.muted}catch{return!1}};X.canControlPlaybackRate=function(){if(fi&&hi&&uv<58)return!1;try{var a=X.TEST_VID.playbackRate;return X.TEST_VID.playbackRate=a/2+.1,a!==X.TEST_VID.playbackRate}catch{return!1}};X.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(W.default.createElement("video"),"src",{get:a,set:a}),Object.defineProperty(W.default.createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(W.default.createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(W.default.createElement("audio"),"innerHTML",{get:a,set:a})}catch{return!1}return!0};X.supportsNativeTextTracks=function(){return _o||nt&&hi};X.supportsNativeVideoTracks=function(){return!!(X.TEST_VID&&X.TEST_VID.videoTracks)};X.supportsNativeAudioTracks=function(){return!!(X.TEST_VID&&X.TEST_VID.audioTracks)};X.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var e=a[0],r=a[1];ed(X.prototype,e,function(){return X[r]()},!0)});X.prototype.featuresVolumeControl=X.canControlVolume();X.prototype.movingMediaElementInDOM=!nt;X.prototype.featuresFullscreenResize=!0;X.prototype.featuresProgressEvents=!0;X.prototype.featuresTimeupdateEvents=!0;X.prototype.featuresVideoFrameCallback=!!(X.TEST_VID&&X.TEST_VID.requestVideoFrameCallback);var so;X.patchCanPlayType=function(){Cc>=4&&!ov&&!hi&&(so=X.TEST_VID&&X.TEST_VID.constructor.prototype.canPlayType,X.TEST_VID.constructor.prototype.canPlayType=function(a){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return a&&e.test(a)?"maybe":so.call(this,a)})};X.unpatchCanPlayType=function(){var a=X.TEST_VID.constructor.prototype.canPlayType;return so&&(X.TEST_VID.constructor.prototype.canPlayType=so),a};X.patchCanPlayType();X.disposeMediaElement=function(a){if(!!a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),typeof a.load=="function"&&function(){try{a.load()}catch{}}()}};X.resetMediaElement=function(a){if(!!a){for(var e=a.querySelectorAll("source"),r=e.length;r--;)a.removeChild(e[r]);a.removeAttribute("src"),typeof a.load=="function"&&function(){try{a.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){X.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){X.prototype["set"+Le(a)]=function(e){this.el_[a]=e,e?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){X.prototype[a]=function(){return this.el_[a]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){X.prototype["set"+Le(a)]=function(e){this.el_[a]=e}});["pause","load","play"].forEach(function(a){X.prototype[a]=function(){return this.el_[a]()}});_e.withSourceHandlers(X);X.nativeSourceHandler={};X.nativeSourceHandler.canPlayType=function(a){try{return X.TEST_VID.canPlayType(a)}catch{return""}};X.nativeSourceHandler.canHandleSource=function(a,e){if(a.type)return X.nativeSourceHandler.canPlayType(a.type);if(a.src){var r=Mc(a.src);return X.nativeSourceHandler.canPlayType("video/"+r)}return""};X.nativeSourceHandler.handleSource=function(a,e,r){e.setSrc(a.src)};X.nativeSourceHandler.dispose=function(){};X.registerSourceHandler(X.nativeSourceHandler);_e.registerTech("Html5",X);var o0=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],tc={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},hc=["tiny","xsmall","small","medium","large","xlarge","huge"],Zs={};hc.forEach(function(a){var e=a.charAt(0)==="x"?"x-"+a.substring(1):a;Zs[a]="vjs-layout-"+e});var rw={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Me=function(a){q(e,a);function e(i,t,n){var s;if(i.id=i.id||t.id||"vjs_video_"+pi(),t=ke(e.getTagSettings(i),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if(typeof i.closest=="function"){var o=i.closest("[lang]");o&&o.getAttribute&&(t.language=o.getAttribute("lang"))}else for(var u=i;u&&u.nodeType===1;){if(ai(u).hasOwnProperty("lang")){t.language=u.getAttribute("lang");break}u=u.parentNode}if(s=a.call(this,null,t,n)||this,s.boundDocumentFullscreenChange_=function(m){return s.documentFullscreenChange_(m)},s.boundFullWindowOnEscKey_=function(m){return s.fullWindowOnEscKey(m)},s.boundUpdateStyleEl_=function(m){return s.updateStyleEl_(m)},s.boundApplyInitTime_=function(m){return s.applyInitTime_(m)},s.boundUpdateCurrentBreakpoint_=function(m){return s.updateCurrentBreakpoint_(m)},s.boundHandleTechClick_=function(m){return s.handleTechClick_(m)},s.boundHandleTechDoubleClick_=function(m){return s.handleTechDoubleClick_(m)},s.boundHandleTechTouchStart_=function(m){return s.handleTechTouchStart_(m)},s.boundHandleTechTouchMove_=function(m){return s.handleTechTouchMove_(m)},s.boundHandleTechTouchEnd_=function(m){return s.handleTechTouchEnd_(m)},s.boundHandleTechTap_=function(m){return s.handleTechTap_(m)},s.isFullscreen_=!1,s.log=rv(s.id_),s.fsApi_=to,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=i,s.tagAttributes=i&&ai(i),s.language(s.options_.language),t.languages){var l={};Object.getOwnPropertyNames(t.languages).forEach(function(m){l[m.toLowerCase()]=t.languages[m]}),s.languages_=l}else s.languages_=e.prototype.options_.languages;s.resetCache_(),s.poster_=t.poster||"",s.controls_=!!t.controls,i.controls=!1,i.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],i.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(m){if(typeof s[m]!="function")throw new Error('plugin "'+m+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),Oc(ee(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(vt(W.default,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var c=Se(s.options_);t.plugins&&Object.keys(t.plugins).forEach(function(m){s[m](t.plugins[m])}),t.debug&&s.debug(!0),s.options_.playerOptions=c,s.middleware_=[],s.playbackRates(t.playbackRates),s.initChildren(),s.isAudio(i.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),jr&&s.addClass("vjs-touch-enabled"),nt||s.addClass("vjs-workinghover"),e.players[s.id_]=ee(s);var f=ev.split(".")[0];return s.addClass("vjs-v"+f),s.userActive(!0),s.reportUserActivity(),s.one("play",function(m){return s.listenForUserActivity_(m)}),s.on("stageclick",function(m){return s.handleStageClick_(m)}),s.on("keydown",function(m){return s.handleKeyDown(m)}),s.on("languagechange",function(m){return s.handleLanguagechange(m)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}var r=e.prototype;return r.dispose=function(){var t=this;this.trigger("dispose"),this.off("dispose"),Ke(W.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ke(W.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),bC(this),tt.names.forEach(function(n){var s=tt[n],o=t[s.getterName]();o&&o.off&&o.off()}),a.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},r.createEl=function(){var t=this.tag,n,s=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?n=this.el_=t.parentNode:o||(n=this.el_=a.prototype.createEl.call(this,"div"));var u=ai(t);if(o){for(n=this.el_=t,t=this.tag=W.default.createElement("video");n.children.length;)t.appendChild(n.firstChild);Qi(n,"video-js")||ui(n,"video-js"),n.appendChild(t),s=this.playerElIngest_=n,Object.keys(n).forEach(function(x){try{t[x]=n[x]}catch{}})}if(t.setAttribute("tabindex","-1"),u.tabindex="-1",(ma||hi&&lv)&&(t.setAttribute("role","application"),u.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in u&&delete u.width,"height"in u&&delete u.height,Object.getOwnPropertyNames(u).forEach(function(x){o&&x==="class"||n.setAttribute(x,u[x]),o&&t.setAttribute(x,u[x])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=n.player=this,this.addClass("vjs-paused"),A.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=Ev("vjs-styles-dimensions");var l=wi(".vjs-styles-defaults"),c=wi("head");c.insertBefore(this.styleEl_,l?l.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var f=t.getElementsByTagName("a"),m=0;m<f.length;m++){var _=f.item(m);ui(_,"vjs-hidden"),_.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!s&&t.parentNode.insertBefore(n,t),ac(t,n),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n},r.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");if(t!=="anonymous"&&t!=="use-credentials"){ne.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"');return}this.techCall_("setCrossOrigin",t)},r.width=function(t){return this.dimension("width",t)},r.height=function(t){return this.dimension("height",t)},r.dimension=function(t,n){var s=t+"_";if(n===void 0)return this[s]||0;if(n===""||n==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(n);if(isNaN(o)){ne.error('Improper value "'+n+'" supplied for for '+t);return}this[s]=o,this.updateStyleEl_()},r.fluid=function(t){var n=this;if(t===void 0)return!!this.fluid_;this.fluid_=!!t,li(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),XS(this,function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},r.fill=function(t){if(t===void 0)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},r.aspectRatio=function(t){if(t===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},r.updateStyleEl_=function(){if(A.default.VIDEOJS_NO_DYNAMIC_STYLE===!0){var t=typeof this.width_=="number"?this.width_:this.options_.width,n=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(t>=0&&(s.width=t),n>=0&&(s.height=n));return}var o,u,l,c;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?l=this.aspectRatio_:this.videoWidth()>0?l=this.videoWidth()+":"+this.videoHeight():l="16:9";var f=l.split(":"),m=f[1]/f[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/m:o=this.videoWidth()||300,this.height_!==void 0?u=this.height_:u=o*m,/^[^a-zA-Z]/.test(this.id())?c="dimensions-"+this.id():c=this.id()+"-dimensions",this.addClass(c),Sv(this.styleEl_,`
      .`+c+` {
        width: `+o+`px;
        height: `+u+`px;
      }

      .`+c+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+m*100+`%;
      }
    `)},r.loadTech_=function(t,n){var s=this;this.tech_&&this.unloadTech_();var o=Le(t),u=t.charAt(0).toLowerCase()+t.slice(1);o!=="Html5"&&this.tag&&(_e.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var l=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(l=!1);var c={source:n,autoplay:l,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+u+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};tt.names.forEach(function(m){var _=tt[m];c[_.getterName]=s[_.privateName]}),ke(c,this.options_[o]),ke(c,this.options_[u]),ke(c,this.options_[t.toLowerCase()]),this.tag&&(c.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);var f=_e.getTech(t);if(!f)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new f(c),this.tech_.ready(Ce(this,this.handleTechReady_),!0),ug.jsonToTextTracks(this.textTracksJson_||[],this.tech_),o0.forEach(function(m){s.on(s.tech_,m,function(_){return s["handleTech"+Le(m)+"_"](_)})}),Object.keys(tc).forEach(function(m){s.on(s.tech_,m,function(_){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+tc[m]+"_"].bind(s),event:_});return}s["handleTech"+tc[m]+"_"](_)})}),this.on(this.tech_,"loadstart",function(m){return s.handleTechLoadStart_(m)}),this.on(this.tech_,"sourceset",function(m){return s.handleTechSourceset_(m)}),this.on(this.tech_,"waiting",function(m){return s.handleTechWaiting_(m)}),this.on(this.tech_,"ended",function(m){return s.handleTechEnded_(m)}),this.on(this.tech_,"seeking",function(m){return s.handleTechSeeking_(m)}),this.on(this.tech_,"play",function(m){return s.handleTechPlay_(m)}),this.on(this.tech_,"firstplay",function(m){return s.handleTechFirstPlay_(m)}),this.on(this.tech_,"pause",function(m){return s.handleTechPause_(m)}),this.on(this.tech_,"durationchange",function(m){return s.handleTechDurationChange_(m)}),this.on(this.tech_,"fullscreenchange",function(m,_){return s.handleTechFullscreenChange_(m,_)}),this.on(this.tech_,"fullscreenerror",function(m,_){return s.handleTechFullscreenError_(m,_)}),this.on(this.tech_,"enterpictureinpicture",function(m){return s.handleTechEnterPictureInPicture_(m)}),this.on(this.tech_,"leavepictureinpicture",function(m){return s.handleTechLeavePictureInPicture_(m)}),this.on(this.tech_,"error",function(m){return s.handleTechError_(m)}),this.on(this.tech_,"posterchange",function(m){return s.handleTechPosterChange_(m)}),this.on(this.tech_,"textdata",function(m){return s.handleTechTextData_(m)}),this.on(this.tech_,"ratechange",function(m){return s.handleTechRateChange_(m)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&ac(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},r.unloadTech_=function(){var t=this;tt.names.forEach(function(n){var s=tt[n];t[s.privateName]=t[s.getterName]()}),this.textTracksJson_=ug.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},r.tech=function(t){return t===void 0&&ne.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},r.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},r.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},r.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},r.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},r.manualAutoplay_=function(t){var n=this;if(!(!this.tech_||typeof t!="string")){var s=function(){var l=n.muted();n.muted(!0);var c=function(){n.muted(l)};n.playTerminatedQueue_.push(c);var f=n.play();if(!!aa(f))return f.catch(function(m){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(m||""))})},o;if(t==="any"&&!this.muted()?(o=this.play(),aa(o)&&(o=o.catch(s))):t==="muted"&&!this.muted()?o=s():o=this.play(),!!aa(o))return o.then(function(){n.trigger({type:"autoplay-success",autoplay:t})}).catch(function(){n.trigger({type:"autoplay-failure",autoplay:t})})}},r.updateSourceCaches_=function(t){t===void 0&&(t="");var n=t,s="";typeof n!="string"&&(n=t.src,s=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!s&&(s=CC(this,n)),this.cache_.source=Se({},t,{src:n,type:s});for(var o=this.cache_.sources.filter(function(_){return _.src&&_.src===n}),u=[],l=this.$$("source"),c=[],f=0;f<l.length;f++){var m=ai(l[f]);u.push(m),m.src&&m.src===n&&c.push(m.src)}c.length&&!o.length?this.cache_.sources=u:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n},r.handleTechSourceset_=function(t){var n=this;if(!this.changingSrc_){var s=function(c){return n.updateSourceCaches_(c)},o=this.currentSource().src,u=t.src;o&&!/^blob:/.test(o)&&/^blob:/.test(u)&&(!this.lastSource_||this.lastSource_.tech!==u&&this.lastSource_.player!==o)&&(s=function(){}),s(u),t.src||this.tech_.any(["sourceset","loadstart"],function(l){if(l.type!=="sourceset"){var c=n.techGet("currentSrc");n.lastSource_.tech=c,n.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},r.hasStarted=function(t){if(t===void 0)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},r.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},r.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},r.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var n=this.currentTime(),s=function o(){n!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",o))};this.on("timeupdate",s)},r.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},r.handleTechFirstPlay_=function(){this.options_.starttime&&(ne.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},r.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},r.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},r.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},r.handleTechClick_=function(t){!this.controls_||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,t):this.paused()?Vt(this.play()):this.pause())},r.handleTechDoubleClick_=function(t){if(!!this.controls_){var n=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(t.target)});n||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},r.handleTechTap_=function(){this.userActive(!this.userActive())},r.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},r.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},r.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},r.handleStageClick_=function(){this.reportUserActivity()},r.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.documentFullscreenChange_=function(t){var n=t.target.player;if(!(n&&n!==this)){var s=this.el(),o=W.default[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},r.handleTechFullscreenChange_=function(t,n){var s=this;n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))},r.handleTechFullscreenError_=function(t,n){this.trigger("fullscreenerror",n)},r.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},r.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},r.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},r.handleTechError_=function(){var t=this.tech_.error();this.error(t)},r.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},r.getCache=function(){return this.cache_},r.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},r.techCall_=function(t,n){this.ready(function(){if(t in DC)return _C(this.middleware_,this.tech_,t,n);if(t in mg)return pg(this.middleware_,this.tech_,t,n);try{this.tech_&&this.tech_[t](n)}catch(s){throw ne(s),s}},!0)},r.techGet_=function(t){if(!(!this.tech_||!this.tech_.isReady_)){if(t in xC)return yC(this.middleware_,this.tech_,t);if(t in mg)return pg(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(n){throw this.tech_[t]===void 0?(ne("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",n),n):n.name==="TypeError"?(ne("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",n),this.tech_.isReady_=!1,n):(ne(n),n)}}},r.play=function(){var t=this,n=this.options_.Promise||A.default.Promise;return n?new n(function(s){t.play_(s)}):this.play_()},r.play_=function(t){var n=this;t===void 0&&(t=Vt),this.playCallbacks_.push(t);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(u){n.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&(_o||nt)&&this.load();return}var o=this.techGet_("play");o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},r.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(n){n()})},r.runPlayCallbacks_=function(t){var n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(s){s(t)})},r.pause=function(){this.techCall_("pause")},r.paused=function(){return this.techGet_("paused")!==!1},r.played=function(){return this.techGet_("played")||Ji(0,0)},r.scrubbing=function(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},r.currentTime=function(t){if(typeof t<"u"){if(t<0&&(t=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",t),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},r.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},r.duration=function(t){if(t===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;t=parseFloat(t),t<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},r.remainingTime=function(){return this.duration()-this.currentTime()},r.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},r.buffered=function(){var t=this.techGet_("buffered");return(!t||!t.length)&&(t=Ji(0,0)),t},r.bufferedPercent=function(){return Pv(this.buffered(),this.duration())},r.bufferedEnd=function(){var t=this.buffered(),n=this.duration(),s=t.end(t.length-1);return s>n&&(s=n),s},r.volume=function(t){var n;if(t!==void 0){n=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n},r.muted=function(t){if(t!==void 0){this.techCall_("setMuted",t);return}return this.techGet_("muted")||!1},r.defaultMuted=function(t){return t!==void 0?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},r.lastVolume_=function(t){if(t!==void 0&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume},r.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},r.isFullscreen=function(t){if(t!==void 0){var n=this.isFullscreen_;this.isFullscreen_=Boolean(t),this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},r.requestFullscreen=function(t){var n=this.options_.Promise||A.default.Promise;if(n){var s=this;return new n(function(o,u){function l(){s.off("fullscreenerror",f),s.off("fullscreenchange",c)}function c(){l(),o()}function f(_,x){l(),u(x)}s.one("fullscreenchange",c),s.one("fullscreenerror",f);var m=s.requestFullscreenHelper_(t);m&&(m.then(l,l),m.then(o,u))})}return this.requestFullscreenHelper_()},r.requestFullscreenHelper_=function(t){var n=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},t!==void 0&&(s=t)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return n.isFullscreen(!0)},function(){return n.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},r.exitFullscreen=function(){var t=this.options_.Promise||A.default.Promise;if(t){var n=this;return new t(function(s,o){function u(){n.off("fullscreenerror",c),n.off("fullscreenchange",l)}function l(){u(),s()}function c(m,_){u(),o(_)}n.one("fullscreenchange",l),n.one("fullscreenerror",c);var f=n.exitFullscreenHelper_();f&&(f.then(u,u),f.then(s,o))})}return this.exitFullscreenHelper_()},r.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var n=W.default[this.fsApi_.exitFullscreen]();return n&&Vt(n.then(function(){return t.isFullscreen(!1)})),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},r.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=W.default.documentElement.style.overflow,vt(W.default,"keydown",this.boundFullWindowOnEscKey_),W.default.documentElement.style.overflow="hidden",ui(W.default.body,"vjs-full-window"),this.trigger("enterFullWindow")},r.fullWindowOnEscKey=function(t){te.default.isEventKey(t,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},r.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Ke(W.default,"keydown",this.boundFullWindowOnEscKey_),W.default.documentElement.style.overflow=this.docOrigOverflow,ga(W.default.body,"vjs-full-window"),this.trigger("exitFullWindow")},r.disablePictureInPicture=function(t){if(t===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},r.isInPictureInPicture=function(t){if(t!==void 0){this.isInPictureInPicture_=!!t,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},r.requestPictureInPicture=function(){if("pictureInPictureEnabled"in W.default&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},r.exitPictureInPicture=function(){if("pictureInPictureEnabled"in W.default)return W.default.exitPictureInPicture()},r.handleKeyDown=function(t){var n=this.options_.userActions;if(!(!n||!n.hotkeys)){var s=function(u){var l=u.tagName.toLowerCase();if(u.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if(l==="input")return c.indexOf(u.type)===-1;var f=["textarea"];return f.indexOf(l)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,t):this.handleHotkeys(t))}},r.handleHotkeys=function(t){var n=this.options_.userActions?this.options_.userActions.hotkeys:{},s=n.fullscreenKey,o=s===void 0?function(b){return te.default.isEventKey(b,"f")}:s,u=n.muteKey,l=u===void 0?function(b){return te.default.isEventKey(b,"m")}:u,c=n.playPauseKey,f=c===void 0?function(b){return te.default.isEventKey(b,"k")||te.default.isEventKey(b,"Space")}:c;if(o.call(this,t)){t.preventDefault(),t.stopPropagation();var m=V.getComponent("FullscreenToggle");W.default[this.fsApi_.fullscreenEnabled]!==!1&&m.prototype.handleClick.call(this,t)}else if(l.call(this,t)){t.preventDefault(),t.stopPropagation();var _=V.getComponent("MuteToggle");_.prototype.handleClick.call(this,t)}else if(f.call(this,t)){t.preventDefault(),t.stopPropagation();var x=V.getComponent("PlayToggle");x.prototype.handleClick.call(this,t)}},r.canPlayType=function(t){for(var n,s=0,o=this.options_.techOrder;s<o.length;s++){var u=o[s],l=_e.getTech(u);if(l||(l=V.getComponent(u)),!l){ne.error('The "'+u+'" tech is undefined. Skipped browser support check for that tech.');continue}if(l.isSupported()&&(n=l.canPlayType(t),n))return n}return""},r.selectSource=function(t){var n=this,s=this.options_.techOrder.map(function(f){return[f,_e.getTech(f)]}).filter(function(f){var m=f[0],_=f[1];return _?_.isSupported():(ne.error('The "'+m+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(m,_,x){var b;return m.some(function(T){return _.some(function(C){if(b=x(T,C),b)return!0})}),b},u,l=function(m){return function(_,x){return m(x,_)}},c=function(m,_){var x=m[0],b=m[1];if(b.canPlaySource(_,n.options_[x.toLowerCase()]))return{source:_,tech:x}};return this.options_.sourceOrder?u=o(t,s,l(c)):u=o(s,t,c),u||!1},r.handleSrc_=function(t,n){var s=this;if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=wC(t);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),gC(this,o[0],function(c,f){s.middleware_=f,n||(s.cache_.sources=o),s.updateSourceCaches_(c);var m=s.src_(c);if(m){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),s.triggerReady();return}vC(f,s.tech_)}),this.options_.retryOnError&&o.length>1){var u=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},l=function(){s.off("error",u)};this.one("error",u),this.one("playing",l),this.resetRetryOnError_=function(){s.off("error",u),s.off("playing",l)}}},r.src=function(t){return this.handleSrc_(t,!1)},r.src_=function(t){var n=this,s=this.selectSource([t]);return s?JS(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){n.changingSrc_=!1}),!1):!0},r.load=function(){this.techCall_("load")},r.reset=function(){var t=this,n=this.options_.Promise||A.default.Promise;if(this.paused()||!n)this.doReset_();else{var s=this.play();Vt(s.then(function(){return t.doReset_()}))}},r.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),li(this)&&this.trigger("playerreset")},r.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},r.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar||{},n=t.durationDisplay,s=t.remainingTimeDisplay;n&&n.updateContent(),s&&s.updateContent()},r.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},r.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},r.currentSources=function(){var t=this.currentSource(),n=[];return Object.keys(t).length!==0&&n.push(t),this.cache_.sources||n},r.currentSource=function(){return this.cache_.source||{}},r.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.currentType=function(){return this.currentSource()&&this.currentSource().type||""},r.preload=function(t){if(t!==void 0){this.techCall_("setPreload",t),this.options_.preload=t;return}return this.techGet_("preload")},r.autoplay=function(t){if(t===void 0)return this.options_.autoplay||!1;var n;typeof t=="string"&&/(any|play|muted)/.test(t)||t===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_(typeof t=="string"?t:"play"),n=!1):t?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)},r.playsinline=function(t){return t!==void 0?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},r.loop=function(t){if(t!==void 0){this.techCall_("setLoop",t),this.options_.loop=t;return}return this.techGet_("loop")},r.poster=function(t){if(t===void 0)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},r.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},r.controls=function(t){if(t===void 0)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},r.usingNativeControls=function(t){if(t===void 0)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},r.error=function(t){var n=this;if(t===void 0)return this.error_||null;if(Ci("beforeerror").forEach(function(o){var u=o(n,t);if(!(ci(u)&&!Array.isArray(u)||typeof u=="string"||typeof u=="number"||u===null)){n.log.error("please return a value that MediaError expects in beforeerror hooks");return}t=u}),this.options_.suppressNotSupportedError&&t&&t.code===4){var s=function(){this.error(t)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(t===null){this.error_=t,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new rt(t),this.addClass("vjs-error"),ne.error("(CODE:"+this.error_.code+" "+rt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Ci("error").forEach(function(o){return o(n,n.error_)})},r.reportUserActivity=function(t){this.userActivity_=!0},r.userActive=function(t){if(t===void 0)return this.userActive_;if(t=!!t,t!==this.userActive_){if(this.userActive_=t,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},r.listenForUserActivity_=function(){var t,n,s,o=Ce(this,this.reportUserActivity),u=function(x){(x.screenX!==n||x.screenY!==s)&&(n=x.screenX,s=x.screenY,o())},l=function(){o(),this.clearInterval(t),t=this.setInterval(o,250)},c=function(x){o(),this.clearInterval(t)};this.on("mousedown",l),this.on("mousemove",u),this.on("mouseup",c),this.on("mouseleave",c);var f=this.getChild("controlBar");f&&!nt&&!fi&&(f.on("mouseenter",function(_){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),f.on("mouseleave",function(_){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var m;this.setInterval(function(){if(!!this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(m);var _=this.options_.inactivityTimeout;_<=0||(m=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},_))}},250)},r.playbackRate=function(t){if(t!==void 0){this.techCall_("setPlaybackRate",t);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},r.defaultPlaybackRate=function(t){return t!==void 0?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},r.isAudio=function(t){if(t!==void 0){this.isAudio_=!!t;return}return!!this.isAudio_},r.enableAudioOnlyUI_=function(){var t=this;this.addClass("vjs-audio-only-mode");var n=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();n.forEach(function(u){u!==s&&u.el_&&!u.hasClass("vjs-hidden")&&(u.hide(),t.audioOnlyCache_.hiddenChildren.push(u))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},r.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(t){return t.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},r.audioOnlyMode=function(t){var n=this;if(typeof t!="boolean"||t===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=t;var s=this.options_.Promise||A.default.Promise;if(s){if(t){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return n.enableAudioOnlyUI_()})}return s.resolve().then(function(){return n.disableAudioOnlyUI_()})}t?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},r.enablePosterModeUI_=function(){var t=this.tech_&&this.tech_;t.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.disablePosterModeUI_=function(){var t=this.tech_&&this.tech_;t.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},r.audioPosterMode=function(t){var n=this;if(typeof t!="boolean"||t===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=t;var s=this.options_.Promise||A.default.Promise;if(s){if(t){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){n.enablePosterModeUI_()})}return s.resolve().then(function(){n.enablePosterModeUI_()})}return s.resolve().then(function(){n.disablePosterModeUI_()})}if(t){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},r.addTextTrack=function(t,n,s){if(this.tech_)return this.tech_.addTextTrack(t,n,s)},r.addRemoteTextTrack=function(t,n){if(this.tech_)return this.tech_.addRemoteTextTrack(t,n)},r.removeRemoteTextTrack=function(t){t===void 0&&(t={});var n=t,s=n.track;if(s||(s=t),this.tech_)return this.tech_.removeRemoteTextTrack(s)},r.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},r.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},r.language=function(t){if(t===void 0)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),li(this)&&this.trigger("languagechange"))},r.languages=function(){return Se(e.prototype.options_.languages,this.languages_)},r.toJSON=function(){var t=Se(this.options_),n=t.tracks;t.tracks=[];for(var s=0;s<n.length;s++){var o=n[s];o=Se(o),o.player=void 0,t.tracks[s]=o}return t},r.createModal=function(t,n){var s=this;n=n||{},n.content=t||"";var o=new Xr(this,n);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},r.updateCurrentBreakpoint_=function(){if(!!this.responsive())for(var t=this.currentBreakpoint(),n=this.currentWidth(),s=0;s<hc.length;s++){var o=hc[s],u=this.breakpoints_[o];if(n<=u){if(t===o)return;t&&this.removeClass(Zs[t]),this.addClass(Zs[o]),this.breakpoint_=o;break}}},r.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},r.breakpoints=function(t){return t===void 0?ke(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=ke({},rw,t),this.updateCurrentBreakpoint_(),ke(this.breakpoints_))},r.responsive=function(t){if(t===void 0)return this.responsive_;t=Boolean(t);var n=this.responsive_;if(t!==n)return this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t},r.currentBreakpoint=function(){return this.breakpoint_},r.currentBreakpointClass=function(){return Zs[this.breakpoint_]||""},r.loadMedia=function(t,n){var s=this;if(!(!t||typeof t!="object")){this.reset(),this.cache_.media=Se(t);var o=this.cache_.media,u=o.artwork,l=o.poster,c=o.src,f=o.textTracks;!u&&l&&(this.cache_.media.artwork=[{src:l,type:no(l)}]),c&&this.src(c),l&&this.poster(l),Array.isArray(f)&&f.forEach(function(m){return s.addRemoteTextTrack(m,!1)}),this.ready(n)}},r.getMedia=function(){if(!this.cache_.media){var t=this.poster(),n=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(u){return{kind:u.kind,label:u.label,language:u.language,src:u.src}}),o={src:n,textTracks:s};return t&&(o.poster=t,o.artwork=[{src:o.poster,type:no(o.poster)}]),o}return Se(this.cache_.media)},e.getTagSettings=function(t){var n={sources:[],tracks:[]},s=ai(t),o=s["data-setup"];if(Qi(t,"vjs-fill")&&(s.fill=!0),Qi(t,"vjs-fluid")&&(s.fluid=!0),o!==null){var u=(0,Jg.default)(o||"{}"),l=u[0],c=u[1];l&&ne.error(l),ke(s,c)}if(ke(n,s),t.hasChildNodes())for(var f=t.childNodes,m=0,_=f.length;m<_;m++){var x=f[m],b=x.nodeName.toLowerCase();b==="source"?n.sources.push(ai(x)):b==="track"&&n.tracks.push(ai(x))}return n},r.flexNotSupported_=function(){var t=W.default.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},r.debug=function(t){if(t===void 0)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},r.playbackRates=function(t){if(t===void 0)return this.cache_.playbackRates;!Array.isArray(t)||!t.every(function(n){return typeof n=="number"})||(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},e}(V);tt.names.forEach(function(a){var e=tt[a];Me.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});Me.prototype.crossorigin=Me.prototype.crossOrigin;Me.players={};var ea=A.default.navigator;Me.prototype.options_={techOrder:_e.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ea&&(ea.languages&&ea.languages[0]||ea.userLanguage||ea.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(a){Me.prototype[a]=function(){return this.techGet_(a)}});o0.forEach(function(a){Me.prototype["handleTech"+Le(a)+"_"]=function(){return this.trigger(a)}});V.registerComponent("Player",Me);var oo="plugin",Br="activePlugins_",Lr={},uo=function(e){return Lr.hasOwnProperty(e)},eo=function(e){return uo(e)?Lr[e]:void 0},u0=function(e,r){e[Br]=e[Br]||{},e[Br][r]=!0},lo=function(e,r,i){var t=(i?"before":"")+"pluginsetup";e.trigger(t,r),e.trigger(t+":"+r.name,r)},nw=function(e,r){var i=function(){lo(this,{name:e,plugin:r,instance:null},!0);var n=r.apply(this,arguments);return u0(this,e),lo(this,{name:e,plugin:r,instance:n}),n};return Object.keys(r).forEach(function(t){i[t]=r[t]}),i},Fg=function(e,r){return r.prototype.name=e,function(){lo(this,{name:e,plugin:r,instance:null},!0);for(var i=arguments.length,t=new Array(i),n=0;n<i;n++)t[n]=arguments[n];var s=bi(r,[this].concat(t));return this[e]=function(){return s},lo(this,s.getEventHash()),s}},qt=function(){function a(r){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=r,this.log||(this.log=this.player.log.createLogger(this.name)),Oc(this),delete this.trigger,kv(this,this.constructor.defaultState),u0(r,this.name),this.dispose=this.dispose.bind(this),r.on("dispose",this.dispose)}var e=a.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(i){return i===void 0&&(i={}),i.name=this.name,i.plugin=this.constructor,i.instance=this,i},e.trigger=function(i,t){return t===void 0&&(t={}),Kr(this.eventBusEl_,i,this.getEventHash(t))},e.handleStateChanged=function(i){},e.dispose=function(){var i=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[Br][i]=!1,this.player=this.state=null,t[i]=Fg(i,Lr[i])},a.isBasic=function(i){var t=typeof i=="string"?eo(i):i;return typeof t=="function"&&!a.prototype.isPrototypeOf(t.prototype)},a.registerPlugin=function(i,t){if(typeof i!="string")throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(uo(i))ne.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(Me.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if(typeof t!="function")throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof t+".");return Lr[i]=t,i!==oo&&(a.isBasic(t)?Me.prototype[i]=nw(i,t):Me.prototype[i]=Fg(i,t)),t},a.deregisterPlugin=function(i){if(i===oo)throw new Error("Cannot de-register base plugin.");uo(i)&&(delete Lr[i],delete Me.prototype[i])},a.getPlugins=function(i){i===void 0&&(i=Object.keys(Lr));var t;return i.forEach(function(n){var s=eo(n);s&&(t=t||{},t[n]=s)}),t},a.getPluginVersion=function(i){var t=eo(i);return t&&t.VERSION||""},a}();qt.getPlugin=eo;qt.BASE_PLUGIN_NAME=oo;qt.registerPlugin(oo,qt);Me.prototype.usingPlugin=function(a){return!!this[Br]&&this[Br][a]===!0};Me.prototype.hasPlugin=function(a){return!!uo(a)};var kg=!1,aw=function(e,r){r===void 0&&(r={}),kg||(ne.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),kg=!0);var i=function(){e.apply(this,arguments)},t={};typeof r=="object"?(r.constructor!==Object.prototype.constructor&&(i=r.constructor),t=r):typeof r=="function"&&(i=r),Zu(i,e),e&&(i.super_=e);for(var n in t)t.hasOwnProperty(n)&&(i.prototype[n]=t[n]);return i},l0=function(e){return e.indexOf("#")===0?e.slice(1):e};function I(a,e,r){var i=I.getPlayer(a);if(i)return e&&ne.warn('Player "'+a+'" is already initialised. Options will not be applied.'),r&&i.ready(r),i;var t=typeof a=="string"?wi("#"+l0(a)):a;if(!Gr(t))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!t.ownerDocument.defaultView||!t.ownerDocument.body.contains(t))&&ne.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(t.parentNode&&t.parentNode.hasAttribute("data-vjs-player")?t.parentNode:t).cloneNode(!0)),Ci("beforesetup").forEach(function(s){var o=s(t,Se(e));if(!ci(o)||Array.isArray(o)){ne.error("please return an object in beforesetup hooks");return}e=Se(e,o)});var n=V.getComponent("Player");return i=new n(t,e,r),Ci("setup").forEach(function(s){return s(i)}),i}I.hooks_=si;I.hooks=Ci;I.hook=OS;I.hookOnce=LS;I.removeHook=tv;A.default.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&zr()&&(ta=wi(".vjs-styles-defaults"),ta||(ta=Ev("vjs-styles-defaults"),Gs=wi("head"),Gs&&Gs.insertBefore(ta,Gs.firstChild),Sv(ta,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)));var ta,Gs;oc(1,I);I.VERSION=ev;I.options=Me.prototype.options_;I.getPlayers=function(){return Me.players};I.getPlayer=function(a){var e=Me.players,r;if(typeof a=="string"){var i=l0(a),t=e[i];if(t)return t;r=wi("#"+i)}else r=a;if(Gr(r)){var n=r,s=n.player,o=n.playerId;if(s||e[o])return s||e[o]}};I.getAllPlayers=function(){return Object.keys(Me.players).map(function(a){return Me.players[a]}).filter(Boolean)};I.players=Me.players;I.getComponent=V.getComponent;I.registerComponent=function(a,e){_e.isTech(e)&&ne.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),V.registerComponent.call(V,a,e)};I.getTech=_e.getTech;I.registerTech=_e.registerTech;I.use=mC;Object.defineProperty(I,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(I.middleware,"TERMINATOR",{value:ro,writeable:!1,enumerable:!0});I.browser=jS;I.TOUCH_ENABLED=jr;I.extend=aw;I.mergeOptions=Se;I.bind=Ce;I.registerPlugin=qt.registerPlugin;I.deregisterPlugin=qt.deregisterPlugin;I.plugin=function(a,e){return ne.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),qt.registerPlugin(a,e)};I.getPlugins=qt.getPlugins;I.getPlugin=qt.getPlugin;I.getPluginVersion=qt.getPluginVersion;I.addLanguage=function(a,e){var r;return a=(""+a).toLowerCase(),I.options.languages=Se(I.options.languages,(r={},r[a]=e,r)),I.options.languages[a]};I.log=ne;I.createLogger=rv;I.createTimeRange=I.createTimeRanges=Ji;I.formatTime=qr;I.setFormatTime=LC;I.resetFormatTime=RC;I.parseUrl=Rc;I.isCrossOrigin=So;I.EventTarget=He;I.on=vt;I.one=bo;I.off=Ke;I.trigger=Kr;I.xhr=Sc.default;I.TextTrack=va;I.AudioTrack=Lv;I.VideoTrack=Rv;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){I[a]=function(){return ne.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),Tv[a].apply(null,arguments)}});I.computedStyle=ca;I.dom=Tv;I.url=dC;I.defineLazyProperty=ed;I.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var kt=yr,co=function(e,r,i){return e&&i&&i.responseURL&&r!==i.responseURL?i.responseURL:r},Ot=function(e){return I.log.debug?I.log.debug.bind(I,"VHS:",e+" >"):function(){}},Ai=1/30,$t=Ai*3,c0=function(e,r){var i=[],t;if(e&&e.length)for(t=0;t<e.length;t++)r(e.start(t),e.end(t))&&i.push([e.start(t),e.end(t)]);return I.createTimeRanges(i)},Rr=function(e,r){return c0(e,function(i,t){return i-$t<=r&&t+$t>=r})},Ks=function(e,r){return c0(e,function(i){return i-Ai>=r})},sw=function(e){if(e.length<2)return I.createTimeRanges();for(var r=[],i=1;i<e.length;i++){var t=e.end(i-1),n=e.start(i);r.push([t,n])}return I.createTimeRanges(r)},ow=function(e,r){var i=null,t=null,n=0,s=[],o=[];if(!e||!e.length||!r||!r.length)return I.createTimeRange();for(var u=e.length;u--;)s.push({time:e.start(u),type:"start"}),s.push({time:e.end(u),type:"end"});for(u=r.length;u--;)s.push({time:r.start(u),type:"start"}),s.push({time:r.end(u),type:"end"});for(s.sort(function(l,c){return l.time-c.time}),u=0;u<s.length;u++)s[u].type==="start"?(n++,n===2&&(i=s[u].time)):s[u].type==="end"&&(n--,n===1&&(t=s[u].time)),i!==null&&t!==null&&(o.push([i,t]),i=null,t=null);return I.createTimeRanges(o)},d0=function(e){var r=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)r.push(e.start(i)+" => "+e.end(i));return r.join(", ")},uw=function(e,r,i){i===void 0&&(i=1);var t=e.length?e.end(e.length-1):0;return(t-r)/i},Yi=function(e){for(var r=[],i=0;i<e.length;i++)r.push({start:e.start(i),end:e.end(i)});return r},lw=function(e,r){if(e===r)return!1;if(!e&&r||!r&&e||e.length!==r.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==r.start(i)||e.end(i)!==r.end(i))return!0;return!1},Pg=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},td=function(e,r){var i=0;if(!e||!e.length)return i;for(var t=0;t<e.length;t++){var n=e.start(t),s=e.end(t);if(!(r>s)){if(r>n&&r<=s){i+=s-r;continue}i+=s-n}}return i},Ig=I.createTimeRange,id=function(e,r){if(!r.preload)return r.duration;var i=0;return(r.parts||[]).forEach(function(t){i+=t.duration}),(r.preloadHints||[]).forEach(function(t){t.type==="PART"&&(i+=e.partTargetDuration)}),i},pc=function(e){return(e.segments||[]).reduce(function(r,i,t){return i.parts?i.parts.forEach(function(n,s){r.push({duration:n.duration,segmentIndex:t,partIndex:s,part:n,segment:i})}):r.push({duration:i.duration,segmentIndex:t,partIndex:null,segment:i,part:null}),r},[])},f0=function(e){var r=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return r&&r.parts||[]},h0=function(e){var r=e.preloadSegment;if(!!r){var i=r.parts,t=r.preloadHints,n=(t||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return n+=i&&i.length?i.length:0,n}},p0=function(e,r){if(r.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var i=f0(r).length>0;return i&&r.serverControl&&r.serverControl.partHoldBack?r.serverControl.partHoldBack:i&&r.partTargetDuration?r.partTargetDuration*3:r.serverControl&&r.serverControl.holdBack?r.serverControl.holdBack:r.targetDuration?r.targetDuration*3:0},cw=function(e,r){var i=0,t=r-e.mediaSequence,n=e.segments[t];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;t--;){if(n=e.segments[t],typeof n.end<"u")return{result:i+n.end,precise:!0};if(i+=id(e,n),typeof n.start<"u")return{result:i+n.start,precise:!0}}return{result:i,precise:!1}},dw=function(e,r){for(var i=0,t,n=r-e.mediaSequence;n<e.segments.length;n++){if(t=e.segments[n],typeof t.start<"u")return{result:t.start-i,precise:!0};if(i+=id(e,t),typeof t.end<"u")return{result:t.end-i,precise:!0}}return{result:-1,precise:!1}},m0=function(e,r,i){if(typeof r>"u"&&(r=e.mediaSequence+e.segments.length),r<e.mediaSequence)return 0;var t=cw(e,r);if(t.precise)return t.result;var n=dw(e,r);return n.precise?n.result:t.result+i},g0=function(e,r,i){if(!e)return 0;if(typeof i!="number"&&(i=0),typeof r>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return A.default.Infinity}return m0(e,r,i)},sa=function(e){var r=e.defaultDuration,i=e.durationList,t=e.startIndex,n=e.endIndex,s=0;if(t>n){var o=[n,t];t=o[0],n=o[1]}if(t<0){for(var u=t;u<Math.min(0,n);u++)s+=r;t=0}for(var l=t;l<n;l++)s+=i[l].duration;return s},v0=function(e,r,i,t){if(!e||!e.segments)return null;if(e.endList)return g0(e);if(r===null)return null;r=r||0;var n=m0(e,e.mediaSequence+e.segments.length,r);return i&&(t=typeof t=="number"?t:p0(null,e),n-=t),Math.max(0,n)},fw=function(e,r,i){var t=!0,n=r||0,s=v0(e,r,t,i);return s===null?Ig():Ig(n,s)},hw=function(e){for(var r=e.playlist,i=e.currentTime,t=e.startingSegmentIndex,n=e.startingPartIndex,s=e.startTime,o=e.experimentalExactManifestTimings,u=i-s,l=pc(r),c=0,f=0;f<l.length;f++){var m=l[f];if(t===m.segmentIndex&&!(typeof n=="number"&&typeof m.partIndex=="number"&&n!==m.partIndex)){c=f;break}}if(u<0){if(c>0)for(var _=c-1;_>=0;_--){var x=l[_];if(u+=x.duration,o){if(u<0)continue}else if(u+Ai<=0)continue;return{partIndex:x.partIndex,segmentIndex:x.segmentIndex,startTime:s-sa({defaultDuration:r.targetDuration,durationList:l,startIndex:c,endIndex:_})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i}}if(c<0){for(var b=c;b<0;b++)if(u-=r.targetDuration,u<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:i};c=0}for(var T=c;T<l.length;T++){var C=l[T];if(u-=C.duration,o){if(u>0)continue}else if(u-Ai>=0)continue;return{partIndex:C.partIndex,segmentIndex:C.segmentIndex,startTime:s+sa({defaultDuration:r.targetDuration,durationList:l,startIndex:c,endIndex:T})}}return{segmentIndex:l[l.length-1].segmentIndex,partIndex:l[l.length-1].partIndex,startTime:i}},y0=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},rd=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Fo=function(e){var r=y0(e);return!e.disabled&&!r},pw=function(e){return e.disabled},mw=function(e){for(var r=0;r<e.segments.length;r++)if(e.segments[r].key)return!0;return!1},_0=function(e,r){return r.attributes&&r.attributes[e]},gw=function(e,r,i,t){if(t===void 0&&(t=0),!_0("BANDWIDTH",i))return NaN;var n=e*i.attributes.BANDWIDTH;return(n-t*8)/r},mc=function(e,r){if(e.playlists.length===1)return!0;var i=r.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(t){return Fo(t)?(t.attributes.BANDWIDTH||0)<i:!1}).length===0},nd=function(e,r){return!e&&!r||!e&&r||e&&!r?!1:!!(e===r||e.id&&r.id&&e.id===r.id||e.resolvedUri&&r.resolvedUri&&e.resolvedUri===r.resolvedUri||e.uri&&r.uri&&e.uri===r.uri)},Og=function(e,r){var i=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},t=!1;for(var n in i){for(var s in i[n])if(t=r(i[n][s]),t)break;if(t)break}return!!t},xa=function(e){if(!e||!e.playlists||!e.playlists.length){var r=Og(e,function(s){return s.playlists&&s.playlists.length||s.uri});return r}for(var i=function(o){var u=e.playlists[o],l=u.attributes&&u.attributes.CODECS;if(l&&l.split(",").every(function(f){return sl(f)}))return"continue";var c=Og(e,function(f){return nd(u,f)});return c?"continue":{v:!1}},t=0;t<e.playlists.length;t++){var n=i(t);if(n!=="continue"&&typeof n=="object")return n.v}return!0},ft={liveEdgeDelay:p0,duration:g0,seekable:fw,getMediaInfoForTime:hw,isEnabled:Fo,isDisabled:pw,isBlacklisted:y0,isIncompatible:rd,playlistEnd:v0,isAes:mw,hasAttribute:_0,estimateSegmentRequestTime:gw,isLowestEnabledRendition:mc,isAudioOnly:xa,playlistMatch:nd,segmentDurationWithParts:id},x0=I.log,ad=function(e,r){return e+"-"+r},vw=function(e,r,i){return"placeholder-uri-"+e+"-"+r+"-"+i},yw=function(e){var r=e.onwarn,i=e.oninfo,t=e.manifestString,n=e.customTagParsers,s=n===void 0?[]:n,o=e.customTagMappers,u=o===void 0?[]:o,l=e.experimentalLLHLS,c=new _p;r&&c.on("warn",r),i&&c.on("info",i),s.forEach(function(b){return c.addParser(b)}),u.forEach(function(b){return c.addTagMapper(b)}),c.push(t),c.end();var f=c.manifest;if(l||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(b){f.hasOwnProperty(b)&&delete f[b]}),f.segments&&f.segments.forEach(function(b){["parts","preloadHints"].forEach(function(T){b.hasOwnProperty(T)&&delete b[T]})})),!f.targetDuration){var m=10;f.segments&&f.segments.length&&(m=f.segments.reduce(function(b,T){return Math.max(b,T.duration)},0)),r&&r("manifest has no targetDuration defaulting to "+m),f.targetDuration=m}var _=f0(f);if(_.length&&!f.partTargetDuration){var x=_.reduce(function(b,T){return Math.max(b,T.duration)},0);r&&(r("manifest has no partTargetDuration defaulting to "+x),x0.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),f.partTargetDuration=x}return f},Zr=function(e,r){!e.mediaGroups||["AUDIO","SUBTITLES"].forEach(function(i){if(!!e.mediaGroups[i])for(var t in e.mediaGroups[i])for(var n in e.mediaGroups[i][t]){var s=e.mediaGroups[i][t][n];r(s,i,t,n)}})},D0=function(e){var r=e.playlist,i=e.uri,t=e.id;r.id=t,r.playlistErrors_=0,i&&(r.uri=i),r.attributes=r.attributes||{}},_w=function(e){for(var r=e.playlists.length;r--;){var i=e.playlists[r];D0({playlist:i,id:ad(r,i.uri)}),i.resolvedUri=kt(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||x0.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},xw=function(e){Zr(e,function(r){r.uri&&(r.resolvedUri=kt(e.uri,r.uri))})},Dw=function(e,r){var i=ad(0,r),t={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:A.default.location.href,resolvedUri:A.default.location.href,playlists:[{uri:r,id:i,resolvedUri:r,attributes:{}}]};return t.playlists[i]=t.playlists[0],t.playlists[r]=t.playlists[0],t},T0=function(e,r,i){i===void 0&&(i=vw),e.uri=r;for(var t=0;t<e.playlists.length;t++)if(!e.playlists[t].uri){var n="placeholder-uri-"+t;e.playlists[t].uri=n}var s=xa(e);Zr(e,function(o,u,l,c){if(!o.playlists||!o.playlists.length){if(s&&u==="AUDIO"&&!o.uri)for(var f=0;f<e.playlists.length;f++){var m=e.playlists[f];if(m.attributes&&m.attributes.AUDIO&&m.attributes.AUDIO===l)return}o.playlists=[ot({},o)]}o.playlists.forEach(function(_,x){var b=i(u,l,c,_),T=ad(x,b);_.uri?_.resolvedUri=_.resolvedUri||kt(e.uri,_.uri):(_.uri=x===0?b:T,_.resolvedUri=_.uri),_.id=_.id||T,_.attributes=_.attributes||{},e.playlists[_.id]=_,e.playlists[_.uri]=_})}),_w(e),xw(e)},fo=I.mergeOptions,Tw=I.EventTarget,bw=function(e,r){if(r.endList||!r.serverControl)return e;var i={};if(r.serverControl.canBlockReload){var t=r.preloadSegment,n=r.mediaSequence+r.segments.length;if(t){var s=t.parts||[],o=h0(r)-1;o>-1&&o!==s.length-1&&(i._HLS_part=o),(o>-1||s.length)&&n--}i._HLS_msn=n}if(r.serverControl&&r.serverControl.canSkipUntil&&(i._HLS_skip=r.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){var u=new A.default.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(l){!i.hasOwnProperty(l)||u.searchParams.set(l,i[l])}),e=u.toString()}return e},Ew=function(e,r){if(!e)return r;var i=fo(e,r);if(e.preloadHints&&!r.preloadHints&&delete i.preloadHints,e.parts&&!r.parts)delete i.parts;else if(e.parts&&r.parts)for(var t=0;t<r.parts.length;t++)e.parts&&e.parts[t]&&(i.parts[t]=fo(e.parts[t],r.parts[t]));return!e.skipped&&r.skipped&&(i.skipped=!1),e.preload&&!r.preload&&(i.preload=!1),i},Sw=function(e,r,i){var t=e.slice(),n=r.slice();i=i||0;for(var s=[],o,u=0;u<n.length;u++){var l=t[u+i],c=n[u];l?(o=l.map||o,s.push(Ew(l,c))):(o&&!c.map&&(c.map=o),s.push(c))}return s},b0=function(e,r){!e.resolvedUri&&e.uri&&(e.resolvedUri=kt(r,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=kt(r,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=kt(r,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=kt(r,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(i){i.resolvedUri||(i.resolvedUri=kt(r,i.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(i){i.resolvedUri||(i.resolvedUri=kt(r,i.uri))})},E0=function(e){var r=e.segments||[],i=e.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(var t=0;t<i.preloadHints.length;t++)if(i.preloadHints[t].type==="MAP")return r}i.duration=e.targetDuration,i.preload=!0,r.push(i)}return r},S0=function(e,r){return e===r||e.segments&&r.segments&&e.segments.length===r.segments.length&&e.endList===r.endList&&e.mediaSequence===r.mediaSequence&&e.preloadSegment===r.preloadSegment},gc=function(e,r,i){i===void 0&&(i=S0);var t=fo(e,{}),n=t.playlists[r.id];if(!n||i(n,r))return null;r.segments=E0(r);var s=fo(n,r);if(s.preloadSegment&&!r.preloadSegment&&delete s.preloadSegment,n.segments){if(r.skip){r.segments=r.segments||[];for(var o=0;o<r.skip.skippedSegments;o++)r.segments.unshift({skipped:!0})}s.segments=Sw(n.segments,r.segments,r.mediaSequence-n.mediaSequence)}s.segments.forEach(function(l){b0(l,s.resolvedUri)});for(var u=0;u<t.playlists.length;u++)t.playlists[u].id===r.id&&(t.playlists[u]=s);return t.playlists[r.id]=s,t.playlists[r.uri]=s,Zr(e,function(l,c,f,m){if(!!l.playlists)for(var _=0;_<l.playlists.length;_++)r.id===l.playlists[_].id&&(l.playlists[_]=s)}),t},vc=function(e,r){var i=e.segments||[],t=i[i.length-1],n=t&&t.parts&&t.parts[t.parts.length-1],s=n&&n.duration||t&&t.duration;return r&&s?s*1e3:(e.partTargetDuration||e.targetDuration||10)*500},Mr=function(a){q(e,a);function e(i,t,n){var s;if(n===void 0&&(n={}),s=a.call(this)||this,!i)throw new Error("A non-empty playlist URL or object is required");s.logger_=Ot("PlaylistLoader");var o=n,u=o.withCredentials,l=u===void 0?!1:u,c=o.handleManifestRedirects,f=c===void 0?!1:c;s.src=i,s.vhs_=t,s.withCredentials=l,s.handleManifestRedirects=f;var m=t.options_;return s.customTagParsers=m&&m.customTagParsers||[],s.customTagMappers=m&&m.customTagMappers||[],s.experimentalLLHLS=m&&m.experimentalLLHLS||!1,I.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(ee(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var r=e.prototype;return r.handleMediaupdatetimeout_=function(){var t=this;if(this.state==="HAVE_METADATA"){var n=this.media(),s=kt(this.master.uri,n.uri);this.experimentalLLHLS&&(s=bw(s,n)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,u){if(!!t.request){if(o)return t.playlistRequestError(t.request,t.media(),"HAVE_METADATA");t.haveMetadata({playlistString:t.request.responseText,url:t.media().uri,id:t.media().id})}})}},r.playlistRequestError=function(t,n,s){var o=n.uri,u=n.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[u],status:t.status,message:"HLS playlist request error at URL: "+o+".",responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")},r.parseManifest_=function(t){var n=this,s=t.url,o=t.manifestString;return yw({onwarn:function(l){var c=l.message;return n.logger_("m3u8-parser warn for "+s+": "+c)},oninfo:function(l){var c=l.message;return n.logger_("m3u8-parser info for "+s+": "+c)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},r.haveMetadata=function(t){var n=t.playlistString,s=t.playlistObject,o=t.url,u=t.id;this.request=null,this.state="HAVE_METADATA";var l=s||this.parseManifest_({url:o,manifestString:n});l.lastRequest=Date.now(),D0({playlist:l,uri:o,id:u});var c=gc(this.master,l);this.targetDuration=l.partTargetDuration||l.targetDuration,this.pendingMedia_=null,c?(this.master=c,this.media_=this.master.playlists[u]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(vc(this.media(),!!c)),this.trigger("loadedplaylist")},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),A.default.clearTimeout(this.mediaUpdateTimeout),A.default.clearTimeout(this.finalRenditionTimeout),this.off()},r.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},r.media=function(t,n){var s=this;if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof t=="string"){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(A.default.clearTimeout(this.finalRenditionTimeout),n){var o=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=A.default.setTimeout(this.media.bind(this,t,!1),o);return}var u=this.state,l=!this.media_||t.id!==this.media_.id,c=this.master.playlists[t.id];if(c&&c.endList||t.endList&&t.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,l&&(this.trigger("mediachanging"),u==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(vc(t,!0)),!!l){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t,this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(f,m){if(!!s.request){if(t.lastRequest=Date.now(),t.resolvedUri=co(s.handleManifestRedirects,t.resolvedUri,m),f)return s.playlistRequestError(s.request,t,u);s.haveMetadata({playlistString:m.responseText,url:t.uri,id:t.id}),u==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},r.pause=function(){this.mediaUpdateTimeout&&(A.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},r.load=function(t){var n=this;this.mediaUpdateTimeout&&(A.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(t){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=A.default.setTimeout(function(){n.mediaUpdateTimeout=null,n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},r.updateMediaUpdateTimeout_=function(t){var n=this;this.mediaUpdateTimeout&&(A.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=A.default.setTimeout(function(){n.mediaUpdateTimeout=null,n.trigger("mediaupdatetimeout"),n.updateMediaUpdateTimeout_(t)},t))},r.start=function(){var t=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=A.default.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){t.setupInitialPlaylist(t.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(n,s){if(!!t.request){if(t.request=null,n)return t.error={status:s.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:s.responseText,code:2},t.state==="HAVE_NOTHING"&&(t.started=!1),t.trigger("error");t.src=co(t.handleManifestRedirects,t.src,s);var o=t.parseManifest_({manifestString:s.responseText,url:t.src});t.setupInitialPlaylist(o)}})},r.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},r.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists){this.master=t,T0(this.master,this.srcUri()),t.playlists.forEach(function(s){s.segments=E0(s),s.segments.forEach(function(o){b0(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var n=this.srcUri()||A.default.location.href;this.master=Dw(t,n),this.haveMetadata({playlistObject:t,url:n,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(Tw),Cw=I.xhr,ww=I.mergeOptions,yc=function(e,r,i,t){var n=e.responseType==="arraybuffer"?e.response:e.responseText;!r&&n&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=n.byteLength||n.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),r&&r.code==="ETIMEDOUT"&&(e.timedout=!0),!r&&!e.aborted&&i.statusCode!==200&&i.statusCode!==206&&i.statusCode!==0&&(r=new Error("XHR Failed with a response of: "+(e&&(n||e.responseText)))),t(r,e)},C0=function(){var e=function r(i,t){i=ww({timeout:45e3},i);var n=r.beforeRequest||I.Vhs.xhr.beforeRequest;if(n&&typeof n=="function"){var s=n(i);s&&(i=s)}var o=I.Vhs.xhr.original===!0?Cw:I.Vhs.xhr,u=o(i,function(c,f){return yc(u,c,f,t)}),l=u.abort;return u.abort=function(){return u.aborted=!0,l.apply(u,arguments)},u.uri=i.uri,u.requestTime=Date.now(),u};return e.original=!0,e},Aw=function(e){var r,i=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?r=A.default.BigInt(e.offset)+A.default.BigInt(e.length)-A.default.BigInt(1):r=e.offset+e.length-1,"bytes="+i+"-"+r},_c=function(e){var r={};return e.byterange&&(r.Range=Aw(e.byterange)),r},Fw=function(e,r){return e.start(r)+"-"+e.end(r)},kw=function(e,r){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(r%2?" ":"")},Pw=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},w0=function(e){var r={};return Object.keys(e).forEach(function(i){var t=e[i];cl(t)?r[i]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:r[i]=t}),r},ho=function(e){var r=e.byterange||{length:1/0,offset:0};return[r.length,r.offset,e.resolvedUri].join(",")},A0=function(e){return e.resolvedUri},F0=function(e){for(var r=Array.prototype.slice.call(e),i=16,t="",n,s,o=0;o<r.length/i;o++)n=r.slice(o*i,o*i+i).map(kw).join(""),s=r.slice(o*i,o*i+i).map(Pw).join(""),t+=n+" "+s+`
`;return t},Iw=function(e){var r=e.bytes;return F0(r)},Ow=function(e){var r="",i;for(i=0;i<e.length;i++)r+=Fw(e,i)+" ";return r},Lw=Object.freeze({__proto__:null,createTransferableMessage:w0,initSegmentId:ho,segmentKeyId:A0,hexDump:F0,tagDump:Iw,textRanges:Ow}),k0=.25,Rw=function(e,r){if(!r.dateTimeObject)return null;var i=r.videoTimingInfo.transmuxerPrependedSeconds,t=r.videoTimingInfo.transmuxedPresentationStart,n=t+i,s=e-n;return new Date(r.dateTimeObject.getTime()+s*1e3)},Mw=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},Nw=function(e,r){var i;try{i=new Date(e)}catch{return null}if(!r||!r.segments||r.segments.length===0)return null;var t=r.segments[0];if(i<t.dateTimeObject)return null;for(var n=0;n<r.segments.length-1;n++){t=r.segments[n];var s=r.segments[n+1].dateTimeObject;if(i<s)break}var o=r.segments[r.segments.length-1],u=o.dateTimeObject,l=o.videoTimingInfo?Mw(o.videoTimingInfo):o.duration+o.duration*k0,c=new Date(u.getTime()+l*1e3);return i>c?null:(i>u&&(t=o),{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:ft.duration(r,r.mediaSequence+r.segments.indexOf(t)),type:t.videoTimingInfo?"accurate":"estimate"})},Bw=function(e,r){if(!r||!r.segments||r.segments.length===0)return null;for(var i=0,t,n=0;n<r.segments.length&&(t=r.segments[n],i=t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationEnd:i+t.duration,!(e<=i));n++);var s=r.segments[r.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+s.duration*k0)return null;t=s}return{segment:t,estimatedStart:t.videoTimingInfo?t.videoTimingInfo.transmuxedPresentationStart:i-t.duration,type:t.videoTimingInfo?"accurate":"estimate"}},Uw=function(e,r){var i,t;try{i=new Date(e),t=new Date(r)}catch{}var n=i.getTime(),s=t.getTime();return(s-n)/1e3},jw=function(e){if(!e.segments||e.segments.length===0)return!1;for(var r=0;r<e.segments.length;r++){var i=e.segments[r];if(!i.dateTimeObject)return!1}return!0},Hw=function(e){var r=e.playlist,i=e.time,t=i===void 0?void 0:i,n=e.callback;if(!n)throw new Error("getProgramTime: callback must be provided");if(!r||t===void 0)return n({message:"getProgramTime: playlist and time must be provided"});var s=Bw(t,r);if(!s)return n({message:"valid programTime was not found"});if(s.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:t},u=Rw(t,s.segment);return u&&(o.programDateTime=u.toISOString()),n(null,o)},Vw=function a(e){var r=e.programTime,i=e.playlist,t=e.retryCount,n=t===void 0?2:t,s=e.seekTo,o=e.pauseAfterSeek,u=o===void 0?!0:o,l=e.tech,c=e.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(typeof r>"u"||!i||!s)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!jw(i))return c({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var f=Nw(r,i);if(!f)return c({message:r+" was not found in the stream"});var m=f.segment,_=Uw(m.dateTimeObject,r);if(f.type==="estimate"){if(n===0)return c({message:r+" is not buffered yet. Try again"});s(f.estimatedStart+_),l.one("seeked",function(){a({programTime:r,playlist:i,retryCount:n-1,seekTo:s,pauseAfterSeek:u,tech:l,callback:c})});return}var x=m.start+_,b=function(){return c(null,l.currentTime())};l.one("seeked",b),u&&l.pause(),s(x)},ic=function(e,r){if(e.readyState===4)return r()},$w=function(e,r,i){var t=[],n,s=!1,o=function(m,_,x,b){return _.abort(),s=!0,i(m,_,x,b)},u=function(m,_){if(!s){if(m)return o(m,_,"",t);var x=_.responseText.substring(t&&t.byteLength||0,_.responseText.length);if(t=Sp(t,As(x,!0)),n=n||qi(t),t.length<10||n&&t.length<n+2)return ic(_,function(){return o(m,_,"",t)});var b=$s(t);return b==="ts"&&t.length<188?ic(_,function(){return o(m,_,"",t)}):!b&&t.length<376?ic(_,function(){return o(m,_,"",t)}):o(null,_,b,t)}},l={uri:e,beforeSend:function(m){m.overrideMimeType("text/plain; charset=x-user-defined"),m.addEventListener("progress",function(_){return _.total,_.loaded,yc(m,null,{statusCode:m.status},u)})}},c=r(l,function(f,m){return yc(c,f,m,u)});return c},Ww=I.EventTarget,P0=I.mergeOptions,Lg=function(e,r){if(!S0(e,r)||e.sidx&&r.sidx&&(e.sidx.offset!==r.sidx.offset||e.sidx.length!==r.sidx.length))return!1;if(!e.sidx&&r.sidx||e.sidx&&!r.sidx||e.segments&&!r.segments||!e.segments&&r.segments)return!1;if(!e.segments&&!r.segments)return!0;for(var i=0;i<e.segments.length;i++){var t=e.segments[i],n=r.segments[i];if(t.uri!==n.uri)return!1;if(!(!t.byterange&&!n.byterange)){var s=t.byterange,o=n.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},qw=function(e,r,i,t){var n=t.attributes.NAME||i;return"placeholder-uri-"+e+"-"+r+"-"+n},zw=function(e){var r=e.masterXml,i=e.srcUrl,t=e.clientOffset,n=e.sidxMapping,s=e.previousManifest,o=Rm(r,{manifestUri:i,clientOffset:t,sidxMapping:n,previousManifest:s});return T0(o,i,qw),o},Gw=function(e,r){Zr(e,function(i,t,n,s){s in r.mediaGroups[t][n]||delete e.mediaGroups[t][n][s]})},Kw=function(e,r,i){for(var t=!0,n=P0(e,{duration:r.duration,minimumUpdatePeriod:r.minimumUpdatePeriod,timelineStarts:r.timelineStarts}),s=0;s<r.playlists.length;s++){var o=r.playlists[s];if(o.sidx){var u=Gn(o.sidx);i&&i[u]&&i[u].sidx&&js(o,i[u].sidx,o.sidx.resolvedUri)}var l=gc(n,o,Lg);l&&(n=l,t=!1)}return Zr(r,function(c,f,m,_){if(c.playlists&&c.playlists.length){var x=c.playlists[0].id,b=gc(n,c.playlists[0],Lg);b&&(n=b,_ in n.mediaGroups[f][m]||(n.mediaGroups[f][m][_]=c),n.mediaGroups[f][m][_].playlists[0]=n.playlists[x],t=!1)}}),Gw(n,r),r.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(t=!1),t?null:n},Xw=function(e,r){var i=Boolean(!e.map&&!r.map),t=i||Boolean(e.map&&r.map&&e.map.byterange.offset===r.map.byterange.offset&&e.map.byterange.length===r.map.byterange.length);return t&&e.uri===r.uri&&e.byterange.offset===r.byterange.offset&&e.byterange.length===r.byterange.length},Rg=function(e,r){var i={};for(var t in e){var n=e[t],s=n.sidx;if(s){var o=Gn(s);if(!r[o])break;var u=r[o].sidxInfo;Xw(u,s)&&(i[o]=r[o])}}return i},Yw=function(e,r){var i=Rg(e.playlists,r),t=i;return Zr(e,function(n,s,o,u){if(n.playlists&&n.playlists.length){var l=n.playlists;t=P0(t,Rg(l,r))}}),t},xc=function(a){q(e,a);function e(i,t,n,s){var o;n===void 0&&(n={}),o=a.call(this)||this,o.masterPlaylistLoader_=s||ee(o),s||(o.isMaster_=!0);var u=n,l=u.withCredentials,c=l===void 0?!1:l,f=u.handleManifestRedirects,m=f===void 0?!1:f;if(o.vhs_=t,o.withCredentials=c,o.handleManifestRedirects=m,!i)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Ot("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=i,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=i,o}var r=e.prototype;return r.requestErrored_=function(t,n,s){if(!this.request)return!0;if(this.request=null,t)return this.error=typeof t=="object"&&!(t instanceof Error)?t:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2},s&&(this.state=s),this.trigger("error"),!0},r.addSidxSegments_=function(t,n,s){var o=this,u=t.sidx&&Gn(t.sidx);if(!t.sidx||!u||this.masterPlaylistLoader_.sidxMapping_[u]){this.mediaRequest_=A.default.setTimeout(function(){return s(!1)},0);return}var l=co(this.handleManifestRedirects,t.sidx.resolvedUri),c=function(m,_){if(!o.requestErrored_(m,_,n)){var x=o.masterPlaylistLoader_.sidxMapping_,b;try{b=(0,Zg.default)(Q(_.response).subarray(8))}catch(T){o.requestErrored_(T,_,n);return}return x[u]={sidxInfo:t.sidx,sidx:b},js(t,b,t.sidx.resolvedUri),s(!0)}};this.request=$w(l,this.vhs_.xhr,function(f,m,_,x){if(f)return c(f,m);if(!_||_!=="mp4")return c({status:m.status,message:"Unsupported "+(_||"unknown")+" container type for sidx segment at URL: "+l,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},m);var b=t.sidx.byterange,T=b.offset,C=b.length;if(x.length>=C+T)return c(f,{response:x.subarray(T,T+C),status:m.status,uri:m.uri});o.request=o.vhs_.xhr({uri:l,responseType:"arraybuffer",headers:_c({byterange:t.sidx.byterange})},c)})},r.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},A.default.clearTimeout(this.minimumUpdatePeriodTimeout_),A.default.clearTimeout(this.mediaRequest_),A.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},r.hasPendingRequest=function(){return this.request||this.mediaRequest_},r.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},r.media=function(t){var n=this;if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof t=="string"){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var o=!this.media_||t.id!==this.media_.id;if(o&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList){this.state="HAVE_METADATA",this.media_=t,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}!o||(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,s,function(u){n.haveMetadata({startingState:s,playlist:t})}))},r.haveMetadata=function(t){var n=t.startingState,s=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),n==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},r.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),A.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(A.default.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},r.load=function(t){var n=this;A.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(t){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=A.default.setTimeout(function(){return n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},r.start=function(){var t=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=A.default.setTimeout(function(){return t.haveMaster_()},0);return}this.requestMaster_(function(n,s){t.haveMaster_(),!t.hasPendingRequest()&&!t.media_&&t.media(t.masterPlaylistLoader_.master.playlists[0])})},r.requestMaster_=function(t){var n=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(n.requestErrored_(s,o)){n.state==="HAVE_NOTHING"&&(n.started=!1);return}var u=o.responseText!==n.masterPlaylistLoader_.masterXml_;if(n.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?n.masterLoaded_=Date.parse(o.responseHeaders.date):n.masterLoaded_=Date.now(),n.masterPlaylistLoader_.srcUrl=co(n.handleManifestRedirects,n.masterPlaylistLoader_.srcUrl,o),u){n.handleMaster_(),n.syncClientServerClock_(function(){return t(o,u)});return}return t(o,u)})},r.syncClientServerClock_=function(t){var n=this,s=Mm(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),t();this.request=this.vhs_.xhr({uri:kt(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,u){if(!!n.request){if(o)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),t();var l;s.method==="HEAD"?!u.responseHeaders||!u.responseHeaders.date?l=n.masterLoaded_:l=Date.parse(u.responseHeaders.date):l=Date.parse(u.responseText),n.masterPlaylistLoader_.clientOffset_=l-Date.now(),t()}})},r.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},r.handleMaster_=function(){this.mediaRequest_=null;var t=this.masterPlaylistLoader_.master,n=zw({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:t});t&&(n=Kw(t,n,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=n||t;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!t||n&&n.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(n)},r.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(A.default.clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var n=t.master&&t.master.minimumUpdatePeriod;if(n===0&&(t.media()?n=t.media().targetDuration*1e3:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_("found invalid minimumUpdatePeriod of "+n+", not setting a timeout");return}this.createMUPTimeout_(n)},r.createMUPTimeout_=function(t){var n=this.masterPlaylistLoader_;n.minimumUpdatePeriodTimeout_=A.default.setTimeout(function(){n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(t)},t)},r.refreshXml_=function(){var t=this;this.requestMaster_(function(n,s){!s||(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=Yw(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.sidxMapping_),t.addSidxSegments_(t.media(),t.state,function(o){t.refreshMedia_(t.media().id)}))})},r.refreshMedia_=function(t){var n=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[t];if(o?this.media_=s[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var u=function l(){n.media().endList||(n.mediaUpdateTimeout=A.default.setTimeout(function(){n.trigger("mediaupdatetimeout"),l()},vc(n.media(),Boolean(o))))};u()}this.trigger("loadedplaylist")},e}(Ww),Ue={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Qw=function(e){for(var r=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r.buffer},I0=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Jw=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var r=new BlobBuilder;return r.append(e),URL.createObjectURL(r.getBlob())}},O0=function(e){return function(){var r=Jw(e),i=I0(new Worker(r));i.objURL=r;var t=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(r),t.call(this)},i}},L0=function(e){return"var browserWorkerPolyFill = "+I0.toString()+`;
browserWorkerPolyFill(self);
`+e},R0=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Zw=L0(R0(function(){var a=function(){this.init=function(){var d={};this.on=function(p,h){d[p]||(d[p]=[]),d[p]=d[p].concat(h)},this.off=function(p,h){var g;return d[p]?(g=d[p].indexOf(h),d[p]=d[p].slice(),d[p].splice(g,1),g>-1):!1},this.trigger=function(p){var h,g,v,y;if(h=d[p],!!h)if(arguments.length===2)for(v=h.length,g=0;g<v;++g)h[g].call(this,arguments[1]);else{for(y=[],g=arguments.length,g=1;g<arguments.length;++g)y.push(arguments[g]);for(v=h.length,g=0;g<v;++g)h[g].apply(this,y)}},this.dispose=function(){d={}}}};a.prototype.pipe=function(D){return this.on("data",function(d){D.push(d)}),this.on("done",function(d){D.flush(d)}),this.on("partialdone",function(d){D.partialFlush(d)}),this.on("endedtimeline",function(d){D.endTimeline(d)}),this.on("reset",function(d){D.reset(d)}),D},a.prototype.push=function(D){this.trigger("data",D)},a.prototype.flush=function(D){this.trigger("done",D)},a.prototype.partialFlush=function(D){this.trigger("partialdone",D)},a.prototype.endTimeline=function(D){this.trigger("endedtimeline",D)},a.prototype.reset=function(D){this.trigger("reset",D)};var e=a,r=Math.pow(2,32),i=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h;return p.getBigUint64?(h=p.getBigUint64(0),h<Number.MAX_SAFE_INTEGER?Number(h):h):p.getUint32(0)*r+p.getUint32(4)},t={getUint64:i,MAX_UINT32:r},n=t.MAX_UINT32,s,o,u,l,c,f,m,_,x,b,T,C,k,j,L,R,H,B,O,N,M,G,K,J,ce,ye,ie,oe,xe,qe,fe,Sa,_t,zt,mi,Fi;(function(){var D;if(K={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(D in K)K.hasOwnProperty(D)&&(K[D]=[D.charCodeAt(0),D.charCodeAt(1),D.charCodeAt(2),D.charCodeAt(3)]);J=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),ye=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),ce=new Uint8Array([0,0,0,1]),ie=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),oe=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),xe={video:ie,audio:oe},Sa=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),fe=new Uint8Array([0,0,0,0,0,0,0,0]),_t=new Uint8Array([0,0,0,0,0,0,0,0]),zt=_t,mi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Fi=_t,qe=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(d){var p=[],h=0,g,v,y;for(g=1;g<arguments.length;g++)p.push(arguments[g]);for(g=p.length;g--;)h+=p[g].byteLength;for(v=new Uint8Array(h+8),y=new DataView(v.buffer,v.byteOffset,v.byteLength),y.setUint32(0,v.byteLength),v.set(d,4),g=0,h=8;g<p.length;g++)v.set(p[g],h),h+=p[g].byteLength;return v},o=function(){return s(K.dinf,s(K.dref,Sa))},u=function(d){return s(K.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},l=function(){return s(K.ftyp,J,ce,J,ye)},R=function(d){return s(K.hdlr,xe[d])},c=function(d){return s(K.mdat,d)},L=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(p[12]=d.samplerate>>>24&255,p[13]=d.samplerate>>>16&255,p[14]=d.samplerate>>>8&255,p[15]=d.samplerate&255),s(K.mdhd,p)},j=function(d){return s(K.mdia,L(d),R(d.type),m(d))},f=function(d){return s(K.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},m=function(d){return s(K.minf,d.type==="video"?s(K.vmhd,qe):s(K.smhd,fe),o(),B(d))},_=function(d,p){for(var h=[],g=p.length;g--;)h[g]=N(p[g]);return s.apply(null,[K.moof,f(d)].concat(h))},x=function(d){for(var p=d.length,h=[];p--;)h[p]=C(d[p]);return s.apply(null,[K.moov,T(4294967295)].concat(h).concat(b(d)))},b=function(d){for(var p=d.length,h=[];p--;)h[p]=M(d[p]);return s.apply(null,[K.mvex].concat(h))},T=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(K.mvhd,p)},H=function(d){var p=d.samples||[],h=new Uint8Array(4+p.length),g,v;for(v=0;v<p.length;v++)g=p[v].flags,h[v+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return s(K.sdtp,h)},B=function(d){return s(K.stbl,O(d),s(K.stts,Fi),s(K.stsc,zt),s(K.stsz,mi),s(K.stco,_t))},function(){var D,d;O=function(h){return s(K.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),h.type==="video"?D(h):d(h))},D=function(h){var g=h.sps||[],v=h.pps||[],y=[],E=[],S,F;for(S=0;S<g.length;S++)y.push((g[S].byteLength&65280)>>>8),y.push(g[S].byteLength&255),y=y.concat(Array.prototype.slice.call(g[S]));for(S=0;S<v.length;S++)E.push((v[S].byteLength&65280)>>>8),E.push(v[S].byteLength&255),E=E.concat(Array.prototype.slice.call(v[S]));if(F=[K.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(h.width&65280)>>8,h.width&255,(h.height&65280)>>8,h.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(K.avcC,new Uint8Array([1,h.profileIdc,h.profileCompatibility,h.levelIdc,255].concat([g.length],y,[v.length],E))),s(K.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],h.sarRatio){var w=h.sarRatio[0],P=h.sarRatio[1];F.push(s(K.pasp,new Uint8Array([(w&4278190080)>>24,(w&16711680)>>16,(w&65280)>>8,w&255,(P&4278190080)>>24,(P&16711680)>>16,(P&65280)>>8,P&255])))}return s.apply(null,F)},d=function(h){return s(K.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(h.channelcount&65280)>>8,h.channelcount&255,(h.samplesize&65280)>>8,h.samplesize&255,0,0,0,0,(h.samplerate&65280)>>8,h.samplerate&255,0,0]),u(h))}}(),k=function(d){var p=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return s(K.tkhd,p)},N=function(d){var p,h,g,v,y,E,S;return p=s(K.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),E=Math.floor(d.baseMediaDecodeTime/n),S=Math.floor(d.baseMediaDecodeTime%n),h=s(K.tfdt,new Uint8Array([1,0,0,0,E>>>24&255,E>>>16&255,E>>>8&255,E&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255])),y=32+20+8+16+8+8,d.type==="audio"?(g=G(d,y),s(K.traf,p,h,g)):(v=H(d),g=G(d,v.length+y),s(K.traf,p,h,g,v))},C=function(d){return d.duration=d.duration||4294967295,s(K.trak,k(d),j(d))},M=function(d){var p=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(p[p.length-1]=0),s(K.trex,p)},function(){var D,d,p;p=function(g,v){var y=0,E=0,S=0,F=0;return g.length&&(g[0].duration!==void 0&&(y=1),g[0].size!==void 0&&(E=2),g[0].flags!==void 0&&(S=4),g[0].compositionTimeOffset!==void 0&&(F=8)),[0,0,y|E|S|F,1,(g.length&4278190080)>>>24,(g.length&16711680)>>>16,(g.length&65280)>>>8,g.length&255,(v&4278190080)>>>24,(v&16711680)>>>16,(v&65280)>>>8,v&255]},d=function(g,v){var y,E,S,F,w,P;for(F=g.samples||[],v+=8+12+16*F.length,S=p(F,v),E=new Uint8Array(S.length+F.length*16),E.set(S),y=S.length,P=0;P<F.length;P++)w=F[P],E[y++]=(w.duration&4278190080)>>>24,E[y++]=(w.duration&16711680)>>>16,E[y++]=(w.duration&65280)>>>8,E[y++]=w.duration&255,E[y++]=(w.size&4278190080)>>>24,E[y++]=(w.size&16711680)>>>16,E[y++]=(w.size&65280)>>>8,E[y++]=w.size&255,E[y++]=w.flags.isLeading<<2|w.flags.dependsOn,E[y++]=w.flags.isDependedOn<<6|w.flags.hasRedundancy<<4|w.flags.paddingValue<<1|w.flags.isNonSyncSample,E[y++]=w.flags.degradationPriority&240<<8,E[y++]=w.flags.degradationPriority&15,E[y++]=(w.compositionTimeOffset&4278190080)>>>24,E[y++]=(w.compositionTimeOffset&16711680)>>>16,E[y++]=(w.compositionTimeOffset&65280)>>>8,E[y++]=w.compositionTimeOffset&255;return s(K.trun,E)},D=function(g,v){var y,E,S,F,w,P;for(F=g.samples||[],v+=8+12+8*F.length,S=p(F,v),y=new Uint8Array(S.length+F.length*8),y.set(S),E=S.length,P=0;P<F.length;P++)w=F[P],y[E++]=(w.duration&4278190080)>>>24,y[E++]=(w.duration&16711680)>>>16,y[E++]=(w.duration&65280)>>>8,y[E++]=w.duration&255,y[E++]=(w.size&4278190080)>>>24,y[E++]=(w.size&16711680)>>>16,y[E++]=(w.size&65280)>>>8,y[E++]=w.size&255;return s(K.trun,y)},G=function(g,v){return g.type==="audio"?D(g,v):d(g,v)}}();var Lt={ftyp:l,mdat:c,moof:_,moov:x,initSegment:function(d){var p=l(),h=x(d),g;return g=new Uint8Array(p.byteLength+h.byteLength),g.set(p),g.set(h,p.byteLength),g}},ir=function(d){var p,h,g=[],v=[];for(v.byteLength=0,v.nalCount=0,v.duration=0,g.byteLength=0,p=0;p<d.length;p++)h=d[p],h.nalUnitType==="access_unit_delimiter_rbsp"?(g.length&&(g.duration=h.dts-g.dts,v.byteLength+=g.byteLength,v.nalCount+=g.length,v.duration+=g.duration,v.push(g)),g=[h],g.byteLength=h.data.byteLength,g.pts=h.pts,g.dts=h.dts):(h.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(g.keyFrame=!0),g.duration=h.dts-g.dts,g.byteLength+=h.data.byteLength,g.push(h));return v.length&&(!g.duration||g.duration<=0)&&(g.duration=v[v.length-1].duration),v.byteLength+=g.byteLength,v.nalCount+=g.length,v.duration+=g.duration,v.push(g),v},rr=function(d){var p,h,g=[],v=[];for(g.byteLength=0,g.nalCount=0,g.duration=0,g.pts=d[0].pts,g.dts=d[0].dts,v.byteLength=0,v.nalCount=0,v.duration=0,v.pts=d[0].pts,v.dts=d[0].dts,p=0;p<d.length;p++)h=d[p],h.keyFrame?(g.length&&(v.push(g),v.byteLength+=g.byteLength,v.nalCount+=g.nalCount,v.duration+=g.duration),g=[h],g.nalCount=h.length,g.byteLength=h.byteLength,g.pts=h.pts,g.dts=h.dts,g.duration=h.duration):(g.duration+=h.duration,g.nalCount+=h.length,g.byteLength+=h.byteLength,g.push(h));return v.length&&g.duration<=0&&(g.duration=v[v.length-1].duration),v.byteLength+=g.byteLength,v.nalCount+=g.nalCount,v.duration+=g.duration,v.push(g),v},nr=function(d){var p;return!d[0][0].keyFrame&&d.length>1&&(p=d.shift(),d.byteLength-=p.byteLength,d.nalCount-=p.nalCount,d[0][0].dts=p.dts,d[0][0].pts=p.pts,d[0][0].duration+=p.duration),d},Ay=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},xd=function(d,p){var h=Ay();return h.dataOffset=p,h.compositionTimeOffset=d.pts-d.dts,h.duration=d.duration,h.size=4*d.length,h.size+=d.byteLength,d.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0),h},Fy=function(d,p){var h,g,v,y,E,S=p||0,F=[];for(h=0;h<d.length;h++)for(y=d[h],g=0;g<y.length;g++)E=y[g],v=xd(E,S),S+=v.size,F.push(v);return F},ky=function(d){var p,h,g,v,y,E,S=0,F=d.byteLength,w=d.nalCount,P=F+4*w,U=new Uint8Array(P),z=new DataView(U.buffer);for(p=0;p<d.length;p++)for(v=d[p],h=0;h<v.length;h++)for(y=v[h],g=0;g<y.length;g++)E=y[g],z.setUint32(S,E.data.byteLength),S+=4,U.set(E.data,S),S+=E.data.byteLength;return U},Py=function(d,p){var h,g=p||0,v=[];return h=xd(d,g),v.push(h),v},Iy=function(d){var p,h,g=0,v=d.byteLength,y=d.length,E=v+4*y,S=new Uint8Array(E),F=new DataView(S.buffer);for(p=0;p<d.length;p++)h=d[p],F.setUint32(g,h.data.byteLength),g+=4,S.set(h.data,g),g+=h.data.byteLength;return S},nn={groupNalsIntoFrames:ir,groupFramesIntoGops:rr,extendFirstKeyFrame:nr,generateSampleTable:Fy,concatenateNalData:ky,generateSampleTableForFrame:Py,concatenateNalDataForFrame:Iy},gi=[33,16,5,32,164,27],Ro=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],he=function(d){for(var p=[];d--;)p.push(0);return p},Oy=function(d){return Object.keys(d).reduce(function(p,h){return p[h]=new Uint8Array(d[h].reduce(function(g,v){return g.concat(v)},[])),p},{})},Mo,Ly=function(){if(!Mo){var d={96e3:[gi,[227,64],he(154),[56]],88200:[gi,[231],he(170),[56]],64e3:[gi,[248,192],he(240),[56]],48e3:[gi,[255,192],he(268),[55,148,128],he(54),[112]],44100:[gi,[255,192],he(268),[55,163,128],he(84),[112]],32e3:[gi,[255,192],he(268),[55,234],he(226),[112]],24e3:[gi,[255,192],he(268),[55,255,128],he(268),[111,112],he(126),[224]],16e3:[gi,[255,192],he(268),[55,255,128],he(268),[111,255],he(269),[223,108],he(195),[1,192]],12e3:[Ro,he(268),[3,127,248],he(268),[6,255,240],he(268),[13,255,224],he(268),[27,253,128],he(259),[56]],11025:[Ro,he(268),[3,127,248],he(268),[6,255,240],he(268),[13,255,224],he(268),[27,255,192],he(268),[55,175,128],he(108),[112]],8e3:[Ro,he(268),[3,121,16],he(47),[7]]};Mo=Oy(d)}return Mo},No=9e4,Bo,Uo,Ca,jo,Dd,Td,bd;Bo=function(d){return d*No},Uo=function(d,p){return d*p},Ca=function(d){return d/No},jo=function(d,p){return d/p},Dd=function(d,p){return Bo(jo(d,p))},Td=function(d,p){return Uo(Ca(d),p)},bd=function(d,p,h){return Ca(h?d:d-p)};var le={ONE_SECOND_IN_TS:No,secondsToVideoTs:Bo,secondsToAudioTs:Uo,videoTsToSeconds:Ca,audioTsToSeconds:jo,audioTsToVideoTs:Dd,videoTsToAudioTs:Td,metadataTsToSeconds:bd},Ry=function(d){var p,h,g=0;for(p=0;p<d.length;p++)h=d[p],g+=h.data.byteLength;return g},My=function(d,p,h,g){var v,y=0,E=0,S=0,F=0,w,P,U;if(!!p.length&&(v=le.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),y=Math.ceil(le.ONE_SECOND_IN_TS/(d.samplerate/1024)),h&&g&&(E=v-Math.max(h,g),S=Math.floor(E/y),F=S*y),!(S<1||F>le.ONE_SECOND_IN_TS/2))){for(w=Ly()[d.samplerate],w||(w=p[0].data),P=0;P<S;P++)U=p[0],p.splice(0,0,{data:w,dts:U.dts-y,pts:U.pts-y});return d.baseMediaDecodeTime-=Math.floor(le.videoTsToAudioTs(F,d.samplerate)),F}},Ny=function(d,p,h){return p.minSegmentDts>=h?d:(p.minSegmentDts=1/0,d.filter(function(g){return g.dts>=h?(p.minSegmentDts=Math.min(p.minSegmentDts,g.dts),p.minSegmentPts=p.minSegmentDts,!0):!1}))},By=function(d){var p,h,g=[];for(p=0;p<d.length;p++)h=d[p],g.push({size:h.data.byteLength,duration:1024});return g},Uy=function(d){var p,h,g=0,v=new Uint8Array(Ry(d));for(p=0;p<d.length;p++)h=d[p],v.set(h.data,g),g+=h.data.byteLength;return v},wa={prefixWithSilence:My,trimAdtsFramesByEarliestDts:Ny,generateSampleTable:By,concatenateFrameData:Uy},jy=le.ONE_SECOND_IN_TS,Hy=function(d,p){typeof p.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=p.pts),d.minSegmentPts===void 0?d.minSegmentPts=p.pts:d.minSegmentPts=Math.min(d.minSegmentPts,p.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=p.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,p.pts)),typeof p.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=p.dts),d.minSegmentDts===void 0?d.minSegmentDts=p.dts:d.minSegmentDts=Math.min(d.minSegmentDts,p.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=p.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,p.dts))},Vy=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},$y=function(d,p){var h,g,v=d.minSegmentDts;return p||(v-=d.timelineStartInfo.dts),h=d.timelineStartInfo.baseMediaDecodeTime,h+=v,h=Math.max(0,h),d.type==="audio"&&(g=d.samplerate/jy,h*=g,h=Math.floor(h)),h},bt={clearDtsInfo:Vy,calculateTrackBaseMediaDecodeTime:$y,collectDtsInfo:Hy},Ed=4,Wy=128,qy=function(d){for(var p=0,h={payloadType:-1,payloadSize:0},g=0,v=0;p<d.byteLength&&d[p]!==Wy;){for(;d[p]===255;)g+=255,p++;for(g+=d[p++];d[p]===255;)v+=255,p++;if(v+=d[p++],!h.payload&&g===Ed){var y=String.fromCharCode(d[p+3],d[p+4],d[p+5],d[p+6]);if(y==="GA94"){h.payloadType=g,h.payloadSize=v,h.payload=d.subarray(p,p+v);break}else h.payload=void 0}p+=v,g=0,v=0}return h},zy=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},Gy=function(d,p){var h=[],g,v,y,E;if(!(p[0]&64))return h;for(v=p[0]&31,g=0;g<v;g++)y=g*3,E={type:p[y+2]&3,pts:d},p[y+2]&4&&(E.ccData=p[y+3]<<8|p[y+4],h.push(E));return h},Ky=function(d){for(var p=d.byteLength,h=[],g=1,v,y;g<p-2;)d[g]===0&&d[g+1]===0&&d[g+2]===3?(h.push(g+2),g+=2):g++;if(h.length===0)return d;v=p-h.length,y=new Uint8Array(v);var E=0;for(g=0;g<v;E++,g++)E===h[0]&&(E++,h.shift()),y[g]=d[E];return y},an={parseSei:qy,parseUserData:zy,parseCaptionPackets:Gy,discardEmulationPreventionBytes:Ky,USER_DATA_REGISTERED_ITU_T_T35:Ed},ht=function D(d){d=d||{},D.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new we(0,0),new we(0,1),new we(1,0),new we(1,1)],this.parse708captions_&&(this.cc708Stream_=new De({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(p){p.on("data",this.trigger.bind(this,"data")),p.on("partialdone",this.trigger.bind(this,"partialdone")),p.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ht.prototype=new e,ht.prototype.push=function(D){var d,p,h;if(D.nalUnitType==="sei_rbsp"&&(d=an.parseSei(D.escapedRBSP),!!d.payload&&d.payloadType===an.USER_DATA_REGISTERED_ITU_T_T35&&(p=an.parseUserData(d),!!p))){if(D.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(D.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}h=an.parseCaptionPackets(D.pts,p),this.captionPackets_=this.captionPackets_.concat(h),this.latestDts_!==D.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=D.dts}},ht.prototype.flushCCStreams=function(D){this.ccStreams_.forEach(function(d){return D==="flush"?d.flush():d.partialFlush()},this)},ht.prototype.flushStream=function(D){if(!this.captionPackets_.length){this.flushCCStreams(D);return}this.captionPackets_.forEach(function(d,p){d.presortIndex=p}),this.captionPackets_.sort(function(d,p){return d.pts===p.pts?d.presortIndex-p.presortIndex:d.pts-p.pts}),this.captionPackets_.forEach(function(d){d.type<2?this.dispatchCea608Packet(d):this.dispatchCea708Packet(d)},this),this.captionPackets_.length=0,this.flushCCStreams(D)},ht.prototype.flush=function(){return this.flushStream("flush")},ht.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ht.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(D){D.reset()})},ht.prototype.dispatchCea608Packet=function(D){this.setsTextOrXDSActive(D)?this.activeCea608Channel_[D.type]=null:this.setsChannel1Active(D)?this.activeCea608Channel_[D.type]=0:this.setsChannel2Active(D)&&(this.activeCea608Channel_[D.type]=1),this.activeCea608Channel_[D.type]!==null&&this.ccStreams_[(D.type<<1)+this.activeCea608Channel_[D.type]].push(D)},ht.prototype.setsChannel1Active=function(D){return(D.ccData&30720)===4096},ht.prototype.setsChannel2Active=function(D){return(D.ccData&30720)===6144},ht.prototype.setsTextOrXDSActive=function(D){return(D.ccData&28928)===256||(D.ccData&30974)===4138||(D.ccData&30974)===6186},ht.prototype.dispatchCea708Packet=function(D){this.parse708captions_&&this.cc708Stream_.push(D)};var Xy={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Yy=function(d){var p=Xy[d]||d;return d&4096&&d===p?"":String.fromCharCode(p)},Aa=function(d){return 32<=d&&d<=127||160<=d&&d<=255},Gt=function(d){this.windowNum=d,this.reset()};Gt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Gt.prototype.getText=function(){return this.rows.join(`
`)},Gt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Gt.prototype.newLine=function(D){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(D),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Gt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Gt.prototype.addText=function(D){this.rows[this.rowIdx]+=D},Gt.prototype.backspace=function(){if(!this.isEmpty()){var D=this.rows[this.rowIdx];this.rows[this.rowIdx]=D.substr(0,D.length-1)}};var Fa=function(d,p,h){this.serviceNum=d,this.text="",this.currentWindow=new Gt(-1),this.windows=[],this.stream=h,typeof p=="string"&&this.createTextDecoder(p)};Fa.prototype.init=function(D,d){this.startPts=D;for(var p=0;p<8;p++)this.windows[p]=new Gt(p),typeof d=="function"&&(this.windows[p].beforeRowOverflow=d)},Fa.prototype.setCurrentWindow=function(D){this.currentWindow=this.windows[D]},Fa.prototype.createTextDecoder=function(D){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(D)}catch(d){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+D+" encoding. "+d})}};var De=function D(d){d=d||{},D.prototype.init.call(this);var p=this,h=d.captionServices||{},g={},v;Object.keys(h).forEach(function(y){v=h[y],/^SERVICE/.test(y)&&(g[y]=v.encoding)}),this.serviceEncodings=g,this.current708Packet=null,this.services={},this.push=function(y){y.type===3?(p.new708Packet(),p.add708Bytes(y)):(p.current708Packet===null&&p.new708Packet(),p.add708Bytes(y))}};De.prototype=new e,De.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},De.prototype.add708Bytes=function(D){var d=D.ccData,p=d>>>8,h=d&255;this.current708Packet.ptsVals.push(D.pts),this.current708Packet.data.push(p),this.current708Packet.data.push(h)},De.prototype.push708Packet=function(){var D=this.current708Packet,d=D.data,p=null,h=null,g=0,v=d[g++];for(D.seq=v>>6,D.sizeCode=v&63;g<d.length;g++)v=d[g++],p=v>>5,h=v&31,p===7&&h>0&&(v=d[g++],p=v),this.pushServiceBlock(p,g,h),h>0&&(g+=h-1)},De.prototype.pushServiceBlock=function(D,d,p){var h,g=d,v=this.current708Packet.data,y=this.services[D];for(y||(y=this.initService(D,g));g<d+p&&g<v.length;g++)h=v[g],Aa(h)?g=this.handleText(g,y):h===24?g=this.multiByteCharacter(g,y):h===16?g=this.extendedCommands(g,y):128<=h&&h<=135?g=this.setCurrentWindow(g,y):152<=h&&h<=159?g=this.defineWindow(g,y):h===136?g=this.clearWindows(g,y):h===140?g=this.deleteWindows(g,y):h===137?g=this.displayWindows(g,y):h===138?g=this.hideWindows(g,y):h===139?g=this.toggleWindows(g,y):h===151?g=this.setWindowAttributes(g,y):h===144?g=this.setPenAttributes(g,y):h===145?g=this.setPenColor(g,y):h===146?g=this.setPenLocation(g,y):h===143?y=this.reset(g,y):h===8?y.currentWindow.backspace():h===12?y.currentWindow.clearText():h===13?y.currentWindow.pendingNewLine=!0:h===14?y.currentWindow.clearText():h===141&&g++},De.prototype.extendedCommands=function(D,d){var p=this.current708Packet.data,h=p[++D];return Aa(h)&&(D=this.handleText(D,d,{isExtended:!0})),D},De.prototype.getPts=function(D){return this.current708Packet.ptsVals[Math.floor(D/2)]},De.prototype.initService=function(D,d){var h="SERVICE"+D,p=this,h,g;return h in this.serviceEncodings&&(g=this.serviceEncodings[h]),this.services[D]=new Fa(D,g,p),this.services[D].init(this.getPts(d),function(v){p.flushDisplayed(v,p.services[D])}),this.services[D]},De.prototype.handleText=function(D,d,p){var h=p&&p.isExtended,g=p&&p.isMultiByte,v=this.current708Packet.data,y=h?4096:0,E=v[D],S=v[D+1],F=d.currentWindow,w,P;return d.textDecoder_&&!h?(g?(P=[E,S],D++):P=[E],w=d.textDecoder_.decode(new Uint8Array(P))):w=Yy(y|E),F.pendingNewLine&&!F.isEmpty()&&F.newLine(this.getPts(D)),F.pendingNewLine=!1,F.addText(w),D},De.prototype.multiByteCharacter=function(D,d){var p=this.current708Packet.data,h=p[D+1],g=p[D+2];return Aa(h)&&Aa(g)&&(D=this.handleText(++D,d,{isMultiByte:!0})),D},De.prototype.setCurrentWindow=function(D,d){var p=this.current708Packet.data,h=p[D],g=h&7;return d.setCurrentWindow(g),D},De.prototype.defineWindow=function(D,d){var p=this.current708Packet.data,h=p[D],g=h&7;d.setCurrentWindow(g);var v=d.currentWindow;return h=p[++D],v.visible=(h&32)>>5,v.rowLock=(h&16)>>4,v.columnLock=(h&8)>>3,v.priority=h&7,h=p[++D],v.relativePositioning=(h&128)>>7,v.anchorVertical=h&127,h=p[++D],v.anchorHorizontal=h,h=p[++D],v.anchorPoint=(h&240)>>4,v.rowCount=h&15,h=p[++D],v.columnCount=h&63,h=p[++D],v.windowStyle=(h&56)>>3,v.penStyle=h&7,v.virtualRowCount=v.rowCount+1,D},De.prototype.setWindowAttributes=function(D,d){var p=this.current708Packet.data,h=p[D],g=d.currentWindow.winAttr;return h=p[++D],g.fillOpacity=(h&192)>>6,g.fillRed=(h&48)>>4,g.fillGreen=(h&12)>>2,g.fillBlue=h&3,h=p[++D],g.borderType=(h&192)>>6,g.borderRed=(h&48)>>4,g.borderGreen=(h&12)>>2,g.borderBlue=h&3,h=p[++D],g.borderType+=(h&128)>>5,g.wordWrap=(h&64)>>6,g.printDirection=(h&48)>>4,g.scrollDirection=(h&12)>>2,g.justify=h&3,h=p[++D],g.effectSpeed=(h&240)>>4,g.effectDirection=(h&12)>>2,g.displayEffect=h&3,D},De.prototype.flushDisplayed=function(D,d){for(var p=[],h=0;h<8;h++)d.windows[h].visible&&!d.windows[h].isEmpty()&&p.push(d.windows[h].getText());d.endPts=D,d.text=p.join(`

`),this.pushCaption(d),d.startPts=D},De.prototype.pushCaption=function(D){D.text!==""&&(this.trigger("data",{startPts:D.startPts,endPts:D.endPts,text:D.text,stream:"cc708_"+D.serviceNum}),D.text="",D.startPts=D.endPts)},De.prototype.displayWindows=function(D,d){var p=this.current708Packet.data,h=p[++D],g=this.getPts(D);this.flushDisplayed(g,d);for(var v=0;v<8;v++)h&1<<v&&(d.windows[v].visible=1);return D},De.prototype.hideWindows=function(D,d){var p=this.current708Packet.data,h=p[++D],g=this.getPts(D);this.flushDisplayed(g,d);for(var v=0;v<8;v++)h&1<<v&&(d.windows[v].visible=0);return D},De.prototype.toggleWindows=function(D,d){var p=this.current708Packet.data,h=p[++D],g=this.getPts(D);this.flushDisplayed(g,d);for(var v=0;v<8;v++)h&1<<v&&(d.windows[v].visible^=1);return D},De.prototype.clearWindows=function(D,d){var p=this.current708Packet.data,h=p[++D],g=this.getPts(D);this.flushDisplayed(g,d);for(var v=0;v<8;v++)h&1<<v&&d.windows[v].clearText();return D},De.prototype.deleteWindows=function(D,d){var p=this.current708Packet.data,h=p[++D],g=this.getPts(D);this.flushDisplayed(g,d);for(var v=0;v<8;v++)h&1<<v&&d.windows[v].reset();return D},De.prototype.setPenAttributes=function(D,d){var p=this.current708Packet.data,h=p[D],g=d.currentWindow.penAttr;return h=p[++D],g.textTag=(h&240)>>4,g.offset=(h&12)>>2,g.penSize=h&3,h=p[++D],g.italics=(h&128)>>7,g.underline=(h&64)>>6,g.edgeType=(h&56)>>3,g.fontStyle=h&7,D},De.prototype.setPenColor=function(D,d){var p=this.current708Packet.data,h=p[D],g=d.currentWindow.penColor;return h=p[++D],g.fgOpacity=(h&192)>>6,g.fgRed=(h&48)>>4,g.fgGreen=(h&12)>>2,g.fgBlue=h&3,h=p[++D],g.bgOpacity=(h&192)>>6,g.bgRed=(h&48)>>4,g.bgGreen=(h&12)>>2,g.bgBlue=h&3,h=p[++D],g.edgeRed=(h&48)>>4,g.edgeGreen=(h&12)>>2,g.edgeBlue=h&3,D},De.prototype.setPenLocation=function(D,d){var p=this.current708Packet.data,h=p[D],g=d.currentWindow.penLoc;return d.currentWindow.pendingNewLine=!0,h=p[++D],g.row=h&15,h=p[++D],g.column=h&63,D},De.prototype.reset=function(D,d){var p=this.getPts(D);return this.flushDisplayed(p,d),this.initService(d.serviceNum,D)};var Qy={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ka=function(d){return d===null?"":(d=Qy[d]||d,String.fromCharCode(d))},Pa=14,Jy=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],ki=function(){for(var d=[],p=Pa+1;p--;)d.push("");return d},we=function D(d,p){D.prototype.init.call(this),this.field_=d||0,this.dataChannel_=p||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(h){var g,v,y,E,S;if(g=h.ccData&32639,g===this.lastControlCode_){this.lastControlCode_=null;return}if((g&61440)===4096?this.lastControlCode_=g:g!==this.PADDING_&&(this.lastControlCode_=null),y=g>>>8,E=g&255,g!==this.PADDING_)if(g===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(g===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(h.pts),this.flushDisplayed(h.pts),v=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=v,this.startPts_=h.pts;else if(g===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(h.pts);else if(g===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(h.pts);else if(g===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(h.pts);else if(g===this.CARRIAGE_RETURN_)this.clearFormatting(h.pts),this.flushDisplayed(h.pts),this.shiftRowsUp_(),this.startPts_=h.pts;else if(g===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(g===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(h.pts),this.displayed_=ki();else if(g===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=ki();else if(g===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(h.pts),this.displayed_=ki()),this.mode_="paintOn",this.startPts_=h.pts;else if(this.isSpecialCharacter(y,E))y=(y&3)<<8,S=ka(y|E),this[this.mode_](h.pts,S),this.column_++;else if(this.isExtCharacter(y,E))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),y=(y&3)<<8,S=ka(y|E),this[this.mode_](h.pts,S),this.column_++;else if(this.isMidRowCode(y,E))this.clearFormatting(h.pts),this[this.mode_](h.pts," "),this.column_++,(E&14)===14&&this.addFormatting(h.pts,["i"]),(E&1)===1&&this.addFormatting(h.pts,["u"]);else if(this.isOffsetControlCode(y,E))this.column_+=E&3;else if(this.isPAC(y,E)){var F=Jy.indexOf(g&7968);this.mode_==="rollUp"&&(F-this.rollUpRows_+1<0&&(F=this.rollUpRows_-1),this.setRollUp(h.pts,F)),F!==this.row_&&(this.clearFormatting(h.pts),this.row_=F),E&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(h.pts,["u"]),(g&16)===16&&(this.column_=((g&14)>>1)*4),this.isColorPAC(E)&&(E&14)===14&&this.addFormatting(h.pts,["i"])}else this.isNormalChar(y)&&(E===0&&(E=null),S=ka(y),S+=ka(E),this[this.mode_](h.pts,S),this.column_+=S.length)}};we.prototype=new e,we.prototype.flushDisplayed=function(D){var d=this.displayed_.map(function(p,h){try{return p.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+h+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:D,text:d,stream:this.name_})},we.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=ki(),this.nonDisplayed_=ki(),this.lastControlCode_=null,this.column_=0,this.row_=Pa,this.rollUpRows_=2,this.formatting_=[]},we.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},we.prototype.isSpecialCharacter=function(D,d){return D===this.EXT_&&d>=48&&d<=63},we.prototype.isExtCharacter=function(D,d){return(D===this.EXT_+1||D===this.EXT_+2)&&d>=32&&d<=63},we.prototype.isMidRowCode=function(D,d){return D===this.EXT_&&d>=32&&d<=47},we.prototype.isOffsetControlCode=function(D,d){return D===this.OFFSET_&&d>=33&&d<=35},we.prototype.isPAC=function(D,d){return D>=this.BASE_&&D<this.BASE_+8&&d>=64&&d<=127},we.prototype.isColorPAC=function(D){return D>=64&&D<=79||D>=96&&D<=127},we.prototype.isNormalChar=function(D){return D>=32&&D<=127},we.prototype.setRollUp=function(D,d){if(this.mode_!=="rollUp"&&(this.row_=Pa,this.mode_="rollUp",this.flushDisplayed(D),this.nonDisplayed_=ki(),this.displayed_=ki()),d!==void 0&&d!==this.row_)for(var p=0;p<this.rollUpRows_;p++)this.displayed_[d-p]=this.displayed_[this.row_-p],this.displayed_[this.row_-p]="";d===void 0&&(d=this.row_),this.topRow_=d-this.rollUpRows_+1},we.prototype.addFormatting=function(D,d){this.formatting_=this.formatting_.concat(d);var p=d.reduce(function(h,g){return h+"<"+g+">"},"");this[this.mode_](D,p)},we.prototype.clearFormatting=function(D){if(!!this.formatting_.length){var d=this.formatting_.reverse().reduce(function(p,h){return p+"</"+h+">"},"");this.formatting_=[],this[this.mode_](D,d)}},we.prototype.popOn=function(D,d){var p=this.nonDisplayed_[this.row_];p+=d,this.nonDisplayed_[this.row_]=p},we.prototype.rollUp=function(D,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p},we.prototype.shiftRowsUp_=function(){var D;for(D=0;D<this.topRow_;D++)this.displayed_[D]="";for(D=this.row_+1;D<Pa+1;D++)this.displayed_[D]="";for(D=this.topRow_;D<this.row_;D++)this.displayed_[D]=this.displayed_[D+1];this.displayed_[this.row_]=""},we.prototype.paintOn=function(D,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p};var Ia={CaptionStream:ht,Cea608Stream:we,Cea708Stream:De},Ve={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Zy=8589934592,e_=4294967296,Sd="shared",Ho=function(d,p){var h=1;for(d>p&&(h=-1);Math.abs(p-d)>e_;)d+=h*Zy;return d},Cd=function D(d){var p,h;D.prototype.init.call(this),this.type_=d||Sd,this.push=function(g){this.type_!==Sd&&g.type!==this.type_||(h===void 0&&(h=g.dts),g.dts=Ho(g.dts,h),g.pts=Ho(g.pts,h),p=g.dts,this.trigger("data",g))},this.flush=function(){h=p,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){h=void 0,p=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Cd.prototype=new e;var wd={TimestampRolloverStream:Cd,handleRollover:Ho},Ad=function(d,p,h){var g,v="";for(g=p;g<h;g++)v+="%"+("00"+d[g].toString(16)).slice(-2);return v},Oa=function(d,p,h){return decodeURIComponent(Ad(d,p,h))},t_=function(d,p,h){return unescape(Ad(d,p,h))},La=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Fd={TXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=Oa(d.data,1,p),d.value=Oa(d.data,p+1,d.data.length).replace(/\0*$/,"");break}d.data=d.value}},WXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=Oa(d.data,1,p),d.url=Oa(d.data,p+1,d.data.length);break}}},PRIV:function(d){var p;for(p=0;p<d.data.length;p++)if(d.data[p]===0){d.owner=t_(d.data,0,p);break}d.privateData=d.data.subarray(p+1),d.data=d.privateData}},Ra;Ra=function(d){var p={descriptor:d&&d.descriptor},h=0,g=[],v=0,y;if(Ra.prototype.init.call(this),this.dispatchType=Ve.METADATA_STREAM_TYPE.toString(16),p.descriptor)for(y=0;y<p.descriptor.length;y++)this.dispatchType+=("00"+p.descriptor[y].toString(16)).slice(-2);this.push=function(E){var S,F,w,P,U,z;if(E.type==="timed-metadata"){if(E.dataAlignmentIndicator&&(v=0,g.length=0),g.length===0&&(E.data.length<10||E.data[0]!=="I".charCodeAt(0)||E.data[1]!=="D".charCodeAt(0)||E.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(g.push(E),v+=E.data.byteLength,g.length===1&&(h=La(E.data.subarray(6,10)),h+=10),!(v<h)){for(S={data:new Uint8Array(h),frames:[],pts:g[0].pts,dts:g[0].dts},U=0;U<h;)S.data.set(g[0].data.subarray(0,h-U),U),U+=g[0].data.byteLength,v-=g[0].data.byteLength,g.shift();F=10,S.data[5]&64&&(F+=4,F+=La(S.data.subarray(10,14)),h-=La(S.data.subarray(16,20)));do{if(w=La(S.data.subarray(F+4,F+8)),w<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(z=String.fromCharCode(S.data[F],S.data[F+1],S.data[F+2],S.data[F+3]),P={id:z,data:S.data.subarray(F+10,F+w+10)},P.key=P.id,Fd[P.id]&&(Fd[P.id](P),P.owner==="com.apple.streaming.transportStreamTimestamp")){var Y=P.data,$=(Y[3]&1)<<30|Y[4]<<22|Y[5]<<14|Y[6]<<6|Y[7]>>>2;$*=4,$+=Y[7]&3,P.timeStamp=$,S.pts===void 0&&S.dts===void 0&&(S.pts=P.timeStamp,S.dts=P.timeStamp),this.trigger("timestamp",P)}S.frames.push(P),F+=10,F+=w}while(F<h);this.trigger("data",S)}}}},Ra.prototype=new e;var i_=Ra,r_=wd.TimestampRolloverStream,Ma,sn,Na,ar=188,Vo=71;Ma=function(){var d=new Uint8Array(ar),p=0;Ma.prototype.init.call(this),this.push=function(h){var g=0,v=ar,y;for(p?(y=new Uint8Array(h.byteLength+p),y.set(d.subarray(0,p)),y.set(h,p),p=0):y=h;v<y.byteLength;){if(y[g]===Vo&&y[v]===Vo){this.trigger("data",y.subarray(g,v)),g+=ar,v+=ar;continue}g++,v++}g<y.byteLength&&(d.set(y.subarray(g),0),p=y.byteLength-g)},this.flush=function(){p===ar&&d[0]===Vo&&(this.trigger("data",d),p=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){p=0,this.trigger("reset")}},Ma.prototype=new e,sn=function(){var d,p,h,g;sn.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(y,E){var S=0;E.payloadUnitStartIndicator&&(S+=y[S]+1),E.type==="pat"?p(y.subarray(S),E):h(y.subarray(S),E)},p=function(y,E){E.section_number=y[7],E.last_section_number=y[8],g.pmtPid=(y[10]&31)<<8|y[11],E.pmtPid=g.pmtPid},h=function(y,E){var S,F,w,P;if(!!(y[5]&1)){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},S=(y[1]&15)<<8|y[2],F=3+S-4,w=(y[10]&15)<<8|y[11],P=12+w;P<F;){var U=y[P],z=(y[P+1]&31)<<8|y[P+2];U===Ve.H264_STREAM_TYPE&&g.programMapTable.video===null?g.programMapTable.video=z:U===Ve.ADTS_STREAM_TYPE&&g.programMapTable.audio===null?g.programMapTable.audio=z:U===Ve.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][z]=U),P+=((y[P+3]&15)<<8|y[P+4])+5}E.programMapTable=g.programMapTable}},this.push=function(v){var y={},E=4;if(y.payloadUnitStartIndicator=!!(v[1]&64),y.pid=v[1]&31,y.pid<<=8,y.pid|=v[2],(v[3]&48)>>>4>1&&(E+=v[E]+1),y.pid===0)y.type="pat",d(v.subarray(E),y),this.trigger("data",y);else if(y.pid===this.pmtPid)for(y.type="pmt",d(v.subarray(E),y),this.trigger("data",y);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([v,E,y]):this.processPes_(v,E,y)},this.processPes_=function(v,y,E){E.pid===this.programMapTable.video?E.streamType=Ve.H264_STREAM_TYPE:E.pid===this.programMapTable.audio?E.streamType=Ve.ADTS_STREAM_TYPE:E.streamType=this.programMapTable["timed-metadata"][E.pid],E.type="pes",E.data=v.subarray(y),this.trigger("data",E)}},sn.prototype=new e,sn.STREAM_TYPES={h264:27,adts:15},Na=function(){var d=this,p=!1,h={data:[],size:0},g={data:[],size:0},v={data:[],size:0},y,E=function(w,P){var U,z=w[0]<<16|w[1]<<8|w[2];P.data=new Uint8Array,z===1&&(P.packetLength=6+(w[4]<<8|w[5]),P.dataAlignmentIndicator=(w[6]&4)!==0,U=w[7],U&192&&(P.pts=(w[9]&14)<<27|(w[10]&255)<<20|(w[11]&254)<<12|(w[12]&255)<<5|(w[13]&254)>>>3,P.pts*=4,P.pts+=(w[13]&6)>>>1,P.dts=P.pts,U&64&&(P.dts=(w[14]&14)<<27|(w[15]&255)<<20|(w[16]&254)<<12|(w[17]&255)<<5|(w[18]&254)>>>3,P.dts*=4,P.dts+=(w[18]&6)>>>1)),P.data=w.subarray(9+w[8]))},S=function(w,P,U){var z=new Uint8Array(w.size),Y={type:P},$=0,Z=0,Ne=!1,Ye;if(!(!w.data.length||w.size<9)){for(Y.trackId=w.data[0].pid,$=0;$<w.data.length;$++)Ye=w.data[$],z.set(Ye.data,Z),Z+=Ye.data.byteLength;E(z,Y),Ne=P==="video"||Y.packetLength<=w.size,(U||Ne)&&(w.size=0,w.data.length=0),Ne&&d.trigger("data",Y)}};Na.prototype.init.call(this),this.push=function(F){({pat:function(){},pes:function(){var P,U;switch(F.streamType){case Ve.H264_STREAM_TYPE:P=h,U="video";break;case Ve.ADTS_STREAM_TYPE:P=g,U="audio";break;case Ve.METADATA_STREAM_TYPE:P=v,U="timed-metadata";break;default:return}F.payloadUnitStartIndicator&&S(P,U,!0),P.data.push(F),P.size+=F.data.byteLength},pmt:function(){var P={type:"metadata",tracks:[]};y=F.programMapTable,y.video!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+y.video,codec:"avc",type:"video"}),y.audio!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+y.audio,codec:"adts",type:"audio"}),p=!0,d.trigger("data",P)}})[F.type]()},this.reset=function(){h.size=0,h.data.length=0,g.size=0,g.data.length=0,this.trigger("reset")},this.flushStreams_=function(){S(h,"video"),S(g,"audio"),S(v,"timed-metadata")},this.flush=function(){if(!p&&y){var F={type:"metadata",tracks:[]};y.video!==null&&F.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+y.video,codec:"avc",type:"video"}),y.audio!==null&&F.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+y.audio,codec:"adts",type:"audio"}),d.trigger("data",F)}p=!1,this.flushStreams_(),this.trigger("done")}},Na.prototype=new e;var kd={PAT_PID:0,MP2T_PACKET_LENGTH:ar,TransportPacketStream:Ma,TransportParseStream:sn,ElementaryStream:Na,TimestampRolloverStream:r_,CaptionStream:Ia.CaptionStream,Cea608Stream:Ia.Cea608Stream,Cea708Stream:Ia.Cea708Stream,MetadataStream:i_};for(var $o in Ve)Ve.hasOwnProperty($o)&&(kd[$o]=Ve[$o]);var Kt=kd,n_=le.ONE_SECOND_IN_TS,Ba,Pd=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ba=function(d){var p,h=0;Ba.prototype.init.call(this),this.skipWarn_=function(g,v){this.trigger("log",{level:"warn",message:"adts skiping bytes "+g+" to "+v+" in frame "+h+" outside syncword"})},this.push=function(g){var v=0,y,E,S,F,w;if(d||(h=0),g.type==="audio"){p&&p.length?(S=p,p=new Uint8Array(S.byteLength+g.data.byteLength),p.set(S),p.set(g.data,S.byteLength)):p=g.data;for(var P;v+7<p.length;){if(p[v]!==255||(p[v+1]&246)!==240){typeof P!="number"&&(P=v),v++;continue}if(typeof P=="number"&&(this.skipWarn_(P,v),P=null),E=(~p[v+1]&1)*2,y=(p[v+3]&3)<<11|p[v+4]<<3|(p[v+5]&224)>>5,F=((p[v+6]&3)+1)*1024,w=F*n_/Pd[(p[v+2]&60)>>>2],p.byteLength-v<y)break;this.trigger("data",{pts:g.pts+h*w,dts:g.dts+h*w,sampleCount:F,audioobjecttype:(p[v+2]>>>6&3)+1,channelcount:(p[v+2]&1)<<2|(p[v+3]&192)>>>6,samplerate:Pd[(p[v+2]&60)>>>2],samplingfrequencyindex:(p[v+2]&60)>>>2,samplesize:16,data:p.subarray(v+7+E,v+y)}),h++,v+=y}typeof P=="number"&&(this.skipWarn_(P,v),P=null),p=p.subarray(v)}},this.flush=function(){h=0,this.trigger("done")},this.reset=function(){p=void 0,this.trigger("reset")},this.endTimeline=function(){p=void 0,this.trigger("endedtimeline")}},Ba.prototype=new e;var Id=Ba,Od;Od=function(d){var p=d.byteLength,h=0,g=0;this.length=function(){return 8*p},this.bitsAvailable=function(){return 8*p+g},this.loadWord=function(){var v=d.byteLength-p,y=new Uint8Array(4),E=Math.min(4,p);if(E===0)throw new Error("no bytes available");y.set(d.subarray(v,v+E)),h=new DataView(y.buffer).getUint32(0),g=E*8,p-=E},this.skipBits=function(v){var y;g>v?(h<<=v,g-=v):(v-=g,y=Math.floor(v/8),v-=y*8,p-=y,this.loadWord(),h<<=v,g-=v)},this.readBits=function(v){var y=Math.min(g,v),E=h>>>32-y;return g-=y,g>0?h<<=y:p>0&&this.loadWord(),y=v-y,y>0?E<<y|this.readBits(y):E},this.skipLeadingZeros=function(){var v;for(v=0;v<g;++v)if((h&2147483648>>>v)!==0)return h<<=v,g-=v,v;return this.loadWord(),v+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var v=this.skipLeadingZeros();return this.readBits(v+1)-1},this.readExpGolomb=function(){var v=this.readUnsignedExpGolomb();return 1&v?1+v>>>1:-1*(v>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var a_=Od,Ua,on,Ld;on=function(){var d=0,p,h;on.prototype.init.call(this),this.push=function(g){var v;h?(v=new Uint8Array(h.byteLength+g.data.byteLength),v.set(h),v.set(g.data,h.byteLength),h=v):h=g.data;for(var y=h.byteLength;d<y-3;d++)if(h[d+2]===1){p=d+5;break}for(;p<y;)switch(h[p]){case 0:if(h[p-1]!==0){p+=2;break}else if(h[p-2]!==0){p++;break}d+3!==p-2&&this.trigger("data",h.subarray(d+3,p-2));do p++;while(h[p]!==1&&p<y);d=p-2,p+=3;break;case 1:if(h[p-1]!==0||h[p-2]!==0){p+=3;break}this.trigger("data",h.subarray(d+3,p-2)),d=p-2,p+=3;break;default:p+=3;break}h=h.subarray(d),p-=d,d=0},this.reset=function(){h=null,d=0,this.trigger("reset")},this.flush=function(){h&&h.byteLength>3&&this.trigger("data",h.subarray(d+3)),h=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},on.prototype=new e,Ld={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ua=function(){var d=new on,p,h,g,v,y,E,S;Ua.prototype.init.call(this),p=this,this.push=function(F){F.type==="video"&&(h=F.trackId,g=F.pts,v=F.dts,d.push(F))},d.on("data",function(F){var w={trackId:h,pts:g,dts:v,data:F,nalUnitTypeCode:F[0]&31};switch(w.nalUnitTypeCode){case 5:w.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:w.nalUnitType="sei_rbsp",w.escapedRBSP=y(F.subarray(1));break;case 7:w.nalUnitType="seq_parameter_set_rbsp",w.escapedRBSP=y(F.subarray(1)),w.config=E(w.escapedRBSP);break;case 8:w.nalUnitType="pic_parameter_set_rbsp";break;case 9:w.nalUnitType="access_unit_delimiter_rbsp";break}p.trigger("data",w)}),d.on("done",function(){p.trigger("done")}),d.on("partialdone",function(){p.trigger("partialdone")}),d.on("reset",function(){p.trigger("reset")}),d.on("endedtimeline",function(){p.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},S=function(w,P){var U=8,z=8,Y,$;for(Y=0;Y<w;Y++)z!==0&&($=P.readExpGolomb(),z=(U+$+256)%256),U=z===0?U:z},y=function(w){for(var P=w.byteLength,U=[],z=1,Y,$;z<P-2;)w[z]===0&&w[z+1]===0&&w[z+2]===3?(U.push(z+2),z+=2):z++;if(U.length===0)return w;Y=P-U.length,$=new Uint8Array(Y);var Z=0;for(z=0;z<Y;Z++,z++)Z===U[0]&&(Z++,U.shift()),$[z]=w[Z];return $},E=function(w){var P=0,U=0,z=0,Y=0,$,Z,Ne,Ye,Li,Xo,Zd,ef,tf,Yo,rf,Pe=[1,1],nf,Ri;if($=new a_(w),Z=$.readUnsignedByte(),Ye=$.readUnsignedByte(),Ne=$.readUnsignedByte(),$.skipUnsignedExpGolomb(),Ld[Z]&&(Li=$.readUnsignedExpGolomb(),Li===3&&$.skipBits(1),$.skipUnsignedExpGolomb(),$.skipUnsignedExpGolomb(),$.skipBits(1),$.readBoolean()))for(rf=Li!==3?8:12,Ri=0;Ri<rf;Ri++)$.readBoolean()&&(Ri<6?S(16,$):S(64,$));if($.skipUnsignedExpGolomb(),Xo=$.readUnsignedExpGolomb(),Xo===0)$.readUnsignedExpGolomb();else if(Xo===1)for($.skipBits(1),$.skipExpGolomb(),$.skipExpGolomb(),Zd=$.readUnsignedExpGolomb(),Ri=0;Ri<Zd;Ri++)$.skipExpGolomb();if($.skipUnsignedExpGolomb(),$.skipBits(1),ef=$.readUnsignedExpGolomb(),tf=$.readUnsignedExpGolomb(),Yo=$.readBits(1),Yo===0&&$.skipBits(1),$.skipBits(1),$.readBoolean()&&(P=$.readUnsignedExpGolomb(),U=$.readUnsignedExpGolomb(),z=$.readUnsignedExpGolomb(),Y=$.readUnsignedExpGolomb()),$.readBoolean()&&$.readBoolean()){switch(nf=$.readUnsignedByte(),nf){case 1:Pe=[1,1];break;case 2:Pe=[12,11];break;case 3:Pe=[10,11];break;case 4:Pe=[16,11];break;case 5:Pe=[40,33];break;case 6:Pe=[24,11];break;case 7:Pe=[20,11];break;case 8:Pe=[32,11];break;case 9:Pe=[80,33];break;case 10:Pe=[18,11];break;case 11:Pe=[15,11];break;case 12:Pe=[64,33];break;case 13:Pe=[160,99];break;case 14:Pe=[4,3];break;case 15:Pe=[3,2];break;case 16:Pe=[2,1];break;case 255:{Pe=[$.readUnsignedByte()<<8|$.readUnsignedByte(),$.readUnsignedByte()<<8|$.readUnsignedByte()];break}}Pe&&Pe[0]/Pe[1]}return{profileIdc:Z,levelIdc:Ne,profileCompatibility:Ye,width:(ef+1)*16-P*2-U*2,height:(2-Yo)*(tf+1)*16-z*2-Y*2,sarRatio:Pe}}},Ua.prototype=new e;var s_={H264Stream:Ua,NalByteStream:on},o_=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Rd=function(d,p){var h=d[p+6]<<21|d[p+7]<<14|d[p+8]<<7|d[p+9],g=d[p+5],v=(g&16)>>4;return h=h>=0?h:0,v?h+20:h+10},u_=function D(d,p){return d.length-p<10||d[p]!=="I".charCodeAt(0)||d[p+1]!=="D".charCodeAt(0)||d[p+2]!=="3".charCodeAt(0)?p:(p+=Rd(d,p),D(d,p))},l_=function(d){var p=u_(d,0);return d.length>=p+2&&(d[p]&255)===255&&(d[p+1]&240)===240&&(d[p+1]&22)===16},Md=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},c_=function(d,p,h){var g,v="";for(g=p;g<h;g++)v+="%"+("00"+d[g].toString(16)).slice(-2);return v},d_=function(d,p,h){return unescape(c_(d,p,h))},f_=function(d,p){var h=(d[p+5]&224)>>5,g=d[p+4]<<3,v=d[p+3]&3<<11;return v|g|h},h_=function(d,p){return d[p]==="I".charCodeAt(0)&&d[p+1]==="D".charCodeAt(0)&&d[p+2]==="3".charCodeAt(0)?"timed-metadata":d[p]&!0&&(d[p+1]&240)===240?"audio":null},p_=function(d){for(var p=0;p+5<d.length;){if(d[p]!==255||(d[p+1]&246)!==240){p++;continue}return o_[(d[p+2]&60)>>>2]}return null},m_=function(d){var p,h,g,v;p=10,d[5]&64&&(p+=4,p+=Md(d.subarray(10,14)));do{if(h=Md(d.subarray(p+4,p+8)),h<1)return null;if(v=String.fromCharCode(d[p],d[p+1],d[p+2],d[p+3]),v==="PRIV"){g=d.subarray(p+10,p+h+10);for(var y=0;y<g.byteLength;y++)if(g[y]===0){var E=d_(g,0,y);if(E==="com.apple.streaming.transportStreamTimestamp"){var S=g.subarray(y+1),F=(S[3]&1)<<30|S[4]<<22|S[5]<<14|S[6]<<6|S[7]>>>2;return F*=4,F+=S[7]&3,F}break}}p+=10,p+=h}while(p<d.byteLength);return null},ja={isLikelyAacData:l_,parseId3TagSize:Rd,parseAdtsSize:f_,parseType:h_,parseSampleRate:p_,parseAacTimestamp:m_},Ha;Ha=function(){var d=new Uint8Array,p=0;Ha.prototype.init.call(this),this.setTimestamp=function(h){p=h},this.push=function(h){var g=0,v=0,y,E,S,F;for(d.length?(F=d.length,d=new Uint8Array(h.byteLength+F),d.set(d.subarray(0,F)),d.set(h,F)):d=h;d.length-v>=3;){if(d[v]==="I".charCodeAt(0)&&d[v+1]==="D".charCodeAt(0)&&d[v+2]==="3".charCodeAt(0)){if(d.length-v<10||(g=ja.parseId3TagSize(d,v),v+g>d.length))break;E={type:"timed-metadata",data:d.subarray(v,v+g)},this.trigger("data",E),v+=g;continue}else if((d[v]&255)===255&&(d[v+1]&240)===240){if(d.length-v<7||(g=ja.parseAdtsSize(d,v),v+g>d.length))break;S={type:"audio",data:d.subarray(v,v+g),pts:p,dts:p},this.trigger("data",S),v+=g;continue}v++}y=d.length-v,y>0?d=d.subarray(v):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},Ha.prototype=new e;var g_=Ha,v_=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Wo=v_,y_=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],qo=y_,__=s_.H264Stream,x_=ja.isLikelyAacData,D_=le.ONE_SECOND_IN_TS,un,sr,Va,Pi,T_=function(d,p){p.stream=d,this.trigger("log",p)},Nd=function(d,p){for(var h=Object.keys(p),g=0;g<h.length;g++){var v=h[g];v==="headOfPipeline"||!p[v].on||p[v].on("log",T_.bind(d,v))}},Bd=function(d,p){var h;if(d.length!==p.length)return!1;for(h=0;h<d.length;h++)if(d[h]!==p[h])return!1;return!0},zo=function(d,p,h,g,v,y){var E=h-p,S=g-p,F=v-h;return{start:{dts:d,pts:d+E},end:{dts:d+S,pts:d+F},prependedContentDuration:y,baseMediaDecodeTime:d}};sr=function(d,p){var h=[],g,v=0,y=0,E=1/0;p=p||{},g=p.firstSequenceNumber||0,sr.prototype.init.call(this),this.push=function(S){bt.collectDtsInfo(d,S),d&&Wo.forEach(function(F){d[F]=S[F]}),h.push(S)},this.setEarliestDts=function(S){v=S},this.setVideoBaseMediaDecodeTime=function(S){E=S},this.setAudioAppendStart=function(S){y=S},this.flush=function(){var S,F,w,P,U,z,Y;if(h.length===0){this.trigger("done","AudioSegmentStream");return}S=wa.trimAdtsFramesByEarliestDts(h,d,v),d.baseMediaDecodeTime=bt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),Y=wa.prefixWithSilence(d,S,y,E),d.samples=wa.generateSampleTable(S),w=Lt.mdat(wa.concatenateFrameData(S)),h=[],F=Lt.moof(g,[d]),P=new Uint8Array(F.byteLength+w.byteLength),g++,P.set(F),P.set(w,F.byteLength),bt.clearDtsInfo(d),U=Math.ceil(D_*1024/d.samplerate),S.length&&(z=S.length*U,this.trigger("segmentTimingInfo",zo(le.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),S[0].dts,S[0].pts,S[0].dts+z,S[0].pts+z,Y||0)),this.trigger("timingInfo",{start:S[0].pts,end:S[0].pts+z})),this.trigger("data",{track:d,boxes:P}),this.trigger("done","AudioSegmentStream")},this.reset=function(){bt.clearDtsInfo(d),h=[],this.trigger("reset")}},sr.prototype=new e,un=function(d,p){var h,g=[],v=[],y,E;p=p||{},h=p.firstSequenceNumber||0,un.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(S){bt.collectDtsInfo(d,S),S.nalUnitType==="seq_parameter_set_rbsp"&&!y&&(y=S.config,d.sps=[S.data],qo.forEach(function(F){d[F]=y[F]},this)),S.nalUnitType==="pic_parameter_set_rbsp"&&!E&&(E=S.data,d.pps=[S.data]),g.push(S)},this.flush=function(){for(var S,F,w,P,U,z,Y=0,$,Z;g.length&&g[0].nalUnitType!=="access_unit_delimiter_rbsp";)g.shift();if(g.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(S=nn.groupNalsIntoFrames(g),w=nn.groupFramesIntoGops(S),w[0][0].keyFrame||(F=this.getGopForFusion_(g[0],d),F?(Y=F.duration,w.unshift(F),w.byteLength+=F.byteLength,w.nalCount+=F.nalCount,w.pts=F.pts,w.dts=F.dts,w.duration+=F.duration):w=nn.extendFirstKeyFrame(w)),v.length){var Ne;if(p.alignGopsAtEnd?Ne=this.alignGopsAtEnd_(w):Ne=this.alignGopsAtStart_(w),!Ne){this.gopCache_.unshift({gop:w.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}bt.clearDtsInfo(d),w=Ne}bt.collectDtsInfo(d,w),d.samples=nn.generateSampleTable(w),U=Lt.mdat(nn.concatenateNalData(w)),d.baseMediaDecodeTime=bt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),this.trigger("processedGopsInfo",w.map(function(Ye){return{pts:Ye.pts,dts:Ye.dts,byteLength:Ye.byteLength}})),$=w[0],Z=w[w.length-1],this.trigger("segmentTimingInfo",zo(d.baseMediaDecodeTime,$.dts,$.pts,Z.dts+Z.duration,Z.pts+Z.duration,Y)),this.trigger("timingInfo",{start:w[0].pts,end:w[w.length-1].pts+w[w.length-1].duration}),this.gopCache_.unshift({gop:w.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),P=Lt.moof(h,[d]),z=new Uint8Array(P.byteLength+U.byteLength),h++,z.set(P),z.set(U,P.byteLength),this.trigger("data",{track:d,boxes:z}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),g=[],this.gopCache_.length=0,v.length=0,this.trigger("reset")},this.resetStream_=function(){bt.clearDtsInfo(d),y=void 0,E=void 0},this.getGopForFusion_=function(S){var F=45e3,w=1e4,P=1/0,U,z,Y,$,Z;for(Z=0;Z<this.gopCache_.length;Z++)$=this.gopCache_[Z],Y=$.gop,!(!(d.pps&&Bd(d.pps[0],$.pps[0]))||!(d.sps&&Bd(d.sps[0],$.sps[0])))&&(Y.dts<d.timelineStartInfo.dts||(U=S.dts-Y.dts-Y.duration,U>=-w&&U<=F&&(!z||P>U)&&(z=$,P=U)));return z?z.gop:null},this.alignGopsAtStart_=function(S){var F,w,P,U,z,Y,$,Z;for(z=S.byteLength,Y=S.nalCount,$=S.duration,F=w=0;F<v.length&&w<S.length&&(P=v[F],U=S[w],P.pts!==U.pts);){if(U.pts>P.pts){F++;continue}w++,z-=U.byteLength,Y-=U.nalCount,$-=U.duration}return w===0?S:w===S.length?null:(Z=S.slice(w),Z.byteLength=z,Z.duration=$,Z.nalCount=Y,Z.pts=Z[0].pts,Z.dts=Z[0].dts,Z)},this.alignGopsAtEnd_=function(S){var F,w,P,U,z,Y;for(F=v.length-1,w=S.length-1,z=null,Y=!1;F>=0&&w>=0;){if(P=v[F],U=S[w],P.pts===U.pts){Y=!0;break}if(P.pts>U.pts){F--;continue}F===v.length-1&&(z=w),w--}if(!Y&&z===null)return null;var $;if(Y?$=w:$=z,$===0)return S;var Z=S.slice($),Ne=Z.reduce(function(Ye,Li){return Ye.byteLength+=Li.byteLength,Ye.duration+=Li.duration,Ye.nalCount+=Li.nalCount,Ye},{byteLength:0,duration:0,nalCount:0});return Z.byteLength=Ne.byteLength,Z.duration=Ne.duration,Z.nalCount=Ne.nalCount,Z.pts=Z[0].pts,Z.dts=Z[0].dts,Z},this.alignGopsWith=function(S){v=S}},un.prototype=new e,Pi=function(d,p){this.numberOfTracks=0,this.metadataStream=p,d=d||{},typeof d.remux<"u"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Pi.prototype.init.call(this),this.push=function(h){if(h.text)return this.pendingCaptions.push(h);if(h.frames)return this.pendingMetadata.push(h);this.pendingTracks.push(h.track),this.pendingBytes+=h.boxes.byteLength,h.track.type==="video"&&(this.videoTrack=h.track,this.pendingBoxes.push(h.boxes)),h.track.type==="audio"&&(this.audioTrack=h.track,this.pendingBoxes.unshift(h.boxes))}},Pi.prototype=new e,Pi.prototype.flush=function(D){var d=0,p={captions:[],captionStreams:{},metadata:[],info:{}},h,g,v,y=0,E;if(this.pendingTracks.length<this.numberOfTracks){if(D!=="VideoSegmentStream"&&D!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(y=this.videoTrack.timelineStartInfo.pts,qo.forEach(function(S){p.info[S]=this.videoTrack[S]},this)):this.audioTrack&&(y=this.audioTrack.timelineStartInfo.pts,Wo.forEach(function(S){p.info[S]=this.audioTrack[S]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?p.type=this.pendingTracks[0].type:p.type="combined",this.emittedTracks+=this.pendingTracks.length,v=Lt.initSegment(this.pendingTracks),p.initSegment=new Uint8Array(v.byteLength),p.initSegment.set(v),p.data=new Uint8Array(this.pendingBytes),E=0;E<this.pendingBoxes.length;E++)p.data.set(this.pendingBoxes[E],d),d+=this.pendingBoxes[E].byteLength;for(E=0;E<this.pendingCaptions.length;E++)h=this.pendingCaptions[E],h.startTime=le.metadataTsToSeconds(h.startPts,y,this.keepOriginalTimestamps),h.endTime=le.metadataTsToSeconds(h.endPts,y,this.keepOriginalTimestamps),p.captionStreams[h.stream]=!0,p.captions.push(h);for(E=0;E<this.pendingMetadata.length;E++)g=this.pendingMetadata[E],g.cueTime=le.metadataTsToSeconds(g.pts,y,this.keepOriginalTimestamps),p.metadata.push(g);for(p.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",p),E=0;E<p.captions.length;E++)h=p.captions[E],this.trigger("caption",h);for(E=0;E<p.metadata.length;E++)g=p.metadata[E],this.trigger("id3Frame",g)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Pi.prototype.setRemux=function(D){this.remuxTracks=D},Va=function(d){var p=this,h=!0,g,v;Va.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var y={};this.transmuxPipeline_=y,y.type="aac",y.metadataStream=new Kt.MetadataStream,y.aacStream=new g_,y.audioTimestampRolloverStream=new Kt.TimestampRolloverStream("audio"),y.timedMetadataTimestampRolloverStream=new Kt.TimestampRolloverStream("timed-metadata"),y.adtsStream=new Id,y.coalesceStream=new Pi(d,y.metadataStream),y.headOfPipeline=y.aacStream,y.aacStream.pipe(y.audioTimestampRolloverStream).pipe(y.adtsStream),y.aacStream.pipe(y.timedMetadataTimestampRolloverStream).pipe(y.metadataStream).pipe(y.coalesceStream),y.metadataStream.on("timestamp",function(E){y.aacStream.setTimestamp(E.timeStamp)}),y.aacStream.on("data",function(E){E.type!=="timed-metadata"&&E.type!=="audio"||y.audioSegmentStream||(v=v||{timelineStartInfo:{baseMediaDecodeTime:p.baseMediaDecodeTime},codec:"adts",type:"audio"},y.coalesceStream.numberOfTracks++,y.audioSegmentStream=new sr(v,d),y.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),y.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),y.adtsStream.pipe(y.audioSegmentStream).pipe(y.coalesceStream),p.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!g}))}),y.coalesceStream.on("data",this.trigger.bind(this,"data")),y.coalesceStream.on("done",this.trigger.bind(this,"done")),Nd(this,y)},this.setupTsPipeline=function(){var y={};this.transmuxPipeline_=y,y.type="ts",y.metadataStream=new Kt.MetadataStream,y.packetStream=new Kt.TransportPacketStream,y.parseStream=new Kt.TransportParseStream,y.elementaryStream=new Kt.ElementaryStream,y.timestampRolloverStream=new Kt.TimestampRolloverStream,y.adtsStream=new Id,y.h264Stream=new __,y.captionStream=new Kt.CaptionStream(d),y.coalesceStream=new Pi(d,y.metadataStream),y.headOfPipeline=y.packetStream,y.packetStream.pipe(y.parseStream).pipe(y.elementaryStream).pipe(y.timestampRolloverStream),y.timestampRolloverStream.pipe(y.h264Stream),y.timestampRolloverStream.pipe(y.adtsStream),y.timestampRolloverStream.pipe(y.metadataStream).pipe(y.coalesceStream),y.h264Stream.pipe(y.captionStream).pipe(y.coalesceStream),y.elementaryStream.on("data",function(E){var S;if(E.type==="metadata"){for(S=E.tracks.length;S--;)!g&&E.tracks[S].type==="video"?(g=E.tracks[S],g.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime):!v&&E.tracks[S].type==="audio"&&(v=E.tracks[S],v.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime);g&&!y.videoSegmentStream&&(y.coalesceStream.numberOfTracks++,y.videoSegmentStream=new un(g,d),y.videoSegmentStream.on("log",p.getLogTrigger_("videoSegmentStream")),y.videoSegmentStream.on("timelineStartInfo",function(F){v&&!d.keepOriginalTimestamps&&(v.timelineStartInfo=F,y.audioSegmentStream.setEarliestDts(F.dts-p.baseMediaDecodeTime))}),y.videoSegmentStream.on("processedGopsInfo",p.trigger.bind(p,"gopInfo")),y.videoSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"videoSegmentTimingInfo")),y.videoSegmentStream.on("baseMediaDecodeTime",function(F){v&&y.audioSegmentStream.setVideoBaseMediaDecodeTime(F)}),y.videoSegmentStream.on("timingInfo",p.trigger.bind(p,"videoTimingInfo")),y.h264Stream.pipe(y.videoSegmentStream).pipe(y.coalesceStream)),v&&!y.audioSegmentStream&&(y.coalesceStream.numberOfTracks++,y.audioSegmentStream=new sr(v,d),y.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),y.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),y.audioSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"audioSegmentTimingInfo")),y.adtsStream.pipe(y.audioSegmentStream).pipe(y.coalesceStream)),p.trigger("trackinfo",{hasAudio:!!v,hasVideo:!!g})}}),y.coalesceStream.on("data",this.trigger.bind(this,"data")),y.coalesceStream.on("id3Frame",function(E){E.dispatchType=y.metadataStream.dispatchType,p.trigger("id3Frame",E)}),y.coalesceStream.on("caption",this.trigger.bind(this,"caption")),y.coalesceStream.on("done",this.trigger.bind(this,"done")),Nd(this,y)},this.setBaseMediaDecodeTime=function(y){var E=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=y),v&&(v.timelineStartInfo.dts=void 0,v.timelineStartInfo.pts=void 0,bt.clearDtsInfo(v),E.audioTimestampRolloverStream&&E.audioTimestampRolloverStream.discontinuity()),g&&(E.videoSegmentStream&&(E.videoSegmentStream.gopCache_=[]),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,bt.clearDtsInfo(g),E.captionStream.reset()),E.timestampRolloverStream&&E.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(y){v&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(y)},this.setRemux=function(y){var E=this.transmuxPipeline_;d.remux=y,E&&E.coalesceStream&&E.coalesceStream.setRemux(y)},this.alignGopsWith=function(y){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(y)},this.getLogTrigger_=function(y){var E=this;return function(S){S.stream=y,E.trigger("log",S)}},this.push=function(y){if(h){var E=x_(y);E&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!E&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),h=!1}this.transmuxPipeline_.headOfPipeline.push(y)},this.flush=function(){h=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Va.prototype=new e;var b_={Transmuxer:Va,VideoSegmentStream:un,AudioSegmentStream:sr,AUDIO_PROPERTIES:Wo,VIDEO_PROPERTIES:qo,generateSegmentTimingInfo:zo},E_=function(d){return d>>>0},S_=function(d){return("00"+d.toString(16)).slice(-2)},$a={toUnsigned:E_,toHexString:S_},C_=function(d){var p="";return p+=String.fromCharCode(d[0]),p+=String.fromCharCode(d[1]),p+=String.fromCharCode(d[2]),p+=String.fromCharCode(d[3]),p},Ii=C_,w_=$a.toUnsigned,A_=function D(d,p){var h=[],g,v,y,E,S;if(!p.length)return null;for(g=0;g<d.byteLength;)v=w_(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3]),y=Ii(d.subarray(g+4,g+8)),E=v>1?g+v:d.byteLength,y===p[0]&&(p.length===1?h.push(d.subarray(g+8,E)):(S=D(d.subarray(g+8,E),p.slice(1)),S.length&&(h=h.concat(S)))),g=E;return h},be=A_,F_=$a.toUnsigned,k_=t.getUint64,P_=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return p.version===1?p.baseMediaDecodeTime=k_(d.subarray(4)):p.baseMediaDecodeTime=F_(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),p},Ud=P_,I_=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},jd=I_,O_=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},h=new DataView(d.buffer,d.byteOffset,d.byteLength),g=p.flags[2]&1,v=p.flags[2]&4,y=p.flags[1]&1,E=p.flags[1]&2,S=p.flags[1]&4,F=p.flags[1]&8,w=h.getUint32(4),P=8,U;for(g&&(p.dataOffset=h.getInt32(P),P+=4),v&&w&&(U={flags:jd(d.subarray(P,P+4))},P+=4,y&&(U.duration=h.getUint32(P),P+=4),E&&(U.size=h.getUint32(P),P+=4),F&&(p.version===1?U.compositionTimeOffset=h.getInt32(P):U.compositionTimeOffset=h.getUint32(P),P+=4),p.samples.push(U),w--);w--;)U={},y&&(U.duration=h.getUint32(P),P+=4),E&&(U.size=h.getUint32(P),P+=4),S&&(U.flags=jd(d.subarray(P,P+4)),P+=4),F&&(p.version===1?U.compositionTimeOffset=h.getInt32(P):U.compositionTimeOffset=h.getUint32(P),P+=4),p.samples.push(U);return p},Hd=O_,L_=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:p.getUint32(4)},g=h.flags[2]&1,v=h.flags[2]&2,y=h.flags[2]&8,E=h.flags[2]&16,S=h.flags[2]&32,F=h.flags[0]&65536,w=h.flags[0]&131072,P;return P=8,g&&(P+=4,h.baseDataOffset=p.getUint32(12),P+=4),v&&(h.sampleDescriptionIndex=p.getUint32(P),P+=4),y&&(h.defaultSampleDuration=p.getUint32(P),P+=4),E&&(h.defaultSampleSize=p.getUint32(P),P+=4),S&&(h.defaultSampleFlags=p.getUint32(P)),F&&(h.durationIsEmpty=!0),!g&&w&&(h.baseDataOffsetIsMoof=!0),h},Vd=L_,$d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ln;typeof window<"u"?ln=window:typeof $d<"u"?ln=$d:typeof self<"u"?ln=self:ln={};var cn=ln,R_=an.discardEmulationPreventionBytes,M_=Ia.CaptionStream,N_=function(d,p){for(var h=d,g=0;g<p.length;g++){var v=p[g];if(h<v.size)return v;h-=v.size}return null},B_=function(d,p,h){var g=new DataView(d.buffer,d.byteOffset,d.byteLength),v={logs:[],seiNals:[]},y,E,S,F;for(E=0;E+4<d.length;E+=S)if(S=g.getUint32(E),E+=4,!(S<=0))switch(d[E]&31){case 6:var w=d.subarray(E+1,E+1+S),P=N_(E,p);if(y={nalUnitType:"sei_rbsp",size:S,data:w,escapedRBSP:R_(w),trackId:h},P)y.pts=P.pts,y.dts=P.dts,F=P;else if(F)y.pts=F.pts,y.dts=F.dts;else{v.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+E+" for trackId "+h+". See mux.js#223."});break}v.seiNals.push(y);break}return v},U_=function(d,p,h){var g=p,v=h.defaultSampleDuration||0,y=h.defaultSampleSize||0,E=h.trackId,S=[];return d.forEach(function(F){var w=Hd(F),P=w.samples;P.forEach(function(U){U.duration===void 0&&(U.duration=v),U.size===void 0&&(U.size=y),U.trackId=E,U.dts=g,U.compositionTimeOffset===void 0&&(U.compositionTimeOffset=0),typeof g=="bigint"?(U.pts=g+cn.BigInt(U.compositionTimeOffset),g+=cn.BigInt(U.duration)):(U.pts=g+U.compositionTimeOffset,g+=U.duration)}),S=S.concat(P)}),S},j_=function(d,p){var h=be(d,["moof","traf"]),g=be(d,["mdat"]),v={},y=[];return g.forEach(function(E,S){var F=h[S];y.push({mdat:E,traf:F})}),y.forEach(function(E){var S=E.mdat,F=E.traf,w=be(F,["tfhd"]),P=Vd(w[0]),U=P.trackId,z=be(F,["tfdt"]),Y=z.length>0?Ud(z[0]).baseMediaDecodeTime:0,$=be(F,["trun"]),Z,Ne;p===U&&$.length>0&&(Z=U_($,Y,P),Ne=B_(S,Z,U),v[U]||(v[U]={seiNals:[],logs:[]}),v[U].seiNals=v[U].seiNals.concat(Ne.seiNals),v[U].logs=v[U].logs.concat(Ne.logs))}),v},H_=function(d,p,h){var g;if(p===null)return null;g=j_(d,p);var v=g[p]||{};return{seiNals:v.seiNals,logs:v.logs,timescale:h}},V_=function(){var d=!1,p,h,g,v,y,E;this.isInitialized=function(){return d},this.init=function(S){p=new M_,d=!0,E=S?S.isPartial:!1,p.on("data",function(F){F.startTime=F.startPts/v,F.endTime=F.endPts/v,y.captions.push(F),y.captionStreams[F.stream]=!0}),p.on("log",function(F){y.logs.push(F)})},this.isNewInit=function(S,F){return S&&S.length===0||F&&typeof F=="object"&&Object.keys(F).length===0?!1:g!==S[0]||v!==F[g]},this.parse=function(S,F,w){var P;if(this.isInitialized()){if(!F||!w)return null;if(this.isNewInit(F,w))g=F[0],v=w[g];else if(g===null||!v)return h.push(S),null}else return null;for(;h.length>0;){var U=h.shift();this.parse(U,F,w)}return P=H_(S,g,v),P&&P.logs&&(y.logs=y.logs.concat(P.logs)),P===null||!P.seiNals?y.logs.length?{logs:y.logs,captions:[],captionStreams:[]}:null:(this.pushNals(P.seiNals),this.flushStream(),y)},this.pushNals=function(S){if(!this.isInitialized()||!S||S.length===0)return null;S.forEach(function(F){p.push(F)})},this.flushStream=function(){if(!this.isInitialized())return null;E?p.partialFlush():p.flush()},this.clearParsedCaptions=function(){y.captions=[],y.captionStreams={},y.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;p.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){h=[],g=null,v=null,y?this.clearParsedCaptions():y={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},$_=V_,Wa=$a.toUnsigned,dn=$a.toHexString,W_=t.getUint64,Wd,qd,zd,Gd,Kd,Go;Wd=function(d){var p={},h=be(d,["moov","trak"]);return h.reduce(function(g,v){var y,E,S,F,w;return y=be(v,["tkhd"])[0],!y||(E=y[0],S=E===0?12:20,F=Wa(y[S]<<24|y[S+1]<<16|y[S+2]<<8|y[S+3]),w=be(v,["mdia","mdhd"])[0],!w)?null:(E=w[0],S=E===0?12:20,g[F]=Wa(w[S]<<24|w[S+1]<<16|w[S+2]<<8|w[S+3]),g)},p)},qd=function(d,p){var h;h=be(p,["moof","traf"]);var g=h.reduce(function(v,y){var E=be(y,["tfhd"])[0],S=Wa(E[4]<<24|E[5]<<16|E[6]<<8|E[7]),F=d[S]||9e4,w=be(y,["tfdt"])[0],P=new DataView(w.buffer,w.byteOffset,w.byteLength),U;w[0]===1?U=W_(w.subarray(4,12)):U=P.getUint32(4);var z;return typeof U=="bigint"?z=U/cn.BigInt(F):typeof U=="number"&&!isNaN(U)&&(z=U/F),z<Number.MAX_SAFE_INTEGER&&(z=Number(z)),z<v&&(v=z),v},1/0);return typeof g=="bigint"||isFinite(g)?g:0},zd=function(d,p){var h=be(p,["moof","traf"]),g=0,v=0,y;if(h&&h.length){var E=be(h[0],["tfhd"])[0],S=be(h[0],["trun"])[0],F=be(h[0],["tfdt"])[0];if(E){var w=Vd(E);y=w.trackId}if(F){var P=Ud(F);g=P.baseMediaDecodeTime}if(S){var U=Hd(S);U.samples&&U.samples.length&&(v=U.samples[0].compositionTimeOffset||0)}}var z=d[y]||9e4;typeof g=="bigint"&&(v=cn.BigInt(v),z=cn.BigInt(z));var Y=(g+v)/z;return typeof Y=="bigint"&&Y<Number.MAX_SAFE_INTEGER&&(Y=Number(Y)),Y},Gd=function(d){var p=be(d,["moov","trak"]),h=[];return p.forEach(function(g){var v=be(g,["mdia","hdlr"]),y=be(g,["tkhd"]);v.forEach(function(E,S){var F=Ii(E.subarray(8,12)),w=y[S],P,U,z;F==="vide"&&(P=new DataView(w.buffer,w.byteOffset,w.byteLength),U=P.getUint8(0),z=U===0?P.getUint32(12):P.getUint32(20),h.push(z))})}),h},Go=function(d){var p=d[0],h=p===0?12:20;return Wa(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])},Kd=function(d){var p=be(d,["moov","trak"]),h=[];return p.forEach(function(g){var v={},y=be(g,["tkhd"])[0],E,S;y&&(E=new DataView(y.buffer,y.byteOffset,y.byteLength),S=E.getUint8(0),v.id=S===0?E.getUint32(12):E.getUint32(20));var F=be(g,["mdia","hdlr"])[0];if(F){var w=Ii(F.subarray(8,12));w==="vide"?v.type="video":w==="soun"?v.type="audio":v.type=w}var P=be(g,["mdia","minf","stbl","stsd"])[0];if(P){var U=P.subarray(8);v.codec=Ii(U.subarray(4,8));var z=be(U,[v.codec])[0],Y,$;z&&(/^[asm]vc[1-9]$/i.test(v.codec)?(Y=z.subarray(78),$=Ii(Y.subarray(4,8)),$==="avcC"&&Y.length>11?(v.codec+=".",v.codec+=dn(Y[9]),v.codec+=dn(Y[10]),v.codec+=dn(Y[11])):v.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(v.codec)?(Y=z.subarray(28),$=Ii(Y.subarray(4,8)),$==="esds"&&Y.length>20&&Y[19]!==0?(v.codec+="."+dn(Y[19]),v.codec+="."+dn(Y[20]>>>2&63).replace(/^0/,"")):v.codec="mp4a.40.2"):v.codec=v.codec.toLowerCase())}var Z=be(g,["mdia","mdhd"])[0];Z&&(v.timescale=Go(Z)),h.push(v)}),h};var Xd={findBox:be,parseType:Ii,timescale:Wd,startTime:qd,compositionStartTime:zd,videoTrackIds:Gd,tracks:Kd,getTimescaleFromMediaHeader:Go},Yd=function(d){var p=d[1]&31;return p<<=8,p|=d[2],p},qa=function(d){return!!(d[1]&64)},za=function(d){var p=0;return(d[3]&48)>>>4>1&&(p+=d[4]+1),p},q_=function(d,p){var h=Yd(d);return h===0?"pat":h===p?"pmt":p?"pes":null},z_=function(d){var p=qa(d),h=4+za(d);return p&&(h+=d[h]+1),(d[h+10]&31)<<8|d[h+11]},G_=function(d){var p={},h=qa(d),g=4+za(d);if(h&&(g+=d[g]+1),!!(d[g+5]&1)){var v,y,E;v=(d[g+1]&15)<<8|d[g+2],y=3+v-4,E=(d[g+10]&15)<<8|d[g+11];for(var S=12+E;S<y;){var F=g+S;p[(d[F+1]&31)<<8|d[F+2]]=d[F],S+=((d[F+3]&15)<<8|d[F+4])+5}return p}},K_=function(d,p){var h=Yd(d),g=p[h];switch(g){case Ve.H264_STREAM_TYPE:return"video";case Ve.ADTS_STREAM_TYPE:return"audio";case Ve.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},X_=function(d){var p=qa(d);if(!p)return null;var h=4+za(d);if(h>=d.byteLength)return null;var g=null,v;return v=d[h+7],v&192&&(g={},g.pts=(d[h+9]&14)<<27|(d[h+10]&255)<<20|(d[h+11]&254)<<12|(d[h+12]&255)<<5|(d[h+13]&254)>>>3,g.pts*=4,g.pts+=(d[h+13]&6)>>>1,g.dts=g.pts,v&64&&(g.dts=(d[h+14]&14)<<27|(d[h+15]&255)<<20|(d[h+16]&254)<<12|(d[h+17]&255)<<5|(d[h+18]&254)>>>3,g.dts*=4,g.dts+=(d[h+18]&6)>>>1)),g},Ko=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Y_=function(d){for(var p=4+za(d),h=d.subarray(p),g=0,v=0,y=!1,E;v<h.byteLength-3;v++)if(h[v+2]===1){g=v+5;break}for(;g<h.byteLength;)switch(h[g]){case 0:if(h[g-1]!==0){g+=2;break}else if(h[g-2]!==0){g++;break}v+3!==g-2&&(E=Ko(h[v+3]&31),E==="slice_layer_without_partitioning_rbsp_idr"&&(y=!0));do g++;while(h[g]!==1&&g<h.length);v=g-2,g+=3;break;case 1:if(h[g-1]!==0||h[g-2]!==0){g+=3;break}E=Ko(h[v+3]&31),E==="slice_layer_without_partitioning_rbsp_idr"&&(y=!0),v=g-2,g+=3;break;default:g+=3;break}return h=h.subarray(v),g-=v,v=0,h&&h.byteLength>3&&(E=Ko(h[v+3]&31),E==="slice_layer_without_partitioning_rbsp_idr"&&(y=!0)),y},Q_={parseType:q_,parsePat:z_,parsePmt:G_,parsePayloadUnitStartIndicator:qa,parsePesType:K_,parsePesTime:X_,videoPacketContainsKeyFrame:Y_},or=wd.handleRollover,pe={};pe.ts=Q_,pe.aac=ja;var Oi=le.ONE_SECOND_IN_TS,Xe=188,Rt=71,J_=function(d,p){for(var h=0,g=Xe,v,y;g<d.byteLength;){if(d[h]===Rt&&d[g]===Rt){switch(v=d.subarray(h,g),y=pe.ts.parseType(v,p.pid),y){case"pat":p.pid=pe.ts.parsePat(v);break;case"pmt":var E=pe.ts.parsePmt(v);p.table=p.table||{},Object.keys(E).forEach(function(S){p.table[S]=E[S]});break}h+=Xe,g+=Xe;continue}h++,g++}},Qd=function(d,p,h){for(var g=0,v=Xe,y,E,S,F,w,P=!1;v<=d.byteLength;){if(d[g]===Rt&&(d[v]===Rt||v===d.byteLength)){switch(y=d.subarray(g,v),E=pe.ts.parseType(y,p.pid),E){case"pes":S=pe.ts.parsePesType(y,p.table),F=pe.ts.parsePayloadUnitStartIndicator(y),S==="audio"&&F&&(w=pe.ts.parsePesTime(y),w&&(w.type="audio",h.audio.push(w),P=!0));break}if(P)break;g+=Xe,v+=Xe;continue}g++,v++}for(v=d.byteLength,g=v-Xe,P=!1;g>=0;){if(d[g]===Rt&&(d[v]===Rt||v===d.byteLength)){switch(y=d.subarray(g,v),E=pe.ts.parseType(y,p.pid),E){case"pes":S=pe.ts.parsePesType(y,p.table),F=pe.ts.parsePayloadUnitStartIndicator(y),S==="audio"&&F&&(w=pe.ts.parsePesTime(y),w&&(w.type="audio",h.audio.push(w),P=!0));break}if(P)break;g-=Xe,v-=Xe;continue}g--,v--}},Z_=function(d,p,h){for(var g=0,v=Xe,y,E,S,F,w,P,U,z,Y=!1,$={data:[],size:0};v<d.byteLength;){if(d[g]===Rt&&d[v]===Rt){switch(y=d.subarray(g,v),E=pe.ts.parseType(y,p.pid),E){case"pes":if(S=pe.ts.parsePesType(y,p.table),F=pe.ts.parsePayloadUnitStartIndicator(y),S==="video"&&(F&&!Y&&(w=pe.ts.parsePesTime(y),w&&(w.type="video",h.video.push(w),Y=!0)),!h.firstKeyFrame)){if(F&&$.size!==0){for(P=new Uint8Array($.size),U=0;$.data.length;)z=$.data.shift(),P.set(z,U),U+=z.byteLength;if(pe.ts.videoPacketContainsKeyFrame(P)){var Z=pe.ts.parsePesTime(P);Z?(h.firstKeyFrame=Z,h.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}$.size=0}$.data.push(y),$.size+=y.byteLength}break}if(Y&&h.firstKeyFrame)break;g+=Xe,v+=Xe;continue}g++,v++}for(v=d.byteLength,g=v-Xe,Y=!1;g>=0;){if(d[g]===Rt&&d[v]===Rt){switch(y=d.subarray(g,v),E=pe.ts.parseType(y,p.pid),E){case"pes":S=pe.ts.parsePesType(y,p.table),F=pe.ts.parsePayloadUnitStartIndicator(y),S==="video"&&F&&(w=pe.ts.parsePesTime(y),w&&(w.type="video",h.video.push(w),Y=!0));break}if(Y)break;g-=Xe,v-=Xe;continue}g--,v--}},ex=function(d,p){if(d.audio&&d.audio.length){var h=p;(typeof h>"u"||isNaN(h))&&(h=d.audio[0].dts),d.audio.forEach(function(y){y.dts=or(y.dts,h),y.pts=or(y.pts,h),y.dtsTime=y.dts/Oi,y.ptsTime=y.pts/Oi})}if(d.video&&d.video.length){var g=p;if((typeof g>"u"||isNaN(g))&&(g=d.video[0].dts),d.video.forEach(function(y){y.dts=or(y.dts,g),y.pts=or(y.pts,g),y.dtsTime=y.dts/Oi,y.ptsTime=y.pts/Oi}),d.firstKeyFrame){var v=d.firstKeyFrame;v.dts=or(v.dts,g),v.pts=or(v.pts,g),v.dtsTime=v.dts/Oi,v.ptsTime=v.pts/Oi}}},tx=function(d){for(var p=!1,h=0,g=null,v=null,y=0,E=0,S;d.length-E>=3;){var F=pe.aac.parseType(d,E);switch(F){case"timed-metadata":if(d.length-E<10){p=!0;break}if(y=pe.aac.parseId3TagSize(d,E),y>d.length){p=!0;break}v===null&&(S=d.subarray(E,E+y),v=pe.aac.parseAacTimestamp(S)),E+=y;break;case"audio":if(d.length-E<7){p=!0;break}if(y=pe.aac.parseAdtsSize(d,E),y>d.length){p=!0;break}g===null&&(S=d.subarray(E,E+y),g=pe.aac.parseSampleRate(S)),h++,E+=y;break;default:E++;break}if(p)return null}if(g===null||v===null)return null;var w=Oi/g,P={audio:[{type:"audio",dts:v,pts:v},{type:"audio",dts:v+h*1024*w,pts:v+h*1024*w}]};return P},ix=function(d){var p={pid:null,table:null},h={};J_(d,p);for(var g in p.table)if(p.table.hasOwnProperty(g)){var v=p.table[g];switch(v){case Ve.H264_STREAM_TYPE:h.video=[],Z_(d,p,h),h.video.length===0&&delete h.video;break;case Ve.ADTS_STREAM_TYPE:h.audio=[],Qd(d,p,h),h.audio.length===0&&delete h.audio;break}}return h},rx=function(d,p){var h=pe.aac.isLikelyAacData(d),g;return h?g=tx(d):g=ix(d),!g||!g.audio&&!g.video?null:(ex(g,p),g)},nx={inspect:rx,parseAudioPes_:Qd},ax=function(d,p){p.on("data",function(h){var g=h.initSegment;h.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};var v=h.data;h.data=v.buffer,d.postMessage({action:"data",segment:h,byteOffset:v.byteOffset,byteLength:v.byteLength},[h.data])}),p.on("done",function(h){d.postMessage({action:"done"})}),p.on("gopInfo",function(h){d.postMessage({action:"gopInfo",gopInfo:h})}),p.on("videoSegmentTimingInfo",function(h){var g={start:{decode:le.videoTsToSeconds(h.start.dts),presentation:le.videoTsToSeconds(h.start.pts)},end:{decode:le.videoTsToSeconds(h.end.dts),presentation:le.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:le.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=le.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:g})}),p.on("audioSegmentTimingInfo",function(h){var g={start:{decode:le.videoTsToSeconds(h.start.dts),presentation:le.videoTsToSeconds(h.start.pts)},end:{decode:le.videoTsToSeconds(h.end.dts),presentation:le.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:le.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=le.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:g})}),p.on("id3Frame",function(h){d.postMessage({action:"id3Frame",id3Frame:h})}),p.on("caption",function(h){d.postMessage({action:"caption",caption:h})}),p.on("trackinfo",function(h){d.postMessage({action:"trackinfo",trackInfo:h})}),p.on("audioTimingInfo",function(h){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:le.videoTsToSeconds(h.start),end:le.videoTsToSeconds(h.end)}})}),p.on("videoTimingInfo",function(h){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:le.videoTsToSeconds(h.start),end:le.videoTsToSeconds(h.end)}})}),p.on("log",function(h){d.postMessage({action:"log",log:h})})},Jd=function(){function D(p,h){this.options=h||{},this.self=p,this.init()}var d=D.prototype;return d.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new b_.Transmuxer(this.options),ax(this.self,this.transmuxer)},d.pushMp4Captions=function(h){this.captionParser||(this.captionParser=new $_,this.captionParser.init());var g=new Uint8Array(h.data,h.byteOffset,h.byteLength),v=this.captionParser.parse(g,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:v&&v.captions||[],logs:v&&v.logs||[],data:g.buffer},[g.buffer])},d.probeMp4StartTime=function(h){var g=h.timescales,v=h.data,y=Xd.startTime(g,v);this.self.postMessage({action:"probeMp4StartTime",startTime:y,data:v},[v.buffer])},d.probeMp4Tracks=function(h){var g=h.data,v=Xd.tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:v,data:g},[g.buffer])},d.probeTs=function(h){var g=h.data,v=h.baseStartTime,y=typeof v=="number"&&!isNaN(v)?v*le.ONE_SECOND_IN_TS:void 0,E=nx.inspect(g,y),S=null;E&&(S={hasVideo:E.video&&E.video.length===2||!1,hasAudio:E.audio&&E.audio.length===2||!1},S.hasVideo&&(S.videoStart=E.video[0].ptsTime),S.hasAudio&&(S.audioStart=E.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:S,data:g},[g.buffer])},d.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},d.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},d.push=function(h){var g=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(g)},d.reset=function(){this.transmuxer.reset()},d.setTimestampOffset=function(h){var g=h.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(le.secondsToVideoTs(g)))},d.setAudioAppendStart=function(h){this.transmuxer.setAudioAppendStart(Math.ceil(le.secondsToVideoTs(h.appendStart)))},d.setRemux=function(h){this.transmuxer.setRemux(h.remux)},d.flush=function(h){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},d.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},d.alignGopsWith=function(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())},D}();self.onmessage=function(D){if(D.data.action==="init"&&D.data.options){this.messageHandlers=new Jd(self,D.data.options);return}this.messageHandlers||(this.messageHandlers=new Jd(self)),D.data&&D.data.action&&D.data.action!=="init"&&this.messageHandlers[D.data.action]&&this.messageHandlers[D.data.action](D.data)}})),eA=O0(Zw),tA=function(e,r,i){var t=e.data.segment,n=t.type,s=t.initSegment,o=t.captions,u=t.captionStreams,l=t.metadata,c=t.videoFrameDtsTime,f=t.videoFramePtsTime;r.buffer.push({captions:o,captionStreams:u,metadata:l});var m=e.data.segment.boxes||{data:e.data.segment.data},_={type:n,data:new Uint8Array(m.data,m.data.byteOffset,m.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof c<"u"&&(_.videoFrameDtsTime=c),typeof f<"u"&&(_.videoFramePtsTime=f),i(_)},iA=function(e){var r=e.transmuxedData,i=e.callback;r.buffer=[],i(r)},rA=function(e,r){r.gopInfo=e.data.gopInfo},M0=function(e){var r=e.transmuxer,i=e.bytes,t=e.audioAppendStart,n=e.gopsToAlignWith,s=e.remux,o=e.onData,u=e.onTrackInfo,l=e.onAudioTimingInfo,c=e.onVideoTimingInfo,f=e.onVideoSegmentTimingInfo,m=e.onAudioSegmentTimingInfo,_=e.onId3,x=e.onCaptions,b=e.onDone,T=e.onEndedTimeline,C=e.onTransmuxerLog,k=e.isEndOfTimeline,j={buffer:[]},L=k,R=function(N){r.currentTransmux===e&&(N.data.action==="data"&&tA(N,j,o),N.data.action==="trackinfo"&&u(N.data.trackInfo),N.data.action==="gopInfo"&&rA(N,j),N.data.action==="audioTimingInfo"&&l(N.data.audioTimingInfo),N.data.action==="videoTimingInfo"&&c(N.data.videoTimingInfo),N.data.action==="videoSegmentTimingInfo"&&f(N.data.videoSegmentTimingInfo),N.data.action==="audioSegmentTimingInfo"&&m(N.data.audioSegmentTimingInfo),N.data.action==="id3Frame"&&_([N.data.id3Frame],N.data.id3Frame.dispatchType),N.data.action==="caption"&&x(N.data.caption),N.data.action==="endedtimeline"&&(L=!1,T()),N.data.action==="log"&&C(N.data.log),N.data.type==="transmuxed"&&(L||(r.onmessage=null,iA({transmuxedData:j,callback:b}),N0(r))))};if(r.onmessage=R,t&&r.postMessage({action:"setAudioAppendStart",appendStart:t}),Array.isArray(n)&&r.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof s<"u"&&r.postMessage({action:"setRemux",remux:s}),i.byteLength){var H=i instanceof ArrayBuffer?i:i.buffer,B=i instanceof ArrayBuffer?0:i.byteOffset;r.postMessage({action:"push",data:H,byteOffset:B,byteLength:i.byteLength},[H])}k&&r.postMessage({action:"endTimeline"}),r.postMessage({action:"flush"})},N0=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():M0(e.currentTransmux))},Mg=function(e,r){e.postMessage({action:r}),N0(e)},B0=function(e,r){if(!r.currentTransmux){r.currentTransmux=e,Mg(r,e);return}r.transmuxQueue.push(Mg.bind(null,r,e))},nA=function(e){B0("reset",e)},aA=function(e){B0("endTimeline",e)},U0=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,M0(e);return}e.transmuxer.transmuxQueue.push(e)},sA=function(e){var r=new eA;r.currentTransmux=null,r.transmuxQueue=[];var i=r.terminate;return r.terminate=function(){return r.currentTransmux=null,r.transmuxQueue.length=0,i.call(r)},r.postMessage({action:"init",options:e}),r},rc={reset:nA,endTimeline:aA,transmux:U0,createTransmuxer:sA},po=function(e){var r=e.transmuxer,i=e.endAction||e.action,t=e.callback,n=ot({},e,{endAction:null,transmuxer:null,callback:null}),s=function l(c){c.data.action===i&&(r.removeEventListener("message",l),c.data.data&&(c.data.data=new Uint8Array(c.data.data,e.byteOffset||0,e.byteLength||c.data.data.byteLength),e.data&&(e.data=c.data.data)),t(c.data))};if(r.addEventListener("message",s),e.data){var o=e.data instanceof ArrayBuffer;n.byteOffset=o?0:e.data.byteOffset,n.byteLength=e.data.byteLength;var u=[o?e.data:e.data.buffer];r.postMessage(n,u)}else r.postMessage(n)},Wt={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Dc=function(e){e.forEach(function(r){r.abort()})},oA=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},uA=function(e){var r=e.target,i=Date.now()-r.requestTime,t={bandwidth:1/0,bytesReceived:0,roundTripTime:i||0};return t.bytesReceived=e.loaded,t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3),t},sd=function(e,r){return r.timedout?{status:r.status,message:"HLS request timed-out at URL: "+r.uri,code:Wt.TIMEOUT,xhr:r}:r.aborted?{status:r.status,message:"HLS request aborted at URL: "+r.uri,code:Wt.ABORTED,xhr:r}:e?{status:r.status,message:"HLS request errored at URL: "+r.uri,code:Wt.FAILURE,xhr:r}:r.responseType==="arraybuffer"&&r.response.byteLength===0?{status:r.status,message:"Empty HLS response at URL: "+r.uri,code:Wt.FAILURE,xhr:r}:null},Ng=function(e,r,i){return function(t,n){var s=n.response,o=sd(t,n);if(o)return i(o,e);if(s.byteLength!==16)return i({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Wt.FAILURE,xhr:n},e);for(var u=new DataView(s),l=new Uint32Array([u.getUint32(0),u.getUint32(4),u.getUint32(8),u.getUint32(12)]),c=0;c<r.length;c++)r[c].bytes=l;return i(null,e)}},j0=function(e,r){var i=$s(e.map.bytes);if(i!=="mp4"){var t=e.map.resolvedUri||e.map.uri;return r({internal:!0,message:"Found unsupported "+(i||"unknown")+" container for initialization segment at URL: "+t,code:Wt.FAILURE})}po({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(s){var o=s.tracks,u=s.data;return e.map.bytes=u,o.forEach(function(l){e.map.tracks=e.map.tracks||{},!e.map.tracks[l.type]&&(e.map.tracks[l.type]=l,typeof l.id=="number"&&l.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[l.id]=l.timescale))}),r(null)}})},lA=function(e){var r=e.segment,i=e.finishProcessingFn;return function(t,n){var s=sd(t,n);if(s)return i(s,r);var o=new Uint8Array(n.response);if(r.map.key)return r.map.encryptedBytes=o,i(null,r);r.map.bytes=o,j0(r,function(u){if(u)return u.xhr=n,u.status=n.status,i(u,r);i(null,r)})}},cA=function(e){var r=e.segment,i=e.finishProcessingFn,t=e.responseType;return function(n,s){var o=sd(n,s);if(o)return i(o,r);var u=t==="arraybuffer"||!s.responseText?s.response:Qw(s.responseText.substring(r.lastReachedChar||0));return r.stats=oA(s),r.key?r.encryptedBytes=new Uint8Array(u):r.bytes=new Uint8Array(u),i(null,r)}},dA=function(e){var r=e.segment,i=e.bytes,t=e.trackInfoFn,n=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,f=e.endedTimelineFn,m=e.dataFn,_=e.doneFn,x=e.onTransmuxerLog,b=r.map&&r.map.tracks||{},T=Boolean(b.audio&&b.video),C=n.bind(null,r,"audio","start"),k=n.bind(null,r,"audio","end"),j=n.bind(null,r,"video","start"),L=n.bind(null,r,"video","end"),R=function(){return U0({bytes:i,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,remux:T,onData:function(O){O.type=O.type==="combined"?"video":O.type,m(r,O)},onTrackInfo:function(O){t&&(T&&(O.isMuxed=!0),t(r,O))},onAudioTimingInfo:function(O){C&&typeof O.start<"u"&&(C(O.start),C=null),k&&typeof O.end<"u"&&k(O.end)},onVideoTimingInfo:function(O){j&&typeof O.start<"u"&&(j(O.start),j=null),L&&typeof O.end<"u"&&L(O.end)},onVideoSegmentTimingInfo:function(O){s(O)},onAudioSegmentTimingInfo:function(O){o(O)},onId3:function(O,N){u(r,O,N)},onCaptions:function(O){l(r,[O])},isEndOfTimeline:c,onEndedTimeline:function(){f()},onTransmuxerLog:x,onDone:function(O){!_||(O.type=O.type==="combined"?"video":O.type,_(null,r,O))}})};po({action:"probeTs",transmuxer:r.transmuxer,data:i,baseStartTime:r.baseStartTime,callback:function(B){r.bytes=i=B.data;var O=B.result;O&&(t(r,{hasAudio:O.hasAudio,hasVideo:O.hasVideo,isMuxed:T}),t=null,O.hasAudio&&!T&&C(O.audioStart),O.hasVideo&&j(O.videoStart),C=null,j=null),R()}})},H0=function(e){var r=e.segment,i=e.bytes,t=e.trackInfoFn,n=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,f=e.endedTimelineFn,m=e.dataFn,_=e.doneFn,x=e.onTransmuxerLog,b=new Uint8Array(i);if(Qm(b)){r.isFmp4=!0;var T=r.map.tracks,C={isFmp4:!0,hasVideo:!!T.video,hasAudio:!!T.audio};T.audio&&T.audio.codec&&T.audio.codec!=="enca"&&(C.audioCodec=T.audio.codec),T.video&&T.video.codec&&T.video.codec!=="encv"&&(C.videoCodec=T.video.codec),T.video&&T.audio&&(C.isMuxed=!0),t(r,C);var k=function(L){m(r,{data:b,type:C.hasAudio&&!C.isMuxed?"audio":"video"}),L&&L.length&&l(r,L),_(null,r,{})};po({action:"probeMp4StartTime",timescales:r.map.timescales,data:b,transmuxer:r.transmuxer,callback:function(L){var R=L.data,H=L.startTime;if(i=R.buffer,r.bytes=b=R,C.hasAudio&&!C.isMuxed&&n(r,"audio","start",H),C.hasVideo&&n(r,"video","start",H),!T.video||!R.byteLength||!r.transmuxer){k();return}po({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:r.transmuxer,data:b,timescales:r.map.timescales,trackIds:[T.video.id],callback:function(O){i=O.data.buffer,r.bytes=b=O.data,O.logs.forEach(function(N){x(I.mergeOptions(N,{stream:"mp4CaptionParser"}))}),k(O.captions)}})}});return}if(!r.transmuxer){_(null,r,{});return}if(typeof r.container>"u"&&(r.container=$s(b)),r.container!=="ts"&&r.container!=="aac"){t(r,{hasAudio:!1,hasVideo:!1}),_(null,r,{});return}dA({segment:r,bytes:i,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:_,onTransmuxerLog:x})},V0=function(e,r){var i=e.id,t=e.key,n=e.encryptedBytes,s=e.decryptionWorker,o=function l(c){if(c.data.source===i){s.removeEventListener("message",l);var f=c.data.decrypted;r(new Uint8Array(f.bytes,f.byteOffset,f.byteLength))}};s.addEventListener("message",o);var u;t.bytes.slice?u=t.bytes.slice():u=new Uint32Array(Array.prototype.slice.call(t.bytes)),s.postMessage(w0({source:i,encrypted:n,key:u,iv:t.iv}),[n.buffer,u.buffer])},fA=function(e){var r=e.decryptionWorker,i=e.segment,t=e.trackInfoFn,n=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,f=e.endedTimelineFn,m=e.dataFn,_=e.doneFn,x=e.onTransmuxerLog;V0({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:r},function(b){i.bytes=b,H0({segment:i,bytes:i.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:_,onTransmuxerLog:x})})},hA=function(e){var r=e.activeXhrs,i=e.decryptionWorker,t=e.trackInfoFn,n=e.timingInfoFn,s=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,u=e.id3Fn,l=e.captionsFn,c=e.isEndOfTimeline,f=e.endedTimelineFn,m=e.dataFn,_=e.doneFn,x=e.onTransmuxerLog,b=0,T=!1;return function(C,k){if(!T){if(C)return T=!0,Dc(r),_(C,k);if(b+=1,b===r.length){var j=function(){if(k.encryptedBytes)return fA({decryptionWorker:i,segment:k,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:_,onTransmuxerLog:x});H0({segment:k,bytes:k.bytes,trackInfoFn:t,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:u,captionsFn:l,isEndOfTimeline:c,endedTimelineFn:f,dataFn:m,doneFn:_,onTransmuxerLog:x})};if(k.endOfAllRequests=Date.now(),k.map&&k.map.encryptedBytes&&!k.map.bytes)return V0({decryptionWorker:i,id:k.requestId+"-init",encryptedBytes:k.map.encryptedBytes,key:k.map.key},function(L){k.map.bytes=L,j0(k,function(R){if(R)return Dc(r),_(R,k);j()})});j()}}}},pA=function(e){var r=e.loadendState,i=e.abortFn;return function(t){var n=t.target;n.aborted&&i&&!r.calledAbortFn&&(i(),r.calledAbortFn=!0)}},mA=function(e){var r=e.segment,i=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(t){var n=t.target;if(!n.aborted)return r.stats=I.mergeOptions(r.stats,uA(t)),!r.stats.firstBytesReceivedAt&&r.stats.bytesReceived&&(r.stats.firstBytesReceivedAt=Date.now()),i(t,r)}},gA=function(e){var r=e.xhr,i=e.xhrOptions,t=e.decryptionWorker,n=e.segment,s=e.abortFn,o=e.progressFn,u=e.trackInfoFn,l=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,f=e.audioSegmentTimingInfoFn,m=e.id3Fn,_=e.captionsFn,x=e.isEndOfTimeline,b=e.endedTimelineFn,T=e.dataFn,C=e.doneFn,k=e.onTransmuxerLog,j=[],L=hA({activeXhrs:j,decryptionWorker:t,trackInfoFn:u,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:f,id3Fn:m,captionsFn:_,isEndOfTimeline:x,endedTimelineFn:b,dataFn:T,doneFn:C,onTransmuxerLog:k});if(n.key&&!n.key.bytes){var R=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&R.push(n.map.key);var H=I.mergeOptions(i,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),B=Ng(n,R,L),O=r(H,B);j.push(O)}if(n.map&&!n.map.bytes){var N=n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri);if(N){var M=I.mergeOptions(i,{uri:n.map.key.resolvedUri,responseType:"arraybuffer"}),G=Ng(n,[n.map.key],L),K=r(M,G);j.push(K)}var J=I.mergeOptions(i,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:_c(n.map)}),ce=lA({segment:n,finishProcessingFn:L}),ye=r(J,ce);j.push(ye)}var ie=I.mergeOptions(i,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:_c(n)}),oe=cA({segment:n,finishProcessingFn:L,responseType:ie.responseType}),xe=r(ie,oe);xe.addEventListener("progress",mA({segment:n,progressFn:o,trackInfoFn:u,timingInfoFn:l,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:f,id3Fn:m,captionsFn:_,isEndOfTimeline:x,endedTimelineFn:b,dataFn:T})),j.push(xe);var qe={};return j.forEach(function(fe){fe.addEventListener("loadend",pA({loadendState:qe,abortFn:s}))}),function(){return Dc(j)}},vA=Ot("CodecUtils"),yA=function(e){var r=e.attributes||{};if(r.CODECS)return At(r.CODECS)},$0=function(e,r){var i=r.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]},_A=function(e,r){if(!$0(e,r))return!0;var i=r.attributes||{},t=e.mediaGroups.AUDIO[i.AUDIO];for(var n in t)if(!t[n].uri&&!t[n].playlists)return!0;return!1},mo=function(e){var r={};return e.forEach(function(i){var t=i.mediaType,n=i.type,s=i.details;r[t]=r[t]||[],r[t].push(al(""+n+s))}),Object.keys(r).forEach(function(i){if(r[i].length>1){vA("multiple "+i+" codecs found as attributes: "+r[i].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),r[i]=null;return}r[i]=r[i][0]}),r},Bg=function(e){var r=0;return e.audio&&r++,e.video&&r++,r},oa=function(e,r){var i=r.attributes||{},t=mo(yA(r)||[]);if($0(e,r)&&!t.audio&&!_A(e,r)){var n=mo(Dp(e,i.AUDIO)||[]);n.audio&&(t.audio=n.audio)}return t},Xs=Ot("PlaylistSelector"),Ug=function(e){if(!(!e||!e.playlist)){var r=e.playlist;return JSON.stringify({id:r.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:r.attributes&&r.attributes.CODECS||""})}},go=function(e,r){if(!e)return"";var i=A.default.getComputedStyle(e);return i?i[r]:""},Ur=function(e,r){var i=e.slice();e.sort(function(t,n){var s=r(t,n);return s===0?i.indexOf(t)-i.indexOf(n):s})},od=function(e,r){var i,t;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||A.default.Number.MAX_VALUE,r.attributes.BANDWIDTH&&(t=r.attributes.BANDWIDTH),t=t||A.default.Number.MAX_VALUE,i-t},xA=function(e,r){var i,t;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||A.default.Number.MAX_VALUE,r.attributes.RESOLUTION&&r.attributes.RESOLUTION.width&&(t=r.attributes.RESOLUTION.width),t=t||A.default.Number.MAX_VALUE,i===t&&e.attributes.BANDWIDTH&&r.attributes.BANDWIDTH?e.attributes.BANDWIDTH-r.attributes.BANDWIDTH:i-t},W0=function(e,r,i,t,n,s){if(!!e){var o={bandwidth:r,width:i,height:t,limitRenditionByPlayerDimensions:n},u=e.playlists;ft.isAudioOnly(e)&&(u=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var l=u.map(function(M){var G,K=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.width,J=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.height;return G=M.attributes&&M.attributes.BANDWIDTH,G=G||A.default.Number.MAX_VALUE,{bandwidth:G,width:K,height:J,playlist:M}});Ur(l,function(M,G){return M.bandwidth-G.bandwidth}),l=l.filter(function(M){return!ft.isIncompatible(M.playlist)});var c=l.filter(function(M){return ft.isEnabled(M.playlist)});c.length||(c=l.filter(function(M){return!ft.isDisabled(M.playlist)}));var f=c.filter(function(M){return M.bandwidth*Ue.BANDWIDTH_VARIANCE<r}),m=f[f.length-1],_=f.filter(function(M){return M.bandwidth===m.bandwidth})[0];if(n===!1){var x=_||c[0]||l[0];if(x&&x.playlist){var b="sortedPlaylistReps";return _&&(b="bandwidthBestRep"),c[0]&&(b="enabledPlaylistReps"),Xs("choosing "+Ug(x)+" using "+b+" with options",o),x.playlist}return Xs("could not choose a playlist with options",o),null}var T=f.filter(function(M){return M.width&&M.height});Ur(T,function(M,G){return M.width-G.width});var C=T.filter(function(M){return M.width===i&&M.height===t});m=C[C.length-1];var k=C.filter(function(M){return M.bandwidth===m.bandwidth})[0],j,L,R;k||(j=T.filter(function(M){return M.width>i||M.height>t}),L=j.filter(function(M){return M.width===j[0].width&&M.height===j[0].height}),m=L[L.length-1],R=L.filter(function(M){return M.bandwidth===m.bandwidth})[0]);var H;if(s.experimentalLeastPixelDiffSelector){var B=T.map(function(M){return M.pixelDiff=Math.abs(M.width-i)+Math.abs(M.height-t),M});Ur(B,function(M,G){return M.pixelDiff===G.pixelDiff?G.bandwidth-M.bandwidth:M.pixelDiff-G.pixelDiff}),H=B[0]}var O=H||R||k||_||c[0]||l[0];if(O&&O.playlist){var N="sortedPlaylistReps";return H?N="leastPixelDiffRep":R?N="resolutionPlusOneRep":k?N="resolutionBestRep":_?N="bandwidthBestRep":c[0]&&(N="enabledPlaylistReps"),Xs("choosing "+Ug(O)+" using "+N+" with options",o),O.playlist}return Xs("could not choose a playlist with options",o),null}},jg=function(){var e=this.useDevicePixelRatio&&A.default.devicePixelRatio||1;return W0(this.playlists.master,this.systemBandwidth,parseInt(go(this.tech_.el(),"width"),10)*e,parseInt(go(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},DA=function(e){var r=-1,i=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var t=this.useDevicePixelRatio&&A.default.devicePixelRatio||1;return r<0&&(r=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(r=e*this.systemBandwidth+(1-e)*r,i=this.systemBandwidth),W0(this.playlists.master,r,parseInt(go(this.tech_.el(),"width"),10)*t,parseInt(go(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},TA=function(e){var r=e.master,i=e.currentTime,t=e.bandwidth,n=e.duration,s=e.segmentDuration,o=e.timeUntilRebuffer,u=e.currentTimeline,l=e.syncController,c=r.playlists.filter(function(b){return!ft.isIncompatible(b)}),f=c.filter(ft.isEnabled);f.length||(f=c.filter(function(b){return!ft.isDisabled(b)}));var m=f.filter(ft.hasAttribute.bind(null,"BANDWIDTH")),_=m.map(function(b){var T=l.getSyncPoint(b,n,u,i),C=T?1:2,k=ft.estimateSegmentRequestTime(s,t,b),j=k*C-o;return{playlist:b,rebufferingImpact:j}}),x=_.filter(function(b){return b.rebufferingImpact<=0});return Ur(x,function(b,T){return od(T.playlist,b.playlist)}),x.length?x[0]:(Ur(_,function(b,T){return b.rebufferingImpact-T.rebufferingImpact}),_[0]||null)},bA=function(){var e=this,r=this.playlists.master.playlists.filter(ft.isEnabled);Ur(r,function(t,n){return od(t,n)});var i=r.filter(function(t){return!!oa(e.playlists.master,t).video});return i[0]||null},EA=function(e){var r=0,i;return e.bytes&&(i=new Uint8Array(e.bytes),e.segments.forEach(function(t){i.set(t,r),r+=t.byteLength})),i},SA=function(e,r,i){if(!e[i]){r.trigger({type:"usage",name:"vhs-608"}),r.trigger({type:"usage",name:"hls-608"});var t=i;/^cc708_/.test(i)&&(t="SERVICE"+i.split("_")[1]);var n=r.textTracks().getTrackById(t);if(n)e[i]=n;else{var s=r.options_.vhs&&r.options_.vhs.captionServices||{},o=i,u=i,l=!1,c=s[t];c&&(o=c.label,u=c.language,l=c.default),e[i]=r.addRemoteTextTrack({kind:"captions",id:t,default:l,label:o,language:u},!1).track}}},CA=function(e){var r=e.inbandTextTracks,i=e.captionArray,t=e.timestampOffset;if(!!i){var n=A.default.WebKitDataCue||A.default.VTTCue;i.forEach(function(s){var o=s.stream;r[o].addCue(new n(s.startTime+t,s.endTime+t,s.text))})}},wA=function(e){Object.defineProperties(e.frame,{id:{get:function(){return I.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return I.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return I.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},AA=function(e){var r=e.inbandTextTracks,i=e.metadataArray,t=e.timestampOffset,n=e.videoDuration;if(!!i){var s=A.default.WebKitDataCue||A.default.VTTCue,o=r.metadataTrack_;if(!!o&&(i.forEach(function(_){var x=_.cueTime+t;typeof x!="number"||A.default.isNaN(x)||x<0||!(x<1/0)||_.frames.forEach(function(b){var T=new s(x,x,b.value||b.url||b.data||"");T.frame=b,T.value=b,wA(T),o.addCue(T)})}),!(!o.cues||!o.cues.length))){for(var u=o.cues,l=[],c=0;c<u.length;c++)u[c]&&l.push(u[c]);var f=l.reduce(function(_,x){var b=_[x.startTime]||[];return b.push(x),_[x.startTime]=b,_},{}),m=Object.keys(f).sort(function(_,x){return Number(_)-Number(x)});m.forEach(function(_,x){var b=f[_],T=Number(m[x+1])||n;b.forEach(function(C){C.endTime=T})})}}},FA=function(e,r,i){e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=r)},na=function(e,r,i){var t,n;if(!!i&&!!i.cues)for(t=i.cues.length;t--;)n=i.cues[t],n.startTime>=e&&n.endTime<=r&&i.removeCue(n)},kA=function(e){var r=e.cues;if(!!r)for(var i=0;i<r.length;i++){for(var t=[],n=0,s=0;s<r.length;s++)r[i].startTime===r[s].startTime&&r[i].endTime===r[s].endTime&&r[i].text===r[s].text&&(n++,n>1&&t.push(r[s]));t.length&&t.forEach(function(o){return e.removeCue(o)})}},PA=function(e,r,i){if(typeof r>"u"||r===null||!e.length)return[];var t=Math.ceil((r-i+3)*ua.ONE_SECOND_IN_TS),n;for(n=0;n<e.length&&!(e[n].pts>t);n++);return e.slice(n)},IA=function(e,r,i){if(!r.length)return e;if(i)return r.slice();var t=r[0].pts,n=0;for(n;n<e.length&&!(e[n].pts>=t);n++);return e.slice(0,n).concat(r)},OA=function(e,r,i,t){for(var n=Math.ceil((r-t)*ua.ONE_SECOND_IN_TS),s=Math.ceil((i-t)*ua.ONE_SECOND_IN_TS),o=e.slice(),u=e.length;u--&&!(e[u].pts<=s););if(u===-1)return o;for(var l=u+1;l--&&!(e[l].pts<=n););return l=Math.max(l,0),o.splice(l,u-l+1),o},LA=function(e,r){if(!e&&!r||!e&&r||e&&!r)return!1;if(e===r)return!0;var i=Object.keys(e).sort(),t=Object.keys(r).sort();if(i.length!==t.length)return!1;for(var n=0;n<i.length;n++){var s=i[n];if(s!==t[n]||e[s]!==r[s])return!1}return!0},q0=22,RA=function(e,r,i){r=r||[];for(var t=[],n=0,s=0;s<r.length;s++){var o=r[s];if(e===o.timeline&&(t.push(s),n+=o.duration,n>i))return s}return t.length===0?0:t[t.length-1]},ia=1,MA=500,Hg=function(e){return typeof e=="number"&&isFinite(e)},Ys=1/60,NA=function(e,r,i){return e!=="main"||!r||!i?null:!i.hasAudio&&!i.hasVideo?"Neither audio nor video found in segment.":r.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},BA=function(e,r,i){var t=r-Ue.BACK_BUFFER_LENGTH;e.length&&(t=Math.max(t,e.start(0)));var n=r-i;return Math.min(n,t)},Or=function(e){var r=e.startOfSegment,i=e.duration,t=e.segment,n=e.part,s=e.playlist,o=s.mediaSequence,u=s.id,l=s.segments,c=l===void 0?[]:l,f=e.mediaIndex,m=e.partIndex,_=e.timeline,x=c.length-1,b="mediaIndex/partIndex increment";e.getMediaInfoForTime?b="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(b="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(b+=" with independent "+e.independent);var T=typeof m=="number",C=e.segment.uri?"segment":"pre-segment",k=T?h0({preloadSegment:t})-1:0;return C+" ["+(o+f)+"/"+(o+x)+"]"+(T?" part ["+m+"/"+k+"]":"")+(" segment start/end ["+t.start+" => "+t.end+"]")+(T?" part start/end ["+n.start+" => "+n.end+"]":"")+(" startOfSegment ["+r+"]")+(" duration ["+i+"]")+(" timeline ["+_+"]")+(" selected by ["+b+"]")+(" playlist ["+u+"]")},Vg=function(e){return e+"TimingInfo"},UA=function(e){var r=e.segmentTimeline,i=e.currentTimeline,t=e.startOfSegment,n=e.buffered,s=e.overrideCheck;return!s&&r===i?null:r<i?t:n.length?n.end(n.length-1):t},$g=function(e){var r=e.timelineChangeController,i=e.currentTimeline,t=e.segmentTimeline,n=e.loaderType,s=e.audioDisabled;if(i===t)return!1;if(n==="audio"){var o=r.lastTimelineChange({type:"main"});return!o||o.to!==t}if(n==="main"&&s){var u=r.pendingTimelineChange({type:"audio"});return!(u&&u.to===t)}return!1},jA=function(e){var r=0;return["video","audio"].forEach(function(i){var t=e[i+"TimingInfo"];if(!!t){var n=t.start,s=t.end,o;typeof n=="bigint"||typeof s=="bigint"?o=A.default.BigInt(s)-A.default.BigInt(n):typeof n=="number"&&typeof s=="number"&&(o=s-n),typeof o<"u"&&o>r&&(r=o)}}),typeof r=="bigint"&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r},Wg=function(e){var r=e.segmentDuration,i=e.maxDuration;return r?Math.round(r)>i+Ai:!1},HA=function(e,r){if(r!=="hls")return null;var i=jA({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!i)return null;var t=e.playlist.targetDuration,n=Wg({segmentDuration:i,maxDuration:t*2}),s=Wg({segmentDuration:i,maxDuration:t}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+i+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+t+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return n||s?{severity:n?"warn":"info",message:o}:null},Tc=function(a){q(e,a);function e(i,t){var n;if(n=a.call(this)||this,!i)throw new TypeError("Initialization settings are required");if(typeof i.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!i.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=i.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=i.hasPlayed,n.currentTime_=i.currentTime,n.seekable_=i.seekable,n.seeking_=i.seeking,n.duration_=i.duration,n.mediaSource_=i.mediaSource,n.vhs_=i.vhs,n.loaderType_=i.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=i.segmentMetadataTrack,n.goalBufferLength_=i.goalBufferLength,n.sourceType_=i.sourceType,n.sourceUpdater_=i.sourceUpdater,n.inbandTextTracks_=i.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=i.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=i.parse708captions,n.useDtsForTimestampOffset_=i.useDtsForTimestampOffset,n.captionServices_=i.captionServices,n.experimentalExactManifestTimings=i.experimentalExactManifestTimings,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=I.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=i.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=i.decrypter,n.syncController_=i.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",function(){n.isEndOfStream_()||(n.ended_=!1)}),n.fetchAtBuffer_=!1,n.logger_=Ot("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(ee(n),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="main"&&n.timelineChangeController_.on("pendingtimelinechange",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="audio"&&n.timelineChangeController_.on("timelinechange",function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n}var r=e.prototype;return r.createTransmuxer_=function(){return rc.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},r.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},r.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&A.default.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},r.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},r.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},r.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,A.default.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},r.checkForAbort_=function(t){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==t},r.error=function(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},r.endOfStream=function(){this.ended_=!0,this.transmuxer_&&rc.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},r.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return I.createTimeRanges();if(this.loaderType_==="main"){var n=t.hasAudio,s=t.hasVideo,o=t.isMuxed;if(s&&n&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},r.initSegmentForMap=function(t,n){if(n===void 0&&(n=!1),!t)return null;var s=ho(t),o=this.initSegments_[s];return n&&!o&&t.bytes&&(this.initSegments_[s]=o={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),o||t},r.segmentKey=function(t,n){if(n===void 0&&(n=!1),!t)return null;var s=A0(t),o=this.keyCache_[s];this.cacheEncryptionKeys_&&n&&!o&&t.bytes&&(this.keyCache_[s]=o={resolvedUri:t.resolvedUri,bytes:t.bytes});var u={resolvedUri:(o||t).resolvedUri};return o&&(u.bytes=o.bytes),u},r.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},r.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.playlist=function(t,n){if(n===void 0&&(n={}),!!t){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=n,this.state==="INIT"&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(t));var u=null;if(s&&(s.id?u=s.id:s.uri&&(u=s.uri)),this.logger_("playlist update ["+u+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==t.uri){this.mediaIndex!==null&&(t.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var l=t.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+l+"]"),this.mediaIndex!==null)if(this.mediaIndex-=l,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){var f=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=f}}o&&(o.mediaIndex-=l,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=t.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,t)}},r.pause=function(){this.checkBufferTimeout_&&(A.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},r.paused=function(){return this.checkBufferTimeout_===null},r.resetEverything=function(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},r.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},r.resyncLoader=function(){this.transmuxer_&&rc.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},r.remove=function(t,n,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),n===1/0&&(n=this.duration_()),n<=t){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var u=1,l=function(){u--,u===0&&s()};(o||!this.audioDisabled_)&&(u++,this.sourceUpdater_.removeAudio(t,n,l)),(o||this.loaderType_==="main")&&(this.gopBuffer_=OA(this.gopBuffer_,t,n,this.timeMapping_),u++,this.sourceUpdater_.removeVideo(t,n,l));for(var c in this.inbandTextTracks_)na(t,n,this.inbandTextTracks_[c]);na(t,n,this.segmentMetadataTrack_),l()},r.monitorBuffer_=function(){this.checkBufferTimeout_&&A.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=A.default.setTimeout(this.monitorBufferTick_.bind(this),1)},r.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&A.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=A.default.setTimeout(this.monitorBufferTick_.bind(this),MA)},r.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var t=this.chooseNextRequest_();!t||(typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}},r.isEndOfStream_=function(t,n,s){if(t===void 0&&(t=this.mediaIndex),n===void 0&&(n=this.playlist_),s===void 0&&(s=this.partIndex),!n||!this.mediaSource_)return!1;var o=typeof t=="number"&&n.segments[t],u=t+1===n.segments.length,l=!o||!o.parts||s+1===o.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&u&&l},r.chooseNextRequest_=function(){var t=this.buffered_(),n=Pg(t)||0,s=td(t,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,u=s>=this.goalBufferLength_(),l=this.playlist_.segments;if(!l.length||o||u)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(c.isSyncRequest)c.mediaIndex=RA(this.currentTimeline_,l,n);else if(this.mediaIndex!==null){var f=l[this.mediaIndex],m=typeof this.partIndex=="number"?this.partIndex:-1;c.startOfSegment=f.end?f.end:n,f.parts&&f.parts[m+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=m+1):c.mediaIndex=this.mediaIndex+1}else{var _=ft.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),x=_.segmentIndex,b=_.startTime,T=_.partIndex;c.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+n:"currentTime "+this.currentTime_(),c.mediaIndex=x,c.startOfSegment=b,c.partIndex=T}var C=l[c.mediaIndex],k=C&&typeof c.partIndex=="number"&&C.parts&&C.parts[c.partIndex];if(!C||typeof c.partIndex=="number"&&!k)return null;if(typeof c.partIndex!="number"&&C.parts&&(c.partIndex=0,k=C.parts[0]),!s&&k&&!k.independent)if(c.partIndex===0){var j=l[c.mediaIndex-1],L=j.parts&&j.parts.length&&j.parts[j.parts.length-1];L&&L.independent&&(c.mediaIndex-=1,c.partIndex=j.parts.length-1,c.independent="previous segment")}else C.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");var R=this.mediaSource_&&this.mediaSource_.readyState==="ended";return c.mediaIndex>=l.length-1&&R&&!this.seeking_()?null:this.generateSegmentInfo_(c)},r.generateSegmentInfo_=function(t){var n=t.independent,s=t.playlist,o=t.mediaIndex,u=t.startOfSegment,l=t.isSyncRequest,c=t.partIndex,f=t.forceTimestampOffset,m=t.getMediaInfoForTime,_=s.segments[o],x=typeof c=="number"&&_.parts[c],b={requestId:"segment-loader-"+Math.random(),uri:x&&x.resolvedUri||_.resolvedUri,mediaIndex:o,partIndex:x?c:null,isSyncRequest:l,startOfSegment:u,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:_.timeline,duration:x&&x.duration||_.duration,segment:_,part:x,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:m,independent:n},T=typeof f<"u"?f:this.isPendingTimestampOffset_;b.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:_.timeline,currentTimeline:this.currentTimeline_,startOfSegment:u,buffered:this.buffered_(),overrideCheck:T});var C=Pg(this.sourceUpdater_.audioBuffered());return typeof C=="number"&&(b.audioAppendStart=C-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(b.gopsToAlignWith=PA(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),b},r.timestampOffsetForSegment_=function(t){return UA(t)},r.earlyAbortWhenNeeded_=function(t){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var n=this.currentTime_(),s=t.bandwidth,o=this.pendingSegment_.duration,u=ft.estimateSegmentRequestTime(o,s,this.playlist_,t.bytesReceived),l=uw(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(!(u<=l)){var c=TA({master:this.vhs_.playlists.master,currentTime:n,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:l,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!!c){var f=u-l,m=f-c.rebufferingImpact,_=.5;l<=Ai&&(_=1),!(!c.playlist||c.playlist.uri===this.playlist_.uri||m<_)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*Ue.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},r.handleAbort_=function(t){this.logger_("Aborting "+Or(t)),this.mediaRequestsAborted+=1},r.handleProgress_=function(t,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")},r.handleTrackInfo_=function(t,n){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},LA(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},r.handleTimingInfo_=function(t,n,s,o){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var u=this.pendingSegment_,l=Vg(n);u[l]=u[l]||{},u[l][s]=o,this.logger_("timinginfo: "+n+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},r.handleCaptions_=function(t,n){var s=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,n));return}var u=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),l={};n.forEach(function(c){l[c.stream]=l[c.stream]||{startTime:1/0,captions:[],endTime:0};var f=l[c.stream];f.startTime=Math.min(f.startTime,c.startTime+u),f.endTime=Math.max(f.endTime,c.endTime+u),f.captions.push(c)}),Object.keys(l).forEach(function(c){var f=l[c],m=f.startTime,_=f.endTime,x=f.captions,b=s.inbandTextTracks_;s.logger_("adding cues from "+m+" -> "+_+" for "+c),SA(b,s.vhs_.tech_,c),na(m,_,b[c]),CA({captionArray:x,inbandTextTracks:b,timestampOffset:u})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},r.handleId3_=function(t,n,s){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,n,s));return}var u=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();FA(this.inbandTextTracks_,s,this.vhs_.tech_),AA({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:u,videoDuration:this.duration_()})}},r.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(t){return t()}),this.metadataQueue_.caption.forEach(function(t){return t()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},r.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach(function(n){return n()})},r.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach(function(n){return n()})},r.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var t=this.pendingSegment_;return t?this.getCurrentMediaInfo_()?!$g({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},r.getCurrentMediaInfo_=function(t){return t===void 0&&(t=this.pendingSegment_),t&&t.trackInfo||this.currentMediaInfo_},r.getMediaInfo_=function(t){return t===void 0&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},r.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},r.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!t||!n)return!1;var s=n.hasAudio,o=n.hasVideo,u=n.isMuxed;return!(o&&!t.videoTimingInfo||s&&!this.audioDisabled_&&!u&&!t.audioTimingInfo||$g({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},r.handleData_=function(t,n){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,t,n));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),s.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),s.isFmp4=t.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[Vg(n.type)].start;else{var o=this.getCurrentMediaInfo_(),u=this.loaderType_==="main"&&o&&o.hasVideo,l;u&&(l=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:u,firstVideoFrameTimeForData:l,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,n.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var c=this.chooseNextRequest_();if(c.mediaIndex!==s.mediaIndex||c.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,n)}}},r.updateAppendInitSegmentStatus=function(t,n){this.loaderType_==="main"&&typeof t.timestampOffset=="number"&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==t.playlist&&(this.appendInitSegment_[n]=!0)},r.getInitSegmentAndUpdateState_=function(t){var n=t.type,s=t.initSegment,o=t.map,u=t.playlist;if(o){var l=ho(o);if(this.activeInitSegmentId_===l)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=l}return s&&this.appendInitSegment_[n]?(this.playlistOfLastInitSegment_[n]=u,this.appendInitSegment_[n]=!1,this.activeInitSegmentId_=null,s):null},r.handleQuotaExceededError_=function(t,n){var s=this,o=t.segmentInfo,u=t.type,l=t.bytes,c=this.sourceUpdater_.audioBuffered(),f=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Yi(c).join(", ")),f.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Yi(f).join(", "));var m=c.length?c.start(0):0,_=c.length?c.end(c.length-1):0,x=f.length?f.start(0):0,b=f.length?f.end(f.length-1):0;if(_-m<=ia&&b-x<=ia){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+l.byteLength+", ")+("audio buffer: "+Yi(c).join(", ")+", ")+("video buffer: "+Yi(f).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:u,bytes:l}));var T=this.currentTime_(),C=T-ia;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+C),this.remove(0,C,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+ia+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=A.default.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},ia*1e3)},!0)},r.handleAppendError_=function(t,n){var s=t.segmentInfo,o=t.type,u=t.bytes;if(!!n){if(n.code===q0){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:u});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(o+" append of "+u.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},r.appendToSourceBuffer_=function(t){var n=t.segmentInfo,s=t.type,o=t.initSegment,u=t.data,l=t.bytes;if(!l){var c=[u],f=u.byteLength;o&&(c.unshift(o),f+=o.byteLength),l=EA({bytes:f,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:n,type:s,bytes:l},this.handleAppendError_.bind(this,{segmentInfo:n,type:s,bytes:l}))},r.handleSegmentTimingInfo_=function(t,n,s){if(!(!this.pendingSegment_||n!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,u=t+"TimingInfo";o[u]||(o[u]={}),o[u].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[u].transmuxedPresentationStart=s.start.presentation,o[u].transmuxedDecodeStart=s.start.decode,o[u].transmuxedPresentationEnd=s.end.presentation,o[u].transmuxedDecodeEnd=s.end.decode,o[u].baseMediaDecodeTime=s.baseMediaDecodeTime}},r.appendData_=function(t,n){var s=n.type,o=n.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var u=this.getInitSegmentAndUpdateState_({type:s,initSegment:n.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:s,initSegment:u,data:o})}},r.loadSegment_=function(t){var n=this;if(this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),typeof t.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=ot({},t,{forceTimestampOffset:!0});ot(t,n.generateSegmentInfo_(s)),n.isPendingTimestampOffset_=!1,n.updateTransmuxerAndRequestSegment_(t)});return}this.updateTransmuxerAndRequestSegment_(t)},r.updateTransmuxerAndRequestSegment_=function(t){var n=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var s=this.createSimplifiedSegmentObj_(t),o=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),u=this.mediaIndex!==null,l=t.timeline!==this.currentTimeline_&&t.timeline>0,c=o||u&&l;this.logger_("Requesting "+Or(t)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=gA({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function(){n.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(m){var _=m.message,x=m.level,b=m.stream;n.logger_(Or(t)+" logged from transmuxer stream "+b+" as a "+x+": "+_)}})},r.trimBackBuffer_=function(t){var n=BA(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)},r.createSimplifiedSegmentObj_=function(t){var n=t.segment,s=t.part,o={resolvedUri:s?s.resolvedUri:n.resolvedUri,byterange:s?s.byterange:n.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},u=t.playlist.segments[t.mediaIndex-1];if(u&&u.timeline===n.timeline&&(u.videoTimingInfo?o.baseStartTime=u.videoTimingInfo.transmuxedDecodeEnd:u.audioTimingInfo&&(o.baseStartTime=u.audioTimingInfo.transmuxedDecodeEnd)),n.key){var l=n.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);o.key=this.segmentKey(n.key),o.key.iv=l}return n.map&&(o.map=this.initSegmentForMap(n.map)),o},r.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},r.saveBandwidthRelatedStats_=function(t,n){if(this.pendingSegment_.byteLength=n.bytesReceived,t<Ys){this.logger_("Ignoring segment's bandwidth because its duration of "+t+(" is less than the min to record "+Ys));return}this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime},r.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},r.segmentRequestFinished_=function(t,n,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,n,s));return}if(this.saveTransferStats_(n.stats),!!this.pendingSegment_&&n.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",t.code===Wt.ABORTED)return;if(this.pause(),t.code===Wt.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(t),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,n.stats),o.endOfAllRequests=n.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=IA(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},r.setTimeMapping_=function(t){var n=this.syncController_.mappingForTimeline(t);n!==null&&(this.timeMapping_=n)},r.updateMediaSecondsLoaded_=function(t){typeof t.start=="number"&&typeof t.end=="number"?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration},r.shouldUpdateTransmuxerTimestampOffset_=function(t){return t===null?!1:this.loaderType_==="main"&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset()},r.trueSegmentStart_=function(t){var n=t.currentStart,s=t.playlist,o=t.mediaIndex,u=t.firstVideoFrameTimeForData,l=t.currentVideoTimestampOffset,c=t.useVideoTimingInfo,f=t.videoTimingInfo,m=t.audioTimingInfo;if(typeof n<"u")return n;if(!c)return m.start;var _=s.segments[o-1];return o===0||!_||typeof _.start>"u"||_.end!==u+l?u:f.start},r.waitForAppendsToComplete_=function(t){var n=this.getCurrentMediaInfo_(t);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=n.hasAudio,o=n.hasVideo,u=n.isMuxed,l=this.loaderType_==="main"&&o,c=!this.audioDisabled_&&s&&!u;if(t.waitingOnAppends=0,!t.hasAppendedData_){!t.timingInfo&&typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),this.checkAppendsDone_(t);return}l&&t.waitingOnAppends++,c&&t.waitingOnAppends++,l&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},r.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,t.waitingOnAppends===0&&this.handleAppendsDone_())},r.checkForIllegalMediaSwitch=function(t){var n=NA(this.loaderType_,this.getCurrentMediaInfo_(),t);return n?(this.error({message:n,blacklistDuration:1/0}),this.trigger("error"),!0):!1},r.updateSourceBufferTimestampOffset_=function(t){if(!(t.timestampOffset===null||typeof t.timingInfo.start!="number"||t.changedTimestampOffset||this.loaderType_!=="main")){var n=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),n=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}},r.getSegmentStartTimeForTimestampOffsetCalculation_=function(t){var n=t.videoTimingInfo,s=t.audioTimingInfo,o=t.timingInfo;return this.useDtsForTimestampOffset_?n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},r.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var n=this.getMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo,o=s&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;!o||(t.timingInfo.end=typeof o.end=="number"?o.end:o.start+t.duration)},r.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:this.loaderType_==="main"});var n=HA(t,this.sourceType_);if(n&&(n.severity==="warn"?I.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+Or(t));return}this.logger_("Appended "+Or(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var s=t.segment,o=t.part,u=s.end&&this.currentTime_()-s.end>t.playlist.targetDuration*3,l=o&&o.end&&this.currentTime_()-o.end>t.playlist.partTargetDuration*3;if(u||l){this.logger_("bad "+(u?"segment":"part")+" "+Or(t)),this.resetEverything();return}var c=this.mediaIndex!==null;c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},r.recordThroughput_=function(t){if(t.duration<Ys){this.logger_("Ignoring segment's throughput because its duration of "+t.duration+(" is less than the min to record "+Ys));return}var n=this.throughput.rate,s=Date.now()-t.endOfAllRequests+1,o=Math.floor(t.byteLength/s*8*1e3);this.throughput.rate+=(o-n)/++this.throughput.count},r.addSegmentMetadataCue_=function(t){if(!!this.segmentMetadataTrack_){var n=t.segment,s=n.start,o=n.end;if(!(!Hg(s)||!Hg(o))){na(s,o,this.segmentMetadataTrack_);var u=A.default.WebKitDataCue||A.default.VTTCue,l={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:s,end:o},c=JSON.stringify(l),f=new u(s,o,c);f.value=l,this.segmentMetadataTrack_.addCue(f)}}},e}(I.EventTarget);function oi(){}var z0=function(e){return typeof e!="string"?e:e.replace(/./,function(r){return r.toUpperCase()})},VA=["video","audio"],bc=function(e,r){var i=r[e+"Buffer"];return i&&i.updating||r.queuePending[e]},$A=function(e,r){for(var i=0;i<r.length;i++){var t=r[i];if(t.type==="mediaSource")return null;if(t.type===e)return i}return null},ud=function a(e,r){if(r.queue.length!==0){var i=0,t=r.queue[i];if(t.type==="mediaSource"){!r.updating()&&r.mediaSource.readyState!=="closed"&&(r.queue.shift(),t.action(r),t.doneFn&&t.doneFn(),a("audio",r),a("video",r));return}if(e!=="mediaSource"&&!(!r.ready()||r.mediaSource.readyState==="closed"||bc(e,r))){if(t.type!==e){if(i=$A(e,r.queue),i===null)return;t=r.queue[i]}if(r.queue.splice(i,1),r.queuePending[e]=t,t.action(e,r),!t.doneFn){r.queuePending[e]=null,a(e,r);return}}}},G0=function(e,r){var i=r[e+"Buffer"],t=z0(e);!i||(i.removeEventListener("updateend",r["on"+t+"UpdateEnd_"]),i.removeEventListener("error",r["on"+t+"Error_"]),r.codecs[e]=null,r[e+"Buffer"]=null)},Ht=function(e,r){return e&&r&&Array.prototype.indexOf.call(e.sourceBuffers,r)!==-1},mt={appendBuffer:function(e,r,i){return function(t,n){var s=n[t+"Buffer"];if(!!Ht(n.mediaSource,s)){n.logger_("Appending segment "+r.mediaIndex+"'s "+e.length+" bytes to "+t+"Buffer");try{s.appendBuffer(e)}catch(o){n.logger_("Error with code "+o.code+" "+(o.code===q0?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+r.mediaIndex+" to "+t+"Buffer")),n.queuePending[t]=null,i(o)}}}},remove:function(e,r){return function(i,t){var n=t[i+"Buffer"];if(!!Ht(t.mediaSource,n)){t.logger_("Removing "+e+" to "+r+" from "+i+"Buffer");try{n.remove(e,r)}catch{t.logger_("Remove "+e+" to "+r+" from "+i+"Buffer failed")}}}},timestampOffset:function(e){return function(r,i){var t=i[r+"Buffer"];!Ht(i.mediaSource,t)||(i.logger_("Setting "+r+"timestampOffset to "+e),t.timestampOffset=e)}},callback:function(e){return function(r,i){e()}},endOfStream:function(e){return function(r){if(r.mediaSource.readyState==="open"){r.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{r.mediaSource.endOfStream(e)}catch(i){I.log.warn("Failed to call media source endOfStream",i)}}}},duration:function(e){return function(r){r.logger_("Setting mediaSource duration to "+e);try{r.mediaSource.duration=e}catch(i){I.log.warn("Failed to set media source duration",i)}}},abort:function(){return function(e,r){if(r.mediaSource.readyState==="open"){var i=r[e+"Buffer"];if(!!Ht(r.mediaSource,i)){r.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(t){I.log.warn("Failed to abort on "+e+"Buffer",t)}}}}},addSourceBuffer:function(e,r){return function(i){var t=z0(e),n=xr(r);i.logger_("Adding "+e+"Buffer with codec "+r+" to mediaSource");var s=i.mediaSource.addSourceBuffer(n);s.addEventListener("updateend",i["on"+t+"UpdateEnd_"]),s.addEventListener("error",i["on"+t+"Error_"]),i.codecs[e]=r,i[e+"Buffer"]=s}},removeSourceBuffer:function(e){return function(r){var i=r[e+"Buffer"];if(G0(e,r),!!Ht(r.mediaSource,i)){r.logger_("Removing "+e+"Buffer with codec "+r.codecs[e]+" from mediaSource");try{r.mediaSource.removeSourceBuffer(i)}catch(t){I.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},changeType:function(e){return function(r,i){var t=i[r+"Buffer"],n=xr(e);!Ht(i.mediaSource,t)||i.codecs[r]!==e&&(i.logger_("changing "+r+"Buffer codec from "+i.codecs[r]+" to "+e),t.changeType(n),i.codecs[r]=e)}}},gt=function(e){var r=e.type,i=e.sourceUpdater,t=e.action,n=e.doneFn,s=e.name;i.queue.push({type:r,action:t,doneFn:n,name:s}),ud(r,i)},qg=function(e,r){return function(i){if(r.queuePending[e]){var t=r.queuePending[e].doneFn;r.queuePending[e]=null,t&&t(r[e+"Error_"])}ud(e,r)}},K0=function(a){q(e,a);function e(i){var t;return t=a.call(this)||this,t.mediaSource=i,t.sourceopenListener_=function(){return ud("mediaSource",ee(t))},t.mediaSource.addEventListener("sourceopen",t.sourceopenListener_),t.logger_=Ot("SourceUpdater"),t.audioTimestampOffset_=0,t.videoTimestampOffset_=0,t.queue=[],t.queuePending={audio:null,video:null},t.delayedAudioAppendQueue_=[],t.videoAppendQueued_=!1,t.codecs={},t.onVideoUpdateEnd_=qg("video",ee(t)),t.onAudioUpdateEnd_=qg("audio",ee(t)),t.onVideoError_=function(n){t.videoError_=n},t.onAudioError_=function(n){t.audioError_=n},t.createdSourceBuffers_=!1,t.initializedEme_=!1,t.triggeredReady_=!1,t}var r=e.prototype;return r.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},r.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},r.hasInitializedAnyEme=function(){return this.initializedEme_},r.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},r.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},r.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},r.addSourceBuffer=function(t,n){gt({type:"mediaSource",sourceUpdater:this,action:mt.addSourceBuffer(t,n),name:"addSourceBuffer"})},r.abort=function(t){gt({type:t,sourceUpdater:this,action:mt.abort(t),name:"abort"})},r.removeSourceBuffer=function(t){if(!this.canRemoveSourceBuffer()){I.log.error("removeSourceBuffer is not supported!");return}gt({type:"mediaSource",sourceUpdater:this,action:mt.removeSourceBuffer(t),name:"removeSourceBuffer"})},r.canRemoveSourceBuffer=function(){return!I.browser.IE_VERSION&&!I.browser.IS_FIREFOX&&A.default.MediaSource&&A.default.MediaSource.prototype&&typeof A.default.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return A.default.SourceBuffer&&A.default.SourceBuffer.prototype&&typeof A.default.SourceBuffer.prototype.changeType=="function"},r.canChangeType=function(){return this.constructor.canChangeType()},r.changeType=function(t,n){if(!this.canChangeType()){I.log.error("changeType is not supported!");return}gt({type:t,sourceUpdater:this,action:mt.changeType(n),name:"changeType"})},r.addOrChangeSourceBuffers=function(t){var n=this;if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(function(s){var o=t[s];if(!n.hasCreatedSourceBuffers())return n.addSourceBuffer(s,o);n.canChangeType()&&n.changeType(s,o)})},r.appendBuffer=function(t,n){var s=this,o=t.segmentInfo,u=t.type,l=t.bytes;if(this.processedAppend_=!0,u==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([t,n]),this.logger_("delayed audio append of "+l.length+" until video append");return}var c=n;if(gt({type:u,sourceUpdater:this,action:mt.appendBuffer(l,o||{mediaIndex:-1},c),doneFn:n,name:"appendBuffer"}),u==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var f=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+f.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,f.forEach(function(m){s.appendBuffer.apply(s,m)})}},r.audioBuffered=function(){return Ht(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:I.createTimeRange()},r.videoBuffered=function(){return Ht(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:I.createTimeRange()},r.buffered=function(){var t=Ht(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=Ht(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!t?this.audioBuffered():t&&!n?this.videoBuffered():ow(this.audioBuffered(),this.videoBuffered())},r.setDuration=function(t,n){n===void 0&&(n=oi),gt({type:"mediaSource",sourceUpdater:this,action:mt.duration(t),name:"duration",doneFn:n})},r.endOfStream=function(t,n){t===void 0&&(t=null),n===void 0&&(n=oi),typeof t!="string"&&(t=void 0),gt({type:"mediaSource",sourceUpdater:this,action:mt.endOfStream(t),name:"endOfStream",doneFn:n})},r.removeAudio=function(t,n,s){if(s===void 0&&(s=oi),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}gt({type:"audio",sourceUpdater:this,action:mt.remove(t,n),doneFn:s,name:"remove"})},r.removeVideo=function(t,n,s){if(s===void 0&&(s=oi),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}gt({type:"video",sourceUpdater:this,action:mt.remove(t,n),doneFn:s,name:"remove"})},r.updating=function(){return!!(bc("audio",this)||bc("video",this))},r.audioTimestampOffset=function(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(gt({type:"audio",sourceUpdater:this,action:mt.timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},r.videoTimestampOffset=function(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset!==t&&(gt({type:"video",sourceUpdater:this,action:mt.timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},r.audioQueueCallback=function(t){!this.audioBuffer||gt({type:"audio",sourceUpdater:this,action:mt.callback(t),name:"callback"})},r.videoQueueCallback=function(t){!this.videoBuffer||gt({type:"video",sourceUpdater:this,action:mt.callback(t),name:"callback"})},r.dispose=function(){var t=this;this.trigger("dispose"),VA.forEach(function(n){t.abort(n),t.canRemoveSourceBuffer()?t.removeSourceBuffer(n):t[n+"QueueCallback"](function(){return G0(n,t)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(I.EventTarget),zg=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Gg=new Uint8Array(`

`.split("").map(function(a){return a.charCodeAt(0)})),WA=function(a){q(e,a);function e(){return a.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return e}(Yn(Error)),qA=function(a){q(e,a);function e(i,t){var n;return t===void 0&&(t={}),n=a.call(this,i,t)||this,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=i.featuresNativeTextTracks,n.loadVttJs=i.loadVttJs,n.shouldSaveSegmentTimingInfo_=!1,n}var r=e.prototype;return r.createTransmuxer_=function(){return null},r.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return I.createTimeRanges();var t=this.subtitlesTrack_.cues,n=t[0].startTime,s=t[t.length-1].startTime;return I.createTimeRanges([[n,s]])},r.initSegmentForMap=function(t,n){if(n===void 0&&(n=!1),!t)return null;var s=ho(t),o=this.initSegments_[s];if(n&&!o&&t.bytes){var u=Gg.byteLength+t.bytes.byteLength,l=new Uint8Array(u);l.set(t.bytes),l.set(Gg,t.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:l}}return o||t},r.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},r.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},r.track=function(t){return typeof t>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=t,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},r.remove=function(t,n){na(t,n,this.subtitlesTrack_)},r.fillBuffer_=function(){var t=this,n=this.chooseNextRequest_();if(!!n){if(this.syncController_.timestampOffsetForTimeline(n.timeline)===null){var s=function(){t.state="READY",t.paused()||t.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(n)}},r.timestampOffsetForSegment_=function(){return null},r.chooseNextRequest_=function(){return this.skipEmptySegments_(a.prototype.chooseNextRequest_.call(this))},r.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},r.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},r.segmentRequestFinished_=function(t,n,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(t){t.code===Wt.TIMEOUT&&this.handleTimeout_(),t.code===Wt.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(t);return}var u=this.pendingSegment_;this.saveBandwidthRelatedStats_(u.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");var l=u.segment;if(l.map&&(l.map.bytes=n.map.bytes),u.bytes=n.bytes,typeof A.default.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(t,n,s)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}l.requested=!0;try{this.parseVTTCues_(u)}catch(c){this.stopForError({message:c.message});return}if(this.updateTimeMapping_(u,this.syncController_.timelines[u.timeline],this.playlist_),u.cues.length?u.timingInfo={start:u.cues[0].startTime,end:u.cues[u.cues.length-1].endTime}:u.timingInfo={start:u.startOfSegment,end:u.startOfSegment+u.duration},u.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}u.byteLength=u.bytes.byteLength,this.mediaSecondsLoaded+=l.duration,u.cues.forEach(function(c){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new A.default.VTTCue(c.startTime,c.endTime,c.text):c)}),kA(this.subtitlesTrack_),this.handleAppendsDone_()},r.handleData_=function(){},r.updateTimingInfoEnd_=function(){},r.parseVTTCues_=function(t){var n,s=!1;if(typeof A.default.WebVTT!="function")throw new WA;typeof A.default.TextDecoder=="function"?n=new A.default.TextDecoder("utf8"):(n=A.default.WebVTT.StringDecoder(),s=!0);var o=new A.default.WebVTT.Parser(A.default,A.default.vttjs,n);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=t.cues.push.bind(t.cues),o.ontimestampmap=function(c){t.timestampmap=c},o.onparsingerror=function(c){I.log.warn("Error encountered when parsing cues: "+c.message)},t.segment.map){var u=t.segment.map.bytes;s&&(u=zg(u)),o.parse(u)}var l=t.bytes;s&&(l=zg(l)),o.parse(l),o.flush()},r.updateTimeMapping_=function(t,n,s){var o=t.segment;if(!!n){if(!t.cues.length){o.empty=!0;return}var u=t.timestampmap,l=u.MPEGTS/ua.ONE_SECOND_IN_TS-u.LOCAL+n.mapping;if(t.cues.forEach(function(m){m.startTime+=l,m.endTime+=l}),!s.syncInfo){var c=t.cues[0].startTime,f=t.cues[t.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+t.mediaIndex,time:Math.min(c,f-o.duration)}}}},e}(Tc),zA=function(e,r){for(var i=e.cues,t=0;t<i.length;t++){var n=i[t];if(r>=n.adStartTime&&r<=n.adEndTime)return n}return null},GA=function(e,r,i){if(i===void 0&&(i=0),!!e.segments)for(var t=i,n,s=0;s<e.segments.length;s++){var o=e.segments[s];if(n||(n=zA(r,t+o.duration/2)),n){if("cueIn"in o){n.endTime=t,n.adEndTime=t,t+=o.duration,n=null;continue}if(t<n.endTime){t+=o.duration;continue}n.endTime+=o.duration}else if("cueOut"in o&&(n=new A.default.VTTCue(t,t+o.duration,o.cueOut),n.adStartTime=t,n.adEndTime=t+parseFloat(o.cueOut),r.addCue(n)),"cueOutCont"in o){var u=o.cueOutCont.split("/").map(parseFloat),l=u[0],c=u[1];n=new A.default.VTTCue(t,t+o.duration,""),n.adStartTime=t-l,n.adEndTime=n.adStartTime+c,r.addCue(n)}t+=o.duration}},KA=86400,Kg=[{name:"VOD",run:function(e,r,i,t,n){if(i!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(e,r,i,t,n){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var s=null,o=null,u=pc(r);n=n||0;for(var l=0;l<u.length;l++){var c=r.endList||n===0?l:u.length-(l+1),f=u[c],m=f.segment,_=e.timelineToDatetimeMappings[m.timeline];if(!(!_||!m.dateTimeObject)){var x=m.dateTimeObject.getTime()/1e3,b=x+_;if(m.parts&&typeof f.partIndex=="number")for(var T=0;T<f.partIndex;T++)b+=m.parts[T].duration;var C=Math.abs(n-b);if(o!==null&&(C===0||o<C))break;o=C,s={time:b,segmentIndex:f.segmentIndex,partIndex:f.partIndex}}}return s}},{name:"Segment",run:function(e,r,i,t,n){var s=null,o=null;n=n||0;for(var u=pc(r),l=0;l<u.length;l++){var c=r.endList||n===0?l:u.length-(l+1),f=u[c],m=f.segment,_=f.part&&f.part.start||m&&m.start;if(m.timeline===t&&typeof _<"u"){var x=Math.abs(n-_);if(o!==null&&o<x)break;(!s||o===null||o>=x)&&(o=x,s={time:_,segmentIndex:f.segmentIndex,partIndex:f.partIndex})}}return s}},{name:"Discontinuity",run:function(e,r,i,t,n){var s=null;if(n=n||0,r.discontinuityStarts&&r.discontinuityStarts.length)for(var o=null,u=0;u<r.discontinuityStarts.length;u++){var l=r.discontinuityStarts[u],c=r.discontinuitySequence+u+1,f=e.discontinuities[c];if(f){var m=Math.abs(n-f.time);if(o!==null&&o<m)break;(!s||o===null||o>=m)&&(o=m,s={time:f.time,segmentIndex:l,partIndex:null})}}return s}},{name:"Playlist",run:function(e,r,i,t,n){if(r.syncInfo){var s={time:r.syncInfo.time,segmentIndex:r.syncInfo.mediaSequence-r.mediaSequence,partIndex:null};return s}return null}}],XA=function(a){q(e,a);function e(i){var t;return t=a.call(this)||this,t.timelines=[],t.discontinuities=[],t.timelineToDatetimeMappings={},t.logger_=Ot("SyncController"),t}var r=e.prototype;return r.getSyncPoint=function(t,n,s,o){var u=this.runStrategies_(t,n,s,o);return u.length?this.selectSyncPoint_(u,{key:"time",value:o}):null},r.getExpiredTime=function(t,n){if(!t||!t.segments)return null;var s=this.runStrategies_(t,n,t.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+sa({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:o.segmentIndex,endIndex:0}))},r.runStrategies_=function(t,n,s,o){for(var u=[],l=0;l<Kg.length;l++){var c=Kg[l],f=c.run(this,t,n,s,o);f&&(f.strategy=c.name,u.push({strategy:c.name,syncPoint:f}))}return u},r.selectSyncPoint_=function(t,n){for(var s=t[0].syncPoint,o=Math.abs(t[0].syncPoint[n.key]-n.value),u=t[0].strategy,l=1;l<t.length;l++){var c=Math.abs(t[l].syncPoint[n.key]-n.value);c<o&&(o=c,s=t[l].syncPoint,u=t[l].strategy)}return this.logger_("syncPoint for ["+n.key+": "+n.value+"] chosen with strategy"+(" ["+u+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},r.saveExpiredSegmentInfo=function(t,n){var s=n.mediaSequence-t.mediaSequence;if(s>KA){I.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var u=t.segments[o];if(u&&typeof u.start<"u"){n.syncInfo={mediaSequence:t.mediaSequence+o,time:u.start},this.logger_("playlist refresh sync: [time:"+n.syncInfo.time+","+(" mediaSequence: "+n.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},r.setDateTimeMappingForStart=function(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var n=t.segments[0],s=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-s}},r.saveSegmentTimingInfo=function(t){var n=t.segmentInfo,s=t.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(n,n.timingInfo,s),u=n.segment;o&&(this.saveDiscontinuitySyncInfo_(n),n.playlist.syncInfo||(n.playlist.syncInfo={mediaSequence:n.playlist.mediaSequence+n.mediaIndex,time:u.start}));var l=u.dateTimeObject;u.discontinuity&&s&&l&&(this.timelineToDatetimeMappings[u.timeline]=-(l.getTime()/1e3))},r.timestampOffsetForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time},r.mappingForTimeline=function(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping},r.calculateSegmentTimeMapping_=function(t,n,s){var o=t.segment,u=t.part,l=this.timelines[t.timeline],c,f;if(typeof t.timestampOffset=="number")l={time:t.startOfSegment,mapping:t.startOfSegment-n.start},s&&(this.timelines[t.timeline]=l,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": "+("[time: "+l.time+"] [mapping: "+l.mapping+"]"))),c=t.startOfSegment,f=n.end+l.mapping;else if(l)c=n.start+l.mapping,f=n.end+l.mapping;else return!1;return u&&(u.start=c,u.end=f),(!o.start||c<o.start)&&(o.start=c),o.end=f,!0},r.saveDiscontinuitySyncInfo_=function(t){var n=t.playlist,s=t.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=0;o<n.discontinuityStarts.length;o++){var u=n.discontinuityStarts[o],l=n.discontinuitySequence+o+1,c=u-t.mediaIndex,f=Math.abs(c);if(!this.discontinuities[l]||this.discontinuities[l].accuracy>f){var m=void 0;c<0?m=s.start-sa({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:t.mediaIndex,endIndex:u}):m=s.end+sa({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:t.mediaIndex+1,endIndex:u}),this.discontinuities[l]={time:m,accuracy:f}}}},r.dispose=function(){this.trigger("dispose"),this.off()},e}(I.EventTarget),YA=function(a){q(e,a);function e(){var i;return i=a.call(this)||this,i.pendingTimelineChanges_={},i.lastTimelineChanges_={},i}var r=e.prototype;return r.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},r.pendingTimelineChange=function(t){var n=t.type,s=t.from,o=t.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[n]={type:n,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[n]},r.lastTimelineChange=function(t){var n=t.type,s=t.from,o=t.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[n]={type:n,from:s,to:o},delete this.pendingTimelineChanges_[n],this.trigger("timelinechange")),this.lastTimelineChanges_[n]},r.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(I.EventTarget),QA=L0(R0(function(){var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e(L,R,H){return H={path:R,exports:{},require:function(O,N){return r(O,N??H.path)}},L(H,H.exports),H.exports}function r(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var i=e(function(L){function R(B,O){for(var N=0;N<O.length;N++){var M=O[N];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(B,M.key,M)}}function H(B,O,N){return O&&R(B.prototype,O),N&&R(B,N),B}L.exports=H,L.exports.default=L.exports,L.exports.__esModule=!0}),t=e(function(L){function R(H,B){return L.exports=R=Object.setPrototypeOf||function(N,M){return N.__proto__=M,N},L.exports.default=L.exports,L.exports.__esModule=!0,R(H,B)}L.exports=R,L.exports.default=L.exports,L.exports.__esModule=!0}),n=e(function(L){function R(H,B){H.prototype=Object.create(B.prototype),H.prototype.constructor=H,t(H,B)}L.exports=R,L.exports.default=L.exports,L.exports.__esModule=!0}),s=function(){function L(){this.listeners={}}var R=L.prototype;return R.on=function(B,O){this.listeners[B]||(this.listeners[B]=[]),this.listeners[B].push(O)},R.off=function(B,O){if(!this.listeners[B])return!1;var N=this.listeners[B].indexOf(O);return this.listeners[B]=this.listeners[B].slice(0),this.listeners[B].splice(N,1),N>-1},R.trigger=function(B){var O=this.listeners[B];if(!!O)if(arguments.length===2)for(var N=O.length,M=0;M<N;++M)O[M].call(this,arguments[1]);else for(var G=Array.prototype.slice.call(arguments,1),K=O.length,J=0;J<K;++J)O[J].apply(this,G)},R.dispose=function(){this.listeners={}},R.pipe=function(B){this.on("data",function(O){B.push(O)})},L}();function o(L){return L.subarray(0,L.byteLength-L[L.byteLength-1])}var u=function(){var R=[[[],[],[],[],[]],[[],[],[],[],[]]],H=R[0],B=R[1],O=H[4],N=B[4],M,G,K,J=[],ce=[],ye,ie,oe,xe,qe,fe;for(M=0;M<256;M++)ce[(J[M]=M<<1^(M>>7)*283)^M]=M;for(G=K=0;!O[G];G^=ye||1,K=ce[K]||1)for(xe=K^K<<1^K<<2^K<<3^K<<4,xe=xe>>8^xe&255^99,O[G]=xe,N[xe]=G,oe=J[ie=J[ye=J[G]]],fe=oe*16843009^ie*65537^ye*257^G*16843008,qe=J[xe]*257^xe*16843008,M=0;M<4;M++)H[M][G]=qe=qe<<24^qe>>>8,B[M][xe]=fe=fe<<24^fe>>>8;for(M=0;M<5;M++)H[M]=H[M].slice(0),B[M]=B[M].slice(0);return R},l=null,c=function(){function L(H){l||(l=u()),this._tables=[[l[0][0].slice(),l[0][1].slice(),l[0][2].slice(),l[0][3].slice(),l[0][4].slice()],[l[1][0].slice(),l[1][1].slice(),l[1][2].slice(),l[1][3].slice(),l[1][4].slice()]];var B,O,N,M=this._tables[0][4],G=this._tables[1],K=H.length,J=1;if(K!==4&&K!==6&&K!==8)throw new Error("Invalid aes key size");var ce=H.slice(0),ye=[];for(this._key=[ce,ye],B=K;B<4*K+28;B++)N=ce[B-1],(B%K===0||K===8&&B%K===4)&&(N=M[N>>>24]<<24^M[N>>16&255]<<16^M[N>>8&255]<<8^M[N&255],B%K===0&&(N=N<<8^N>>>24^J<<24,J=J<<1^(J>>7)*283)),ce[B]=ce[B-K]^N;for(O=0;B;O++,B--)N=ce[O&3?B:B-4],B<=4||O<4?ye[O]=N:ye[O]=G[0][M[N>>>24]]^G[1][M[N>>16&255]]^G[2][M[N>>8&255]]^G[3][M[N&255]]}var R=L.prototype;return R.decrypt=function(B,O,N,M,G,K){var J=this._key[1],ce=B^J[0],ye=M^J[1],ie=N^J[2],oe=O^J[3],xe,qe,fe,Sa=J.length/4-2,_t,zt=4,mi=this._tables[1],Fi=mi[0],Lt=mi[1],ir=mi[2],rr=mi[3],nr=mi[4];for(_t=0;_t<Sa;_t++)xe=Fi[ce>>>24]^Lt[ye>>16&255]^ir[ie>>8&255]^rr[oe&255]^J[zt],qe=Fi[ye>>>24]^Lt[ie>>16&255]^ir[oe>>8&255]^rr[ce&255]^J[zt+1],fe=Fi[ie>>>24]^Lt[oe>>16&255]^ir[ce>>8&255]^rr[ye&255]^J[zt+2],oe=Fi[oe>>>24]^Lt[ce>>16&255]^ir[ye>>8&255]^rr[ie&255]^J[zt+3],zt+=4,ce=xe,ye=qe,ie=fe;for(_t=0;_t<4;_t++)G[(3&-_t)+K]=nr[ce>>>24]<<24^nr[ye>>16&255]<<16^nr[ie>>8&255]<<8^nr[oe&255]^J[zt++],xe=ce,ce=ye,ye=ie,ie=oe,oe=xe},L}(),f=function(L){n(R,L);function R(){var B;return B=L.call(this,s)||this,B.jobs=[],B.delay=1,B.timeout_=null,B}var H=R.prototype;return H.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},H.push=function(O){this.jobs.push(O),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},R}(s),m=function(R){return R<<24|(R&65280)<<8|(R&16711680)>>8|R>>>24},_=function(R,H,B){var O=new Int32Array(R.buffer,R.byteOffset,R.byteLength>>2),N=new c(Array.prototype.slice.call(H)),M=new Uint8Array(R.byteLength),G=new Int32Array(M.buffer),K,J,ce,ye,ie,oe,xe,qe,fe;for(K=B[0],J=B[1],ce=B[2],ye=B[3],fe=0;fe<O.length;fe+=4)ie=m(O[fe]),oe=m(O[fe+1]),xe=m(O[fe+2]),qe=m(O[fe+3]),N.decrypt(ie,oe,xe,qe,G,fe),G[fe]=m(G[fe]^K),G[fe+1]=m(G[fe+1]^J),G[fe+2]=m(G[fe+2]^ce),G[fe+3]=m(G[fe+3]^ye),K=ie,J=oe,ce=xe,ye=qe;return M},x=function(){function L(H,B,O,N){var M=L.STEP,G=new Int32Array(H.buffer),K=new Uint8Array(H.byteLength),J=0;for(this.asyncStream_=new f,this.asyncStream_.push(this.decryptChunk_(G.subarray(J,J+M),B,O,K)),J=M;J<G.length;J+=M)O=new Uint32Array([m(G[J-4]),m(G[J-3]),m(G[J-2]),m(G[J-1])]),this.asyncStream_.push(this.decryptChunk_(G.subarray(J,J+M),B,O,K));this.asyncStream_.push(function(){N(null,o(K))})}var R=L.prototype;return R.decryptChunk_=function(B,O,N,M){return function(){var G=_(B,O,N);M.set(G,B.byteOffset)}},i(L,null,[{key:"STEP",get:function(){return 32e3}}]),L}(),b;typeof window<"u"?b=window:typeof a<"u"?b=a:typeof self<"u"?b=self:b={};var T=b,C=function(R){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(R):R&&R.buffer instanceof ArrayBuffer},k=T.BigInt||Number;k("0x1"),k("0x100"),k("0x10000"),k("0x1000000"),k("0x100000000"),k("0x10000000000"),k("0x1000000000000"),k("0x100000000000000"),k("0x10000000000000000");var j=function(R){var H={};return Object.keys(R).forEach(function(B){var O=R[B];C(O)?H[B]={bytes:O.buffer,byteOffset:O.byteOffset,byteLength:O.byteLength}:H[B]=O}),H};self.onmessage=function(L){var R=L.data,H=new Uint8Array(R.encrypted.bytes,R.encrypted.byteOffset,R.encrypted.byteLength),B=new Uint32Array(R.key.bytes,R.key.byteOffset,R.key.byteLength/4),O=new Uint32Array(R.iv.bytes,R.iv.byteOffset,R.iv.byteLength/4);new x(H,B,O,function(N,M){self.postMessage(j({source:R.source,decrypted:M}),[M.buffer])})}})),JA=O0(QA),ZA=function(e){var r=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(r="main-desc"),r},vo=function(e,r){e.abort(),e.pause(),r&&r.activePlaylistLoader&&(r.activePlaylistLoader.pause(),r.activePlaylistLoader=null)},Ec=function(e,r){r.activePlaylistLoader=e,e.load()},e1=function(e,r){return function(){var i=r.segmentLoaders,t=i[e],n=i.main,s=r.mediaTypes[e],o=s.activeTrack(),u=s.getActiveGroup(),l=s.activePlaylistLoader,c=s.lastGroup_;if(!(u&&c&&u.id===c.id)&&(s.lastGroup_=u,s.lastTrack_=o,vo(t,s),!(!u||u.isMasterPlaylist))){if(!u.playlistLoader){l&&n.resetEverything();return}t.resyncLoader(),Ec(u.playlistLoader,s)}}},t1=function(e,r){return function(){var i=r.segmentLoaders[e],t=r.mediaTypes[e];t.lastGroup_=null,i.abort(),i.pause()}},i1=function(e,r){return function(){var i=r.masterPlaylistLoader,t=r.segmentLoaders,n=t[e],s=t.main,o=r.mediaTypes[e],u=o.activeTrack(),l=o.getActiveGroup(),c=o.activePlaylistLoader,f=o.lastTrack_;if(!(f&&u&&f.id===u.id)&&(o.lastGroup_=l,o.lastTrack_=u,vo(n,o),!!l)){if(l.isMasterPlaylist){if(!u||!f||u.id===f.id)return;var m=r.vhs.masterPlaylistController_,_=m.selectPlaylist();if(m.media()===_)return;o.logger_("track change. Switching master audio from "+f.id+" to "+u.id),i.pause(),s.resetEverything(),m.fastQualityChange_(_);return}if(e==="AUDIO"){if(!l.playlistLoader){s.setAudio(!0),s.resetEverything();return}n.setAudio(!0),s.setAudio(!1)}if(c===l.playlistLoader){Ec(l.playlistLoader,o);return}n.track&&n.track(u),n.resetEverything(),Ec(l.playlistLoader,o)}}},yo={AUDIO:function(e,r){return function(){var i=r.segmentLoaders[e],t=r.mediaTypes[e],n=r.blacklistCurrentPlaylist;vo(i,t);var s=t.activeTrack(),o=t.activeGroup(),u=(o.filter(function(f){return f.default})[0]||o[0]).id,l=t.tracks[u];if(s===l){n({message:"Problem encountered loading the default audio track."});return}I.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var c in t.tracks)t.tracks[c].enabled=t.tracks[c]===l;t.onTrackChanged()}},SUBTITLES:function(e,r){return function(){var i=r.segmentLoaders[e],t=r.mediaTypes[e];I.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),vo(i,t);var n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}}},Xg={AUDIO:function(e,r,i){if(!!r){var t=i.tech,n=i.requestOptions,s=i.segmentLoaders[e];r.on("loadedmetadata",function(){var o=r.media();s.playlist(o,n),(!t.paused()||o.endList&&t.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),n),t.paused()||s.load()}),r.on("error",yo[e](e,i))}},SUBTITLES:function(e,r,i){var t=i.tech,n=i.requestOptions,s=i.segmentLoaders[e],o=i.mediaTypes[e];r.on("loadedmetadata",function(){var u=r.media();s.playlist(u,n),s.track(o.activeTrack()),(!t.paused()||u.endList&&t.preload()!=="none")&&s.load()}),r.on("loadedplaylist",function(){s.playlist(r.media(),n),t.paused()||s.load()}),r.on("error",yo[e](e,i))}},r1={AUDIO:function(e,r){var i=r.vhs,t=r.sourceType,n=r.segmentLoaders[e],s=r.requestOptions,o=r.master.mediaGroups,u=r.mediaTypes[e],l=u.groups,c=u.tracks,f=u.logger_,m=r.masterPlaylistLoader,_=xa(m.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},_&&(o[e].main.default.playlists=m.master.playlists));for(var x in o[e]){l[x]||(l[x]=[]);for(var b in o[e][x]){var T=o[e][x][b],C=void 0;if(_?(f("AUDIO group '"+x+"' label '"+b+"' is a master playlist"),T.isMasterPlaylist=!0,C=null):t==="vhs-json"&&T.playlists?C=new Mr(T.playlists[0],i,s):T.resolvedUri?C=new Mr(T.resolvedUri,i,s):T.playlists&&t==="dash"?C=new xc(T.playlists[0],i,s,m):C=null,T=I.mergeOptions({id:b,playlistLoader:C},T),Xg[e](e,T.playlistLoader,r),l[x].push(T),typeof c[b]>"u"){var k=new I.AudioTrack({id:b,kind:ZA(T),enabled:!1,language:T.language,default:T.default,label:b});c[b]=k}}}n.on("error",yo[e](e,r))},SUBTITLES:function(e,r){var i=r.tech,t=r.vhs,n=r.sourceType,s=r.segmentLoaders[e],o=r.requestOptions,u=r.master.mediaGroups,l=r.mediaTypes[e],c=l.groups,f=l.tracks,m=r.masterPlaylistLoader;for(var _ in u[e]){c[_]||(c[_]=[]);for(var x in u[e][_])if(!u[e][_][x].forced){var b=u[e][_][x],T=void 0;if(n==="hls")T=new Mr(b.resolvedUri,t,o);else if(n==="dash"){var C=b.playlists.filter(function(j){return j.excludeUntil!==1/0});if(!C.length)return;T=new xc(b.playlists[0],t,o,m)}else n==="vhs-json"&&(T=new Mr(b.playlists?b.playlists[0]:b.resolvedUri,t,o));if(b=I.mergeOptions({id:x,playlistLoader:T},b),Xg[e](e,b.playlistLoader,r),c[_].push(b),typeof f[x]>"u"){var k=i.addRemoteTextTrack({id:x,kind:"subtitles",default:b.default&&b.autoselect,language:b.language,label:x},!1).track;f[x]=k}}}s.on("error",yo[e](e,r))},"CLOSED-CAPTIONS":function(e,r){var i=r.tech,t=r.master.mediaGroups,n=r.mediaTypes[e],s=n.groups,o=n.tracks;for(var u in t[e]){s[u]||(s[u]=[]);for(var l in t[e][u]){var c=t[e][u][l];if(!!/^(?:CC|SERVICE)/.test(c.instreamId)){var f=i.options_.vhs&&i.options_.vhs.captionServices||{},m={label:l,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(f[m.instreamId]&&(m=I.mergeOptions(m,f[m.instreamId])),m.default===void 0&&delete m.default,s[u].push(I.mergeOptions({id:l},c)),typeof o[l]>"u"){var _=i.addRemoteTextTrack({id:m.instreamId,kind:"captions",default:m.default,language:m.language,label:m.label},!1).track;o[l]=_}}}}}},n1=function a(e,r){for(var i=0;i<e.length;i++)if(nd(r,e[i])||e[i].playlists&&a(e[i].playlists,r))return!0;return!1},a1=function(e,r){return function(i){var t=r.masterPlaylistLoader,n=r.mediaTypes[e].groups,s=t.media();if(!s)return null;var o=null;s.attributes[e]&&(o=n[s.attributes[e]]);var u=Object.keys(n);if(!o)if(e==="AUDIO"&&u.length>1&&xa(r.master))for(var l=0;l<u.length;l++){var c=n[u[l]];if(n1(c,s)){o=c;break}}else n.main?o=n.main:u.length===1&&(o=n[u[0]]);return typeof i>"u"?o:i===null||!o?null:o.filter(function(f){return f.id===i.id})[0]||null}},s1={AUDIO:function(e,r){return function(){var i=r.mediaTypes[e].tracks;for(var t in i)if(i[t].enabled)return i[t];return null}},SUBTITLES:function(e,r){return function(){var i=r.mediaTypes[e].tracks;for(var t in i)if(i[t].mode==="showing"||i[t].mode==="hidden")return i[t];return null}}},o1=function(e,r){var i=r.mediaTypes;return function(){var t=i[e].activeTrack();return t?i[e].activeGroup(t):null}},u1=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(x){r1[x](x,e)});var r=e.mediaTypes,i=e.masterPlaylistLoader,t=e.tech,n=e.vhs,s=e.segmentLoaders,o=s.AUDIO,u=s.main;["AUDIO","SUBTITLES"].forEach(function(x){r[x].activeGroup=a1(x,e),r[x].activeTrack=s1[x](x,e),r[x].onGroupChanged=e1(x,e),r[x].onGroupChanging=t1(x,e),r[x].onTrackChanged=i1(x,e),r[x].getActiveGroup=o1(x,e)});var l=r.AUDIO.activeGroup();if(l){var c=(l.filter(function(x){return x.default})[0]||l[0]).id;r.AUDIO.tracks[c].enabled=!0,r.AUDIO.onGroupChanged(),r.AUDIO.onTrackChanged();var f=r.AUDIO.getActiveGroup();f.playlistLoader?(u.setAudio(!1),o.setAudio(!0)):u.setAudio(!0)}i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(x){return r[x].onGroupChanged()})}),i.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(x){return r[x].onGroupChanging()})});var m=function(){r.AUDIO.onTrackChanged(),t.trigger({type:"usage",name:"vhs-audio-change"}),t.trigger({type:"usage",name:"hls-audio-change"})};t.audioTracks().addEventListener("change",m),t.remoteTextTracks().addEventListener("change",r.SUBTITLES.onTrackChanged),n.on("dispose",function(){t.audioTracks().removeEventListener("change",m),t.remoteTextTracks().removeEventListener("change",r.SUBTITLES.onTrackChanged)}),t.clearTracks("audio");for(var _ in r.AUDIO.tracks)t.audioTracks().addTrack(r.AUDIO.tracks[_])},l1=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(r){e[r]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:oi,activeTrack:oi,getActiveGroup:oi,onGroupChanged:oi,onTrackChanged:oi,lastTrack_:null,logger_:Ot("MediaGroups["+r+"]")}}),e},c1=60*2,ni,d1=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],f1=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},h1=function(e){var r=e.currentPlaylist,i=e.buffered,t=e.currentTime,n=e.nextPlaylist,s=e.bufferLowWaterLine,o=e.bufferHighWaterLine,u=e.duration,l=e.experimentalBufferBasedABR,c=e.log;if(!n)return I.log.warn("We received no playlist to switch to. Please check your stream."),!1;var f="allowing switch "+(r&&r.id||"null")+" -> "+n.id;if(!r)return c(f+" as current playlist is not set"),!0;if(n.id===r.id)return!1;var m=Boolean(Rr(i,t).length);if(!r.endList)return!m&&typeof r.partTargetDuration=="number"?(c("not "+f+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(c(f+" as current playlist is live"),!0);var _=td(i,t),x=l?Ue.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ue.MAX_BUFFER_LOW_WATER_LINE;if(u<x)return c(f+" as duration < max low water line ("+u+" < "+x+")"),!0;var b=n.attributes.BANDWIDTH,T=r.attributes.BANDWIDTH;if(b<T&&(!l||_<o)){var C=f+" as next bandwidth < current bandwidth ("+b+" < "+T+")";return l&&(C+=" and forwardBuffer < bufferHighWaterLine ("+_+" < "+o+")"),c(C),!0}if((!l||b>T)&&_>=s){var k=f+" as forwardBuffer >= bufferLowWaterLine ("+_+" >= "+s+")";return l&&(k+=" and next bandwidth > current bandwidth ("+b+" > "+T+")"),c(k),!0}return c("not "+f+" as no switching criteria met"),!1},p1=function(a){q(e,a);function e(i){var t;t=a.call(this)||this;var n=i.src,s=i.handleManifestRedirects,o=i.withCredentials,u=i.tech,l=i.bandwidth,c=i.externVhs,f=i.useCueTags,m=i.blacklistDuration,_=i.enableLowInitialPlaylist,x=i.sourceType,b=i.cacheEncryptionKeys,T=i.experimentalBufferBasedABR,C=i.experimentalLeastPixelDiffSelector,k=i.captionServices;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");var j=i.maxPlaylistRetries;(j===null||typeof j>"u")&&(j=1/0),ni=c,t.experimentalBufferBasedABR=Boolean(T),t.experimentalLeastPixelDiffSelector=Boolean(C),t.withCredentials=o,t.tech_=u,t.vhs_=u.vhs,t.sourceType_=x,t.useCueTags_=f,t.blacklistDuration=m,t.maxPlaylistRetries=j,t.enableLowInitialPlaylist=_,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:j,timeout:null},t.on("error",t.pauseLoading),t.mediaTypes_=l1(),t.mediaSource=new A.default.MediaSource,t.handleDurationChange_=t.handleDurationChange_.bind(ee(t)),t.handleSourceOpen_=t.handleSourceOpen_.bind(ee(t)),t.handleSourceEnded_=t.handleSourceEnded_.bind(ee(t)),t.mediaSource.addEventListener("durationchange",t.handleDurationChange_),t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_),t.mediaSource.addEventListener("sourceended",t.handleSourceEnded_),t.seekable_=I.createTimeRanges(),t.hasPlayed_=!1,t.syncController_=new XA(i),t.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new JA,t.sourceUpdater_=new K0(t.mediaSource),t.inbandTextTracks_={},t.timelineChangeController_=new YA;var L={vhs:t.vhs_,parse708captions:i.parse708captions,useDtsForTimestampOffset:i.useDtsForTimestampOffset,captionServices:k,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function(){return t.seekable()},seeking:function(){return t.tech_.seeking()},duration:function(){return t.duration()},hasPlayed:function(){return t.hasPlayed_},goalBufferLength:function(){return t.goalBufferLength()},bandwidth:l,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:b,sourceUpdater:t.sourceUpdater_,timelineChangeController:t.timelineChangeController_,experimentalExactManifestTimings:i.experimentalExactManifestTimings};t.masterPlaylistLoader_=t.sourceType_==="dash"?new xc(n,t.vhs_,t.requestOptions_):new Mr(n,t.vhs_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new Tc(I.mergeOptions(L,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),i),t.audioSegmentLoader_=new Tc(I.mergeOptions(L,{loaderType:"audio"}),i),t.subtitleSegmentLoader_=new qA(I.mergeOptions(L,{loaderType:"vtt",featuresNativeTextTracks:t.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(B,O){function N(){u.off("vttjserror",M),B()}function M(){u.off("vttjsloaded",N),O()}u.one("vttjsloaded",N),u.one("vttjserror",M),u.addWebVttScript_()})}}),i),t.setupSegmentLoaderListeners_(),t.experimentalBufferBasedABR&&(t.masterPlaylistLoader_.one("loadedplaylist",function(){return t.startABRTimer_()}),t.tech_.on("pause",function(){return t.stopABRTimer_()}),t.tech_.on("play",function(){return t.startABRTimer_()})),d1.forEach(function(H){t[H+"_"]=f1.bind(ee(t),H)}),t.logger_=Ot("MPC"),t.triggeredFmp4Usage=!1,t.tech_.preload()==="none"?(t.loadOnPlay_=function(){t.loadOnPlay_=null,t.masterPlaylistLoader_.load()},t.tech_.one("play",t.loadOnPlay_)):t.masterPlaylistLoader_.load(),t.timeToLoadedData__=-1,t.mainAppendsToLoadedData__=-1,t.audioAppendsToLoadedData__=-1;var R=t.tech_.preload()==="none"?"play":"loadstart";return t.tech_.one(R,function(){var H=Date.now();t.tech_.one("loadeddata",function(){t.timeToLoadedData__=Date.now()-H,t.mainAppendsToLoadedData__=t.mainSegmentLoader_.mediaAppends,t.audioAppendsToLoadedData__=t.audioSegmentLoader_.mediaAppends})}),t}var r=e.prototype;return r.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},r.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},r.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return t===-1||n===-1?-1:t+n},r.timeToLoadedData_=function(){return this.timeToLoadedData__},r.checkABR_=function(t){t===void 0&&(t="abr");var n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,t)},r.switchMedia_=function(t,n,s){var o=this.media(),u=o&&(o.id||o.uri),l=t.id||t.uri;u&&u!==l&&(this.logger_("switch media "+u+" -> "+l+" from "+n),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+n})),this.masterPlaylistLoader_.media(t,s)},r.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=A.default.setInterval(function(){return t.checkABR_()},250)},r.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(A.default.clearInterval(this.abrTimer_),this.abrTimer_=null)},r.getAudioTrackPlaylists_=function(){var t=this.master(),n=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return n;var s=t.mediaGroups.AUDIO,o=Object.keys(s),u;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)u=this.mediaTypes_.AUDIO.activeTrack();else{var l=s.main||o.length&&s[o[0]];for(var c in l)if(l[c].default){u={label:c};break}}if(!u)return n;var f=[];for(var m in s)if(s[m][u.label]){var _=s[m][u.label];if(_.playlists&&_.playlists.length)f.push.apply(f,_.playlists);else if(_.uri)f.push(_);else if(t.playlists.length)for(var x=0;x<t.playlists.length;x++){var b=t.playlists[x];b.attributes&&b.attributes.AUDIO&&b.attributes.AUDIO===m&&f.push(b)}}return f.length?f:n},r.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var n=t.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;mc(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=s,n.endList&&t.tech_.preload()!=="none"&&(t.mainSegmentLoader_.playlist(n,t.requestOptions_),t.mainSegmentLoader_.load()),u1({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),n),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var n=t.masterPlaylistLoader_.media();if(!n){t.excludeUnsupportedVariants_();var s;if(t.enableLowInitialPlaylist&&(s=t.selectInitialPlaylist()),s||(s=t.selectPlaylist()),!s||!t.shouldSwitchToMedia_(s))return;t.initialMedia_=s,t.switchMedia_(t.initialMedia_,"initial");var o=t.sourceType_==="vhs-json"&&t.initialMedia_.segments;if(!o)return;n=t.initialMedia_}t.handleUpdatedMediaPlaylist(n)}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var n=t.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;mc(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=s,t.masterPlaylistLoader_.load(),t.mainSegmentLoader_.playlist(n,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var n=t.masterPlaylistLoader_.media();if(n.lastExcludeReason_!=="playlist-unchanged"){var s=t.stuckAtPlaylistEnd_(n);s&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},r.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},r.triggerPresenceUsage_=function(t,n){var s=t.mediaGroups||{},o=!0,u=Object.keys(s.AUDIO);for(var l in s.AUDIO)for(var c in s.AUDIO[l]){var f=s.AUDIO[l][c];f.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),ni.Playlist.isAes(n)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),u.length&&Object.keys(s.AUDIO[u[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},r.shouldSwitchToMedia_=function(t){var n=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),u=this.bufferHighWaterLine(),l=this.tech_.buffered();return h1({buffered:l,currentTime:s,currentPlaylist:n,nextPlaylist:t,bufferLowWaterLine:o,bufferHighWaterLine:u,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},r.setupSegmentLoaderListeners_=function(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){t.checkABR_("bandwidthupdate"),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){t.experimentalBufferBasedABR&&t.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended"),t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},c1))});var n=function(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var o=t.getCodecsOrExclude_();!o||t.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",n),this.audioSegmentLoader_.on("trackinfo",n),this.mainSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()})},r.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},r.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},r.smoothQualityChange_=function(t){t===void 0&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},r.fastQualityChange_=function(t){var n=this;if(t===void 0&&(t=this.selectPlaylist()),t===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){I.browser.IE_VERSION||I.browser.IS_EDGE?n.tech_.setCurrentTime(n.tech_.currentTime()+.04):n.tech_.setCurrentTime(n.tech_.currentTime())})},r.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0))return this.tech_.setCurrentTime(t.end(t.length-1))}},r.setupFirstPlay=function(){var t=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_)return!1;if(!n.endList){var s=this.seekable();if(!s.length)return!1;if(I.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(s.end(0)),t.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},r.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();typeof t<"u"&&typeof t.then=="function"&&t.then(null,function(n){})}this.trigger("sourceopen")},r.handleSourceEnded_=function(){if(!!this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(!(!t||!t.length)){var n=this.duration();t[t.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}}},r.handleDurationChange_=function(){this.tech_.trigger("durationchange")},r.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?t=t&&this.audioSegmentLoader_.ended_:t=this.audioSegmentLoader_.ended_}!t||(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},r.stuckAtPlaylistEnd_=function(t){var n=this.seekable();if(!n.length)return!1;var s=this.syncController_.getExpiredTime(t,this.duration());if(s===null)return!1;var o=ni.Playlist.playlistEnd(t,s),u=this.tech_.currentTime(),l=this.tech_.buffered();if(!l.length)return o-u<=$t;var c=l.end(l.length-1);return c-u<=$t&&o-c<=$t},r.blacklistCurrentPlaylist=function(t,n){t===void 0&&(t={});var s=t.playlist||this.masterPlaylistLoader_.media();if(n=n||t.blacklistDuration||this.blacklistDuration,!s){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,u=o.filter(Fo),l=u.length===1&&u[0]===s;if(o.length===1&&n!==1/0)return I.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(l);if(l){var c=!1;o.forEach(function(C){if(C!==s){var k=C.excludeUntil;typeof k<"u"&&k!==1/0&&(c=!0,delete C.excludeUntil)}}),c&&(I.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var f;s.playlistErrors_>this.maxPlaylistRetries?f=1/0:f=Date.now()+n*1e3,s.excludeUntil=f,t.reason&&(s.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var m=this.selectPlaylist();if(!m){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var _=t.internal?this.logger_:I.log.warn,x=t.message?" "+t.message:"";_((t.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(x+" Switching to playlist "+m.id+".")),m.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),m.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var b=m.targetDuration/2*1e3||5*1e3,T=typeof m.lastRequest=="number"&&Date.now()-m.lastRequest<=b;return this.switchMedia_(m,"exclude",l||T)},r.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},r.delegateLoaders_=function(t,n){var s=this,o=[],u=t==="all";(u||t==="main")&&o.push(this.masterPlaylistLoader_);var l=[];(u||t==="audio")&&l.push("AUDIO"),(u||t==="subtitle")&&(l.push("CLOSED-CAPTIONS"),l.push("SUBTITLES")),l.forEach(function(c){var f=s.mediaTypes_[c]&&s.mediaTypes_[c].activePlaylistLoader;f&&o.push(f)}),["main","audio","subtitle"].forEach(function(c){var f=s[c+"SegmentLoader_"];f&&(t===c||t==="all")&&o.push(f)}),o.forEach(function(c){return n.forEach(function(f){typeof c[f]=="function"&&c[f]()})})},r.setCurrentTime=function(t){var n=Rr(this.tech_.buffered(),t);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(n&&n.length)return t;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},r.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:ni.Playlist.duration(t):1/0:0},r.seekable=function(){return this.seekable_},r.onSyncInfoUpdate_=function(){var t;if(!!this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(!!n){var s=this.syncController_.getExpiredTime(n,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,u=ni.Playlist.seekable(n,s,ni.Playlist.liveEdgeDelay(o,n));if(u.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(n,this.duration()),s===null||(t=ni.Playlist.seekable(n,s,ni.Playlist.liveEdgeDelay(o,n)),t.length===0)))){var l,c;this.seekable_&&this.seekable_.length&&(l=this.seekable_.end(0),c=this.seekable_.start(0)),t?t.start(0)>u.end(0)||u.start(0)>t.end(0)?this.seekable_=u:this.seekable_=I.createTimeRanges([[t.start(0)>u.start(0)?t.start(0):u.start(0),t.end(0)<u.end(0)?t.end(0):u.end(0)]]):this.seekable_=u,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===l&&this.seekable_.start(0)===c)&&(this.logger_("seekable updated ["+d0(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},r.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,t),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(t){var n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}var s=this.tech_.buffered(),o=ni.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},r.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(n){var s=t.mediaTypes_[n].groups;for(var o in s)s[o].forEach(function(u){u.playlistLoader&&u.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},r.master=function(){return this.masterPlaylistLoader_.master},r.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},r.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=t?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!s)},r.getCodecsOrExclude_=function(){var t=this,n={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();n.video=n.main;var o=oa(this.master(),s),u={},l=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(n.main.hasVideo&&(u.video=o.video||n.main.videoCodec||Tp),n.main.isMuxed&&(u.video+=","+(o.audio||n.main.audioCodec||ol)),(n.main.hasAudio&&!n.main.isMuxed||n.audio.hasAudio||l)&&(u.audio=o.audio||n.main.audioCodec||n.audio.audioCodec||ol,n.audio.isFmp4=n.main.hasAudio&&!n.main.isMuxed?n.main.isFmp4:n.audio.isFmp4),!u.audio&&!u.video){this.blacklistCurrentPlaylist({playlist:s,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var c=function(C,k){return C?On(k):ws(k)},f={},m;if(["video","audio"].forEach(function(T){if(u.hasOwnProperty(T)&&!c(n[T].isFmp4,u[T])){var C=n[T].isFmp4?"browser":"muxer";f[C]=f[C]||[],f[C].push(u[T]),T==="audio"&&(m=C)}}),l&&m&&s.attributes.AUDIO){var _=s.attributes.AUDIO;this.master().playlists.forEach(function(T){var C=T.attributes&&T.attributes.AUDIO;C===_&&T!==s&&(T.excludeUntil=1/0)}),this.logger_("excluding audio group "+_+" as "+m+' does not support codec(s): "'+u.audio+'"')}if(Object.keys(f).length){var x=Object.keys(f).reduce(function(T,C){return T&&(T+=", "),T+=C+' does not support codec(s): "'+f[C].join(",")+'"',T},"")+".";this.blacklistCurrentPlaylist({playlist:s,internal:!0,message:x,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var b=[];if(["video","audio"].forEach(function(T){var C=(At(t.sourceUpdater_.codecs[T]||"")[0]||{}).type,k=(At(u[T]||"")[0]||{}).type;C&&k&&C.toLowerCase()!==k.toLowerCase()&&b.push('"'+t.sourceUpdater_.codecs[T]+'" -> "'+u[T]+'"')}),b.length){this.blacklistCurrentPlaylist({playlist:s,message:"Codec switching not supported: "+b.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return u},r.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&!!this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(!!t){this.sourceUpdater_.createSourceBuffers(t);var n=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}}},r.excludeUnsupportedVariants_=function(){var t=this,n=this.master().playlists,s=[];Object.keys(n).forEach(function(o){var u=n[o];if(s.indexOf(u.id)===-1){s.push(u.id);var l=oa(t.master,u),c=[];l.audio&&!ws(l.audio)&&!On(l.audio)&&c.push("audio codec "+l.audio),l.video&&!ws(l.video)&&!On(l.video)&&c.push("video codec "+l.video),l.text&&l.text==="stpp.ttml.im1t"&&c.push("text codec "+l.text),c.length&&(u.excludeUntil=1/0,t.logger_("excluding "+u.id+" for unsupported: "+c.join(", ")))}})},r.excludeIncompatibleVariants_=function(t){var n=this,s=[],o=this.master().playlists,u=mo(At(t)),l=Bg(u),c=u.video&&At(u.video)[0]||null,f=u.audio&&At(u.audio)[0]||null;Object.keys(o).forEach(function(m){var _=o[m];if(!(s.indexOf(_.id)!==-1||_.excludeUntil===1/0)){s.push(_.id);var x=[],b=oa(n.masterPlaylistLoader_.master,_),T=Bg(b);if(!(!b.audio&&!b.video)){if(T!==l&&x.push('codec count "'+T+'" !== "'+l+'"'),!n.sourceUpdater_.canChangeType()){var C=b.video&&At(b.video)[0]||null,k=b.audio&&At(b.audio)[0]||null;C&&c&&C.type.toLowerCase()!==c.type.toLowerCase()&&x.push('video codec "'+C.type+'" !== "'+c.type+'"'),k&&f&&k.type.toLowerCase()!==f.type.toLowerCase()&&x.push('audio codec "'+k.type+'" !== "'+f.type+'"')}x.length&&(_.excludeUntil=1/0,n.logger_("blacklisting "+_.id+": "+x.join(" && ")))}}})},r.updateAdCues_=function(t){var n=0,s=this.seekable();s.length&&(n=s.start(0)),GA(t,this.cueTagsTrack_,n)},r.goalBufferLength=function(){var t=this.tech_.currentTime(),n=Ue.GOAL_BUFFER_LENGTH,s=Ue.GOAL_BUFFER_LENGTH_RATE,o=Math.max(n,Ue.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+t*s,o)},r.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),n=Ue.BUFFER_LOW_WATER_LINE,s=Ue.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(n,Ue.MAX_BUFFER_LOW_WATER_LINE),u=Math.max(n,Ue.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+t*s,this.experimentalBufferBasedABR?u:o)},r.bufferHighWaterLine=function(){return Ue.BUFFER_HIGH_WATER_LINE},e}(I.EventTarget),m1=function(e,r,i){return function(t){var n=e.master.playlists[r],s=rd(n),o=Fo(n);return typeof t>"u"?o:(t?delete n.disabled:n.disabled=!0,t!==o&&!s&&(i(),t?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),t)}},g1=function(e,r,i){var t=e.masterPlaylistController_,n=e.options_.smoothQualityChange,s=n?"smooth":"fast",o=t[s+"QualityChange_"].bind(t);if(r.attributes){var u=r.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=r.attributes.BANDWIDTH,this.frameRate=r.attributes["FRAME-RATE"]}this.codecs=oa(t.master(),r),this.playlist=r,this.id=i,this.enabled=m1(e.playlists,r.id,o)},v1=function(e){e.representations=function(){var r=e.masterPlaylistController_.master(),i=xa(r)?e.masterPlaylistController_.getAudioTrackPlaylists_():r.playlists;return i?i.filter(function(t){return!rd(t)}).map(function(t,n){return new g1(e,t,t.id)}):[]}},Yg=["seeking","seeked","pause","playing","error"],y1=function(){function a(r){var i=this;this.masterPlaylistController_=r.masterPlaylistController,this.tech_=r.tech,this.seekable=r.seekable,this.allowSeeksWithinUnsafeLiveWindow=r.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=r.liveRangeSafeTimeDelta,this.media=r.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ot("PlaybackWatcher"),this.logger_("initialize");var t=function(){return i.monitorCurrentTime_()},n=function(){return i.monitorCurrentTime_()},s=function(){return i.techWaiting_()},o=function(){return i.cancelTimer_()},u=this.masterPlaylistController_,l=["main","subtitle","audio"],c={};l.forEach(function(m){c[m]={reset:function(){return i.resetSegmentDownloads_(m)},updateend:function(){return i.checkSegmentDownloads_(m)}},u[m+"SegmentLoader_"].on("appendsdone",c[m].updateend),u[m+"SegmentLoader_"].on("playlistupdate",c[m].reset),i.tech_.on(["seeked","seeking"],c[m].reset)});var f=function(_){["main","audio"].forEach(function(x){u[x+"SegmentLoader_"][_]("appended",i.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){i.fixesBadSeeks_()&&(i.consecutiveUpdates=0,i.lastRecordedTime=i.tech_.currentTime(),f("off"))},this.clearSeekingAppendCheck_=function(){return f("off")},this.watchForBadSeeking_=function(){i.clearSeekingAppendCheck_(),f("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(Yg,o),this.tech_.on("canplay",n),this.tech_.one("play",t),this.dispose=function(){i.clearSeekingAppendCheck_(),i.logger_("dispose"),i.tech_.off("waiting",s),i.tech_.off(Yg,o),i.tech_.off("canplay",n),i.tech_.off("play",t),i.tech_.off("seeking",i.watchForBadSeeking_),i.tech_.off("seeked",i.clearSeekingAppendCheck_),l.forEach(function(m){u[m+"SegmentLoader_"].off("appendsdone",c[m].updateend),u[m+"SegmentLoader_"].off("playlistupdate",c[m].reset),i.tech_.off(["seeked","seeking"],c[m].reset)}),i.checkCurrentTimeTimeout_&&A.default.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}var e=a.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&A.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=A.default.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(i){var t=this.masterPlaylistController_[i+"SegmentLoader_"];this[i+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+i+" loader"),this[i+"StalledDownloads_"]=0,this[i+"Buffered_"]=t.buffered_()},e.checkSegmentDownloads_=function(i){var t=this.masterPlaylistController_,n=t[i+"SegmentLoader_"],s=n.buffered_(),o=lw(this[i+"Buffered_"],s);if(this[i+"Buffered_"]=s,o){this.resetSegmentDownloads_(i);return}this[i+"StalledDownloads_"]++,this.logger_("found #"+this[i+"StalledDownloads_"]+" "+i+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:Yi(s)}),!(this[i+"StalledDownloads_"]<10)&&(this.logger_(i+" loader stalled download exclusion"),this.resetSegmentDownloads_(i),this.tech_.trigger({type:"usage",name:"vhs-"+i+"-download-exclusion"}),i!=="subtitle"&&t.blacklistCurrentPlaylist({message:"Excessive "+i+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var i=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===i&&(!t.length||i+$t>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&i===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):i===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=i)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var i=this.tech_.seeking();if(!i)return!1;var t=this.seekable(),n=this.tech_.currentTime(),s=this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var u=t.end(t.length-1);o=u}if(this.beforeSeekableWindow_(t,n)){var l=t.start(0);o=l+(l===t.end(0)?0:$t)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+n+" with "+("seekable range "+d0(t)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var c=this.masterPlaylistController_.sourceUpdater_,f=this.tech_.buffered(),m=c.audioBuffer?c.audioBuffered():null,_=c.videoBuffer?c.videoBuffered():null,x=this.media(),b=x.partTargetDuration?x.partTargetDuration:(x.targetDuration-Ai)*2,T=[m,_],C=0;C<T.length;C++)if(!!T[C]){var k=td(T[C],n);if(k<b)return!1}var j=Ks(f,n);return j.length===0?!1:(o=j.start(0)+$t,this.logger_("Buffered region starts ("+j.start(0)+") "+(" just beyond seek point ("+n+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var i=this.tech_.currentTime(),t=this.tech_.buffered(),n=Rr(t,i);if(n.length&&i+3<=n.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(i),this.logger_("Stopped at "+i+" while inside a buffered region "+("["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var i=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(i,t)){var n=i.end(i.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to "+("live point (seekable end) "+n)),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),u=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:t});if(u)return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var l=Ks(o,t);if(l.length>0){var c=l.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+c+", seeking "+("to "+l.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),c*1e3,t),!0}return!1},e.afterSeekableWindow_=function(i,t,n,s){if(s===void 0&&(s=!1),!i.length)return!1;var o=i.end(i.length-1)+$t,u=!n.endList;return u&&s&&(o=i.end(i.length-1)+n.targetDuration*3),t>o},e.beforeSeekableWindow_=function(i,t){return!!(i.length&&i.start(0)>0&&t<i.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(i){var t=i.videoBuffered,n=i.audioBuffered,s=i.currentTime;if(!!t){var o;if(t.length&&n.length){var u=Rr(t,s-3),l=Rr(t,s),c=Rr(n,s);c.length&&!l.length&&u.length&&(o={start:u.end(0),end:c.end(0)})}else{var f=Ks(t,s);f.length||(o=this.gapFromVideoUnderflow_(t,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},e.skipTheGap_=function(i){var t=this.tech_.buffered(),n=this.tech_.currentTime(),s=Ks(t,n);this.cancelTimer_(),!(s.length===0||n!==i)&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",i,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Ai),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(i,t){for(var n=sw(i),s=0;s<n.length;s++){var o=n.start(s),u=n.end(s);if(t-o<4&&t-o>2)return{start:o,end:u}}return null},a}(),_1={errorInterval:30,getSource:function(e){var r=this.tech({IWillNotUseThisInPlugins:!0}),i=r.currentSource_||this.currentSource();return e(i)}},x1=function a(e,r){var i=0,t=0,n=I.mergeOptions(_1,r);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){t&&e.currentTime(t)},o=function(m){m!=null&&(t=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",s),e.src(m),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},u=function(){if(Date.now()-i<n.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){I.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return i=Date.now(),n.getSource.call(e,o)},l=function f(){e.off("loadedmetadata",s),e.off("error",u),e.off("dispose",f)},c=function(m){l(),a(e,m)};e.on("error",u),e.on("dispose",l),e.reloadSourceOnError=c},D1=function(e){x1(this,e)},X0="2.16.2",T1="6.0.1",b1="0.22.1",E1="4.8.0",S1="3.1.3",We={PlaylistLoader:Mr,Playlist:ft,utils:Lw,STANDARD_PLAYLIST_SELECTOR:jg,INITIAL_PLAYLIST_SELECTOR:bA,lastBandwidthSelector:jg,movingAverageBandwidthSelector:DA,comparePlaylistBandwidth:od,comparePlaylistResolution:xA,xhr:C0()};Object.keys(Ue).forEach(function(a){Object.defineProperty(We,a,{get:function(){return I.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),Ue[a]},set:function(r){if(I.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),typeof r!="number"||r<0){I.log.warn("value of Vhs."+a+" must be greater than or equal to 0");return}Ue[a]=r}})});var Y0="videojs-vhs",Q0=function(e,r){for(var i=r.media(),t=-1,n=0;n<e.length;n++)if(e[n].id===i.id){t=n;break}e.selectedIndex_=t,e.trigger({selectedIndex:t,type:"change"})},C1=function(e,r){r.representations().forEach(function(i){e.addQualityLevel(i)}),Q0(e,r.playlists)};We.canPlaySource=function(){return I.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var w1=function(e,r,i){if(!e)return e;var t={};r&&r.attributes&&r.attributes.CODECS&&(t=mo(At(r.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(t.audio=i.attributes.CODECS);var n=xr(t.video),s=xr(t.audio),o={};for(var u in e)o[u]={},s&&(o[u].audioContentType=s),n&&(o[u].videoContentType=n),r.contentProtection&&r.contentProtection[u]&&r.contentProtection[u].pssh&&(o[u].pssh=r.contentProtection[u].pssh),typeof e[u]=="string"&&(o[u].url=e[u]);return I.mergeOptions(e,o)},A1=function(e,r){return e.reduce(function(i,t){if(!t.contentProtection)return i;var n=r.reduce(function(s,o){var u=t.contentProtection[o];return u&&u.pssh&&(s[o]={pssh:u.pssh}),s},{});return Object.keys(n).length&&i.push(n),i},[])},F1=function(e){var r=e.player,i=e.sourceKeySystems,t=e.audioMedia,n=e.mainPlaylists;if(!r.eme.initializeMediaKeys)return Promise.resolve();var s=t?n.concat([t]):n,o=A1(s,Object.keys(i)),u=[],l=[];return o.forEach(function(c){l.push(new Promise(function(f,m){r.tech_.one("keysessioncreated",f)})),u.push(new Promise(function(f,m){r.eme.initializeMediaKeys({keySystems:c},function(_){if(_){m(_);return}f()})}))}),Promise.race([Promise.all(u),Promise.race(l)])},k1=function(e){var r=e.player,i=e.sourceKeySystems,t=e.media,n=e.audioMedia,s=w1(i,t,n);return s?(r.currentSource().keySystems=s,s&&!r.eme?(I.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},J0=function(){if(!A.default.localStorage)return null;var e=A.default.localStorage.getItem(Y0);if(!e)return null;try{return JSON.parse(e)}catch{return null}},P1=function(e){if(!A.default.localStorage)return!1;var r=J0();r=r?I.mergeOptions(r,e):e;try{A.default.localStorage.setItem(Y0,JSON.stringify(r))}catch{return!1}return r},I1=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};We.supportsNativeHls=function(){if(!W.default||!W.default.createElement)return!1;var a=W.default.createElement("video");if(!I.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(r){return/maybe|probably/i.test(a.canPlayType(r))})}();We.supportsNativeDash=function(){return!W.default||!W.default.createElement||!I.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(W.default.createElement("video").canPlayType("application/dash+xml"))}();We.supportsTypeNatively=function(a){return a==="hls"?We.supportsNativeHls:a==="dash"?We.supportsNativeDash:!1};We.isSupported=function(){return I.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var O1=I.getComponent("Component"),ld=function(a){q(e,a);function e(i,t,n){var s;if(s=a.call(this,t,I.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&I.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof n.initialBandwidth=="number"&&(s.options_.bandwidth=n.initialBandwidth),s.logger_=Ot("VhsHandler"),t.options_&&t.options_.playerId){var o=I(t.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return I.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"hls-player-access"}),ee(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return I.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),t.trigger({type:"usage",name:"vhs-player-access"}),ee(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return I.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),ee(s)},configurable:!0}),s.player_=o}if(s.tech_=t,s.source_=i,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(W.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(u){var l=W.default.fullscreenElement||W.default.webkitFullscreenElement||W.default.mozFullScreenElement||W.default.msFullscreenElement;l&&l.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var r=e.prototype;return r.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var n=J0();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Ue.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ue.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof t.source_[s]<"u"&&(t.options_[s]=t.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},r.src=function(t,n){var s=this;if(!!t){this.setOptions_(),this.options_.src=I1(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=We,this.options_.sourceType=ul(n),this.options_.seekTo=function(l){s.tech_.setCurrentTime(l)},this.options_.smoothQualityChange&&I.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new p1(this.options_);var o=I.mergeOptions({liveRangeSafeTimeDelta:$t},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new y1(o),this.masterPlaylistController_.on("error",function(){var l=I.players[s.tech_.options_.playerId],c=s.masterPlaylistController_.error;typeof c=="object"&&!c.code?c.code=3:typeof c=="string"&&(c={message:c,code:3}),l.error(c)});var u=this.options_.experimentalBufferBasedABR?We.movingAverageBandwidthSelector(.55):We.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):u.bind(this),this.masterPlaylistController_.selectInitialPlaylist=We.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(c){this.masterPlaylistController_.selectPlaylist=c.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=c,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var c=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,f=A.default.navigator.connection||A.default.navigator.mozConnection||A.default.navigator.webkitConnection,m=1e7;if(this.options_.useNetworkInformationApi&&f){var _=f.downlink*1e3*1e3;_>=m&&c>=m?c=Math.max(c,_):c=_}return c},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=c,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var c=1/(this.bandwidth||1),f;this.throughput>0?f=1/this.throughput:f=0;var m=Math.floor(1/(c+f));return m},set:function(){I.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Yi(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Yi(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&P1({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){v1(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=A.default.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},r.createKeySessions_=function(){var t=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),F1({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:n&&n.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){t.logger_("error while creating EME key session",s),t.player_.error({message:"Failed to initialize media keys for EME",code:3})})},r.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},r.setupEme_=function(){var t=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=k1({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:n&&n.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var u=t.masterPlaylistController_.master();if(!(!u||!u.playlists)){var l=[];if(u.playlists.forEach(function(f){f&&f.attributes&&f.attributes.RESOLUTION&&f.attributes.RESOLUTION.height>=720&&(!f.excludeUntil||f.excludeUntil<1/0)&&(f.excludeUntil=1/0,l.push(f))}),l.length){var c;(c=I.log).warn.apply(c,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(l)),t.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),I.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},r.setupQualityLevels_=function(){var t=this,n=I.players[this.tech_.options_.playerId];!n||!n.qualityLevels||this.qualityLevels_||(this.qualityLevels_=n.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){C1(t.qualityLevels_,t)}),this.playlists.on("mediachange",function(){Q0(t.qualityLevels_,t.playlists)}))},e.version=function(){return{"@videojs/http-streaming":X0,"mux.js":T1,"mpd-parser":b1,"m3u8-parser":E1,"aes-decrypter":S1}},r.version=function(){return this.constructor.version()},r.canChangeType=function(){return K0.canChangeType()},r.play=function(){this.masterPlaylistController_.play()},r.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},r.duration=function(){return this.masterPlaylistController_.duration()},r.seekable=function(){return this.masterPlaylistController_.seekable()},r.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&A.default.URL.revokeObjectURL&&(A.default.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),a.prototype.dispose.call(this)},r.convertToProgramTime=function(t,n){return Hw({playlist:this.masterPlaylistController_.media(),time:t,callback:n})},r.seekToProgramTime=function(t,n,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),Vw({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})},e}(O1),ha={name:"videojs-http-streaming",VERSION:X0,canHandleSource:function(e,r){r===void 0&&(r={});var i=I.mergeOptions(I.options,r);return ha.canPlayType(e.type,i)},handleSource:function(e,r,i){i===void 0&&(i={});var t=I.mergeOptions(I.options,i);return r.vhs=new ld(e,r,t),I.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function(){return I.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),r.vhs},configurable:!0}),r.vhs.xhr=C0(),r.vhs.src(e.src,e.type),r.vhs},canPlayType:function(e,r){var i=ul(e);if(!i)return"";var t=ha.getOverrideNative(r),n=We.supportsTypeNatively(i),s=!n||t;return s?"maybe":""},getOverrideNative:function(e){e===void 0&&(e={});var r=e,i=r.vhs,t=i===void 0?{}:i,n=r.hls,s=n===void 0?{}:n,o=!(I.browser.IS_ANY_SAFARI||I.browser.IS_IOS),u=t.overrideNative,l=u===void 0?o:u,c=s.overrideNative,f=c===void 0?!1:c;return f||l}},L1=function(){return On("avc1.4d400d,mp4a.40.2")};L1()&&I.getTech("Html5").registerSourceHandler(ha,0);I.VhsHandler=ld;Object.defineProperty(I,"HlsHandler",{get:function(){return I.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),ld},configurable:!0});I.VhsSourceHandler=ha;Object.defineProperty(I,"HlsSourceHandler",{get:function(){return I.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),ha},configurable:!0});I.Vhs=We;Object.defineProperty(I,"Hls",{get:function(){return I.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),We},configurable:!0});I.use||(I.registerComponent("Hls",We),I.registerComponent("Vhs",We));I.options.vhs=I.options.vhs||{};I.options.hls=I.options.hls||{};(!I.getPlugin||!I.getPlugin("reloadSourceOnError"))&&(Qg=I.registerPlugin||I.plugin,Qg("reloadSourceOnError",D1));var Qg,ko=I;var R1=a=>typeof a=="number"&&!isNaN(a)&&a>=0&&a<1/0,cd=a=>{let e=a.playlist.autoadvance_;e.timeout&&a.clearTimeout(e.timeout),e.trigger&&a.off("ended",e.trigger),e.timeout=null,e.trigger=null},dd=(a,e)=>{if(cd(a),!R1(e)){a.playlist.autoadvance_.delay=null;return}a.playlist.autoadvance_.delay=e,a.playlist.autoadvance_.trigger=function(){let r=()=>dd(a,e);a.one("play",r),a.playlist.autoadvance_.timeout=a.setTimeout(()=>{cd(a),a.off("play",r),a.playlist.next()},e*1e3)},a.one("ended",a.playlist.autoadvance_.trigger)},M1=a=>{let e=a.remoteTextTracks(),r=e&&e.length||0;for(;r--;)a.removeRemoteTextTrack(e[r])},N1=(a,e)=>{let r=!a.paused()||a.ended();return a.trigger("beforeplaylistitem",e.originalValue||e),e.playlistItemId_&&(a.playlist.currentPlaylistItemId_=e.playlistItemId_),a.poster(e.poster||""),a.src(e.sources),M1(a),a.ready(()=>{if((e.textTracks||[]).forEach(a.addRemoteTextTrack.bind(a)),a.trigger("playlistitem",e.originalValue||e),r){let i=a.play();typeof i<"u"&&typeof i.then=="function"&&i.then(null,t=>{})}dd(a,a.playlist.autoadvance_.delay)}),a},Z0=a=>!!a&&typeof a=="object",B1=a=>{let e=[],r;return a.forEach(i=>{Z0(i)?r=i:(r=Object(i),r.originalValue=i),e.push(r)}),e},U1=a=>{let e=1;a.forEach(r=>{r.playlistItemId_=e++})},j1=(a,e)=>{for(let r=0;r<a.length;r++)if(a[r].playlistItemId_===e)return r;return-1},H1=(a,e)=>{let r=a,i=e;return typeof a=="object"&&(r=a.src),typeof e=="object"&&(i=e.src),/^\/\//.test(r)&&(i=i.slice(i.indexOf("//"))),/^\/\//.test(i)&&(r=r.slice(r.indexOf("//"))),r===i},Po=(a,e)=>{for(let r=0;r<a.length;r++){let i=a[r].sources;if(Array.isArray(i))for(let t=0;t<i.length;t++){let n=i[t];if(n&&H1(n,e))return r}}return-1},V1=a=>{let e=-1,r=a.length-1;for(;++e<a.length;){let i=e+Math.floor(Math.random()*(r-e+1)),t=a[i];a[i]=a[e],a[e]=t}return a};function $1(a,e,r=0){let i=null,t=!1,n=a.playlist=(s,o=0)=>{if(t)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(s)){let u=Array.isArray(i)?i.slice():null,l=s.slice();i=l.slice(),i.filter(c=>Z0(c)).length!==i.length&&(i=B1(i)),U1(i),t=!0,a.trigger({type:"duringplaylistchange",nextIndex:o,nextPlaylist:l,previousIndex:n.currentIndex_,previousPlaylist:u||[]}),t=!1,o!==-1&&n.currentItem(o),u&&a.setTimeout(()=>{a.trigger("playlistchange")},0)}return i.map(u=>u.originalValue||u).slice()};return a.on("loadstart",()=>{n.currentItem()===-1&&cd(a)}),n.currentIndex_=-1,n.player_=a,n.autoadvance_={},n.repeat_=!1,n.currentPlaylistItemId_=null,n.currentItem=s=>{if(t)return n.currentIndex_;if(typeof s=="number"&&n.currentIndex_!==s&&s>=0&&s<i.length)return n.currentIndex_=s,N1(n.player_,i[n.currentIndex_]),n.currentIndex_;let o=n.player_.currentSrc()||"";if(n.currentPlaylistItemId_){let u=j1(i,n.currentPlaylistItemId_),l=i[u];if(l&&Array.isArray(l.sources)&&Po([l],o)>-1)return n.currentIndex_=u,n.currentIndex_;n.currentPlaylistItemId_=null}return n.currentIndex_=n.indexOf(o),n.currentIndex_},n.contains=s=>n.indexOf(s)!==-1,n.indexOf=s=>{if(typeof s=="string")return Po(i,s);let o=Array.isArray(s)?s:s.sources;for(let u=0;u<o.length;u++){let l=o[u];if(typeof l=="string")return Po(i,l);if(l.src)return Po(i,l.src)}return-1},n.currentIndex=()=>n.currentItem(),n.lastIndex=()=>i.length-1,n.nextIndex=()=>{let s=n.currentItem();if(s===-1)return-1;let o=n.lastIndex();return n.repeat_&&s===o?0:Math.min(s+1,o)},n.previousIndex=()=>{let s=n.currentItem();return s===-1?-1:n.repeat_&&s===0?n.lastIndex():Math.max(s-1,0)},n.first=()=>{if(t)return;let s=n.currentItem(0);if(i.length)return i[s].originalValue||i[s];n.currentIndex_=-1},n.last=()=>{if(t)return;let s=n.currentItem(n.lastIndex());if(i.length)return i[s].originalValue||i[s];n.currentIndex_=-1},n.next=()=>{if(t)return;let s=n.nextIndex();if(s!==n.currentIndex_){let o=n.currentItem(s);return i[o].originalValue||i[o]}},n.previous=()=>{if(t)return;let s=n.previousIndex();if(s!==n.currentIndex_){let o=n.currentItem(s);return i[o].originalValue||i[o]}},n.autoadvance=s=>{dd(n.player_,s)},n.repeat=s=>{if(s===void 0)return n.repeat_;if(typeof s!="boolean"){ko.log.error("videojs-playlist: Invalid value for repeat",s);return}return n.repeat_=!!s,n.repeat_},n.sort=s=>{!i.length||(i.sort(s),!t&&a.trigger("playlistsorted"))},n.reverse=()=>{!i.length||(i.reverse(),!t&&a.trigger("playlistsorted"))},n.shuffle=({rest:s}={})=>{let o=0,u=i;s&&(o=n.currentIndex_+1,u=i.slice(o)),!(u.length<=1)&&(V1(u),s&&i.splice(...[o,u.length].concat(u)),!t&&a.trigger("playlistsorted"))},Array.isArray(e)?n(e.slice(),r):i=[],n}var W1="5.0.0",q1=ko.registerPlugin||ko.plugin,ey=function(a,e){$1(this,a,e)};q1("playlist",ey);ey.VERSION=W1;var z1=Symbol("error");function G1(a){return a instanceof Error||typeof a=="string"?a:new Error("Unknown error")}function K1(a){a=G1(a);let e=dy(Da,z1);if(!e)throw a;for(let r of e)r(a)}var Da=null;function rn(a,e){return[()=>a,r=>a=typeof r=="function"?r(a):r]}function cy(a,e){Da={owner:Da,context:null};let r;try{r=a(e)}catch(i){K1(i)}finally{Da=Da.owner}return()=>r}function dy(a,e){return a?a.context&&a.context[e]!==void 0?a.context[e]:dy(a.owner,e):void 0}var yt={};function ty(a){yt.context=a}function X1(){return yt.context?{...yt.context,id:`${yt.context.id}${yt.context.count++}-`,count:0}:void 0}function md(a,e){if(yt.context&&!yt.context.noHydrate){let r=yt.context;ty(X1());let i=a(e||{});return ty(r),i}return a(e||{})}function Y1(a){let e;return a.when?typeof(e=a.children)=="function"?e(a.when):e:a.fallback||""}var Q1=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"];[...Q1];var{hasOwnProperty:J1}=Object.prototype,gd="hjkmoquxzABCDEFGHIJKLNPQRTUVWXYZ$_",iy=gd.length,fy="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$_",ry=fy.length,tr=[],ve=[""],Ta=new Map,en=new WeakMap,ba=0;ve.pop();function Io(a){if(Oo(a,"")){let e=ve[0];for(let r=1,i=ve.length;r<i;r++)e+=ve[r];if(ba){if(Ta.size){let r=en.get(a);typeof r=="number"&&(r=vd(ba++),e=r+"="+e);for(let[i,t]of Ta)e+=";"+t+i;e+=";return "+r,Ta=new Map}else e="return "+e;e="(function("+rF()+"){"+e+"}())"}else a&&a.constructor===Object&&(e="("+e+")");return ve.length=0,en=new WeakMap,e}return"void 0"}function Oo(a,e){switch(typeof a){case"string":ve.push(hy(a,0));break;case"number":ve.push(a+"");break;case"boolean":ve.push(a?"!0":"!1");break;case"object":if(a===null)ve.push("null");else{let r=Z1(a,e);switch(r){case!0:return!1;case!1:switch(a.constructor){case Object:ny(a);break;case Array:fd(a);break;case Date:ve.push('new Date("'+a.toISOString()+'")');break;case RegExp:ve.push(a+"");break;case Map:ve.push("new Map("),fd(Array.from(a)),ve.push(")");break;case Set:ve.push("new Set("),fd(Array.from(a)),ve.push(")");break;case void 0:ve.push("Object.assign(Object.create(null),"),ny(a),ve.push(")");break;default:return!1}break;default:ve.push(r);break}}break;default:return!1}return!0}function ny(a){let e="{";tr.push(a);for(let r in a)if(J1.call(a,r)){let i=a[r],t=eF(r);ve.push(e+t+":"),Oo(i,t)?e=",":ve.pop()}e==="{"?ve.push("{}"):ve.push("}"),tr.pop()}function fd(a){ve.push("["),tr.push(a),Oo(a[0],0);for(let e=1,r=a.length;e<r;e++)ve.push(","),Oo(a[e],e);tr.pop(),ve.push("]")}function Z1(a,e){let r=en.get(a);if(r===void 0)return en.set(a,ve.length),!1;if(typeof r=="number"&&(r=ay(a,r)),tr.includes(a)){let i=tr[tr.length-1],t=en.get(i);return typeof t=="number"&&(t=ay(i,t)),Ta.set(r,(Ta.get(r)||"")+tF(t,e)+"="),!0}return r}function eF(a){let e=iF(a);return e===-1?a:hy(a,e)}function tF(a,e){return a+(typeof e=="number"||e[0]==='"'?"["+e+"]":"."+e)}function iF(a){let e=a[0];if(!(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"))return 0;for(let r=1,i=a.length;r<i;r++)if(e=a[r],!(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"))return r;return-1}function hy(a,e){let r="",i=0;for(let t=e,n=a.length;t<n;t++){let s;switch(a[t]){case'"':s='\\"';break;case"\\":s="\\\\";break;case"<":s="\\x3C";break;case`
`:s="\\n";break;case"\r":s="\\r";break;case"\u2028":s="\\u2028";break;case"\u2029":s="\\u2029";break;default:continue}r+=a.slice(i,t)+s,i=t+1}return i===e?r=a:r+=a.slice(i),'"'+r+'"'}function ay(a,e){let r=vd(ba++);return en.set(a,r),e?ve[e-1]+=r+"=":ve[e]=r+"="+ve[e],r}function rF(){let a=gd[0];for(let e=1;e<ba;e++)a+=","+vd(e);return ba=0,a}function vd(a){let e=a%iy,r=gd[e];for(a=(a-e)/iy;a>0;)e=a%ry,r+=fy[e],a=(a-e)/ry;return r}function py(a,e={}){let r="";yt.context={id:e.renderId||"",count:0,suspense:{},lazy:{},assets:[],nonce:e.nonce,writeResource(t,n,s){if(!yt.context.noHydrate){if(s)return r+=`_$HY.set("${t}", ${uF(n)});`;r+=`_$HY.set("${t}", ${Io(n)});`}}};let i=Ea(Lo(a()));return yt.context.noHydrate=!0,i=sF(yt.context.assets,i),r.length&&(i=oF(i,r,e.nonce)),i}function tn(a,...e){if(e.length){let r="";for(let i=0;i<e.length;i++){r+=a[i];let t=e[i];t!==void 0&&(r+=Ea(t))}a=r+a[e.length]}return{t:a}}function nF(a,e,r){return r?e?" "+a:"":e!=null?` ${a}="${e}"`:""}function hd(){let a=aF();return a?` data-hk="${a}"`:""}function Lo(a,e){let r=typeof a;if(r!=="string"){if(!e&&r==="function")return Lo(a(),e);if(!e&&Array.isArray(a)){let l="";for(let c=0;c<a.length;c++)l+=Ea(Lo(a[c],e));return{t:l}}return e&&r==="boolean"?String(a):a}let i=e?'"':"<",t=e?"&quot;":"&lt;",n=a.indexOf(i),s=a.indexOf("&");if(n<0&&s<0)return a;let o=0,u="";for(;n>=0&&s>=0;)n<s?(o<n&&(u+=a.substring(o,n)),u+=t,o=n+1,n=a.indexOf(i,o)):(o<s&&(u+=a.substring(o,s)),u+="&amp;",o=s+1,s=a.indexOf("&",o));if(n>=0)do o<n&&(u+=a.substring(o,n)),u+=t,o=n+1,n=a.indexOf(i,o);while(n>=0);else for(;s>=0;)o<s&&(u+=a.substring(o,s)),u+="&amp;",o=s+1,s=a.indexOf("&",o);return o<a.length?u+a.substring(o):u}function Ea(a){let e=typeof a;if(e==="string")return a;if(a==null||e==="boolean")return"";if(Array.isArray(a)){let r="";for(let i=0,t=a.length;i<t;i++)r+=Ea(a[i]);return r}return e==="object"?a.t:e==="function"?Ea(a()):String(a)}function aF(){let a=yt.context;return a&&!a.noHydrate&&`${a.id}${a.count++}`}function sF(a,e){if(!a||!a.length)return e;let r="";for(let i=0,t=a.length;i<t;i++)r+=a[i]();return e.replace("</head>",r+"</head>")}function oF(a,e,r){let i=`<script${r?` nonce="${r}"`:""}>${e}<\/script>`,t=a.indexOf("<!--xs-->");return t>-1?a.slice(0,t)+i+a.slice(t):a+i}function uF(a){if(a.message){let e={},r=Object.getOwnPropertyNames(a);for(let i=0;i<r.length;i++){let t=r[i],n=a[t];(!n||t!=="message"&&typeof n!="function")&&(e[t]=n)}return`Object.assign(new Error(${Io(a.message)}), ${Io(e)})`}return Io(a)}var sy=Object.freeze,lF=Object.defineProperty,cF=(a,e)=>sy(lF(a,"raw",{value:sy(e||a.slice())})),oy,dF=fs(),yd=ds(async(a,e,r)=>{let i=a.createAstro(dF,e,r);i.self=yd;let{title:t}=i.props;return Ui(oy||(oy=cF([`<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <meta name="generator"`,`>
    <title>`,`</title>
    <!-- <link
      href="https://unpkg.com/video.js@7/dist/video-js.min.css"
      rel="stylesheet"
    /> -->
    <!-- <link href="https://vjs.zencdn.net/8.0.4/video-js.css" rel="stylesheet" /> -->
    <!-- <script src="https://vjs.zencdn.net/8.0.4/video.min.js"><\/script> -->

    

    <!-- {pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} />} -->
  `,`</head>
  <body>
    `,`
  </body></html>`])),ps(i.generator,"content"),t,eh(a),Yt(a,r.default))},"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/layouts/Layout.astro"),fF=fs(),my=ds(async(a,e,r)=>{let i=a.createAstro(fF,e,r);return i.self=my,Ui`${ji(a,"Layout",yd,{title:"Welcome to Astro."},{default:t=>Ui`Home page`})}`},"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/pages/index.astro"),hF="/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/pages/index.astro",pF="",gy=Object.freeze(Object.defineProperty({__proto__:null,default:my,file:hF,url:pF},Symbol.toStringTag,{value:"Module"})),vy=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),yy=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),_y=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),[uy,MI]=rn([]),[mF,NI]=rn([]),[ly,BI]=rn([]),[pd,UI]=rn(),[gF,jI]=rn("");cy(()=>{let a;if(!uy().length)return a="",a;let e=encodeURIComponent(JSON.stringify(uy())),r=encodeURIComponent(JSON.stringify(mF())),i=encodeURIComponent(JSON.stringify(ly())),t=ly(),n="";return t.length&&(n=t?.reduce((s,o)=>Number(s)+Number(o))),a=`2test.zip?src=${e}&names=${r}&size=${n}`,a});cy(()=>{let a=gF();if(a){let e=pd().filter(i=>i.name?.toLowerCase().normalize().includes(a)),r=pd().map(i=>i.filter(t=>t.name?.toLowerCase().normalize().includes(a))).filter(i=>i.length);return console.log({filteredByBucket:r}),r}else return pd()});function vF(a){return a.replace(/[\/|\\:*?"<>]/g," ").replace(" ","_")}function yF(a,e){let r=[],i={};return a.forEach(t=>{let n=t[e];i[n]||(i[n]=[]),i[n].push(t)}),Object.keys(i).forEach(t=>{r.push(i[t])}),r}var _F=["<p",">Play list page</p>"],xF=["<div",' class=" mx-auto relative video-js w-full aspect-video" id="videoPlayerDiv"><video class="video-js" id="videoPlayer" src=""></video></div>'],DF=["<form",' method="post"',"><button>Download this video</button></form>"];function xy(a){let[e,r]=rn("");return a.videos.map(i=>({sources:i.sources,poster:i.poster,slug:i.slugName,size:i.sources.filter(t=>t.container&&t.container=="MP4")[0].size})),[tn(_F,hd()),tn(xF,hd()),md(Y1,{get when(){return e()},get children(){return tn(DF,hd(),nF("action",Lo(e(),!0),!1))}})]}ph(xy,"@astrojs/solid-js");var TF=fs(),Dy=ds(async(a,e,r)=>{let i=a.createAstro(TF,e,r);i.self=Dy;let t="https://edge.api.brightcove.com/playback/v1",n="6314154063001",{playlist:s}=i.params,o="BCpkADawqM0bQiUyoSejARSlmKAaReqHw7sRy-4OFGmD8lb2ibVNF-d7H4wtYWIS8NMHOP-3IrfH1mVnUzhxQThtzvPBe-IUyk9EagJcJwWrbIBBCg1tsi8vJFv7_S6GGiTNhDwXFJfwF_W-",u=new Headers;u.append("Accept",`application/json;pk=${o}`);let l={method:"GET",headers:u},c=`${t}/accounts/${n}/playlists/ref:${s}?limit=300`,_=(await(await fetch(c,l)).json()).videos.sort((x,b)=>{let T=/^.*?(\d{2})-(?:\d)?[A-Z]{2,3}_(\d?.+?)_([0-9]{2,3})(?:\..+)?$/;if(!x||!b)return;let C=x.reference_id?.toUpperCase(),k=b.reference_id?.toUpperCase(),j=C.match(T),L=k.match(T);if(!j||!L)return-1;let R=Number(j[1]),H=j[2],B=Number(j[3]),O=Number(L[1]),N=L[2],M=Number(L[3]);x.book=x.book||H,b.book=b.book||N;let G;return R==O?G=B<M?-1:B==M?0:1:G=R<O?-1:R==O?0:1,G});return _.forEach((x,b)=>{x.originalIdx=b,x.slugName=vF(x.name)}),yF(_,"book"),Ui`${ji(a,"Layout",yd,{title:"Welcome to Astro."},{default:x=>Ui`${Lu(x)}<div class="flex relative flex-col md:flex-row items-start p-4 gap-4">
    <div class="w-full md:w-3/4 top-0 aspect-video">
      ${ji(x,"VideoPlayer",xy,{"client:load":!0,accountId:n,videos:_,"client:component-hydration":"load","client:component-path":"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/Video","client:component-export":"VideoPlayer"})}
    </div>
    <!-- <div
      class="relative w-full md:w-1/4 md:max-h-[95vh] overflow-y-auto z-0 mt-8 md:mt-0"
    >
      <div class="top-0 bg-white z-20 sticky">
        <DownloadToggle client:load />
      </div>
      <Sidebar videos={sortedVids} vidsByBook={bucketized} client:idle />
    </div>
  </div> -->
  </div>`})}`},"/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/pages/[playlist].astro"),bF="/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/pages/[playlist].astro",EF="/[playlist]",Ty=Object.freeze(Object.defineProperty({__proto__:null,default:Dy,file:bF,url:EF},Symbol.toStringTag,{value:"Module"}));var qI=Ae(Qo(),1),zI=Ae(Zo(),1);var SF=typeof process=="object"&&Object.prototype.toString.call(process)==="[object process]";function CF(){return new Proxy({},{get:(a,e)=>{console.warn(`Unable to access \`import.meta\0.env.${e.toString()}\` on initialization as the Cloudflare platform only provides the environment variables per request. Please move the environment variable access inside a function that's only called after a request has been received.`)}})}SF||(process.env=CF());function Sy(a){let e=new cs(a);return{onRequest:async({request:i,next:t,...n})=>{process.env=n.env;let{pathname:s}=new URL(i.url);if(a.assets.has(s))return t(i);let o=e.match(i,{matchNotFound:!0});if(o){Reflect.set(i,Symbol.for("astro.clientAddress"),i.headers.get("cf-connecting-ip")),Reflect.set(i,Symbol.for("runtime"),{...n,name:"cloudflare",next:t});let u=await e.render(i,o);if(e.setCookieHeaders)for(let l of e.setCookieHeaders(u))u.headers.append("Set-Cookie",l);return u}return new Response(null,{status:404,statusText:"Not found"})}}}var by=Object.freeze(Object.defineProperty({__proto__:null,createExports:Sy},Symbol.toStringTag,{value:"Module"})),_d=new WeakMap;function wF(a){if(_d.has(a))return _d.get(a);let e={c:0,get id(){return"s"+this.c.toString()}};return _d.set(a,e),e}function AF(a){let e=a.id;return a.c++,e}var FF=a=>a.trim().replace(/[-_]([a-z])/g,(e,r)=>r.toUpperCase());function kF(a,e,r){if(typeof a!="function")return!1;let{html:i}=Cy.call(this,a,e,r);return typeof i=="string"}function Cy(a,e,{default:r,...i},t){let n=t?.hydrate?AF(wF(this.result)):"",s=py(()=>{let o={};for(let[l,c]of Object.entries(i)){let f=FF(l);o[f]=tn(`<astro-slot name="${f}">${c}</astro-slot>`)}let u={...e,...o,children:r!=null?tn(`<astro-slot>${r}</astro-slot>`):r};return md(a,u)},{renderId:n});return{attrs:{"data-solid-render-id":n},html:s}}var PF={check:kF,renderToStaticMarkup:Cy},IF=new Map([["src/pages/index.astro",gy],["src/pages/api/download-node.ts",vy],["src/pages/api/download.json.ts",yy],["src/pages/api/download.ts",_y],["src/pages/[playlist].astro",Ty]]),OF=[Object.assign({name:"astro:jsx",serverEntrypoint:"astro/jsx/server.js",jsxImportSource:"astro"},{ssr:Ch}),Object.assign({name:"@astrojs/solid-js",clientEntrypoint:"@astrojs/solid-js/client.js",serverEntrypoint:"@astrojs/solid-js/server.js",jsxImportSource:"solid-js"},{ssr:PF})],wy=Object.assign(bh({adapterName:"@astrojs/cloudflare",routes:[{file:"",links:["_astro/_playlist_.7fbdd64e.css"],scripts:[{type:"external",value:"_astro/hoisted.9c84ba72.js"}],routeData:{route:"/",type:"page",pattern:"^\\/$",segments:[],params:[],component:"src/pages/index.astro",pathname:"/",prerender:!1,_meta:{trailingSlash:"ignore"}}},{file:"",links:[],scripts:[],routeData:{route:"/api/download-node",type:"endpoint",pattern:"^\\/api\\/download-node$",segments:[[{content:"api",dynamic:!1,spread:!1}],[{content:"download-node",dynamic:!1,spread:!1}]],params:[],component:"src/pages/api/download-node.ts",pathname:"/api/download-node",prerender:!1,_meta:{trailingSlash:"ignore"}}},{file:"",links:[],scripts:[],routeData:{route:"/api/download.json",type:"endpoint",pattern:"^\\/api\\/download\\.json$",segments:[[{content:"api",dynamic:!1,spread:!1}],[{content:"download.json",dynamic:!1,spread:!1}]],params:[],component:"src/pages/api/download.json.ts",pathname:"/api/download.json",prerender:!1,_meta:{trailingSlash:"ignore"}}},{file:"",links:[],scripts:[],routeData:{route:"/api/download",type:"endpoint",pattern:"^\\/api\\/download$",segments:[[{content:"api",dynamic:!1,spread:!1}],[{content:"download",dynamic:!1,spread:!1}]],params:[],component:"src/pages/api/download.ts",pathname:"/api/download",prerender:!1,_meta:{trailingSlash:"ignore"}}},{file:"",links:["_astro/_playlist_.7fbdd64e.css"],scripts:[{type:"external",value:"_astro/hoisted.9c84ba72.js"}],routeData:{route:"/[playlist]",type:"page",pattern:"^\\/([^/]+?)\\/?$",segments:[[{content:"playlist",dynamic:!0,spread:!1}]],params:["playlist"],component:"src/pages/[playlist].astro",prerender:!1,_meta:{trailingSlash:"ignore"}}}],base:"/",markdown:{drafts:!1,syntaxHighlight:"shiki",shikiConfig:{langs:[],theme:"github-dark",wrap:!1},remarkPlugins:[],rehypePlugins:[],remarkRehype:{},gfm:!0,smartypants:!0,contentDir:"file:///Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/content/"},pageMap:null,propagation:[],renderers:[],entryModules:{"\0@astrojs-ssr-virtual-entry":"_@astrojs-ssr-virtual-entry.mjs","@astrojs/solid-js/client.js":"_astro/client.caba8416.js","/astro/hoisted.js?q=0":"_astro/hoisted.9c84ba72.js","/Users/willkelly/Documents/Work/Code/Misc/DOTvids/node_modules/.pnpm/workbox-window@6.5.4/node_modules/workbox-window/build/workbox-window.prod.es5.mjs":"_astro/workbox-window.prod.es5.295a6886.js","/Users/willkelly/Documents/Work/Code/Misc/DOTvids/src/components/Video":"_astro/Video.790d4e77.js","astro:scripts/before-hydration.js":""},assets:["/_astro/_playlist_.7fbdd64e.css","/favicon.svg","/sw.js","/$server_build/registerSW.js","/_astro/Video.790d4e77.js","/_astro/client.caba8416.js","/_astro/hoisted.9c84ba72.js","/_astro/web.6e5c752e.js","/_astro/workbox-window.prod.es5.295a6886.js","/$server_build/_astro/_playlist_.7fbdd64e.css","/$server_build/chunks/astro.49127a8d.mjs","/$server_build/chunks/pages/all.01d17073.mjs"]}),{pageMap:IF,renderers:OF}),LF=void 0,RF=Sy(wy),JI=RF.onRequest,Ey="start";Ey in by&&by[Ey](wy,LF);export{JI as onRequest,IF as pageMap,OF as renderers};
/*!
 * Programatically add the following
 */
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*! @name @brightcove/player-loader @version 1.8.0 @license Apache-2.0 */
/*! @name @brightcove/player-url @version 1.2.0 @license Apache-2.0 */
/*! @name @videojs/http-streaming @version 2.16.2 @license Apache-2.0 */
/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */
/*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 */
/*! @name mpd-parser @version 0.22.1 @license Apache-2.0 */
/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */
/*! @name videojs-playlist @version 5.0.0 @license Apache-2.0 */
/**
 * @license
 * Video.js 7.21.3 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */
/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */
/**
 * shortdash - https://github.com/bibig/node-shorthash
 *
 * @license
 *
 * (The MIT License)
 *
 * Copyright (c) 2013 Bibig <bibig@me.com>
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
